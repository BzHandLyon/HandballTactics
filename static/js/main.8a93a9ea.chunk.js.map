{"version":3,"sources":["pitch/Ball.js","pitch/Player.js","pitch/Box.js","pitch/Square.js","pitch/Ellipse.js","pitch/Point.js","pitch/Path.js","pitch/Line.js","pitch/Text.js","pitch/PitchFutsal.js","pitch/DrawMode.js","editors/PlayerEdit.js","editors/BallEdit.js","editors/DragHandle.js","editors/RotateHandle.js","editors/EditBox.js","editors/SquareEdit.js","editors/EllipseEdit.js","editors/LineEdit.js","editors/TextEdit.js","editors/PlayerDialog.js","editors/PitchEdit.js","ui/DrawMenu.js","ui/FullscreenToggle.js","ui/AppTools.js","ui/ConfirmDialog.js","App.js","serviceWorker.js","index.js","editors/SvgToImg.js"],"names":["Ball","id","color","x","y","xDefault","yDefault","this","Player","no","name","rotation","noDefault","Box","width","height","Square","x1","y1","dashed","isEdit","x2","y2","proportional","szy","corner","deltaX","deltaY","posX","posY","snap","vx","cx","vy","cy","angle","Math","atan2","PI","floor","Ellipse","rx","ry","Point","p","Path","p1","p2","c1","c2","arrowStart","arrowEnd","Line","equalTo","lx","ly","pid","move","computeControlPoints","paths","K","n","length","a","b","c","r","i","m","Text","size","text","isTextEdit","bx","by","bwidth","bheight","PitchFutsal","players","balls","squareID","squares","ellipseID","ellipses","lineID","lines","textID","texts","_overlay","isModified","onModified","noPlayers","noPlayerColors","playerSize","noBalls","noBallColors","ballSize","_initPlayers","_initBalls","groupSize","number","player","toString","push","ball","cp","overlay","map","_modified","startsWith","find","isPlaced","remove","reset","isDashed","l","resize","edit","filter","empty","el","e","rotate","sq","s","tx","t","lineEditEnd","squareEditEnd","ellipsesEditEnd","value","DrawMode","_mode","_lineArrowStart","_lineArrowEnd","_lineDashed","_color","_textSize","_pitchOverlay","dm","mode","lineArrowStart","lineArrowEnd","lineDashed","textSize","pitchOverlay","PlayerEdit","className","props","transform","textAnchor","data-ref","dominantBaseline","Component","defaultProps","BallEdit","xmlns","viewBox","d","ballImage","DragHandle","half","position","RotateHandle","box","Fragment","EditBox","showResize","tl","tr","bl","br","boxClass","showBox","renderHandles","SquareEdit","square","editBox","EllipseEdit","ellipse","LineEdit","key","markerStart","markerEnd","line","allPaths","index","renderPath","editHandles","TextEdit","_selectionStart","_selectionEnd","_boxPadding","_editRef","React","createRef","_textRef","_cursorRef","_boxRef","editStart","bind","editChange","editKeyUp","editEnd","prevProps","prevState","current","focus","firstChild","removeChild","ln","tspan","document","createElementNS","setAttribute","textContent","appendChild","cln","bBox","removeText","txt","addTextLine","cr","getExtentOfChar","drawCursor","bb","getBBox","drawTextBoundingBox","error","console","log","selectionStart","selectionEnd","editShowCursor","onEditDone","trim","ref","strokeWidth","onFocus","onInput","onKeyUp","onBlur","split","dy","xmlSpace","renderLines","editor","PlayerDialog","state","open","_refName","_refNumber","openDialog","close","save","setState","Number","parseInt","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","TextField","inputRef","margin","defaultValue","label","type","fullWidth","autoFocus","DialogActions","Button","onClick","DragObject","PitchEdit","_bgRef","_playerDialogRef","_orgWidth","viewBoxRight","viewBoxLeft","_orgHeight","viewBoxBottom","viewBoxTop","_pitch","pitch","_dragNode","_dragObjectType","_mouseX","_mouseY","hContextMenu","hMouseDown","hMouseUp","hMouseMove","textEditDone","playerEditDone","getBoundingClientRect","X","Y","scale","getScale","clientX","left","clientY","top","playerMove","ballMove","squareEdit","ellipseEdit","textMove","squareRotate","ellipseRotate","textRotate","lineEdit","button","target","classList","contains","getAttribute","replace","resetMouseDrag","editNode","editPlayer","playerEditStart","playerDrag","ballDrag","editTopLeft","editTopRight","editBottomLeft","editBottomRight","editMove","editRotate","editLinePoint","drawMode","playerEditStarted","squareEditStarted","preventDefault","squareEditStart","ellipseEditStarted","ellipseEditStart","lineEditStarted","lineEditStart","textEditStarted","textEditStart","pos","getRealPosition","lineCreate","lineAdd","squareCreate","squareAdd","ellipseCreate","ellipseAdd","textCreate","textAdd","isDragStarted","isShift","getModifierState","lineCleanup","squareCleanup","ellipseCleanup","objectDrag","endAllEdits","lineResize","squareResize","ellipseResize","svgText","children","outerHTML","pl","o","overlaySize","fill","playersShow","renderPlayers","ballsShow","renderBalls","squaresShow","renderSquares","ellipsesShow","renderEllipses","linesShow","textsShow","renderTexts","pitchOverlayShow","renderPitchOverlay","pitchClasses","classes","offset","pitchLeft","pitchTop","pitchTransform","playersTransform","ballsTransform","onContextMenu","onMouseDown","onMouseUp","onMouseMove","stroke","patternUnits","markerWidth","markerHeight","refX","refY","orient","markerUnits","fillOpacity","strokeDasharray","fontSize","withStyles","theme","paddingTop","mixins","toolbar","minHeight","withTheme","DrawMenu","lineArrows","linePattern","pitchOverlays","lineArrowsToggle","lineArrowEndToggle","lineArrowStartToggle","linePatternToggle","lineDashedOn","lineDashedOff","pitchOverlaysToggle","pitchOverlayOnChange","currentTarget","dataset","pitchOverlayOptions","FormControlLabel","control","Radio","event","arrowsIcon","lineArrowsIcon","patternIcon","linePatternIcon","overlaySelect","pitchOverlaysRender","anchorEl","keepMounted","MenuItem","data-value","ListItemIcon","ListItemText","primary","Divider","Collapse","in","timeout","unmountOnExit","RadioGroup","onChange","List","component","disablePadding","ListItemSecondaryAction","Switch","edge","checked","FullscreenToggle","fullScreen","toggleFullScreen","toFullScreen","elem","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","isFullScreen","domFullScreenToggle","fsIcon","fsIconGet","fsLabel","Tooltip","title","IconButton","aria-label","AppTools","drawerOpen","toggleDrawer","_refDrawMenu","_refOpenDrawMenu","drawingModeIcon","drawMenuAnchorEl","drawMenuOpen","createNewScheme","createNewAnimation","isOpen","setDrawer","AppBar","Toolbar","variant","Typography","grow","saveImage","Drawer","anchor","ListItem","flexGrow","ConfirmDialog","context","okCallback","Show","handleOk","handleClose","fnCallback","DialogContentText","App","appTheme","createMuiTheme","refAppTools","refPitchEdit","refSvgToImg","refConfirmDialog","SaveImage","CreateNewScheme","CreateNewAnimation","PitchReset","OnPitchModified","OnDrawModeModified","DefaultPitch","initDefault","newPitch","newDrawMode","svg","getSVG","toImg","ThemeProvider","SvgToImg","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","CssBaseline","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message","_refRenderer","orgWidth","orgHeight","imgWidth","imgHeight","canvas","createElement","ctx","getContext","img","addEventListener","drawImage","toBlob","blob","FileSaver","saveAs","innerHTML","encodedString","Buffer","src","style","display"],"mappings":"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","file":"static/js/main.8a93a9ea.chunk.js","sourcesContent":["class Ball {\n\tconstructor(id=\"\", color=0, x=0, y=0, xDefault=0, yDefault=0){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.xDefault = xDefault;\n\t\tthis.yDefault = yDefault;\n\t}\n\n\treset() {\n\t\tthis.x = this.xDefault;\n\t\tthis.y = this.yDefault;\n\t}\n}\n\nexport default Ball;\n","class Player {\n\tconstructor(id=\"\", no=\"0\", name=\"\", color=0, x=0, y=0, rotation=0, xDefault=0, yDefault=0, noDefault=\"0\"){\n\t\tthis.id = id;\n\t\tthis.no = no;\n\t\tthis.name = name;\n\t\tthis.color = color;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.rotation = rotation;\n\t\tthis.xDefault = xDefault;\n\t\tthis.yDefault = yDefault;\n\t\tthis.noDefault = noDefault;\n\t}\t\n\n\treset() {\n\t\tthis.x = this.xDefault;\n\t\tthis.y = this.yDefault;\n\t\tthis.rotation = 0;\n\t\tthis.name = \"\";\n\t\tthis.no = this.noDefault;\n\t}\n\n\tget isPlaced() {\n\t\treturn this.x !== this.xDefault || this.y !== this.yDefault;\n\t}\n}\n\nexport default Player;\n","class Box {\n\tconstructor(id=\"\", x=0, y=0, width=0, height=0){\n\t\tthis.id = id;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n}\n\nexport default Box;\n","import Box from './Box';\n\nclass Square {\n\tconstructor(id=\"\", color=0, x1=0, y1=0, width=0, height=0, rotation=0, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x1 + width;\n\t\tthis.y2 = y1 + height;\n\t\tthis.rotation = rotation;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.width,\n\t\t\tthis.height\n\t\t);\n\t}\n\n\tget x() {\n\t\treturn this.x1 < this.x2 ? this.x1 : this.x2;\n\t}\n\n\tget width() {\n\t\treturn this.x1 < this.x2 ? this.x2 - this.x1 : this.x1 - this.x2;\n\t}\n\n\tget y() {\n\t\treturn this.y1 < this.y2 ? this.y1 : this.y2;\n\t}\n\n\tget height() {\n\t\treturn this.y1 < this.y2 ? this.y2 - this.y1 : this.y1 - this.y2;\n\t}\n\n\tget cx() {\n\t\treturn this.x + this.width / 2;\n\t}\n\n\tget cy() {\n\t\treturn this.y + this.height / 2;\n\t}\n\n\tresize(x2, y2, proportional) {\n\t\tthis.x2 = x2;\n\t\tif (!proportional) {\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tlet szy = this.width * (this.y1 < y2 ? 1 : -1);\n\t\t\tthis.y2 = this.y1 + szy;\n\t\t}\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.cx;\n\t\tlet vy = posY - this.cy;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Square;\n","import Box from './Box';\n\nclass Ellipse {\n\tconstructor(id=\"\", color=0, x1=0, y1=0, rx=0, ry=0, rotation=0, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x1 + rx * 2;\n\t\tthis.y2 = y1 + ry * 2;\n\t\tthis.rotation = rotation;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tget cx() {\n\t\treturn (this.x1 < this.x2 ? this.x1 : this.x2) + this.rx;\n\t}\n\n\tget cy() {\n\t\treturn (this.y1 < this.y2 ? this.y1 : this.y2) + this.ry;\n\t}\n\n\tget rx() {\n\t\treturn (this.x1 < this.x2 ? this.x2 - this.x1 : this.x1 - this.x2) / 2;\n\t}\n\n\tget ry() {\n\t\treturn (this.y1 < this.y2 ? this.y2 - this.y1 : this.y1 - this.y2) / 2;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.cx - this.rx,\n\t\t\tthis.cy - this.ry,\n\t\t\tthis.rx * 2,\n\t\t\tthis.ry * 2\n\t\t);\n\t}\n\n\tresize(x2, y2, proportional) {\n\t\tthis.x2 = x2;\n\t\tif (!proportional) {\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tlet szy = this.rx * (this.y1 < y2 ? 2 : -2);\n\t\t\tthis.y2 = this.y1 + szy;\n\t\t}\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.cx;\n\t\tlet vy = posY - this.cy;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Ellipse;\n","class Point {\n\tconstructor(x=0, y=0){\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tequalTo(p) {\n\t\treturn p.x === this.x && p.y === this.y\n\t}\n\n\tmove(deltaX, deltaY) {\n\t\tthis.x += deltaX;\n\t\tthis.y += deltaY;\n\t}\n}\n\nexport default Point;\n","import Point from \"./Point\";\n\nclass Path {\n\tconstructor(id=\"\", p1=new Point(0,0), p2=new Point(0,0), c1=new Point(0,0), c2=new Point(0,0), arrowStart=false, arrowEnd=false){\n\t\tthis.id = id;\n\t\tthis.p1 = p1;\n\t\tthis.p2 = p2;\n\t\tthis.c1 = c1;\n\t\tthis.c2 = c2;\n\t\tthis.arrowStart = arrowStart;\n\t\tthis.arrowEnd = arrowEnd;\n\t}\n}\n\nexport default Path;\n","import Point from \"./Point\";\nimport Path from \"./Path\";\n\nclass Line {\n\t// For line spline with control points see https://www.particleincell.com/2012/bezier-splines/\n\t// Line iz created as straight line with 2 spline segments\n\tconstructor(id=\"\", color=0, p1=new Point(0,0), p2=new Point(0,0), c1=new Point(0,0), c2=new Point(0,0), arrowStart=false, arrowEnd=false, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.p1 = p1;\n\t\tthis.p2 = p2;\n\t\tthis.c1 = c1;\n\t\tthis.c2 = c2;\n\t\tthis.arrowStart = arrowStart;\n\t\tthis.arrowEnd = arrowEnd;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tempty() {\n\t\treturn this.p1.equalTo(this.p2) \n\t\t\t&& this.p1.equalTo(this.c1)\n\t\t\t&& this.p1.equalTo(this.c2);\n\t}\n\n\tresize(x2,y2) {\n\t\tthis.p2= new Point(x2,y2);\n\t\tlet lx = this.p2.x - this.p1.x;\n\t\tlet ly = this.p2.y - this.p1.y;\n\t\tthis.c1 = new Point(\n\t\t\tthis.p1.x + lx / 3,\n\t\t\tthis.p1.y + ly / 3,\n\t\t); \n\t\tthis.c2 = new Point(\n\t\t\tthis.p1.x + lx / 3 * 2,\n\t\t\tthis.p1.y + ly / 3 * 2,\n\t\t); \n\t}\n\n\tedit(pid, deltaX, deltaY) {\n\t\tswitch (pid) {\n\t\t\tcase \"p1\":\n\t\t\t\tthis.p1.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"c1\":\n\t\t\t\tthis.c1.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"c2\":\n\t\t\t\tthis.c2.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"p2\":\n\t\t\t\tthis.p2.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaths() {\n\t\tlet cx = this.computeControlPoints([this.p1.x, this.c1.x, this.c2.x, this.p2.x]);\n\t\tlet cy = this.computeControlPoints([this.p1.y, this.c1.y, this.c2.y, this.p2.y]);\n\t\tlet paths = [];\n\t\tpaths[0] = new Path(\n\t\t\tthis.id, this.p1, this.c1,\n\t\t\tnew Point(cx.p1[0], cy.p1[0]),\n\t\t\tnew Point(cx.p2[0], cy.p2[0]),\n\t\t\tthis.arrowStart, false\n\t\t);\n\t\tpaths[1] = new Path(\n\t\t\tthis.id, this.c1, this.c2,\n\t\t\tnew Point(cx.p1[1], cy.p1[1]),\n\t\t\tnew Point(cx.p2[1], cy.p2[1]),\n\t\t\tfalse, false\n\t\t);\n\t\tpaths[2] = new Path(\n\t\t\tthis.id, this.c2, this.p2,\n\t\t\tnew Point(cx.p1[2], cy.p1[2]),\n\t\t\tnew Point(cx.p2[2], cy.p2[2]),\n\t\t\tfalse, this.arrowEnd\n\t\t);\n\t\treturn paths;\n\t}\n\n\t// computes control points given knots K, this is the brain of the operation\n\tcomputeControlPoints(K) {\n\t\tlet p1 = [];\n\t\tlet p2 = [];\n\t\tlet n = K.length-1;\n\t\t\n\t\t// rhs vector\n\t\tlet a = [];\n\t\tlet b = [];\n\t\tlet c = [];\n\t\tlet r = [];\n\t\t\n\t\t// left most segment\n\t\ta[0]=0;\n\t\tb[0]=2;\n\t\tc[0]=1;\n\t\tr[0] = K[0] + 2*K[1];\n\t\t\n\t\t// internal segments\n\t\tfor (let i = 1; i < n - 1; i++) {\n\t\t\ta[i]=1;\n\t\t\tb[i]=4;\n\t\t\tc[i]=1;\n\t\t\tr[i] = 4 * K[i] + 2 * K[i+1];\n\t\t}\n\n\t\t// right segment\n\t\ta[n-1]=2;\n\t\tb[n-1]=7;\n\t\tc[n-1]=0;\n\t\tr[n-1] = 8*K[n-1] + K[n];\n\t\t\n\t\t// solves Ax=b with the Thomas algorithm (from Wikipedia)\n\t\tfor (let i = 1; i < n; i++) {\n\t\t\tlet m = a[i] / b[i - 1];\n\t\t\tb[i] = b[i] - m * c[i - 1];\n\t\t\tr[i] = r[i] - m * r[i - 1];\n\t\t}\n\t\n\t\tp1[n-1] = r[n-1] / b[n-1];\n\t\tfor (let i = n - 2; i >= 0; --i) {\n\t\t\tp1[i] = (r[i] - c[i] * p1[i+1]) / b[i];\n\t\t}\n\t\t\t\n\t\t// we have p1, now compute p2\n\t\tfor (let i = 0; i < n-1; i++) {\n\t\t\tp2[i] = 2 * K[i+1] - p1[i+1];\n\t\t}\n\t\tp2[n-1] = 0.5 * (K[n]+p1[n-1]);\n\t\t\n\t\treturn { p1:p1, p2:p2 };\n\t}\n}\n\nexport default Line;\n","import Box from './Box';\n\nclass Text {\n\tconstructor(id=\"\", color=0, size=0, text=\"\", x=0, y=0, rotation=0, isEdit=false, isTextEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.size = size;\n\t\tthis.text = text;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.rotation = rotation;\n\t\tthis.bx = x;\t\t// bounding box X\n\t\tthis.by = y;\t\t// bounding box Y\n\t\tthis.bwidth = 0;\t// bounding box Width\n\t\tthis.bheight = 0;\t// bounding box Height\n\t\tthis.isEdit = isEdit;\n\t\tthis.isTextEdit = isTextEdit;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.bx,\n\t\t\tthis.by,\n\t\t\tthis.bwidth,\n\t\t\tthis.bheight\n\t\t);\n\t}\n\n\tmove(deltaX, deltaY) {\n\t\tthis.x += deltaX;\n\t\tthis.y += deltaY;\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - (this.x + this.bwidth / 2);\n\t\tlet vy = posY - (this.y + this.bheight / 2);\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Text;\n","import Ball from \"./Ball\";\nimport Player from \"./Player\";\nimport Square from \"./Square\";\nimport Ellipse from \"./Ellipse\";\nimport Line from \"./Line\";\nimport Point from \"./Point\";\nimport Text from \"./Text\";\n\nclass PitchFutsal {\n\n\tconstructor() {\n\t\tthis.players = [];\n\t\tthis.balls = [];\n\n\t\tthis.squareID = 0;\n\t\tthis.squares = [];\n\t\tthis.ellipseID = 0;\n\t\tthis.ellipses = [];\n\t\tthis.lineID = 0;\n\t\tthis.lines = [];\n\t\tthis.textID = 0;\n\t\tthis.texts = [];\n\n\t\tthis._overlay = \"none\";\n\n\t\tthis.isModified = false;\n\t\tthis.onModified = null;\n\t}\n\n\tinitDefault(noPlayers, noPlayerColors, playerSize, noBalls, noBallColors, ballSize) {\n\t\tthis._initPlayers(noPlayers, noPlayerColors, playerSize);\n\t\tthis._initBalls(noBalls, noBallColors, ballSize);\n\t}\n\n\t_initPlayers(noPlayers, noPlayerColors, playerSize) {\n\t\tlet groupSize = Math.floor(noPlayers / noPlayerColors);\n\t\tfor (var i = 0; i < noPlayers; i++) {\n\t\t\tlet color = Math.floor(i / groupSize);\n\t\t\tlet number = groupSize - (i % groupSize);\n\t\t\tlet player = new Player(\n\t\t\t\t\"pl\"+i.toString(), number, \"\", color,\n\t\t\t\tcolor * playerSize, 0,\n\t\t\t\t0,\n\t\t\t\tcolor * playerSize, 0,\n\t\t\t\tnumber\n\t\t\t);\n\t\t\tthis.players.push(player);\n\t\t}\n\t}\n\n\t_initBalls(noBalls, noBallColors, ballSize) {\n\t\tlet groupSize = Math.floor(noBalls / noBallColors);\n\t\tfor (var i = 0; i < noBalls; i++) {\n\t\t\tlet color = Math.floor(i / groupSize);\n\t\t\tlet ball = new Ball(\n\t\t\t\t\"bl\"+i.toString(), color,\n\t\t\t\tcolor * ballSize,0,\n\t\t\t\tcolor * ballSize,0\n\t\t\t);\n\t\t\tthis.balls.push(ball);\n\t\t}\n\t}\n\n\t_modified() {\n\t\tlet cp = new PitchFutsal();\n\t\tcp.isModified = true;\n\t\tcp.players = this.players;\n\t\tcp.balls = this.balls;\n\t\tcp.squareID = this.squareID;\n\t\tcp.squares = this.squares;\n\t\tcp.ellipseID = this.ellipseID;\n\t\tcp.ellipses = this.ellipses;\n\t\tcp.lineID = this.lineID;\n\t\tcp.lines = this.lines;\n\t\tcp.textID = this.textID;\n\t\tcp.texts = this.texts;\n\t\tcp._overlay = this.overlay;\n\t\t// trigger event modified\n\t\tif (null !== this.onModified) {\n\t\t\tthis.onModified(cp);\n\t\t}\n\t}\n\n\tplayerMove(id, deltaX, deltaY) {\n\t\tthis.players = this.players.map(p => {\n\t\t\tif (id === p.id) {\n\t\t\t\tp.x += deltaX;\n\t\t\t\tp.y += deltaY;\n\t\t\t}\n\t\t\treturn p;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tplayerEditStart(id) {\n\t\tif (!id.startsWith(\"pl\")) {\n\t\t\treturn null;\n\t\t}\n\t\t// Edit player data\n\t\tconst p = this.players.find(p => id === p.id);\n\t\t// disable editing non placed players\n\t\tif (!p.isPlaced) {\n\t\t\treturn null;\n\t\t}\n\t\tconst editPlayer = {\n\t\t\tid: p.id,\n\t\t\tname: p.name,\n\t\t\tno: p.no\n\t\t}\n\t\treturn editPlayer;\n\t}\n\n\tplayerEditDone(player) {\n\t\tthis.players = this.players.map(p => {\n\t\t\tif (player.id !== p.id) {\n\t\t\t\treturn p;\n\t\t\t}\n\t\t\tif (player.remove) {\n\t\t\t\tp.reset();\n\t\t\t} else {\n\t\t\t\tp.name = player.name;\n\t\t\t\tp.no = player.no;\n\t\t\t}\n\t\t\treturn p;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\n\tballMove(id, deltaX, deltaY) {\n\t\tthis.balls = this.balls.map(b => {\n\t\t\tif (id === b.id) {\n\t\t\t\tb.x += deltaX;\n\t\t\t\tb.y += deltaY;\n\t\t\t}\n\t\t\treturn b;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\n\tlineCreate(x,y, color, arrowStart, arrowEnd, isDashed) {\n\t\tlet id = 'ln'+this.lineID.toString();\n\t\tthis.lineID += 1;\n\t\treturn new Line(\n\t\t\tid, color,\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tarrowStart,\n\t\t\tarrowEnd,\n\t\t\tisDashed\n\t\t);\n\t}\n\n\tlineAdd(l) {\n\t\tthis.lines = this.lines.map((lx) => lx);\n\t\tthis.lines.push(l);\n\t\tthis._modified();\n\t}\n\n\tlineResize(id, x2, y2) {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.resize(x2,y2);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tlineEdit(pid, id, deltaX, deltaY) {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.edit(pid, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\t// remove empty lines\n\tlineCleanup() {\n\t\tthis.lines = this.lines.filter(l => !l.empty());\n\t\tthis._modified();\n\t}\n\n\tlineEditStart(id) {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.isEdit = true;\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tlineEditEnd() {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tl.isEdit = false;\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\n\tellipseCreate(x, y, color, isDashed) {\n\t\tlet id = 'el'+this.ellipseID.toString();\n\t\tthis.ellipseID += 1;\n\t\treturn new Ellipse(\n\t\t\tid, color,\n\t\t\tx,y,0,0,0,\n\t\t\tisDashed\n\t\t);\n\t}\n\n\tellipseAdd(el) {\n\t\tthis.ellipses = this.ellipses.map((e) => e);\n\t\tthis.ellipses.push(el);\n\t\tthis._modified();\n\t}\n\n\tellipseResize(id, x2, y2, proportional) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.resize(x2, y2, proportional);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipseEdit(corner, id, deltaX, deltaY) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipseRotate(id, posX, posY, snap) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\t// remove empty ellipses\n\tellipseCleanup() {\n\t\tthis.ellipses = this.ellipses.filter(el => el.rx > 0 && el.ry > 0);\n\t\tthis._modified();\n\t}\n\n\tellipseEditStart(id) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.isEdit = true;\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipsesEditEnd() {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tel.isEdit = false;\n\t\t\treturn el;\n\t\t});\n\t}\n\n\n\tsquareCreate(x, y, color, isDashed) {\n\t\tlet id = 'sq'+this.squareID.toString();\n\t\tthis.squareID += 1;\n\t\treturn new Square(\n\t\t\tid, color,\n\t\t\tx,y,0,0,0,\n\t\t\tisDashed\n\t\t);\n\t}\n\n\tsquareAdd(sq) {\n\t\tthis.squares = this.squares.map((s) => s);\n\t\tthis.squares.push(sq);\n\t\tthis._modified();\n\t}\n\n\tsquareResize(id, x2, y2, proportional) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.resize(x2, y2, proportional);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tsquareEdit(corner, id, deltaX, deltaY) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t\treturn this.squares;\n\t}\n\n\tsquareRotate(id, posX, posY, snap) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\t// remove empty squares\n\tsquareCleanup() {\n\t\tthis.squares = this.squares.filter(sq => sq.width > 0 && sq.height > 0);\n\t\tthis._modified();\n\t}\n\n\tsquareEditStart(id) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.isEdit = true;\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tsquareEditEnd() {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tsq.isEdit = false;\n\t\t\treturn sq;\n\t\t});\n\t}\n\n\ttextCreate(x, y, color, size) {\n\t\tlet id = 'txt'+this.textID.toString();\n\t\tthis.textID += 1;\n\t\treturn new Text(\n\t\t\tid, color, size, \"\",\n\t\t\tx,y,0,\n\t\t\tfalse, true\n\t\t);\n\t}\n\n\ttextAdd(tx) {\n\t\tthis.texts = this.texts.map((t) => t);\n\t\tthis.texts.push(tx);\n\t\tthis._modified();\n\t}\n\n\ttextEditDone(id, text, bx, by, bwidth, bheight) {\n\t\tthis.texts = this.texts.map(t => {\n\t\t\tif (id === t.id) {\n\t\t\t\tt.isEdit = false;\n\t\t\t\tt.isTextEdit = false;\n\t\t\t\tt.text = text;\n\t\t\t\tt.bx = bx;\n\t\t\t\tt.by = by;\n\t\t\t\tt.bwidth = bwidth;\n\t\t\t\tt.bheight = bheight;\n\t\t\t}\n\t\t\treturn t;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\ttextEditStart(id) {\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.isEdit = true;\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\ttextMove(id, deltaX, deltaY) {\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.move(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\ttextRotate(id, posX, posY, snap) {\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tendAllEdits() {\n\t\tthis.lineEditEnd();\n\t\tthis.squareEditEnd();\n\t\tthis.ellipsesEditEnd();\n\t\t// TODO: Text end editing\n\t\tthis._modified();\n\t}\n\n\tget overlay() {\n\t\treturn this._overlay;\n\t}\n\n\tset overlay(value) {\n\t\tif (this._overlay === value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._overlay = value;\n\t\tthis._modified();\n\t}\n\n\toverlaySize() {\n\t\tswitch (this.overlay) {\n\t\t\tcase \"exercise\":\n\t\t\t\treturn {width:2800, height:2000};\n\t\t\tcase \"basketball\":\n\t\t\t\treturn {width:2800, height:1500}\n\t\t\tcase \"volleyball\":\n\t\t\t\treturn {width:1800, height:900}\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default PitchFutsal;","class DrawMode {\n\tconstructor() {\n\t\tthis._mode='select';\n\t\tthis._lineArrowStart = false;\n\t\tthis._lineArrowEnd = false;\n\t\tthis._lineDashed = false;\n\t\tthis._color = 0;\n\t\tthis._textSize = 0;\n\t\tthis._pitchOverlay = 'none';\n\t\tthis.onModified = null;\n\t}\n\n\t_modified() {\n\t\tlet dm = new DrawMode();\n\t\tdm._mode = this.mode;\n\t\tdm._lineArrowStart = this.lineArrowStart;\n\t\tdm._lineArrowEnd = this.lineArrowEnd;\n\t\tdm._lineDashed = this.lineDashed;\n\t\tdm._color = this.color;\n\t\tdm._textSize = this.textSize;\n\t\tdm._pitchOverlay = this.pitchOverlay;\n\t\t// trigger event modified\n\t\tif (null !== this.onModified) {\n\t\t\tthis.onModified(dm);\n\t\t}\n\t}\n\n\t// default modes\n\t// select\t- select / move\n\t// line\t\t- draw lines\n\t// square\t- draw square\n\t// ellipse\t- draw ellipse\n\t// text\t\t- draw text\n\tget modeOptions(){\n\t\treturn ['select','line','square','ellipse','text'];\n\t}\n\n\tget mode() {\n\t\treturn this._mode;\n\t}\n\n\tset mode(value) {\n\t\tthis._mode = value;\n\t\tthis._modified();\n\t}\n\n\tget lineArrowStart() {\n\t\treturn this._lineArrowStart;\n\t}\n\n\tset lineArrowStart(value) {\n\t\tthis._lineArrowStart = value;\n\t\tthis._modified();\n\t}\n\n\tget lineArrowEnd() {\n\t\treturn this._lineArrowEnd;\n\t}\n\n\tset lineArrowEnd(value) {\n\t\tthis._lineArrowEnd = value;\n\t\tthis._modified();\n\t}\n\n\tget lineDashed() {\n\t\treturn this._lineDashed;\n\t}\n\n\tset lineDashed(value) {\n\t\tthis._lineDashed = value;\n\t\tthis._modified();\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color(value) {\n\t\tthis._color = value;\n\t\tthis._modified();\n\t}\n\n\tget textSize() {\n\t\treturn this._textSize;\n\t}\n\n\tset textSize(value) {\n\t\tthis._textSize = value;\n\t\tthis._modified();\n\t}\n\n\t// default pitch overlay options\n\t// 28x20, exercises pitch\n\t// 28x15, basketball court\n\t// 18x9, volleyball court\n\tget pitchOverlayOptions(){\n\t\treturn ['none','exercise','basketball','volleyball'];\n\t}\n\n\tget pitchOverlay() {\n\t\treturn this._pitchOverlay;\n\t}\n\tset pitchOverlay(value) {\n\t\tthis._pitchOverlay = value;\n\t\tthis._modified();\n\t}\n}\n\nexport default DrawMode;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass PlayerEdit extends Component {\n\n\trender() {\n\t\tconst className = 'player pc' + this.props.color;\n\t\tconst transform = 'translate(' + this.props.x + ' ' + this.props.y + ')';\n\t\treturn (\n\t\t\t<g className={className} textAnchor=\"middle\" transform={transform}>\n\t\t\t\t<circle r=\"50\" cx=\"50\" cy=\"70\" className=\"draggable\" data-ref={this.props.id} />\n\t\t\t\t<text className=\"number\" x=\"50\" y=\"70\" dominantBaseline=\"central\">{this.props.no}</text>\n\t\t\t\t<text x=\"50\">{this.props.name}</text>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nPlayerEdit.defaultProps = {\n\tid:\"\",\n\tx:0,\n\ty:0,\n\tcolor:0,\n\tno: 0,\n\tname: \"\"\n}\n\nPlayerEdit.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\tcolor: PropTypes.number,\n\tno: PropTypes.number,\n\tname: PropTypes.string\n}\n\nexport default PlayerEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass BallEdit extends Component {\n\n\tballImage() {\n\t\treturn (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"60\" height=\"60\" viewBox=\"0 0 952 952\">\n\t\t\t\t<path d=\"M813 139A475 475 0 000 476a474 474 0 00476 476 474 474 0 00476-476 474 474 0 00-139-337zm-600-31l12-10a457 457 0 01370-60c-14 6-33 18-65 45a393 393 0 00-182 22c-31 11-55 23-71 33l-74-25c3 1 8-4 10-5zm433 119l-81 222-196 37-161-166c11-76 63-143 63-143s34-25 88-44a403 403 0 01174-20l113 114zM39 460c-5 32-6 66-3 100l-9-20a451 451 0 0136-252c-3 30-2 61 0 85-11 28-19 57-24 87zm40 173a418 418 0 018-239c33-28 77-44 101-52l158 164-16 179-155 52c-39-29-72-68-96-104zm470 260c-34 22-121 28-157 29a451 451 0 01-200-92c0-1-4-49-4-66l156-52 181 78 25 103h-1zm300-158c-27 38-59 75-98 102-36 25-85 34-128 41-3 1-44 8-45 6l-25-103 128-132 168-15 8 89-8 12zm3-135l-2 3-168 16-90-158 82-223 115 7a366 366 0 01118 169 434 434 0 01-55 186zm60-250a396 396 0 00-108-131c-5-25-19-65-57-107l2 2 7 5a459 459 0 01156 230v1z\"/>\n\t\t\t</svg>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst className = 'ball bc' + this.props.color;\n\t\tconst transform = 'translate(' + this.props.x + ' ' + this.props.y + ')';\n\t\tconst ball = this.props.color === 4 ? this.ballImage() : null;\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<circle r=\"30\" cx=\"30\" cy=\"30\" className=\"draggable\" data-ref={this.props.id} />\n\t\t\t\t{ball}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nBallEdit.defaultProps = {\n\tid:\"\",\n\tx:0,\n\ty:0,\n\tcolor:0\n}\n\nBallEdit.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\tcolor: PropTypes.number\n}\n\nexport default BallEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Point from '../pitch/Point';\n\nclass DragHandle extends Component {\n\trender() {\n\t\tconst half = this.props.size / 2;\n\t\tconst x = this.props.position.x - half;\n\t\tconst y = this.props.position.y - half;\n\t\treturn (\n\t\t\t<rect className=\"editCorner draggable\" x={x} y={y} width={this.props.size} height={this.props.size} data-ref={this.props.id} />\n\t\t);\n\t}\n}\n\nDragHandle.defaultProps = {\n\tid: \"\",\n\tsize: 50,\n\tposition: null\n}\n\nDragHandle.propTypes = {\n\tid: PropTypes.string,\n\tsize: PropTypes.number,\n\tposition: PropTypes.instanceOf(Point)\n}\n\nexport default DragHandle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '../pitch/Box';\n\nclass RotateHandle extends Component {\n\trender() {\n\t\tconst box = this.props.box;\n\t\tconst half = box.width / 2;\n\t\tconst x1 = box.x + half;\n\t\tconst y1 = box.y;\n\t\tconst x2 = x1;\n\t\tconst y2 = y1 - 2 * this.props.size;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<line x1={x1} y1={y1} x2={x2} y2={y2} />\n\t\t\t\t<circle className=\"editCorner draggable\" cx={x2} cy={y2} r={this.props.size/2} data-ref={\"edit-rt-\" + box.id} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nRotateHandle.defaultProps = {\n\tsize: 50,\n\tbox: null\n}\n\nRotateHandle.propTypes = {\n\tsize: PropTypes.number,\n\tbox: PropTypes.instanceOf(Box),\n}\n\nexport default RotateHandle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '../pitch/Box';\nimport Point from '../pitch/Point';\nimport DragHandle from './DragHandle';\nimport RotateHandle from './RotateHandle';\n\nclass EditBox extends Component {\n\n\trenderHandles(box) {\n\t\tif (!this.props.showResize) {\n\t\t\treturn;\n\t\t}\n\t\tconst tl = new Point(box.x, box.y);\n\t\tconst tr = new Point(box.x + box.width, box.y);\n\t\tconst bl = new Point(box.x, box.y + box.height);\n\t\tconst br = new Point(box.x + box.width, box.y + box.height);\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<DragHandle id={\"edit-tl-\" + box.id} position={tl} />\n\t\t\t\t<DragHandle id={\"edit-tr-\" + box.id} position={tr} />\n\t\t\t\t<DragHandle id={\"edit-bl-\" + box.id} position={bl} />\n\t\t\t\t<DragHandle id={\"edit-br-\" + box.id} position={br} />\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\trender() {\n\t\tconst box = this.props.box;\n\t\tconst boxClass = this.props.showBox ? \"editBox draggable\" : \"editTransparent draggable\";\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect className={boxClass} x={box.x} y={box.y} width={box.width} height={box.height} data-ref={\"edit-mv-\" + box.id} />\n\t\t\t\t {this.renderHandles(box)}\n\t\t\t\t<RotateHandle box={box} />\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nEditBox.defaultProps = {\n\tbox: null,\n\tshowBox:false,\n\tshowResize:true\n}\n\nEditBox.propTypes = {\n\tbox: PropTypes.instanceOf(Box),\n\tshowBox: PropTypes.bool,\n\tshowResize: PropTypes.bool\n}\n\nexport default EditBox;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox'\nimport Square from '../pitch/Square';\n\nclass SquareEdit extends Component {\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={false} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst sq = this.props.square;\n\t\tconst className = (sq.dashed ? 'square dashed pc' : 'square pc') + sq.color;\n\t\tconst transform = 'rotate('+ sq.rotation + ',' + sq.cx + ',' + sq.cy + ')';\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<rect x={sq.x} y={sq.y} width={sq.width} height={sq.height} data-ref={sq.id} />\n\t\t\t\t{this.editBox(sq.isEdit, sq.box)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nSquareEdit.defaultProps = {\n\tsquare: null\n}\n\nSquareEdit.propTypes = {\n\tsquare: PropTypes.instanceOf(Square)\n}\n\nexport default SquareEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox'\nimport Ellipse from '../pitch/Ellipse';\n\nclass EllipseEdit extends Component {\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={true} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst el = this.props.ellipse;\n\t\tconst className = (el.dashed ? 'ellipse dashed pc' : 'ellipse pc') + el.color;\n\t\tconst transform = 'rotate('+ el.rotation + ',' + el.cx + ',' + el.cy + ')';\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<ellipse cx={el.cx} cy={el.cy} rx={el.rx} ry={el.ry} data-ref={el.id} />\n\t\t\t\t{this.editBox(el.isEdit, el.box)}\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nEllipseEdit.defaultProps = {\n\tellipse: null\n}\n\nEllipseEdit.propTypes = {\n\tellipse: PropTypes.instanceOf(Ellipse)\n}\n\nexport default EllipseEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Line from '../pitch/Line';\nimport DragHandle from './DragHandle';\n\nclass LineEdit extends Component {\n\n\teditHandles(l) {\n\t\tif (!l.isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<DragHandle id={\"edit-l1-\" + l.id} position={l.p1} />\n\t\t\t\t<DragHandle id={\"edit-l2-\" + l.id} position={l.c1} />\n\t\t\t\t<DragHandle id={\"edit-l3-\" + l.id} position={l.c2} />\n\t\t\t\t<DragHandle id={\"edit-l4-\" + l.id} position={l.p2} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\trenderPath(p, key) {\n\t\tconst d = \"M \" + p.p1.x + \" \" + p.p1.y + \" C \" + p.c1.x + \" \" + p.c1.y + \" \" + p.c2.x + \" \" + p.c2.y + \" \" + p.p2.x + \" \" + p.p2.y;\n\t\tconst markerStart = p.arrowStart ? \"url(#arrowStart)\" : \"\";\n\t\tconst markerEnd = p.arrowEnd ? \"url(#arrowEnd)\" : \"\";\n\t\treturn (\n\t\t\t<path key={key} d={d} data-ref={p.id} markerStart={markerStart} markerEnd={markerEnd} />\n\t\t);\n\t}\n\n\trender() {\n\t\tconst l = this.props.line;\n\t\tconst className = (l.dashed ? 'line dashed pc' : 'line pc') + l.color;\n\t\tconst allPaths = l.paths().map((p, index) => this.renderPath(p, index.toString()));\n\t\treturn (\n\t\t\t<g className={className}>\n\t\t\t\t{allPaths}\n\t\t\t\t{this.editHandles(l)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nLineEdit.defaultProps = {\n\tline: null\n}\n\nLineEdit.propTypes = {\n\tline: PropTypes.instanceOf(Line)\n}\n\nexport default LineEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Text from '../pitch/Text';\nimport EditBox from './EditBox'\n\nclass TextEdit extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._selectionStart = 0;\n\t\tthis._selectionEnd = 0;\n\t\tthis._boxPadding = 10;\t\t\t\t\t// padding for text bounding box\n\t\tthis._editRef = React.createRef();\t\t// reference to editor\n\t\tthis._textRef = React.createRef();\t\t// reference to text\n\t\tthis._cursorRef = React.createRef();\t// reference to cursor\n\t\tthis._boxRef = React.createRef();\t\t// reference to text box\n\t\tthis.editStart = this.editStart.bind(this);\n\t\tthis.editChange = this.editChange.bind(this);\n\t\tthis.editKeyUp = this.editKeyUp.bind(this);\n\t\tthis.editEnd = this.editEnd.bind(this);\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (this.props.text.isTextEdit) {\n\t\t\tthis._editRef.current.focus();\n\t\t}\n\t}\n\n\t// remove all previous text elements\n\tremoveText() {\n\t\twhile (this._textRef.current.firstChild) {\n\t\t\tthis._textRef.current.removeChild(this._textRef.current.firstChild);\n\t\t}\n\t}\n\n\t// add text element\n\taddTextLine(ln) {\n\t\tlet tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n\t\ttspan.setAttribute('x','0');\n\t\ttspan.setAttribute('dy','1.2em'); \n\t\ttspan.textContent = ln;\n\t\tthis._textRef.current.appendChild(tspan);\n\t}\n\n\t// draw cursor line for text\n\tdrawCursor(x, y, height) {\n\t\tconst cln = this._cursorRef.current;\n\t\tcln.setAttribute('x1', x);\n\t\tcln.setAttribute('y1', y);\n\t\tcln.setAttribute('x2', x);\n\t\tcln.setAttribute('y2', y + height);\n\t}\n\n\t// draw bounding box around text\n\tdrawTextBoundingBox(bBox) {\n\t\tconst x = bBox.x - this._boxPadding;\n\t\tconst y = bBox.y - this._boxPadding;\n\t\tconst width = bBox.width + this._boxPadding * 2;\n\t\tconst height = bBox.height + this._boxPadding * 2;\n\n\t\tconst box = this._boxRef.current;\n\t\tbox.setAttribute('x', x);\n\t\tbox.setAttribute('y', y);\n\t\tbox.setAttribute('width', width);\n\t\tbox.setAttribute('height', height);\n\t}\n\n\teditStart(e) {\n\t\tthis._editRef.current.value = this.props.text.text;\n\t}\n\n\teditChange(e) {\n\t\tthis.removeText();\n\t\tlet txt = this._editRef.current.value;\n\t\tlet ln = '';\n\t\tfor (let i = 0; i < txt.length; i++) {\n\t\t\tln += txt[i];\n\t\t\tif ('\\n' === txt[i]) {\n\t\t\t\tthis.addTextLine(ln);\n\t\t\t\tln = '';\n\t\t\t}\n\t\t}\n\t\tif (ln.length > 0) {\n\t\t\tthis.addTextLine(ln);\n\t\t}\n\t}\n\n\teditShowCursor() {\n\t\tif (0 === this._selectionEnd) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tconst cr = this._textRef.current.getExtentOfChar(this._selectionEnd-1);\n\t\t\tthis.drawCursor(cr.x + cr.width, cr.y, cr.height);\n\n\t\t\tconst bb = this._textRef.current.getBBox();\n\t\t\tthis.drawTextBoundingBox(bb);\n\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\t\t\t\n\t\t}\n\t}\n\n\teditKeyUp(e) {\n\t\tthis._selectionStart = this._editRef.current.selectionStart;\n\t\tthis._selectionEnd = this._editRef.current.selectionEnd;\n\t\tthis.editShowCursor();\n\t}\n\n\teditEnd(e) {\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n        let tx = this._editRef.current.value.trim();\n\t\tvar bb = this._textRef.current.getBBox();\n\t\tconsole.log(bb);\n        this.removeText();\n\t\tthis.props.onEditDone(\n\t\t\tthis.props.text.id, tx, \n\t\t\tbb.x, bb.y,\n\t\t\tbb.width, bb.height\n\t\t);\n\t}\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={true} showResize={false} />\n\t\t)\n\t}\n\n\teditor(tx) {\n\t\tif (!tx.isTextEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<line ref={this._cursorRef} strokeWidth=\"8\" />\n\t\t\t\t<rect ref={this._boxRef} className=\"editBox\" x=\"0\" y=\"0\" width={tx.width} height={tx.height} />\n\t\t\t\t<foreignObject>\n\t\t\t\t\t<textarea ref={this._editRef} onFocus={this.editStart} onInput={this.editChange} onKeyUp={this.editKeyUp} onBlur={this.editEnd}></textarea>\n\t\t\t\t</foreignObject>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\trenderLines(tx){\n\t\t// don't render lines in edit mode, created manually\n\t\tif (tx.isTextEdit) {\n\t\t\treturn null;\n\t\t}\n\t\tlet lines = tx.text.split(\"\\n\");\n\t\treturn lines.map((ln, index) => {\n\t\t\treturn (\n\t\t\t\t<tspan key={index} data-ref={tx.id} x=\"0\" dy=\"1.2em\">{ln}</tspan>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst tx = this.props.text;\n        const className = 'txt'+ tx.size + ' pc' + tx.color;\n        let transform = 'translate('+ tx.x + ',' + tx.y + ')';\n        if (0 !== tx.rotation) {\n\t\t\tlet cx = tx.bx + tx.bwidth / 2;\n\t\t\tlet cy = tx.by + tx.bheight / 2;\n            transform += ' rotate('+ tx.rotation + ',' + cx + ',' + cy + ')';\n        }\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<text ref={this._textRef} data-ref={tx.id} xmlSpace=\"preserve\">\n\t\t\t\t\t{this.renderLines(tx)}\n\t\t\t\t</text>\n\t\t\t\t{this.editor(tx)}\n\t\t\t\t{this.editBox(tx.isEdit, tx.box)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nTextEdit.defaultProps = {\n\ttext: null,\n\tonEditDone: null\n}\n\nTextEdit.propTypes = {\n\ttext: PropTypes.instanceOf(Text),\n\tonEditDone: PropTypes.func\n}\n\nexport default TextEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nclass PlayerDialog extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tplayer: {id:\"\", name:\"\", no: 0}\n\t\t};\n\n\t\t// input references\n\t\tthis._refName = React.createRef();\n\t\tthis._refNumber = React.createRef();\n\n\t\t// events\n\t\tthis.openDialog = this.openDialog.bind(this);\n\t\tthis.close = this.close.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.remove = this.remove.bind(this);\n\t}\n\t\n\topenDialog(player) {\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\tplayer: player\n\t\t});\n\t}\n\n\tclose() {\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\tsave() {\n\t\tthis.close();\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onEditDone({\n\t\t\tid: this.state.player.id,\n\t\t\tremove: false,\n\t\t\tname: this._refName.current.value,\n\t\t\tno: Number.parseInt(this._refNumber.current.value)\n\t\t})\n\t}\n\n\tremove() {\n\t\tthis.close();\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onEditDone({\n\t\t\tid: this.state.player.id,\n\t\t\tremove: true\n\t\t})\n\t}\n\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Dialog open={this.state.open} onClose={this.close} aria-labelledby=\"form-dialog-title\">\n\t\t\t\t\t<DialogTitle id=\"form-dialog-title\">Edit player</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<TextField inputRef={this._refNumber} margin=\"dense\" id=\"playerNumber\" defaultValue={this.state.player.no} label=\"Number\" type=\"number\" fullWidth autoFocus />\n\t\t\t\t\t\t<TextField inputRef={this._refName} margin=\"dense\" id=\"playerName\" defaultValue={this.state.player.name} label=\"Name\" type=\"text\" fullWidth />\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={this.remove} color=\"primary\">Remove</Button>\n\t\t\t\t\t\t<Button onClick={this.close} color=\"primary\">Cancel</Button>\n\t\t\t\t\t\t<Button onClick={this.save} color=\"primary\">Save</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nPlayerDialog.defaultProps = {\n\tonEditDone: null\n}\n\nPlayerDialog.propTypes = {\n\tonEditDone: PropTypes.func\n}\n\nexport default PlayerDialog;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PitchFutsal from '../pitch/PitchFutsal';\nimport DrawMode from '../pitch/DrawMode';\nimport { withStyles } from '@material-ui/core/styles';\nimport PlayerEdit from './PlayerEdit'\nimport BallEdit from './BallEdit'\nimport SquareEdit from './SquareEdit'\nimport EllipseEdit from './EllipseEdit'\nimport LineEdit from './LineEdit'\nimport TextEdit from './TextEdit'\nimport PlayerDialog from './PlayerDialog'\n\n// this is for offset from toolbar and default class\nconst styles = theme => ({\n\toffset: {\n\t\tpaddingTop: theme.mixins.toolbar.minHeight,\n\t}\n})\n\n// define object types for mouse dragging\nconst DragObject = {\n\tNone: -1,\n\tPlayer: 0,\n\tBall: 1,\n\tCone: 2,\n\tGoal: 3,\n\tEditTopLeft: 4,\n\tEditTopRight: 5,\n\tEditBottomLeft: 6,\n\tEditBottomRight: 7,\n\tEditMove: 8,\n\tEditRotate: 9,\n\tEditLineP1: 10,\n\tEditLineC1: 11,\n\tEditLineC2: 12,\n\tEditLineP2: 13\n}\n\nclass PitchEdit extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._editRef = React.createRef();\t// reference to editor container\n\t\tthis._bgRef = React.createRef();\t// background reference to get client size of pitch for editing\n\t\tthis._playerDialogRef = React.createRef(); // edit player dialog reference\n\t\tthis._orgWidth = this.props.viewBoxRight - this.props.viewBoxLeft;\n\t\tthis._orgHeight = this.props.viewBoxBottom - this.props.viewBoxTop;\n\t\tthis._pitch = this.props.pitch;\n\n\t\t// mouse drag init\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t\tthis._mouseX = 0;\n\t\tthis._mouseY = 0;\n\n\t\t// add events\n\t\tthis.hContextMenu = this.hContextMenu.bind(this);\n\t\tthis.hMouseDown = this.hMouseDown.bind(this);\n\t\tthis.hMouseUp = this.hMouseUp.bind(this);\n\t\tthis.hMouseMove = this.hMouseMove.bind(this);\n\t\tthis.textEditDone = this.textEditDone.bind(this);\n\t\t\n\t\t// callbacks\n\t\tthis.playerEditDone = this.playerEditDone.bind(this);\n\t}\n\n\tgetScale() {\n\t\tconst box = this._bgRef.current.getBoundingClientRect();\n\t\treturn {\n\t\t\tX: this._orgWidth / box.width,\n\t\t\tY: this._orgHeight / box.height\n\t\t}\n\t}\n\n\tgetRealPosition(e) {\n\t\tlet scale = this.getScale();\t// TODO: reconsider scale\n\t\tlet box = this._bgRef.current.getBoundingClientRect();\n \t\tlet x = e.clientX - box.left;\t//x position within the element.\n  \t\tlet y = e.clientY - box.top; \t//y position within the element.\n\t\tlet realPosition = {\n\t\t\tX: x * scale.X,\n\t\t\tY: y * scale.Y\n\t\t}\n\t\treturn realPosition;\n\t}\n\n\tresetMouseDrag(e) {\n\t\tthis._mouseX = e.clientX;\n\t\tthis._mouseY = e.clientY;\n\t}\n\n\tplayerDrag(id, deltaX, deltaY) {\n\t\tthis.props.pitch.playerMove(id, deltaX, deltaY);\n\t}\n\n\tballDrag(id, deltaX, deltaY) {\n\t\tthis.props.pitch.ballMove(id, deltaX, deltaY);\n\t}\n\n\teditTopLeft(id, deltaX, deltaY) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.props.pitch.squareEdit(\"tl\",id, deltaX, deltaY);\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.props.pitch.ellipseEdit(\"tl\",id, deltaX, deltaY);\n\t\t}\n\t}\n\t\n\teditTopRight(id, deltaX, deltaY) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.props.pitch.squareEdit(\"tr\",id, deltaX, deltaY);\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.props.pitch.ellipseEdit(\"tr\",id, deltaX, deltaY);\n\t\t}\n\t}\n\n\teditBottomLeft(id, deltaX, deltaY) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.props.pitch.squareEdit(\"bl\",id, deltaX, deltaY);\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.props.pitch.ellipseEdit(\"bl\",id, deltaX, deltaY);\n\t\t}\n\t}\n\n\teditBottomRight(id, deltaX, deltaY) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.props.pitch.squareEdit(\"br\",id, deltaX, deltaY);\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.props.pitch.ellipseEdit(\"br\",id, deltaX, deltaY);\n\t\t}\n\t}\n\n\teditMove(id, deltaX, deltaY) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.props.pitch.squareEdit(\"mv\",id, deltaX, deltaY);\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.props.pitch.ellipseEdit(\"mv\",id, deltaX, deltaY);\n\t\t}\n\t\tif (id.startsWith(\"txt\")) {\n\t\t\tthis.props.pitch.textMove(id, deltaX, deltaY);\n\t\t}\n\t}\n\n\teditRotate(id, posX, posY, snap) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.props.pitch.squareRotate(id, posX, posY, snap);\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.props.pitch.ellipseRotate(id, posX, posY, snap);\n\t\t}\n\t\tif (id.startsWith(\"txt\")) {\n\t\t\tthis.props.pitch.textRotate(id, posX, posY, snap);\n\t\t}\n\t}\n\n\teditLinePoint(pid, id, deltaX, deltaY) {\n\t\tthis.props.pitch.lineEdit(pid, id, deltaX, deltaY);\n\t}\n\n\tisDragStarted(e) {\n\t\tif (0 !== e.button) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!e.target.classList.contains('draggable')) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._dragNode = e.target.getAttribute(\"data-ref\");\n\t\tif (null === this._dragNode) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._dragObjectType = DragObject.None;\n\t\tif (this._dragNode.startsWith(\"pl\")) {\n\t\t\tthis._dragObjectType = DragObject.Player;\n\t\t}\n\t\tif (this._dragNode.startsWith(\"bl\")) {\n\t\t\tthis._dragObjectType = DragObject.Ball;\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-tl-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditTopLeft;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-tl-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-tr-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditTopRight;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-tr-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-bl-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditBottomLeft;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-bl-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-br-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditBottomRight;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-br-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-mv-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditMove;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-mv-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-rt-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditRotate;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-rt-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-l1-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditLineP1;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-l1-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-l2-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditLineC1;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-l2-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-l3-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditLineC2;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-l3-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-l4-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditLineP2;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-l4-\",\"\");\n\t\t}\n\t\tthis.resetMouseDrag(e);\n\t\treturn true;\n\t}\n\t\n\tplayerEditStarted(editNode) {\n\t\tif (!editNode.startsWith(\"pl\")) {\n\t\t\treturn false;\n\t\t}\n\t\tconst editPlayer = this.props.pitch.playerEditStart(editNode);\n\t\tif (null === editPlayer) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._playerDialogRef.current.openDialog(editPlayer);\n\t\treturn true;\n\t}\n\n\tsquareEditStarted(editNode) {\n\t\tif (!editNode.startsWith(\"sq\")) {\n\t\t\treturn false;\n\t\t}\n\t\tconsole.log(\"Square edit start\", editNode);\n\t\treturn true;\n\t}\n\n\tellipseEditStarted(editNode) {\n\t\tif (!editNode.startsWith(\"el\")) {\n\t\t\treturn false;\n\t\t}\n\t\tconsole.log(\"Ellipse edit start\", editNode);\n\t\treturn true;\n\t}\n\n\tlineEditStarted(editNode) {\n\t\tif (!editNode.startsWith(\"ln\")) {\n\t\t\treturn false;\n\t\t}\n\t\tconsole.log(\"Line edit start\", editNode);\n\t\treturn true;\n\t}\n\n\ttextEditStarted(editNode) {\n\t\tif (!editNode.startsWith(\"txt\")) {\n\t\t\treturn false;\n\t\t}\n\t\tconsole.log(\"Text edit start\", editNode);\n\t\treturn true;\n\t}\n\n\t// player edit dialog callback\n\tplayerEditDone(player) {\n\t\tthis.props.pitch.playerEditDone(player);\n\t}\n\n\tobjectDrag(posX, posY, deltaX, deltaY, snap) {\n\t\tswitch (this._dragObjectType) {\n\t\t\tcase DragObject.Player:\n\t\t\t\tthis.playerDrag(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.Ball:\n\t\t\t\tthis.ballDrag(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopLeft:\n\t\t\t\tthis.editTopLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopRight:\n\t\t\t\tthis.editTopRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomLeft:\n\t\t\t\tthis.editBottomLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomRight:\n\t\t\t\tthis.editBottomRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditMove:\n\t\t\t\tthis.editMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditRotate:\n\t\t\t\tthis.editRotate(this._dragNode, posX, posY, snap);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP1:\n\t\t\t\tthis.editLinePoint(\"p1\", this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC1:\n\t\t\t\tthis.editLinePoint(\"c1\", this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC2:\n\t\t\t\tthis.editLinePoint(\"c2\", this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP2:\n\t\t\t\tthis.editLinePoint(\"p2\", this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Invalid drag object type\", this._dragObjectType, this._dragNode);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thContextMenu(e) {\n\t\tif (this.props.drawMode.mode !== 'select') {\n\t\t\treturn;\n\t\t}\n\t\tlet editNode = e.target.getAttribute(\"data-ref\");\n\t\tif (null === editNode) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.playerEditStarted(editNode)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (this.squareEditStarted(editNode)) {\n\t\t\te.preventDefault();\n\t\t\tthis.props.pitch.squareEditStart(editNode);\n\t\t\treturn;\n\t\t}\n\t\tif (this.ellipseEditStarted(editNode)) {\n\t\t\te.preventDefault();\n\t\t\tthis.props.pitch.ellipseEditStart(editNode);\n\t\t\treturn;\n\t\t}\n\t\tif (this.lineEditStarted(editNode)) {\n\t\t\te.preventDefault();\n\t\t\tthis.props.pitch.lineEditStart(editNode);\n\t\t\treturn;\n\t\t}\n\t\tif (this.textEditStarted(editNode)) {\n\t\t\te.preventDefault();\n\t\t\tthis.props.pitch.textEditStart(editNode);\n\t\t\treturn;\n\t\t}\n\t}\n\n\thMouseDown(e) {\n\t\tlet pos = this.getRealPosition(e);\n\t\tconst dm = this.props.drawMode;\n\t\tswitch (dm.mode) {\n\t\t\tcase 'line':\n\t\t\t\te.preventDefault();\n\t\t\t\tlet l = this.props.pitch.lineCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineArrowStart, dm.lineArrowEnd, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tthis._dragNode = l.id;\n\t\t\t\tthis.props.pitch.lineAdd(l);\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\te.preventDefault();\n\t\t\t\tlet sq = this.props.pitch.squareCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tthis._dragNode = sq.id;\n\t\t\t\tthis.props.pitch.squareAdd(sq);\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\te.preventDefault();\n\t\t\t\tlet el = this.props.pitch.ellipseCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tthis._dragNode = el.id;\n\t\t\t\tthis.props.pitch.ellipseAdd(el);\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tlet tx = this.props.pitch.textCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.textSize\n\t\t\t\t);\n\t\t\t\tthis._dragNode = tx.id;\n\t\t\t\tthis.props.pitch.textAdd(tx);\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tif (this.isDragStarted(e)) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thMouseUp(e) {\n\t\te.preventDefault();\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tthis.props.pitch.lineCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tthis.props.pitch.squareCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tthis.props.pitch.ellipseCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tlet scale = this.getScale();\n\t\t\t\tlet deltaX = (e.clientX - this._mouseX) * scale.X;\n\t\t\t\tlet deltaY = (e.clientY - this._mouseY) * scale.Y;\n\t\t\t\tthis.resetMouseDrag(e);\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, deltaX, deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t\t// Reset editing\n\t\tif (0 === e.button && this._dragObjectType === DragObject.None) {\n\t\t\tthis.props.pitch.endAllEdits();\n\t\t}\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t}\n\n\thMouseMove(e) {\n\t\tif (null == this._dragNode) {\n\t\t\treturn;\n\t\t}\n\t\te.preventDefault();\n\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tthis.props.pitch.lineResize(this._dragNode, pos.X, pos.Y);\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tthis.props.pitch.squareResize(this._dragNode, pos.X, pos.Y, isShift);\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tthis.props.pitch.ellipseResize(this._dragNode, pos.X, pos.Y, isShift);\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tlet scale = this.getScale();\n\t\t\t\tlet deltaX = (e.clientX - this._mouseX) * scale.X;\n\t\t\t\tlet deltaY = (e.clientY - this._mouseY) * scale.Y;\n\t\t\t\tthis.resetMouseDrag(e);\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, deltaX, deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\ttextEditDone(id, text, bx, by, bwidth, bheight) {\n\t\tthis.props.pitch.textEditDone(id, text, bx, by, bwidth, bheight);\n\t}\n\n\t// return current SVG in editor\n\t// TODO: Cleanup unused players and balls\n\tgetSVG() {\n\t\treturn {\n\t\t\twidth: this._orgWidth,\n\t\t\theight: this._orgHeight,\n\t\t\tsvgText: this._editRef.current.children[0].outerHTML\n\t\t}\n\t}\n\n\trenderPlayers() {\n\t\treturn this.props.pitch.players.map((pl, index) => {\n\t\t\treturn (\n\t\t\t\t<PlayerEdit key={index.toString()} id={pl.id} x={pl.x} y={pl.y} no={pl.no} name={pl.name} color={pl.color} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderBalls(){\n\t\treturn this.props.pitch.balls.map((b, index) => {\n\t\t\treturn (\n\t\t\t\t<BallEdit key={index.toString()} id={b.id} x={b.x} y={b.y} color={b.color} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderSquares(){\n\t\treturn this.props.pitch.squares.map((s, index) => {\n\t\t\treturn (\n\t\t\t\t<SquareEdit key={index.toString()} square={s} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderEllipses(){\n\t\treturn this.props.pitch.ellipses.map((el, index) => {\n\t\t\treturn (\n\t\t\t\t<EllipseEdit key={index.toString()} ellipse={el} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderLines(){\n\t\treturn this.props.pitch.lines.map((l, index) => {\n\t\t\treturn (\n\t\t\t\t<LineEdit key={index.toString()} line={l} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderTexts(){\n\t\treturn this.props.pitch.texts.map((tx, index) => {\n\t\t\treturn (\n\t\t\t\t<TextEdit key={index.toString()} text={tx} onEditDone={this.textEditDone} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderPitchOverlay(){\n\t\tconst o = this.props.pitch.overlaySize();\n\t\tif (null === o) {\n\t\t\treturn null;\n\t\t}\n\t\tconst posX = (this._orgWidth - o.width) / 2;\n\t\tconst posY = (this._orgHeight - o.height) / 2;\n\t\tconst transform = 'translate(' + posX + ' ' + posY + ')';\n\t\treturn (<rect width={o.width} height={o.height} transform={transform} fill=\"none\" />);\n\t}\n\n\trender() {\n\t\tconst viewBox = this.props.viewBoxLeft.toString() + ' ' + this.props.viewBoxTop.toString() + ' ' + this.props.viewBoxRight.toString() + ' ' + this.props.viewBoxBottom.toString()\n\n\t\tconst playersShow = this.renderPlayers();\n\t\tconst ballsShow = this.renderBalls();\n\t\tconst squaresShow = this.renderSquares();\n\t\tconst ellipsesShow = this.renderEllipses();\n\t\tconst linesShow = this.renderLines();\n\t\tconst textsShow = this.renderTexts();\n\t\tconst pitchOverlayShow = this.renderPitchOverlay();\n\n\t\t// default class is full screen width and height with padding for menu height\n\t\tconst pitchClasses = \"pitch \" + this.props.classes.offset;\n\n\t\t// Calculate pitch position in viewBox\n\t\tconst pitchLeft = (this._orgWidth - 4000) / 2; // Goals are relative to pitch no need to take them in calc\n\t\tconst pitchTop = (this._orgHeight - 2000) / 2;\n\t\tconst pitchTransform = 'translate(' + pitchLeft + ' ' + pitchTop + ')';\n\n\t\t// calculate players position in viewbox\n\t\tconst playersLeft = pitchLeft;\n\t\tconst playersTop = pitchTop + 2000 + 50;\n\t\tconst playersTransform = 'translate(' + playersLeft + ' ' + playersTop + ')';\n\n\t\t// calculate balls position in viewBox\n\t\tconst ballsLeft = pitchLeft + 1050\n\t\tconst ballsTop = pitchTop + 2000 + 100;\n\t\tconst ballsTransform = 'translate(' + ballsLeft + ' ' + ballsTop + ')'; // \"translate(1200 2210)\"\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t<div ref={this._editRef} className={pitchClasses}>\n\t\t\t\t<svg xmlns='http://www.w3.org/2000/svg' viewBox={viewBox} onContextMenu={this.hContextMenu} onMouseDown={this.hMouseDown} onMouseUp={this.hMouseUp} onMouseMove={this.hMouseMove}>\n\t\t\t\t\t<style>\n\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t'.pc0 {\tfill: #8b2323; stroke: #8b2323; }',\n\t\t\t\t\t\t\t'.pc1 {\tfill: #e7e739; stroke: #e7e739; }',\n\t\t\t\t\t\t\t'.pc2 {\tfill: #912cee; stroke: #912cee; }',\n\t\t\t\t\t\t\t'.pc3 {\tfill: #04b804; stroke: #04b804; }',\n\t\t\t\t\t\t\t'.pc4 {\tfill: #1d4ba0; stroke: #1d4ba0; }',\n\t\t\t\t\t\t\t'.pc5 {\tfill: #ee2c2c; stroke: #ee2c2c; }',\n\t\t\t\t\t\t\t'.pc6 {\tfill: #ff7f50; stroke: #ff7f50; }',\n\t\t\t\t\t\t\t'.pc7 {\tfill: #56c6eb; stroke: #56c6eb; }',\n\t\t\t\t\t\t\t'.bc0 { fill: #ffa500; }',\n\t\t\t\t\t\t\t'.bc1 { fill: #cc3333; }',\n\t\t\t\t\t\t\t'.bc2 { fill: #222333; }',\n\t\t\t\t\t\t\t'.bc3 { fill: #0000ff; }',\n\t\t\t\t\t\t\t'.bc4 { fill: #ffffff; }',\n\t\t\t\t\t\t\t'.bc4 svg { fill: #000000; }',\n\t\t\t\t\t\t\t'#texts text { font-family: \"sans-serif\"; font-size: 10em; cursor: default; user-select: none; }',\n\t\t\t\t\t\t\t'.txt0 text { font-size: 1em; }',\n\t\t\t\t\t\t\t'.txt1 text { font-size: 1.5em; }',\n\t\t\t\t\t\t\t'.txt2 text { font-size: 2em; }',\n\t\t\t\t\t\t\t'.txt3 text { font-size: 2.5em; }',\n\t\t\t\t\t\t\t'.player { pointer-events: none; }',\n\t\t\t\t\t\t\t'.player text { fill: black; }',\n\t\t\t\t\t\t\t'.player text.number { fill: white; }',\n\t\t\t\t\t\t\t'.dashed { stroke-dasharray: 20; }',\n\t\t\t\t\t\t\t'.square { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t\t\t\t\t'.ellipse { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t\t\t\t\t'.line { stroke-width: 12; }',\n\t\t\t\t\t\t\t'.line path { fill: none; stroke-width: 12; }',\n\t\t\t\t\t\t\t'.draggable { cursor: move; pointer-events: all;}',\n\t\t\t\t\t\t\t'.editBox { fill: none; stroke-width: 8; stroke-opacity: 1; }',\n\t\t\t\t\t\t\t'.editTransparent { fill: none; stroke-width: 0; }',\n\t\t\t\t\t\t\t'.editCorner { fill: red; stroke-width: 0; stroke-opacity: 1; }'\n\t\t\t\t\t\t]}\n\t\t\t\t\t</style>\n\t\t\t\t\t<pattern id=\"goal-net\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" stroke=\"black\" patternUnits=\"userSpaceOnUse\">\n\t\t\t\t\t\t<line x1=\"0\" x2=\"20\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t\t<line x1=\"20\" x2=\"00\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t</pattern>\n\t\t\t\t\t<marker id=\"arrowEnd\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M0,0 L0,6 L9,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<marker id=\"arrowStart\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M9,0 L9,6 L0,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<g id=\"background\" ref={this._bgRef}>\n\t\t\t\t\t\t<rect width={this._orgWidth} height={this._orgHeight} fill=\"#b7b7b7\" fillOpacity=\"0.5\" />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitch\" transform={pitchTransform} fill=\"#0280c6\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t<rect width=\"4000\" height=\"2000\" />\n\t\t\t\t\t\t<line x1=\"2000\" x2=\"2000\" y1=\"0\" y2=\"2000\" />\n\t\t\t\t\t\t<circle r=\"300\" cx=\"2000\" cy=\"1000\" fill=\"none\" />\n\t\t\t\t\t\t<circle r=\"12\" cx=\"2000\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t<g id=\"corner_marks\">\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M25,0 a25,25 0 0,1 -25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M4000,25 a25,25 0 0,1 -25,-25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,1975 a25,25 0 0,1 25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3975,2000 a25,25 0 0,1 25,-25\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"substitition-zones\">\n\t\t\t\t\t\t\t<line x1=\"1000\" x2=\"1000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"1500\" x2=\"1500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"2500\" x2=\"2500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"3000\" x2=\"3000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left\">\n\t\t\t\t\t\t\t<line x1=\"500\" x2=\"500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"600\" x2=\"600\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"600\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,242 a600,600 0 0,1 600,600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M600,1158 a600,600 0 0,1 -600,600\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t\t<g id=\"goal-left\">\n\t\t\t\t\t\t\t\t<rect width=\"100\" height=\"300\" x=\"-100\" y=\"850\" fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" />\n\t\t\t\t\t\t\t\t<line x1=\"0\" x2=\"0\" y1=\"850\" y2=\"1150\" />\n\t\t\t\t\t\t\t\t<line x1=\"0\" x2=\"0\" y1=\"850\" y2=\"1150\" stroke=\"red\" strokeDasharray=\"20\" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"1000\" cy=\"1000\"/>\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right\">\n\t\t\t\t\t\t\t<line x1=\"3500\" x2=\"3500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"3400\" x2=\"3400\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3400\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,842 a600,600 0 0,1 600,-600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,1158 a600,600 0 0,0 600,600\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t\t<g id=\"goal-right\">\n\t\t\t\t\t\t\t\t<rect width=\"100\" height=\"300\" x=\"4000\" y=\"850\" fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" />\n\t\t\t\t\t\t\t\t<line x1=\"4000\" x2=\"4000\" y1=\"850\" y2=\"1150\" />\n\t\t\t\t\t\t\t\t<line x1=\"4000\" x2=\"4000\" y1=\"850\" y2=\"1150\" stroke=\"red\" strokeDasharray=\"20\" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3000\" cy=\"1000\" />\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitchOverlay\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t{pitchOverlayShow}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"ellipses\">{ellipsesShow}</g>\n\t\t\t\t\t<g id=\"squares\">{squaresShow}</g>\n\t\t\t\t\t<g id=\"players\" transform={playersTransform} fontSize=\"50\">\n\t\t\t\t\t\t{playersShow}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"balls\" transform={ballsTransform}>\n\t\t\t\t\t\t{ballsShow}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"lines\">{linesShow}</g>\n\t\t\t\t\t<g id=\"texts\">{textsShow}</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<PlayerDialog ref={this._playerDialogRef} onEditDone={this.playerEditDone} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nPitchEdit.defaultProps = {\n\tpitch: null,\n\tdrawMode: null,\n\tviewBoxLeft: 0,\n\tviewBoxTop: 0,\n\tviewBoxRight: 4500,\n\tviewBoxBottom: 2500\n}\n\nPitchEdit.propTypes = {\n\tpitch: PropTypes.instanceOf(PitchFutsal),\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\tviewBoxLeft: PropTypes.number,\n\tviewBoxTop: PropTypes.number,\n\tviewBoxRight: PropTypes.number,\n\tviewBoxBottom: PropTypes.number\n}\n\nexport default withStyles(styles, { withTheme: true })(PitchEdit);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Divider from '@material-ui/core/Divider';\nimport Collapse from '@material-ui/core/Collapse';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Switch from '@material-ui/core/Switch';\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { CursorDefault, VectorLine, ShapeSquarePlus, ShapeOvalPlus, ArrowLeft, ArrowRight, ArrowLeftRight, Minus, DotsHorizontal } from 'mdi-material-ui'\n\nclass DrawMenu extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tlineArrows: false,\n\t\t\tlinePattern: false,\n\t\t\tpitchOverlays: false\n\t\t}\n\t\tthis.open = this.open.bind(this);\n\t\tthis.close = this.close.bind(this);\n\n\t\tthis.lineArrowsToggle = this.lineArrowsToggle.bind(this);\n\t\tthis.lineArrowEndToggle = this.lineArrowEndToggle.bind(this);\n\t\tthis.lineArrowStartToggle = this.lineArrowStartToggle.bind(this);\n\n\t\tthis.linePatternToggle = this.linePatternToggle.bind(this);\n\t\tthis.lineDashedOn = this.lineDashedOn.bind(this);\n\t\tthis.lineDashedOff = this.lineDashedOff.bind(this);\n\n\t\tthis.pitchOverlaysToggle = this.pitchOverlaysToggle.bind(this); \n\t\tthis.pitchOverlayOnChange = this.pitchOverlayOnChange.bind(this);\n\t}\n\n\topen() {\n\t\tthis.setState({open:true});\n\t}\n\n\tclose(e) {\n\t\t// read from \"data-value\" attribute\n\t\tlet mode = e.currentTarget.dataset.value;\n\t\tif (mode) {\n\t\t\tthis.props.drawMode.mode = mode;\n\t\t}\n\t\t// close sub menus\n\t\tthis.setState({\n\t\t\topen:false,\n\t\t\tlineArrows: false,\n\t\t\tlinePattern: false,\n\t\t\tpitchOverlays: false\n\t\t});\n\t}\n\n\tlineArrowsToggle() {\n\t\tthis.setState({\n\t\t\tlineArrows: !this.state.lineArrows\n\t\t});\n\t}\n\n\tlineArrowStartToggle() {\n\t\tthis.props.drawMode.lineArrowStart = !this.props.drawMode.lineArrowStart\n\t}\n\n\tlineArrowEndToggle() {\n\t\tthis.props.drawMode.lineArrowEnd = !this.props.drawMode.lineArrowEnd\n\t}\n\n\tlineArrowsIcon() {\n\t\tconst dm = this.props.drawMode;\n\t\tif (dm.lineArrowStart && dm.lineArrowEnd) {\n\t\t\treturn (<ArrowLeftRight />);\n\t\t}\n\t\tif (!dm.lineArrowStart && dm.lineArrowEnd) {\n\t\t\treturn (<ArrowRight />);\n\t\t}\n\t\tif (dm.lineArrowStart && !dm.lineArrowEnd) {\n\t\t\treturn (<ArrowLeft />);\n\t\t}\n\t\treturn (<Minus />);\n\t}\n\n\tlinePatternToggle() {\n\t\tthis.setState({\n\t\t\tlinePattern: !this.state.linePattern\n\t\t});\n\t}\n\n\tlineDashedOn() {\n\t\tthis.props.drawMode.lineDashed = true;\n\t\tthis.setState({\n\t\t\tlinePattern: false\n\t\t});\n\t}\n\n\tlineDashedOff() {\n\t\tthis.props.drawMode.lineDashed = false;\n\t\tthis.setState({\n\t\t\tlinePattern: false\n\t\t});\n\t}\n\n\tlinePatternIcon() {\n\t\tif (this.props.drawMode.lineDashed) {\n\t\t\treturn (<DotsHorizontal />);\n\t\t}\n\t\treturn (<Minus />);\n\t}\n\n\tpitchOverlaysRender() {\n\t\treturn this.props.drawMode.pitchOverlayOptions.map((txt, index) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={index} control={<Radio />} label={txt} value={txt} />\n\t\t\t);\n\t\t});\n\t}\n\n\tpitchOverlaysToggle() {\n\t\tthis.setState({\n\t\t\tpitchOverlays: !this.state.pitchOverlays\n\t\t});\n\t}\n\n\tpitchOverlayOnChange(event) {\n\t\tthis.props.drawMode.pitchOverlay = event.target.value;\n\t\tthis.setState({\n\t\t\tpitchOverlays: false,\n\t\t\topen: false\n\t\t});\n\t}\n\n\trender() {\n\t\tconst arrowsIcon = this.lineArrowsIcon();\n\t\tconst patternIcon = this.linePatternIcon();\n\t\tconst overlaySelect = this.pitchOverlaysRender();\n\t\treturn (\n\t\t<Menu id=\"drawingMenu\" anchorEl={this.props.anchorEl} keepMounted open={this.state.open} onClose={this.close}>\n\t\t\t<MenuItem data-value=\"select\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<CursorDefault />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Select / Move\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem onClick={this.pitchOverlaysToggle}>\n\t\t\t\t<ListItemText primary=\"Pitch overlay\" />\n\t\t\t\t{this.state.pitchOverlays ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.pitchOverlays} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<RadioGroup name=\"radio-pitch-overlays\" value={this.props.drawMode.pitchOverlay} onChange={this.pitchOverlayOnChange}>\n\t\t\t\t\t{overlaySelect}\n\t\t\t\t</RadioGroup>\n\t\t\t</Collapse>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"line\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<VectorLine />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw line\" />\n\t\t\t</MenuItem>\n\t\t\t<MenuItem onClick={this.lineArrowsToggle}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t{arrowsIcon}\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Line arrows\" />\n\t\t\t\t{this.state.lineArrows ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.lineArrows} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<List component=\"div\" disablePadding>\n\t\t\t\t\t<MenuItem onClick={this.lineArrowEndToggle}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<ArrowRight />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"End\" />\n\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t<Switch edge=\"end\" onChange={this.lineArrowEndToggle} checked={this.props.drawMode.lineArrowEnd} />\n\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem onClick={this.lineArrowStartToggle}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<ArrowLeft />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Start\" />\n\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t<Switch edge=\"end\" onChange={this.lineArrowStartToggle} checked={this.props.drawMode.lineArrowStart} />\n\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</List>\n\t\t\t</Collapse>\n\t\t\t<MenuItem onClick={this.linePatternToggle}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t{patternIcon}\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Line pattern\" />\n\t\t\t\t{this.state.linePattern ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.linePattern} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<List component=\"div\" disablePadding>\n\t\t\t\t\t<MenuItem onClick={this.lineDashedOff}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<Minus />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Solid\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem onClick={this.lineDashedOn}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<DotsHorizontal />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Dashed\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</List>\n\t\t\t</Collapse>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"square\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<ShapeSquarePlus />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw square\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"ellipse\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<ShapeOvalPlus />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw ellipse\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"text\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<TextFieldsIcon />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Write text\" />\n\t\t\t</MenuItem>\n\t\t</Menu>\n\t\t);\n\t}\n}\n\nDrawMenu.defaultProps = {\n\tanchorEl: null,\n\tdrawMode: null\n}\n\nDrawMenu.propTypes = {\n\tanchorEl: PropTypes.func,\n\tdrawMode: PropTypes.instanceOf(DrawMode)\n};\n\nexport default DrawMenu;","import React, { Component } from 'react';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\n\n// TODO: Fix fullscreen exit on esc key\nclass FullscreenToggle extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tfullScreen: false\n\t\t}\n\n\t\tthis.toggleFullScreen = this.toggleFullScreen.bind(this);\n\t}\n\n\tdomFullScreenToggle(toFullScreen) {\n\t\tif (toFullScreen) {\n\t\t\tvar elem = document.documentElement;\n\t\t\tif (elem.requestFullscreen) {\n\t\t\t\telem.requestFullscreen();\n\t\t\t\t} else if (elem.mozRequestFullScreen) { /* Firefox */\n\t\t\t\telem.mozRequestFullScreen();\n\t\t\t\t} else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */\n\t\t\t\telem.webkitRequestFullscreen();\n\t\t\t\t} else if (elem.msRequestFullscreen) { /* IE/Edge */\n\t\t\t\telem.msRequestFullscreen();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.exitFullscreen) {\n\t\t\tdocument.exitFullscreen();\n\t\t} else if (document.mozCancelFullScreen) {\n\t\t\tdocument.mozCancelFullScreen();\n\t\t} else if (document.webkitExitFullscreen) {\n\t\t\tdocument.webkitExitFullscreen();\n\t\t} else if (document.msExitFullscreen) {\n\t\t\tdocument.msExitFullscreen();\n\t\t}\n\t}\n\n\ttoggleFullScreen() {\n\t\tconst isFullScreen = !this.state.fullScreen;\n\t\t// dom toogle\n\t\tthis.domFullScreenToggle(isFullScreen);\n\t\t// change state to update buttons\n\t\tthis.setState({\n\t\t\tfullScreen:isFullScreen\n\t\t});\n\t}\n\n\tfsIconGet(){\n\t\tif (this.state.fullScreen) {\n\t\t\treturn(<FullscreenExitIcon />);\n\t\t} else {\n\t\t\treturn(<FullscreenIcon />);\n\t\t};\n\t}\n\n\trender() {\n\t\tconst fsIcon = this.fsIconGet();\n\t\tconst fsLabel = this.state.fullScreen ? \"Exit full screen\" : \"Enter full screen\";\n\n\t\treturn (\n\t\t\t<Tooltip title={fsLabel}>\n\t\t\t\t<IconButton aria-label={fsLabel} color=\"inherit\" onClick={this.toggleFullScreen}>\n\t\t\t\t\t{fsIcon}\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t);\n\t}\n}\n\nexport default FullscreenToggle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport Box from '@material-ui/core/Box';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport MovieCreationIcon from '@material-ui/icons/MovieCreation';\nimport LinkIcon from '@material-ui/icons/Link';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\nimport { CursorDefault, VectorLine, ShapeSquarePlus, ShapeOvalPlus } from 'mdi-material-ui'\nimport DrawMenu from './DrawMenu';\nimport FullscreenToggle from './FullscreenToggle'\n\n// this is for custom position classes\nconst styles = theme => ({\n\tgrow: {\n\t\tflexGrow: 1,\n\t},\n});\n\nclass AppTools extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdrawerOpen: false\n\t\t}\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\n\t\t// Drawing menu\n\t\tthis._refDrawMenu = React.createRef();\n\t\tthis._refOpenDrawMenu = React.createRef();\n\t\tthis.drawingModeIcon = this.drawingModeIcon.bind(this);\n\t\tthis.drawMenuAnchorEl = this.drawMenuAnchorEl.bind(this);\n\t\tthis.drawMenuOpen = this.drawMenuOpen.bind(this);\n\t\tthis.createNewScheme = this.createNewScheme.bind(this);\n\t\tthis.createNewAnimation = this.createNewAnimation.bind(this);\n\t}\n\n\tsetDrawer(isOpen) {\n\t\tthis.setState({\n\t\t\tdrawerOpen:isOpen\n\t\t});\n\t}\n\n\ttoggleDrawer(e) {\n\t\tif (e.type === 'keydown' && (e.key === 'Tab' || e.key === 'Shift')) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setDrawer(!this.state.drawerOpen);\n\t}\n\n\tcreateNewScheme() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.createNewScheme();\n\t}\n\n\tcreateNewAnimation() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.createNewAnimation();\n\t}\n\n\tdrawMenuAnchorEl() {\n\t\treturn this._refOpenDrawMenu.current;\n\t}\n\n\tdrawMenuOpen() {\n\t\tthis._refDrawMenu.current.open();\n\t}\n\n\tdrawingModeIcon() {\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\treturn (<VectorLine />);\n\t\t\tcase 'square':\n\t\t\t\treturn (<ShapeSquarePlus />);\n\t\t\tcase 'ellipse':\n\t\t\t\treturn (<ShapeOvalPlus />);\n\t\t\tcase 'text':\n\t\t\t\treturn (<TextFieldsIcon />);\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\treturn (<CursorDefault />);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst drawingModeIcon = this.drawingModeIcon();\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<AppBar position=\"fixed\">\n\t\t\t\t\t<Toolbar variant=\"regular\">\n\t\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={this.toggleDrawer}>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">Futsal tactics board</Typography>\n\t\t\t\t\t\t<div className={this.props.classes.grow} />\n\t\t\t\t\t\t<Tooltip title=\"Selected draw mode\">\n\t\t\t\t\t\t\t<IconButton  ref={this._refOpenDrawMenu} aria-label=\"Selected draw mode\" color=\"inherit\" onClick={this.drawMenuOpen}>\n\t\t\t\t\t\t\t\t{drawingModeIcon}\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Save picture\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Save picture\" color=\"inherit\" onClick={this.props.saveImage}>\n\t\t\t\t\t\t\t\t<GetAppIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Share link\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Share link\" color=\"inherit\">\n\t\t\t\t\t\t\t\t<LinkIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<FullscreenToggle />\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</AppBar>\n\t\t\t\t<Drawer anchor=\"left\" open={this.state.drawerOpen} onClose={this.toggleDrawer}>\n\t\t\t\t\t<Box p={2}>\n\t\t\t\t\t\t<Typography variant=\"h4\" component=\"h2\">Tactics board</Typography>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<List component=\"nav\" aria-label=\"main mailbox folders\">\n\t\t\t\t\t\t\t<ListItem button onClick={this.createNewScheme}>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<OpenInNewIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Create new scheme\" />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem button onClick={this.createNewAnimation}>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<MovieCreationIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Create new animation\" />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Box>\n\t\t\t\t</Drawer>\n\t\t\t\t<DrawMenu ref={this._refDrawMenu} anchorEl={this.drawMenuAnchorEl} drawMode={this.props.drawMode} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nAppTools.defaultProps = {\n\tdrawMode: null,\n\tsaveImage: null,\n\tcreateNewScheme: null,\n\tcreateNewAnimation: null\n}\n\nAppTools.propTypes = {\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\tsaveImage: PropTypes.func,\n\tcreateNewScheme: PropTypes.func,\n\tcreateNewAnimation: PropTypes.func\n}\n\nexport default withStyles(styles, { withTheme: true })(AppTools);","import React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nclass ConfirmDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.okCallback = null;\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\ttitle: \"\",\n\t\t\ttext: \"\"\n\t\t}\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleOk = this.handleOk.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t}\n\n\tShow(title, text, fnCallback) {\n\t\tthis.okCallback = fnCallback;\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\ttitle: title,\n\t\t\ttext: text\n\t\t});\n\t}\n\t\n\thandleClose() {\n\t\tthis.okCallback = null;\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\thandleOk() {\n\t\tif (null !== this.okCallback) {\n\t\t\tthis.okCallback();\n\t\t}\n\t\tthis.handleClose();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitle id=\"responsive-dialog-title\">{this.state.title}</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText>{this.state.text}</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={this.handleClose} variant=\"contained\" color=\"primary\" autoFocus>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.handleOk} variant=\"contained\" color=\"secondary\">Ok</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default ConfirmDialog;","import React, { Component } from 'react';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport PitchEdit from './editors/PitchEdit'\nimport SvgToImg from './editors/SvgToImg'\nimport AppTools from './ui/AppTools'\nimport ConfirmDialog from './ui/ConfirmDialog'\nimport PitchFutsal from './pitch/PitchFutsal'\nimport DrawMode from './pitch/DrawMode'\nimport './App.css';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// application Material-UI theme\n\t\tthis.appTheme = createMuiTheme();\n\t\t// references\n\t\tthis.refAppTools = React.createRef();\n\t\tthis.refPitchEdit = React.createRef();\n\t\tthis.refSvgToImg = React.createRef();\n\t\tthis.refConfirmDialog = React.createRef();\n\t\t// event handlers\n\t\tthis.SaveImage = this.SaveImage.bind(this);\n\t\tthis.CreateNewScheme = this.CreateNewScheme.bind(this);\n\t\tthis.CreateNewAnimation = this.CreateNewAnimation.bind(this);\n\t\tthis.PitchReset = this.PitchReset.bind(this);\n\t\tthis.OnPitchModified = this.OnPitchModified.bind(this);\n\t\tthis.OnDrawModeModified = this.OnDrawModeModified.bind(this);\n\n\t\t// init default state\n\t\tthis.pitch = this.DefaultPitch();\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.drawMode = new DrawMode();\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.state = {\n\t\t\tpitch: this.pitch,\n\t\t\tdrawMode: this.drawMode\n\t\t}\n\t}\n\t\n\tDefaultPitch() {\n\t\tlet pitch = new PitchFutsal();\n\t\tpitch.initDefault(\n\t\t\t200, 8, 120, \n\t\t\t100, 5, 80\n\t\t);\n\t\treturn pitch;\n\t}\n\n\tPitchReset() {\n\t\tconsole.log(\"Pitch reset\");\n\t\tthis.pitch.onModified = null;\n\t\tthis.pitch = this.DefaultPitch();\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.drawMode.onModified = null;\n\t\tthis.drawMode = new DrawMode();\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.setState({\n\t\t\tpitch: this.pitch,\n\t\t\tdrawMode: this.drawMode\n\t\t});\n\t}\n\n\tOnPitchModified(newPitch) {\n\t\tconsole.log(\"Pitch modified\");\n\t\tthis.pitch.onModified = null;\n\t\tthis.pitch = newPitch;\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.setState({\n\t\t\tpitch: this.pitch\n\t\t});\n\t}\n\n\tOnDrawModeModified(newDrawMode) {\n\t\tconsole.log(\"DrawMode modified\");\n\t\tthis.drawMode.onModified = null;\n\t\tthis.drawMode = newDrawMode;\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.setState({\n\t\t\tdrawMode: this.drawMode\n\t\t});\n\t\t// update pitch overlay\n\t\t// TODO: reconsider this\n\t\tthis.pitch.overlay = this.drawMode.pitchOverlay;\n\t}\n\n\tCreateNewScheme() {\n\t\tif (!this.state.pitch.isModified) {\n\t\t\treturn;\n\t\t}\n\t\tthis.refConfirmDialog.current.Show(\n\t\t\t\"Create new scheme\", \"Pitch is modified, are you sure you want to discard changes?\",\n\t\t\tthis.PitchReset\n\t\t);\n\t}\n\n\tCreateNewAnimation() {\n\t\tthis.refConfirmDialog.current.Show(\n\t\t\t\"Create new animation\", \"Are you sure you want to create new animation?\",\n\t\t\tnull\n\t\t);\n\t}\n\n\tSaveImage() {\n\t\tconsole.log(\"App save image\");\n\t\tlet svg = this.refPitchEdit.current.getSVG();\n\t\tthis.refSvgToImg.current.toImg(\n\t\t\tsvg.svgText, \n\t\t\tsvg.width, svg.height, \n\t\t\tsvg.width/2, svg.height/2\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ThemeProvider theme={this.appTheme}>\n\t\t\t\t\t<AppTools ref={this.refAppTools} drawMode={this.state.drawMode} saveImage={this.SaveImage} createNewScheme={this.CreateNewScheme} createNewAnimation={this.CreateNewAnimation} />\n\t\t\t\t\t<PitchEdit ref={this.refPitchEdit} pitch={this.state.pitch} drawMode={this.state.drawMode} viewBoxLeft={0} viewBoxTop={0} viewBoxRight={4500} viewBoxBottom={2500} />\n\t\t\t\t\t<ConfirmDialog ref={this.refConfirmDialog} />\n\t\t\t\t\t<SvgToImg ref={this.refSvgToImg} />\n\t\t\t\t</ThemeProvider>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\t\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t.register(swUrl)\n\t.then(registration => {\n\t\tregistration.onupdatefound = () => {\n\t\t\tconst installingWorker = registration.installing;\n\t\t\tif (installingWorker == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t})\n\t.catch(error => {\n\t\tconsole.error('Error during service worker registration:', error);\n\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { 'Service-Worker': 'script' },\n\t})\n\t.then(response => {\n\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\tconst contentType = response.headers.get('content-type');\n\t\tif (\n\t\t\tresponse.status === 404 ||\n\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t) {\n\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\t// Service worker found. Proceed as normal.\n\t\t\tregisterValidSW(swUrl, config);\n\t\t}\n\t})\n\t.catch(() => {\n\t\tconsole.log('No internet connection found. App is running in offline mode.');\n\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t.then(registration => {\n\t\t\tregistration.unregister();\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error(error.message);\n\t\t});\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport './index.css';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t{/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n\t\t<CssBaseline />\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { Component } from 'react';\nimport FileSaver from 'browser-filesaver';\n\nclass SvgToImg extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._refRenderer = React.createRef();\n\t}\n\t\n\t// create image from svg text\n\ttoImg(svgText, orgWidth, orgHeight, imgWidth, imgHeight) {\n\t\t// Create Canvas\n\t\tlet canvas = document.createElement('canvas');\n\t\tcanvas.width = imgWidth;\n\t\tcanvas.height = imgHeight;\n\t\tlet ctx = canvas.getContext(\"2d\");\n\n\t\t// show canvas\n\t\t//this._refRenderer.current.appendChild(canvas);\n\n\t\t// Create image\n\t\tlet img = document.createElement('img');\n\t\t// when loaded draw and save\n\t\timg.addEventListener('load', e=> {\n\t\t\t// draw image\n\t\t\tctx.drawImage(img,\n\t\t\t\t0, 0, orgWidth, orgHeight,\n\t\t\t\t//0, 0, imgWidth, imgHeight\n\t\t\t\t0, 0, orgWidth, orgHeight\n\t\t\t);\n\t\t\t// save image\n\t\t\tcanvas.toBlob(function(blob) {\n\t\t\t\tFileSaver.saveAs(blob, \"tactics-board.png\");\n\t\t\t});\n\t\t\t// clear everything\n\t\t\tthis._refRenderer.current.innerHTML = '';\n\t\t});\n\n\t\t// prepare svg to load image\n\t\tconst encodedString = 'data:image/svg+xml;base64,' + new Buffer(svgText).toString('base64');\n\t\timg.src = encodedString;\t// start loading image\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div ref={this._refRenderer} style={{display:\"none\"}}></div>\n\t\t);\n\t}\n}\n\nexport default SvgToImg;"],"sourceRoot":""}