{"version":3,"sources":["pitch/Point.js","pitch/Ball.js","pitch/Player.js","pitch/Box.js","pitch/Square.js","pitch/Ellipse.js","pitch/Path.js","pitch/Line.js","pitch/Text.js","pitch/Constants.js","pitch/Extras.js","pitch/AnimKeyFrame.js","pitch/PitchFutsal.js","pitch/DrawMode.js","editors/PlayerEdit.js","editors/BallEdit.js","editors/DragHandle.js","editors/RotateHandle.js","editors/EditBox.js","editors/SquareEdit.js","editors/EllipseEdit.js","editors/LineEdit.js","editors/TextEdit.js","editors/Goal.js","editors/Ladder.js","editors/Cone.js","editors/Flag.js","editors/ExtrasEdit.js","editors/PlayerDialog.js","editors/PitchEdit.js","ui/DrawMenu.js","ui/PaletteDialog.js","ui/FullscreenToggle.js","ui/AnimControls.js","ui/ExtrasDialog.js","ui/AppTools.js","ui/AnimPlayer.js","ui/ConfirmDialog.js","App.js","serviceWorker.js","index.js","editors/SvgToImg.js"],"names":["Point","x","y","this","p","deltaX","deltaY","Ball","id","color","pos","posDefault","clone","b","equalTo","Player","no","name","rotation","noDefault","Box","width","height","Square","x1","y1","dashed","isEdit","x2","y2","proportional","szy","corner","posX","posY","snap","vx","cx","vy","cy","angle","Math","atan2","PI","floor","Ellipse","rx","ry","Path","p1","p2","c1","c2","arrowStart","arrowEnd","k","t","p0","p3","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","l1x","l1y","l2x","l2y","l3x","l3y","t1","t2","t3","t4","t5","console","log","CubicBezier","Line","linearControlPoints","lx","ly","pid","move","computeControlPoints","paths","K","n","length","a","c","r","i","m","Text","size","text","isTextEdit","bx","by","bwidth","bheight","ElementIDPrefix","ExtrasType","ExtrasDefaults","viewBoxScale","Extras","AnimKeyFrame","players","playerPaths","balls","ballPaths","playerPathSplines","ballPathSplines","index","map","l","keyFramePos","scale","idx","splinePos","splinePathPos","isPlaced","pc","splines","position","bc","playerPathID","ballPathID","kf","PitchFutsal","AnimKeyFrameCurrent","AnimKeyFrameDuration","AnimKeyFrames","AnimPlaying","AnimPlayers","AnimBalls","squareID","squares","ellipseID","ellipses","lineID","lines","textID","texts","extrasID","extras","_overlay","isModified","onModified","noPlayers","noPlayerColors","playerSize","noBalls","noBallColors","ballSize","_initPlayers","_initBalls","push","groupSize","number","player","ball","cp","overlay","duration","newDuration","parseInt","isNaN","_modified","last","beforeLast","newKeyFrame","next","animPreCalcSplines","animFrame","time","kfDuration","keyFrame","kfPos","keyFrameShow","animatePlayersOnPaths","animateBallsOnPaths","playersCurrentKeyFrame","playerAdjustAnimPaths","replace","lineResizeP2","playerPathsCurrentKeyFrame","lineResizeP1","startsWith","find","remove","reset","ballsCurrentKeyFrame","ballAdjustAnimPaths","ballPathsCurrentKeyFrame","isDashed","lineNewID","resizeP1","resizeP2","edit","lineOrPathEdit","filter","empty","el","ellipseNewID","e","resize","rotate","sq","squareNewID","s","tx","textNewID","ex","extrasNewID","isRotatable","squareEdit","ellipseEdit","extrasEdit","textMove","squareRotate","ellipseRotate","extrasRotate","textRotate","lineEditEnd","squareEditEnd","ellipsesEditEnd","extrasEditEnd","value","DrawMode","_mode","_lineArrowStart","_lineArrowEnd","_lineDashed","_color","_textSize","_pitchOverlay","dm","mode","lineArrowStart","lineArrowEnd","lineDashed","textSize","pitchOverlay","PlayerEdit","pl","props","editID","editClassName","className","isPrevFrame","transform","textAnchor","data-ref","dominantBaseline","renderPlayerName","Component","defaultProps","BallEdit","xmlns","viewBox","d","ballImage","DragHandle","half","RotateHandle","box","Fragment","EditBox","showResize","tl","tr","bl","br","showRotate","boxClass","showBox","renderHandles","renderRotateHandle","SquareEdit","square","editBox","EllipseEdit","ellipse","LineEdit","isPath","key","markerStart","markerEnd","line","allPaths","renderPath","toString","editHandles","TextEdit","_selectionStart","_selectionEnd","_boxPadding","_editRef","React","createRef","_textRef","_cursorRef","_boxRef","editStart","bind","editChange","editKeyUp","editEnd","prevProps","prevState","current","focus","firstChild","removeChild","ln","tspan","document","createElementNS","setAttribute","textContent","appendChild","cln","bBox","removeText","txt","addTextLine","cr","getExtentOfChar","drawCursor","bb","getBBox","drawTextBoundingBox","error","selectionStart","selectionEnd","editShowCursor","onEditDone","trim","ref","strokeWidth","onFocus","onInput","onKeyUp","onBlur","split","dy","xmlSpace","renderLines","editor","Goal","w","h","hW","hH","tlX","tlY","trX","trY","brX","brY","fill","stroke","strokeDasharray","Ladder","xL","xR","yT","noSteps","yStep","Array","yB","steps","Cone","points","shape","forEach","Flag","lX","tY","bY","ExtrasEdit","isBoxVisible","isResizable","renderGfx","PlayerDialog","state","open","_refName","_refNumber","openDialog","close","save","setState","Number","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","TextField","inputRef","margin","defaultValue","label","type","fullWidth","autoFocus","DialogActions","Button","onClick","DragObject","DragObjectCheck","prefix","removePrefix","typ","PitchEdit","_bgRef","_playerDialogRef","_orgWidth","viewBoxRight","viewBoxLeft","_orgHeight","viewBoxBottom","viewBoxTop","_pitch","pitch","_dragNode","_dragObjectType","_mouseX","_mouseY","hContextMenu","hMouseDown","hMouseUp","hMouseMove","textEditDone","playerEditDone","getBoundingClientRect","X","Y","getScale","clientX","left","clientY","top","resetMouseDrag","scaleX","scaleY","button","target","classList","contains","getAttribute","chk","editNode","editPlayer","playerEditStart","playerMove","ballMove","editTopLeft","editTopRight","editBottomLeft","editBottomRight","editMove","editRotate","lineEdit","drawMode","playerEditStarted","squareEditStart","ellipseEditStart","lineEditStart","textEditStart","extrasEditStart","preventDefault","getRealPosition","lineCreate","squareCreate","ellipseCreate","textCreate","isDragStarted","isShift","getModifierState","lineCleanup","squareCleanup","ellipseCleanup","objectDrag","endAllEdits","lineResize","squareResize","ellipseResize","svgText","children","outerHTML","keyPrefix","o","overlaySize","colorOptions","col","concat","editColorIndex","editColor","pitchClasses","classes","offset","pitchLeft","pitchTop","pitchTransform","playersTransform","ballsTransform","onContextMenu","onMouseDown","onMouseUp","onMouseMove","generatePicthStyles","patternUnits","markerWidth","markerHeight","refX","refY","orient","markerUnits","fillOpacity","renderPitchOverlay","renderEllipses","renderSquares","renderExtras","fontSize","renderPlayers","playersPreviousKeyFrame","renderBalls","ballsPreviousKeyFrame","renderTexts","withStyles","theme","paddingTop","mixins","toolbar","minHeight","withTheme","DrawMenu","lineArrows","linePattern","pitchOverlays","textSizes","lineArrowsToggle","lineArrowEndToggle","lineArrowStartToggle","linePatternToggle","lineDashedOn","lineDashedOff","pitchOverlaysToggle","pitchOverlayOnChange","colorSelect","extrasSelect","textSizesToggle","textSizeSelected","currentTarget","dataset","pitchOverlayOptions","FormControlLabel","control","Radio","style","marginLeft","event","paletteDialogRef","Show","extrasDialogRef","sz","textSizeOptions","arrowsIcon","lineArrowsIcon","patternIcon","linePatternIcon","colorSelected","colorNameSelected","anchorEl","keepMounted","MenuItem","data-value","ListItemIcon","ListItemText","primary","Divider","Collapse","in","timeout","unmountOnExit","RadioGroup","onChange","pitchOverlaysRender","List","component","disablePadding","ListItemSecondaryAction","Switch","edge","checked","textSizeItemsRender","PaletteDialog","context","handleClose","colorChange","isChecked","radioIconSelected","backgroundColor","radioIcon","ico","icoChk","radio","icon","checkedIcon","renderRadios","padding","border","palette","common","white","display","justifyContent","alignItems","FullscreenToggle","fullScreen","toggleFullScreen","toFullScreen","elem","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","isFullScreen","domFullScreenToggle","fsIcon","fsIconGet","fsLabel","Tooltip","title","IconButton","aria-label","AnimControls","handleChange","keyFrameDurationSet","keyFrameTotal","lastKeyFrame","keyFrameCurrent","keyFramePrevious","disabled","previousDisabled","keyFrameNext","nextDisabled","keyFrameAdd","addDisabled","keyFrameDelete","deleteDisabled","animPlayerShow","playDisabled","data-delay-hide","Select","ExtrasDialog","extrasChange","extrasCreate","def","extrasType","Error","SvgIcon","getExtrasGfx","val","textAlign","AppTools","drawerOpen","toggleDrawer","_refDrawMenu","_refOpenDrawMenu","drawingModeIcon","drawMenuAnchorEl","drawMenuOpen","createNewScheme","createNewAnimation","_refPaletteDialog","_refExtrasDialog","isOpen","setDrawer","AppBar","Toolbar","variant","Typography","grow","animKeyFrameCurrent","animKeyFrameTotal","animKeyFrameAdd","animKeyFrameDelete","animKeyFrameNext","animKeyFramePrevious","animKeyFrameDurationSet","saveImage","Drawer","anchor","ListItem","snackbarOpen","flexGrow","BorderLinearProgress","root","borderRadius","bar","transition","LinearProgress","AnimPlayer","isPlaying","isRepeat","animTime","currentTime","show","playPause","stop","animStep","loopToggle","animStart","window","requestAnimationFrame","animStop","keyFrameDuration","keyFramesNo","keyFrameDurationMs","animTotalTime","totalTime","keyFrameLast","pct","round","timeSec","sec","msec","substring","elapsedTime","RepeatOne","Repeat","Pause","Popover","anchorOrigin","vertical","horizontal","transformOrigin","Grid","container","item","renderRepeat","keyFramePreviousDisabled","SkipPrevious","renderPlayPause","keyFrameNextDisabled","SkipNext","stopDisabled","Stop","mr","minWidth","animProgress","ConfirmDialog","okCallback","handleOk","fnCallback","DialogContentText","App","appTheme","createTheme","refPitchEdit","refSvgToImg","refConfirmDialog","refAnimPlayer","SaveImage","CreateNewScheme","CreateNewAnimation","PitchReset","ExtrasCreate","OnPitchModified","OnDrawModeModified","SnackbarOpen","SnackbarOnClose","AnimKeyFrameAdd","AnimKeyFrameDelete","AnimKeyFrameNext","AnimKeyFramePrevious","AnimKeyFrameDurationSet","AnimStart","AnimStop","AnimFrame","animPlayerAnchorEl","DefaultPitch","snackBar","Severity","Message","initDefault","newPitch","newDrawMode","svg","getSVG","toImg","severity","message","ThemeProvider","Snackbar","autoHideDuration","elevation","SvgToImg","Boolean","location","hostname","match","ReactDOM","render","StrictMode","CssBaseline","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","_refRenderer","orgWidth","orgHeight","imgWidth","imgHeight","canvas","createElement","ctx","getContext","img","addEventListener","drawImage","toBlob","blob","FileSaver","saveAs","innerHTML","encodedString","Buffer","src"],"mappings":"6QAoBeA,E,WAnBd,aAAsB,IAAVC,EAAS,uDAAP,EAAGC,EAAI,uDAAF,EAAE,oBACpBC,KAAKF,EAAIA,EACTE,KAAKD,EAAIA,E,2CAGV,SAAQE,GACP,OAAOA,EAAEH,IAAME,KAAKF,GAAKG,EAAEF,IAAMC,KAAKD,I,kBAGvC,SAAKG,EAAQC,GACZH,KAAKF,GAAKI,EACVF,KAAKD,GAAKI,I,mBAGX,WACC,OAAO,IAAIN,EAAMG,KAAKF,EAAGE,KAAKD,O,KCmBjBK,E,WAhCd,aAA2E,IAA/DC,EAA8D,uDAA3D,GAAIC,EAAuD,uDAAjD,EAAGC,EAA8C,uDAA1C,IAAIV,EAAM,EAAE,GAAIW,EAA0B,uDAAf,IAAIX,EAAM,EAAE,GAAG,oBACzEG,KAAKK,GAAKA,EACVL,KAAKM,MAAQA,EACbN,KAAKO,IAAMA,EACXP,KAAKQ,WAAaA,E,yCAGnB,WACCR,KAAKO,IAAMP,KAAKQ,WAAWC,U,mBAG5B,WACC,OAAO,IAAIL,EACVJ,KAAKK,GACLL,KAAKM,MACLN,KAAKO,IAAIE,QACTT,KAAKQ,WAAWC,W,qBAIlB,SAAQC,GACP,OAAOV,KAAKK,KAAOK,EAAEL,IACjBL,KAAKM,QAAUI,EAAEJ,OACjBN,KAAKO,IAAII,QAAQD,EAAEH,MACnBP,KAAKQ,WAAWG,QAAQD,EAAEF,c,oBAG/B,WACC,OAAQR,KAAKO,IAAII,QAAQX,KAAKQ,gB,KCmBjBI,E,WA/Cd,aAAuH,IAA3GP,EAA0G,uDAAvG,GAAIQ,EAAmG,uDAAhG,IAAKC,EAA2F,uDAAtF,GAAIR,EAAkF,uDAA5E,EAAGC,EAAyE,uDAArE,IAAIV,EAAM,EAAE,GAAIkB,EAAqD,uDAA5C,EAAGP,EAAyC,uDAA9B,IAAIX,EAAM,EAAE,GAAImB,EAAc,uDAAJ,IAAI,oBACrHhB,KAAKK,GAAKA,EACVL,KAAKa,GAAKA,EACVb,KAAKc,KAAOA,EACZd,KAAKM,MAAQA,EACbN,KAAKO,IAAMA,EACXP,KAAKe,SAAWA,EAChBf,KAAKQ,WAAaA,EAClBR,KAAKgB,UAAYA,E,yCAGlB,WACChB,KAAKO,IAAMP,KAAKQ,WAAWC,QAC3BT,KAAKe,SAAW,EAChBf,KAAKc,KAAO,GACZd,KAAKa,GAAKb,KAAKgB,Y,mBAGhB,WACC,OAAO,IAAIJ,EACVZ,KAAKK,GACLL,KAAKa,GACLb,KAAKc,KACLd,KAAKM,MACLN,KAAKO,IAAIE,QACTT,KAAKe,SACLf,KAAKQ,WAAWC,QAChBT,KAAKgB,a,qBAIP,SAAQf,GACP,OAAOD,KAAKK,KAAOJ,EAAEI,IACjBL,KAAKa,KAAOZ,EAAEY,IACdb,KAAKc,OAASb,EAAEa,MAChBd,KAAKM,QAAUL,EAAEK,OACjBN,KAAKO,IAAII,QAAQV,EAAEM,MACnBP,KAAKe,WAAad,EAAEc,UACpBf,KAAKQ,WAAWG,QAAQV,EAAEO,aAC1BR,KAAKgB,YAAcf,EAAEe,Y,oBAG1B,WACC,OAAQhB,KAAKO,IAAII,QAAQX,KAAKQ,gB,KCpCjBS,EATd,aAAgD,IAApCZ,EAAmC,uDAAhC,GAAIP,EAA4B,uDAA1B,EAAGC,EAAuB,uDAArB,EAAGmB,EAAkB,uDAAZ,EAAGC,EAAS,uDAAF,EAAE,oBAC9CnB,KAAKK,GAAKA,EACVL,KAAKF,EAAIA,EACTE,KAAKD,EAAIA,EACTC,KAAKkB,MAAQA,EACblB,KAAKmB,OAASA,GCiGDC,E,WApGd,aAAmG,IAAvFf,EAAsF,uDAAnF,GAAIC,EAA+E,uDAAzE,EAAGe,EAAsE,uDAAnE,EAAGC,EAAgE,uDAA7D,EAAGJ,EAA0D,uDAApD,EAAGC,EAAiD,uDAA1C,EAAGJ,EAAuC,uDAA9B,EAAGQ,EAA2B,wDAAbC,EAAa,4EACjGxB,KAAKK,GAAKA,EACVL,KAAKM,MAAQA,EACbN,KAAKqB,GAAKA,EACVrB,KAAKsB,GAAKA,EACVtB,KAAKyB,GAAKJ,EAAKH,EACflB,KAAK0B,GAAKJ,EAAKH,EACfnB,KAAKe,SAAWA,EAChBf,KAAKuB,OAASA,EACdvB,KAAKwB,OAASA,E,qCAGf,WACC,OAAO,IAAIP,EACVjB,KAAKK,GACLL,KAAKF,EACLE,KAAKD,EACLC,KAAKkB,MACLlB,KAAKmB,U,aAIP,WACC,OAAOnB,KAAKqB,GAAKrB,KAAKyB,GAAKzB,KAAKqB,GAAKrB,KAAKyB,K,iBAG3C,WACC,OAAOzB,KAAKqB,GAAKrB,KAAKyB,GAAKzB,KAAKyB,GAAKzB,KAAKqB,GAAKrB,KAAKqB,GAAKrB,KAAKyB,K,aAG/D,WACC,OAAOzB,KAAKsB,GAAKtB,KAAK0B,GAAK1B,KAAKsB,GAAKtB,KAAK0B,K,kBAG3C,WACC,OAAO1B,KAAKsB,GAAKtB,KAAK0B,GAAK1B,KAAK0B,GAAK1B,KAAKsB,GAAKtB,KAAKsB,GAAKtB,KAAK0B,K,cAG/D,WACC,OAAO1B,KAAKF,EAAIE,KAAKkB,MAAQ,I,cAG9B,WACC,OAAOlB,KAAKD,EAAIC,KAAKmB,OAAS,I,oBAG/B,SAAOM,EAAIC,EAAIC,GAEd,GADA3B,KAAKyB,GAAKA,EACLE,EAEE,CACN,IAAIC,EAAM5B,KAAKkB,OAASlB,KAAKsB,GAAKI,EAAK,GAAK,GAC5C1B,KAAK0B,GAAK1B,KAAKsB,GAAKM,OAHpB5B,KAAK0B,GAAKA,I,kBAOZ,SAAKG,EAAQ3B,EAAQC,GACpB,OAAQ0B,GACP,IAAK,KACJ7B,KAAKqB,IAAMnB,EACXF,KAAKsB,IAAMnB,EACX,MACD,IAAK,KACJH,KAAKyB,IAAMvB,EACXF,KAAKsB,IAAMnB,EACX,MACD,IAAK,KACJH,KAAKqB,IAAMnB,EACXF,KAAK0B,IAAMvB,EACX,MACD,IAAK,KACJH,KAAKyB,IAAMvB,EACXF,KAAK0B,IAAMvB,EACX,MACD,IAAK,KACJH,KAAKqB,IAAMnB,EACXF,KAAKsB,IAAMnB,EACXH,KAAKyB,IAAMvB,EACXF,KAAK0B,IAAMvB,K,oBAOd,SAAO2B,EAAMC,EAAMC,GAClB,IAAIC,EAAKH,EAAO9B,KAAKkC,GACjBC,EAAKJ,EAAO/B,KAAKoC,GACjBC,EAA6B,IAArBC,KAAKC,MAAMJ,EAAIF,GAAYK,KAAKE,IAC5CH,GAAS,IACG,IACXA,GAAS,KAENL,IACHK,EAAiC,GAAzBC,KAAKG,MAAMJ,EAAQ,KAE5BrC,KAAKe,SAAWsB,M,KCJHK,E,WA5Fd,aAA4F,IAAhFrC,EAA+E,uDAA5E,GAAIC,EAAwE,uDAAlE,EAAGe,EAA+D,uDAA5D,EAAGC,EAAyD,uDAAtD,EAAGqB,EAAmD,uDAAhD,EAAGC,EAA6C,uDAA1C,EAAG7B,EAAuC,uDAA9B,EAAGQ,EAA2B,wDAAbC,EAAa,4EAC1FxB,KAAKK,GAAKA,EACVL,KAAKM,MAAQA,EACbN,KAAKqB,GAAKA,EACVrB,KAAKsB,GAAKA,EACVtB,KAAKyB,GAAKJ,EAAU,EAALsB,EACf3C,KAAK0B,GAAKJ,EAAU,EAALsB,EACf5C,KAAKe,SAAWA,EAChBf,KAAKuB,OAASA,EACdvB,KAAKwB,OAASA,E,oCAGf,WACC,OAAQxB,KAAKqB,GAAKrB,KAAKyB,GAAKzB,KAAKqB,GAAKrB,KAAKyB,IAAMzB,KAAK2C,K,cAGvD,WACC,OAAQ3C,KAAKsB,GAAKtB,KAAK0B,GAAK1B,KAAKsB,GAAKtB,KAAK0B,IAAM1B,KAAK4C,K,cAGvD,WACC,OAAQ5C,KAAKqB,GAAKrB,KAAKyB,GAAKzB,KAAKyB,GAAKzB,KAAKqB,GAAKrB,KAAKqB,GAAKrB,KAAKyB,IAAM,I,cAGtE,WACC,OAAQzB,KAAKsB,GAAKtB,KAAK0B,GAAK1B,KAAK0B,GAAK1B,KAAKsB,GAAKtB,KAAKsB,GAAKtB,KAAK0B,IAAM,I,eAGtE,WACC,OAAO,IAAIT,EACVjB,KAAKK,GACLL,KAAKkC,GAAKlC,KAAK2C,GACf3C,KAAKoC,GAAKpC,KAAK4C,GACL,EAAV5C,KAAK2C,GACK,EAAV3C,KAAK4C,M,oBAIP,SAAOnB,EAAIC,EAAIC,GAEd,GADA3B,KAAKyB,GAAKA,EACLE,EAEE,CACN,IAAIC,EAAM5B,KAAK2C,IAAM3C,KAAKsB,GAAKI,EAAK,GAAK,GACzC1B,KAAK0B,GAAK1B,KAAKsB,GAAKM,OAHpB5B,KAAK0B,GAAKA,I,kBAOZ,SAAKG,EAAQ3B,EAAQC,GACpB,OAAQ0B,GACP,IAAK,KACJ7B,KAAKqB,IAAMnB,EACXF,KAAKsB,IAAMnB,EACX,MACD,IAAK,KACJH,KAAKyB,IAAMvB,EACXF,KAAKsB,IAAMnB,EACX,MACD,IAAK,KACJH,KAAKqB,IAAMnB,EACXF,KAAK0B,IAAMvB,EACX,MACD,IAAK,KACJH,KAAKyB,IAAMvB,EACXF,KAAK0B,IAAMvB,EACX,MACD,IAAK,KACJH,KAAKqB,IAAMnB,EACXF,KAAKsB,IAAMnB,EACXH,KAAKyB,IAAMvB,EACXF,KAAK0B,IAAMvB,K,oBAOd,SAAO2B,EAAMC,EAAMC,GAClB,IAAIC,EAAKH,EAAO9B,KAAKkC,GACjBC,EAAKJ,EAAO/B,KAAKoC,GACjBC,EAA6B,IAArBC,KAAKC,MAAMJ,EAAIF,GAAYK,KAAKE,IAC5CH,GAAS,IACG,IACXA,GAAS,KAENL,IACHK,EAAiC,GAAzBC,KAAKG,MAAMJ,EAAQ,KAE5BrC,KAAKe,SAAWsB,M,KCQHQ,E,WA/Fd,aAAiI,IAArHxC,EAAoH,uDAAjH,GAAIyC,EAA6G,uDAA1G,IAAIjD,EAAM,EAAE,GAAIkD,EAA0F,uDAAvF,IAAIlD,EAAM,EAAE,GAAImD,EAAuE,uDAApE,IAAInD,EAAM,EAAE,GAAIoD,EAAoD,uDAAjD,IAAIpD,EAAM,EAAE,GAAIqD,EAAiC,wDAAfC,EAAe,4EAC/HnD,KAAKK,GAAKA,EACVL,KAAK8C,GAAKA,EACV9C,KAAK+C,GAAKA,EACV/C,KAAKgD,GAAKA,EACVhD,KAAKiD,GAAKA,EACVjD,KAAKkD,WAAaA,EAClBlD,KAAKmD,SAAWA,E,iDAIjB,SAAcC,EAAGnD,GAChB,OAAOmD,EAAIA,EAAIA,EAAInD,I,2BAGpB,SAAcoD,EAAGD,EAAGnD,GACnB,OAAO,EAAImD,EAAIA,EAAIC,EAAIpD,I,2BAGxB,SAAcoD,EAAGD,EAAGnD,GACnB,OAAO,EAAImD,EAAIC,EAAIA,EAAIpD,I,2BAGxB,SAAcoD,EAAGpD,GAChB,OAAOoD,EAAIA,EAAIA,EAAIpD,I,yBAGpB,SAAYoD,EAAGC,EAAIR,EAAIC,EAAIQ,GAC1B,IAAMH,EAAI,EAAIC,EACd,OAAOrD,KAAKwD,cAAcJ,EAAGE,GAC1BtD,KAAKyD,cAAcJ,EAAGD,EAAGN,GACzB9C,KAAK0D,cAAcL,EAAGD,EAAGL,GACzB/C,KAAK2D,cAAcN,EAAGE,K,sBAK1B,SAASF,GACR,IAAMD,EAAI,EAAIC,EAERO,EAAM5D,KAAKgD,GAAGlD,EAAIE,KAAK8C,GAAGhD,EAC1B+D,EAAM7D,KAAKgD,GAAGjD,EAAIC,KAAK8C,GAAG/C,EAE1B+D,EAAM9D,KAAKiD,GAAGnD,EAAIE,KAAKgD,GAAGlD,EAC1BiE,EAAM/D,KAAKiD,GAAGlD,EAAIC,KAAKgD,GAAGjD,EAE1BiE,EAAMhE,KAAK+C,GAAGjD,EAAIE,KAAKiD,GAAGnD,EAC1BmE,EAAMjE,KAAK+C,GAAGhD,EAAIC,KAAKiD,GAAGlD,EAG1BmE,EAAK,IAAIrE,EACd+D,EAAMR,EACNS,EAAMT,GAGDe,EAAK,IAAItE,EACdiE,EAAMV,EACNW,EAAMX,GAGDgB,EAAK,IAAIvE,EACdmE,EAAMZ,EACNa,EAAMb,GAGDiB,EAAK,IAAIxE,GACbsE,EAAGrE,EAAIoE,EAAGpE,GAAKsD,GACfe,EAAGpE,EAAImE,EAAGnE,GAAKqD,GAGXkB,EAAK,IAAIzE,GACbuE,EAAGtE,EAAIqE,EAAGrE,GAAKsD,GACfgB,EAAGrE,EAAIoE,EAAGpE,GAAKqD,GAGXnB,EAAKqC,EAAGxE,EAAIuE,EAAGvE,EACfqC,EAAKmC,EAAGvE,EAAIsE,EAAGtE,EACjBsC,EAA6B,IAArBC,KAAKC,MAAMN,EAAIE,GAAYG,KAAKE,GAM5C,OAJIH,EAAQ,IACXA,GAAS,KAEVkC,QAAQC,IAAInC,GACLA,I,sBAIR,SAASgB,GACR,OAAO,IAAIxD,EACVG,KAAKyE,YAAYpB,EAAGrD,KAAK8C,GAAGhD,EAAGE,KAAKgD,GAAGlD,EAAGE,KAAKiD,GAAGnD,EAAGE,KAAK+C,GAAGjD,GAC7DE,KAAKyE,YAAYpB,EAAGrD,KAAK8C,GAAG/C,EAAGC,KAAKgD,GAAGjD,EAAGC,KAAKiD,GAAGlD,EAAGC,KAAK+C,GAAGhD,Q,KCqDjD2E,E,WA7Id,aAAsK,IAA1JrE,EAAyJ,uDAAtJ,GAAIC,EAAkJ,uDAA5I,EAAGwC,EAAyI,uDAAtI,IAAIjD,EAAM,EAAE,GAAIkD,EAAsH,uDAAnH,IAAIlD,EAAM,EAAE,GAAImD,EAAmG,uDAAhG,IAAInD,EAAM,EAAE,GAAIoD,EAAgF,uDAA7E,IAAIpD,EAAM,EAAE,GAAIqD,EAA6D,wDAA3CC,EAA2C,wDAA3B5B,EAA2B,wDAAbC,EAAa,4EACpKxB,KAAKK,GAAKA,EACVL,KAAKM,MAAQA,EACbN,KAAK8C,GAAKA,EACV9C,KAAK+C,GAAKA,EACV/C,KAAKgD,GAAKA,EACVhD,KAAKiD,GAAKA,EACVjD,KAAKkD,WAAaA,EAClBlD,KAAKmD,SAAWA,EAChBnD,KAAKuB,OAASA,EACdvB,KAAKwB,OAASA,E,yCAGf,WACC,OAAOxB,KAAK8C,GAAGnC,QAAQX,KAAK+C,KACxB/C,KAAK8C,GAAGnC,QAAQX,KAAKgD,KACrBhD,KAAK8C,GAAGnC,QAAQX,KAAKiD,M,sBAG1B,SAAS/C,EAAQC,GAChBH,KAAK8C,GAAK,IAAIjD,EAAMG,KAAK8C,GAAGhD,EAAII,EAAQF,KAAK8C,GAAG/C,EAAII,GACpDH,KAAK2E,wB,sBAGN,SAASzE,EAAQC,GAChBH,KAAK+C,GAAK,IAAIlD,EAAMG,KAAK+C,GAAGjD,EAAII,EAAQF,KAAK+C,GAAGhD,EAAII,GACpDH,KAAK2E,wB,iCAIN,WACC,IAAIC,EAAK5E,KAAK+C,GAAGjD,EAAIE,KAAK8C,GAAGhD,EACzB+E,EAAK7E,KAAK+C,GAAGhD,EAAIC,KAAK8C,GAAG/C,EAC7BC,KAAKgD,GAAK,IAAInD,EACbG,KAAK8C,GAAGhD,EAAI8E,EAAK,EACjB5E,KAAK8C,GAAG/C,EAAI8E,EAAK,GAElB7E,KAAKiD,GAAK,IAAIpD,EACbG,KAAK8C,GAAGhD,EAAI8E,EAAK,EAAI,EACrB5E,KAAK8C,GAAG/C,EAAI8E,EAAK,EAAI,K,kBAIvB,SAAKC,EAAK5E,EAAQC,GACjB,OAAQ2E,GACP,IAAK,KACJ9E,KAAK8C,GAAGiC,KAAK7E,EAAQC,GACrB,MACD,IAAK,KACJH,KAAKgD,GAAG+B,KAAK7E,EAAQC,GACrB,MACD,IAAK,KACJH,KAAKiD,GAAG8B,KAAK7E,EAAQC,GACrB,MACD,IAAK,KACJH,KAAK+C,GAAGgC,KAAK7E,EAAQC,M,mBAOxB,WACC,IAAI+B,EAAKlC,KAAKgF,qBAAqB,CAAChF,KAAK8C,GAAGhD,EAAGE,KAAKgD,GAAGlD,EAAGE,KAAKiD,GAAGnD,EAAGE,KAAK+C,GAAGjD,IACzEsC,EAAKpC,KAAKgF,qBAAqB,CAAChF,KAAK8C,GAAG/C,EAAGC,KAAKgD,GAAGjD,EAAGC,KAAKiD,GAAGlD,EAAGC,KAAK+C,GAAGhD,IACzEkF,EAAQ,GAmBZ,OAlBAA,EAAM,GAAK,IAAIpC,EACd7C,KAAKK,GAAIL,KAAK8C,GAAI9C,KAAKgD,GACvB,IAAInD,EAAMqC,EAAGY,GAAG,GAAIV,EAAGU,GAAG,IAC1B,IAAIjD,EAAMqC,EAAGa,GAAG,GAAIX,EAAGW,GAAG,IAC1B/C,KAAKkD,YAAY,GAElB+B,EAAM,GAAK,IAAIpC,EACd7C,KAAKK,GAAIL,KAAKgD,GAAIhD,KAAKiD,GACvB,IAAIpD,EAAMqC,EAAGY,GAAG,GAAIV,EAAGU,GAAG,IAC1B,IAAIjD,EAAMqC,EAAGa,GAAG,GAAIX,EAAGW,GAAG,KAC1B,GAAO,GAERkC,EAAM,GAAK,IAAIpC,EACd7C,KAAKK,GAAIL,KAAKiD,GAAIjD,KAAK+C,GACvB,IAAIlD,EAAMqC,EAAGY,GAAG,GAAIV,EAAGU,GAAG,IAC1B,IAAIjD,EAAMqC,EAAGa,GAAG,GAAIX,EAAGW,GAAG,KAC1B,EAAO/C,KAAKmD,UAEN8B,I,kCAIR,SAAqBC,GACpB,IAAIpC,EAAK,GACLC,EAAK,GACLoC,EAAID,EAAEE,OAAO,EAGbC,EAAI,GACJ3E,EAAI,GACJ4E,EAAI,GACJC,EAAI,GAGRF,EAAE,GAAG,EACL3E,EAAE,GAAG,EACL4E,EAAE,GAAG,EACLC,EAAE,GAAKL,EAAE,GAAK,EAAEA,EAAE,GAGlB,IAAK,IAAIM,EAAI,EAAGA,EAAIL,EAAI,EAAGK,IAC1BH,EAAEG,GAAG,EACL9E,EAAE8E,GAAG,EACLF,EAAEE,GAAG,EACLD,EAAEC,GAAK,EAAIN,EAAEM,GAAK,EAAIN,EAAEM,EAAE,GAI3BH,EAAEF,EAAE,GAAG,EACPzE,EAAEyE,EAAE,GAAG,EACPG,EAAEH,EAAE,GAAG,EACPI,EAAEJ,EAAE,GAAK,EAAED,EAAEC,EAAE,GAAKD,EAAEC,GAGtB,IAAK,IAAIK,EAAI,EAAGA,EAAIL,EAAGK,IAAK,CAC3B,IAAIC,EAAIJ,EAAEG,GAAK9E,EAAE8E,EAAI,GACrB9E,EAAE8E,GAAK9E,EAAE8E,GAAKC,EAAIH,EAAEE,EAAI,GACxBD,EAAEC,GAAKD,EAAEC,GAAKC,EAAIF,EAAEC,EAAI,GAGzB1C,EAAGqC,EAAE,GAAKI,EAAEJ,EAAE,GAAKzE,EAAEyE,EAAE,GACvB,IAAK,IAAIK,EAAIL,EAAI,EAAGK,GAAK,IAAKA,EAC7B1C,EAAG0C,IAAMD,EAAEC,GAAKF,EAAEE,GAAK1C,EAAG0C,EAAE,IAAM9E,EAAE8E,GAIrC,IAAK,IAAIA,EAAI,EAAGA,EAAIL,EAAE,EAAGK,IACxBzC,EAAGyC,GAAK,EAAIN,EAAEM,EAAE,GAAK1C,EAAG0C,EAAE,GAI3B,OAFAzC,EAAGoC,EAAE,GAAK,IAAOD,EAAEC,GAAGrC,EAAGqC,EAAE,IAEpB,CAAErC,GAAGA,EAAIC,GAAGA,O,KC9FN2C,E,WA9Cd,aAAmG,IAAvFrF,EAAsF,uDAAnF,GAAIC,EAA+E,uDAAzE,EAAGqF,EAAsE,uDAAjE,EAAGC,EAA8D,uDAAzD,GAAI9F,EAAqD,uDAAnD,EAAGC,EAAgD,uDAA9C,EAAGgB,EAA2C,uDAAlC,EAAGS,EAA+B,wDAAjBqE,EAAiB,4EACjG7F,KAAKK,GAAKA,EACVL,KAAKM,MAAQA,EACbN,KAAK2F,KAAOA,EACZ3F,KAAK4F,KAAOA,EACZ5F,KAAKF,EAAIA,EACTE,KAAKD,EAAIA,EACTC,KAAKe,SAAWA,EAChBf,KAAK8F,GAAKhG,EACVE,KAAK+F,GAAKhG,EACVC,KAAKgG,OAAS,EACdhG,KAAKiG,QAAU,EACfjG,KAAKwB,OAASA,EACdxB,KAAK6F,WAAaA,E,qCAGnB,WACC,OAAO,IAAI5E,EACVjB,KAAKK,GACLL,KAAK8F,GACL9F,KAAK+F,GACL/F,KAAKgG,OACLhG,KAAKiG,W,kBAIP,SAAK/F,EAAQC,GACZH,KAAKF,GAAKI,EACVF,KAAKD,GAAKI,I,oBAGX,SAAO2B,EAAMC,EAAMC,GAClB,IAAIC,EAAKH,GAAQ9B,KAAKF,EAAIE,KAAKgG,OAAS,GACpC7D,EAAKJ,GAAQ/B,KAAKD,EAAIC,KAAKiG,QAAU,GACrC5D,EAA6B,IAArBC,KAAKC,MAAMJ,EAAIF,GAAYK,KAAKE,IAC5CH,GAAS,IACG,IACXA,GAAS,KAENL,IACHK,EAAiC,GAAzBC,KAAKG,MAAMJ,EAAQ,KAE5BrC,KAAKe,SAAWsB,M,KC7CZ6D,EACC,KADDA,EAEG,KAFHA,EAGG,KAHHA,EAII,KAJJA,EAKC,KALDA,EAMC,MANDA,EAOO,KAPPA,EAQK,KARLA,EASG,KAGHC,EACC,EADDA,EAEM,EAFNA,EAGG,EAHHA,EAIC,EAJDA,EAKC,EAGDC,EAAiB,CACtB,CAAEtF,KAAK,OAAQI,MAAO,IAAKC,OAAQ,IAAKkF,aAAc,GACtD,CAAEvF,KAAK,aAAcI,MAAO,GAAIC,OAAQ,IAAKkF,aAAc,GAC3D,CAAEvF,KAAK,SAAUI,MAAO,IAAKC,OAAQ,IAAKkF,aAAc,GACxD,CAAEvF,KAAK,OAAQI,MAAO,GAAIC,OAAQ,GAAIkF,aAAc,GACpD,CAAEvF,KAAK,OAAQI,MAAO,IAAKC,OAAQ,IAAKkF,aAAc,ICyFxCC,E,WA9Gd,aAA6F,IAAjFjG,EAAgF,uDAA7E,GAAIgD,EAAyE,uDAAvE8C,EAAiBrG,EAAsD,uDAApD,EAAGC,EAAiD,uDAA/C,EAAGmB,EAA4C,uDAAtC,EAAGC,EAAmC,uDAA5B,EAAGJ,EAAyB,uDAAhB,EAAGS,EAAa,4EAC3FxB,KAAKK,GAAKA,EACVL,KAAKqD,EAAIA,EACTrD,KAAKF,EAAIA,EACTE,KAAKD,EAAIA,EACTC,KAAKkB,MAAQA,EACblB,KAAKmB,OAASA,EACdnB,KAAKe,SAAWA,EAChBf,KAAKwB,OAASA,E,8CAGf,WACC,OAAQxB,KAAKqD,GACZ,KAAK8C,EACL,KAAKA,EACJ,OAAO,EACR,KAAKA,EACL,KAAKA,EACL,KAAKA,EACL,QACC,OAAO,K,uBAIV,WACC,OAAQnG,KAAKqD,GACZ,KAAK8C,EACJ,OAAO,EACR,KAAKA,EACL,KAAKA,EACL,KAAKA,EACL,KAAKA,EACL,QACC,OAAO,K,uBAIV,WACC,OAAQnG,KAAKqD,GACZ,KAAK8C,EACL,KAAKA,EACL,KAAKA,EACJ,OAAO,EACR,KAAKA,EACL,KAAKA,EACL,QACC,OAAO,K,eAIV,WACC,OAAO,IAAIlF,EACVjB,KAAKK,GACLL,KAAKF,EAAIE,KAAKkB,MAAQ,EACtBlB,KAAKD,EAAIC,KAAKmB,OAAS,EACvBnB,KAAKkB,MACLlB,KAAKmB,U,kBAIP,SAAKU,EAAQ3B,EAAQC,GACpB,OAAQ0B,GACP,IAAK,KAML,IAAK,KAML,IAAK,KAML,IAAK,KACJ7B,KAAKF,GAAKI,EACVF,KAAKD,GAAKI,EACVH,KAAKkB,OAAShB,EACdF,KAAKmB,QAAUhB,EACf,MACD,IAAK,KACJH,KAAKF,GAAKI,EACVF,KAAKD,GAAKI,K,oBAOb,SAAO2B,EAAMC,EAAMC,GAClB,IAAIC,EAAKH,EAAO9B,KAAKF,EACjBqC,EAAKJ,EAAO/B,KAAKD,EACjBsC,EAA6B,IAArBC,KAAKC,MAAMJ,EAAIF,GAAYK,KAAKE,IAC5CH,GAAS,IACG,IACXA,GAAS,KAENL,IACHK,EAAiC,GAAzBC,KAAKG,MAAMJ,EAAQ,KAE5BrC,KAAKe,SAAWsB,M,KCeHkE,E,WAzHd,aAAwE,IAA5DC,EAA2D,uDAAnD,KAAMC,EAA6C,uDAAjC,KAAMC,EAA2B,uDAArB,KAAMC,EAAe,uDAAL,KAAK,oBACtE3G,KAAKwG,QAAUA,EACfxG,KAAKyG,YAAcA,EACnBzG,KAAK4G,kBAAoB,GACzB5G,KAAK0G,MAAQA,EACb1G,KAAK2G,UAAYA,EACjB3G,KAAK6G,gBAAkB,G,gDAGxB,SAAaC,GACZ,OAAOZ,EAA6BY,I,wBAGrC,SAAWA,GACV,OAAOZ,EAA2BY,I,gCAInC,WACK,OAAS9G,KAAKyG,cACjBzG,KAAK4G,kBAAoB5G,KAAKyG,YAAYM,KAAI,SAAAC,GAAC,OAAIA,EAAE/B,YAElD,MAAQjF,KAAK2G,YAChB3G,KAAK6G,gBAAkB7G,KAAK2G,UAAUI,KAAI,SAAAC,GAAC,OAAIA,EAAE/B,c,2BAKnD,SAAcgC,GACb,IAAMC,EAAsB,EAAdD,EACVE,EAAM7E,KAAKG,MAAMyE,GAMrB,OAHIC,GAAO,IACVA,EAAM,GAEA,CACNA,IAAKA,EACL9D,EAAG6D,EAAQC,K,mCAIb,SAAsBF,GAAc,IAAD,OAC5BG,EAAYpH,KAAKqH,cAAcJ,GACrC,OAAOjH,KAAKwG,QAAQO,KAAI,SAAC9G,EAAG6G,GAC3B,IAAK7G,EAAEqH,SACN,OAAOrH,EAER,IAAIsH,EAAKtH,EAAEQ,QACP+G,EAAU,EAAKZ,kBAAkBE,GAGrC,OAFAS,EAAGhH,IAAMiH,EAAQJ,EAAUD,KAAKM,SAASL,EAAU/D,GAE5CkE,O,iCAIT,SAAoBN,GAAc,IAAD,OAC1BG,EAAYpH,KAAKqH,cAAcJ,GACrC,OAAOjH,KAAK0G,MAAMK,KAAI,SAACrG,EAAGoG,GACzB,IAAKpG,EAAE4G,SACN,OAAO5G,EAER,IAAIgH,EAAKhH,EAAED,QACP+G,EAAU,EAAKX,gBAAgBC,GAEnC,OADAY,EAAGnH,IAAMiH,EAAQJ,EAAUD,KAAKM,SAASL,EAAU/D,GAC5CqE,O,mBAIT,WAAS,IAAD,OACP,OAAO,IAAInB,EACVvG,KAAKwG,QAAQO,KAAI,SAAA9G,GAAC,OAAIA,EAAEQ,WACxBT,KAAKwG,QAAQO,KAAI,SAAC9G,EAAG6G,GAEpB,OAAO,IAAIpC,EACV,EAAKiD,aAAab,GAAQ,GAC1B7G,EAAEM,IAAIE,QACNR,EAAEM,IAAIE,QACNR,EAAEM,IAAIE,QACNR,EAAEM,IAAIE,SACN,GAAO,GAAO,GAAM,MAGtBT,KAAK0G,MAAMK,KAAI,SAAArG,GAAC,OAAIA,EAAED,WACtBT,KAAK0G,MAAMK,KAAI,SAACrG,EAAGoG,GAElB,OAAO,IAAIpC,EACV,EAAKkD,WAAWd,GAAQ,GACxBpG,EAAEH,IAAIE,QACNC,EAAEH,IAAIE,QACNC,EAAEH,IAAIE,QACNC,EAAEH,IAAIE,SACN,GAAO,GAAO,GAAM,S,qBAMxB,SAAQoH,GACP,GAAI7H,KAAKwG,QAAQpB,SAAWyC,EAAGrB,QAAQpB,OACtC,OAAO,EAER,IAAK,IAAII,EAAI,EAAGA,EAAIxF,KAAKwG,QAAQpB,OAAQI,IACxC,IAAKxF,KAAKwG,QAAQhB,GAAG7E,QAAQkH,EAAGrB,QAAQhB,IACvC,OAAO,EAIT,GAAIxF,KAAK0G,MAAMtB,SAAWyC,EAAGnB,MAAMtB,OAClC,OAAO,EAER,IAAK,IAAII,EAAI,EAAGA,EAAIxF,KAAK0G,MAAMtB,OAAQI,IACtC,IAAKxF,KAAK0G,MAAMlB,GAAG7E,QAAQkH,EAAGnB,MAAMlB,IACnC,OAAO,EAIT,OAAO,M,KC0uBMsC,E,WAt1Bd,aAAe,oBACd9H,KAAKkB,MAAQ,KACblB,KAAKmB,OAAS,KAEdnB,KAAK+H,oBAAsB,EAC3B/H,KAAKgI,qBAAuB,EAC5BhI,KAAKiI,cAAgB,GACrBjI,KAAKkI,aAAc,EACnBlI,KAAKmI,YAAc,KACnBnI,KAAKoI,UAAY,KAEjBpI,KAAKqI,UAAY,EACjBrI,KAAKsI,QAAU,GACftI,KAAKuI,WAAa,EAClBvI,KAAKwI,SAAW,GAChBxI,KAAKyI,QAAU,EACfzI,KAAK0I,MAAQ,GACb1I,KAAK2I,QAAU,EACf3I,KAAK4I,MAAQ,GACb5I,KAAK6I,UAAY,EACjB7I,KAAK8I,OAAS,GAEd9I,KAAK+I,SAAW,OAEhB/I,KAAKgJ,YAAa,EAClBhJ,KAAKiJ,WAAa,K,+CAGnB,SAAYC,EAAWC,EAAgBC,EAAYC,EAASC,EAAcC,GACzE,IAAI1B,EAAK,IAAItB,EACZvG,KAAKwJ,aAAaN,EAAWC,EAAgBC,GAC7C,KACApJ,KAAKyJ,WAAWJ,EAASC,EAAcC,GACvC,MAEDvJ,KAAKiI,cAAcyB,KAAK7B,K,0BAGzB,SAAaqB,EAAWC,EAAgBC,GAGvC,IAFA,IAAI5C,EAAU,GACVmD,EAAYrH,KAAKG,MAAMyG,EAAYC,GAC9B3D,EAAI,EAAGA,EAAI0D,EAAW1D,IAAK,CACnC,IAAIlF,EAAQgC,KAAKG,MAAM+C,EAAImE,GACvBC,EAASD,EAAanE,EAAImE,EAC1B7H,EAAOxB,EAAQ8I,EACfS,EAAS,IAAIjJ,EAChBsF,EAAyBV,EAAGoE,EAAQ,GAAItJ,EACxC,IAAIT,EAAMiC,EAAM,GAChB,EACA,IAAIjC,EAAMiC,EAAM,GAChB8H,GAEDpD,EAAQkD,KAAKG,GAEd,OAAOrD,I,wBAGR,SAAW6C,EAASC,EAAcC,GAGjC,IAFA,IAAI7C,EAAQ,GACRiD,EAAYrH,KAAKG,MAAM4G,EAAUC,GAC5B9D,EAAI,EAAGA,EAAI6D,EAAS7D,IAAK,CACjC,IAAIlF,EAAQgC,KAAKG,MAAM+C,EAAImE,GACvB7H,EAAOxB,EAAQiJ,EACfO,EAAO,IAAI1J,EACd8F,EAAuBV,EAAGlF,EAC1B,IAAIT,EAAMiC,EAAM,GAChB,IAAIjC,EAAMiC,EAAM,IAEjB4E,EAAMgD,KAAKI,GAEZ,OAAOpD,I,uBAGR,WACC,IAAIqD,EAAK,IAAIjC,EACbiC,EAAGf,YAAa,EAEhBe,EAAG7I,MAAQlB,KAAKkB,MAChB6I,EAAG5I,OAASnB,KAAKmB,OAEjB4I,EAAGhC,oBAAsB/H,KAAK+H,oBAC9BgC,EAAG/B,qBAAuBhI,KAAKgI,qBAC/B+B,EAAG9B,cAAgBjI,KAAKiI,cACxB8B,EAAG7B,YAAclI,KAAKkI,YACtB6B,EAAG5B,YAAcnI,KAAKmI,YACtB4B,EAAG3B,UAAYpI,KAAKoI,UAEpB2B,EAAG1B,SAAWrI,KAAKqI,SACnB0B,EAAGzB,QAAUtI,KAAKsI,QAClByB,EAAGxB,UAAYvI,KAAKuI,UACpBwB,EAAGvB,SAAWxI,KAAKwI,SACnBuB,EAAGtB,OAASzI,KAAKyI,OACjBsB,EAAGrB,MAAQ1I,KAAK0I,MAChBqB,EAAGpB,OAAS3I,KAAK2I,OACjBoB,EAAGnB,MAAQ5I,KAAK4I,MAChBmB,EAAGlB,SAAW7I,KAAK6I,SACnBkB,EAAGjB,OAAS9I,KAAK8I,OACjBiB,EAAGhB,SAAW/I,KAAKgK,QAEf,OAAShK,KAAKiJ,YACjBjJ,KAAKiJ,WAAWc,K,oCAIlB,WACC,OAAI/J,KAAKkI,YACD,KAEDlI,KAAKiI,cAAcjI,KAAK+H,qBAAqBvB,U,wCAGrD,WACC,OAAIxG,KAAKkI,YACD,KAEDlI,KAAKiI,cAAcjI,KAAK+H,qBAAqBtB,c,qCAGrD,WACC,OAAIzG,KAAKkI,aAGL,IAAMlI,KAAK+H,oBAFP,KAKD/H,KAAKiI,cAAcjI,KAAK+H,oBAAoB,GAAGvB,U,qCAGvD,SAAwByD,GACvB,IAAIC,EAAcC,SAASF,GAC3BjK,KAAKgI,qBAAuBoC,MAAMF,GAAe,EAAIA,EACjD,GAAKlK,KAAKgI,uBACbhI,KAAKgI,qBAAuB,GAE7BhI,KAAKqK,c,6BAGN,WACC,IAAIC,EAAOtK,KAAKiI,cAAc7C,OAAS,EACnCmF,EAAaD,EAAK,EACtB,GAAIC,GAAc,GAGbvK,KAAKiI,cAAcqC,GAAM3J,QAAQX,KAAKiI,cAAcsC,IAEvD,OADAhG,QAAQC,IAAI,8CACL,EAIT,IAAIgG,EAAcxK,KAAKiI,cAAcqC,GAAM7J,QAO3C,OALAT,KAAKiI,cAAgBjI,KAAKiI,cAAclB,KAAI,SAAAc,GAAE,OAAIA,KAClD7H,KAAKiI,cAAcyB,KAAKc,GAExBxK,KAAK+H,oBAAsB/H,KAAKiI,cAAc7C,OAAS,EACvDpF,KAAKqK,aACE,I,gCAGR,WACC,IAAIC,EAAOtK,KAAKiI,cAAc7C,OAAS,EACvC,GAAI,IAAMkF,EACT,OAAO,EAER,GAAIA,IAAStK,KAAK+H,oBACjB,OAAO,EAIR,IADA,IAAIF,EAAK,GACArC,EAAI,EAAGA,EAAI8E,EAAM9E,IACzBqC,EAAG6B,KAAK1J,KAAKiI,cAAczC,IAM5B,OAJAxF,KAAKiI,cAAgBJ,EAErB7H,KAAK+H,oBAAsB/H,KAAKiI,cAAc7C,OAAS,EACvDpF,KAAKqK,aACE,I,8BAGR,WACC,IAAII,EAAOzK,KAAK+H,oBAAsB,EACtC,QAAI0C,GAAQzK,KAAKiI,cAAc7C,UAG/BpF,KAAK+H,oBAAsB0C,EAC3BzK,KAAKqK,aACE,K,kCAGR,WACC,OAAI,IAAMrK,KAAK+H,sBAGf/H,KAAK+H,sBACL/H,KAAKqK,aACE,K,uBAGR,WACCrK,KAAKkI,aAAc,EACnBlI,KAAKiI,cAAclB,KAAI,SAAAc,GAAE,OAAIA,EAAG6C,wBAChC1K,KAAK2K,UAAU,GACf3K,KAAKqK,c,sBAGN,WACCrK,KAAKkI,aAAc,EACnBlI,KAAKmI,YAAc,KACnBnI,KAAKoI,UAAY,KACjBpI,KAAKqK,c,uBAGN,SAAUO,GACT,IAAMC,EAAyC,IAA5B7K,KAAKgI,qBAClB8C,EAAWxI,KAAKG,MAAMmI,EAAOC,GAE/BE,GADWH,EAAQE,EAAWD,GACbA,EAEjBG,EAAeF,EAAW,EAE1BE,GAAgBhL,KAAKiI,cAAc7C,SACtC4F,EAAehL,KAAKiI,cAAc7C,OAAS,EAC3C2F,EAAQ,GAET/K,KAAKmI,YAAcnI,KAAKiI,cAAc+C,GAAcC,sBAAsBF,GAC1E/K,KAAKoI,UAAYpI,KAAKiI,cAAc+C,GAAcE,oBAAoBH,GACtE/K,KAAKqK,c,wBAIN,SAAWhK,EAAIH,EAAQC,GACtB,IAAIqG,EAAUxG,KAAKmL,yBAAyBpE,KAAI,SAAA9G,GAI/C,OAHII,IAAOJ,EAAEI,IACZJ,EAAEM,IAAIwE,KAAK7E,EAAQC,GAEbF,KAERD,KAAKiI,cAAcjI,KAAK+H,qBAAqBvB,QAAUA,EAEvDxG,KAAKoL,sBACJ/K,EAAGgL,QAAQnF,EAAwBA,GACnChG,EAAQC,GAETH,KAAKqK,c,mCAKN,SAAsB1C,EAAczH,EAAQC,GAEvCH,KAAK+H,oBAAsB,IAC9B/H,KAAKiI,cAAcjI,KAAK+H,qBAAqBtB,YAAczG,KAAKsL,aAC/DtL,KAAKuL,6BACL5D,EAAczH,EAAQC,IAIpBH,KAAK+H,oBAAuB/H,KAAKiI,cAAc7C,OAAS,IAC3DpF,KAAKiI,cAAcjI,KAAK+H,oBAAoB,GAAGtB,YAAczG,KAAKwL,aACjExL,KAAKiI,cAAcjI,KAAK+H,oBAAoB,GAAGtB,YAC/CkB,EAAczH,EAAQC,M,6BAKzB,SAAgBE,GACf,IAAKA,EAAGoL,WAAWvF,GAClB,OAAO,KAGR,IAAMjG,EAAID,KAAKmL,yBAAyBO,MAAK,SAAAzL,GAAC,OAAII,IAAOJ,EAAEI,MAE3D,OAAKJ,EAAEqH,SAGY,CAClBjH,GAAIJ,EAAEI,GACNS,KAAMb,EAAEa,KACRD,GAAIZ,EAAEY,IALC,O,4BAWT,SAAegJ,GACd7J,KAAKiI,cAAgBjI,KAAKiI,cAAclB,KAAI,SAAAc,GAa3C,OAZAA,EAAGrB,QAAUqB,EAAGrB,QAAQO,KAAI,SAAA9G,GAC3B,OAAI4J,EAAOxJ,KAAOJ,EAAEI,KAGhBwJ,EAAO8B,OACV1L,EAAE2L,SAEF3L,EAAEa,KAAO+I,EAAO/I,KAChBb,EAAEY,GAAKgJ,EAAOhJ,KANPZ,KAUF4H,KAER7H,KAAKqK,c,kCAGN,WACC,OAAIrK,KAAKkI,YACD,KAEDlI,KAAKiI,cAAcjI,KAAK+H,qBAAqBrB,Q,sCAGrD,WACC,OAAI1G,KAAKkI,YACD,KAEDlI,KAAKiI,cAAcjI,KAAK+H,qBAAqBpB,Y,mCAGrD,WACC,OAAI3G,KAAKkI,aAGL,IAAMlI,KAAK+H,oBAFP,KAKD/H,KAAKiI,cAAcjI,KAAK+H,oBAAoB,GAAGrB,Q,sBAIvD,SAASrG,EAAIH,EAAQC,GACpB,IAAIuG,EAAQ1G,KAAK6L,uBAAuB9E,KAAI,SAAArG,GAI3C,OAHIL,IAAOK,EAAEL,IACZK,EAAEH,IAAIwE,KAAK7E,EAAQC,GAEbO,KAERV,KAAKiI,cAAcjI,KAAK+H,qBAAqBrB,MAAQA,EAErD1G,KAAK8L,oBACJzL,EAAGgL,QAAQnF,EAAsBA,GACjChG,EAAQC,GAETH,KAAKqK,c,iCAKN,SAAoBzC,EAAY1H,EAAQC,GAEnCH,KAAK+H,oBAAsB,IAC9B/H,KAAKiI,cAAcjI,KAAK+H,qBAAqBpB,UAAY3G,KAAKsL,aAC7DtL,KAAK+L,2BACLnE,EAAY1H,EAAQC,IAIlBH,KAAK+H,oBAAuB/H,KAAKiI,cAAc7C,OAAS,IAC3DpF,KAAKiI,cAAcjI,KAAK+H,oBAAoB,GAAGpB,UAAY3G,KAAKwL,aAC/DxL,KAAKiI,cAAcjI,KAAK+H,oBAAoB,GAAGpB,UAC/CiB,EAAY1H,EAAQC,M,uBAKvB,WAEC,OADAH,KAAKyI,QAAU,EACRvC,EAAuBlG,KAAKyI,S,wBAGpC,SAAW3I,EAAEC,EAAGO,EAAO4C,EAAYC,EAAU6I,GAC5C,IAAIhF,EAAI,IAAItC,EACX1E,KAAKiM,YAAa3L,EAClB,IAAIT,EAAMC,EAAEC,GACZ,IAAIF,EAAMC,EAAEC,GACZ,IAAIF,EAAMC,EAAEC,GACZ,IAAIF,EAAMC,EAAEC,GACZmD,EACAC,EACA6I,GAKD,OAHAhM,KAAK0I,MAAQ1I,KAAK0I,MAAM3B,KAAI,SAACnC,GAAD,OAAQA,KACpC5E,KAAK0I,MAAMgB,KAAK1C,GAChBhH,KAAKqK,YACErD,EAAE3G,K,0BAGV,SAAaqI,EAAOrI,EAAIH,EAAQC,GAC/B,OAAOuI,EAAM3B,KAAI,SAAAC,GAIhB,OAHI3G,IAAO2G,EAAE3G,IACZ2G,EAAEkF,SAAShM,EAAOC,GAEZ6G,O,0BAIT,SAAa0B,EAAOrI,EAAIH,EAAQC,GAC/B,OAAOuI,EAAM3B,KAAI,SAAAC,GAIhB,OAHI3G,IAAO2G,EAAE3G,IACZ2G,EAAEmF,SAASjM,EAAQC,GAEb6G,O,wBAIT,SAAW3G,EAAIH,EAAQC,GACtBH,KAAK0I,MAAQ1I,KAAKsL,aAAatL,KAAK0I,MAAOrI,EAAIH,EAAQC,GACvDH,KAAKqK,c,4BAGN,SAAe3B,EAAO5D,EAAKzE,EAAIH,EAAQC,GACtC,OAAOuI,EAAM3B,KAAI,SAAAC,GAIhB,OAHI3G,IAAO2G,EAAE3G,IACZ2G,EAAEoF,KAAKtH,EAAK5E,EAAQC,GAEd6G,O,sBAIT,SAASlC,EAAKzE,EAAIH,EAAQC,GACrBE,EAAGoL,WAAWvF,KACjBlG,KAAK0I,MAAQ1I,KAAKqM,eACjBrM,KAAK0I,MACL5D,EAAKzE,EAAIH,EAAQC,IAGfE,EAAGoL,WAAWvF,KACjBlG,KAAKiI,cAAcjI,KAAK+H,qBAAqBtB,YAAczG,KAAKqM,eAC/DrM,KAAKuL,6BACLzG,EAAKzE,EAAIH,EAAQC,IAGfE,EAAGoL,WAAWvF,KACjBlG,KAAKiI,cAAcjI,KAAK+H,qBAAqBpB,UAAY3G,KAAKqM,eAC7DrM,KAAK+L,2BACLjH,EAAKzE,EAAIH,EAAQC,IAGnBH,KAAKqK,c,yBAIN,WACCrK,KAAK0I,MAAQ1I,KAAK0I,MAAM4D,QAAO,SAAAtF,GAAC,OAAKA,EAAEuF,WACvCvM,KAAKqK,c,2BAGN,SAAchK,GACb,QAAKA,EAAGoL,WAAWvF,KAGnBlG,KAAK0I,MAAQ1I,KAAK0I,MAAM3B,KAAI,SAAAC,GAI3B,OAHI3G,IAAO2G,EAAE3G,KACZ2G,EAAExF,QAAS,GAELwF,KAERhH,KAAKqK,aACE,K,yBAGR,WACCrK,KAAK0I,MAAQ1I,KAAK0I,MAAM3B,KAAI,SAAAC,GAE3B,OADAA,EAAExF,QAAS,EACJwF,KAERhH,KAAKqK,c,0BAGN,WAEC,OADArK,KAAKuI,WAAa,EACXrC,EAA0BlG,KAAKuI,Y,2BAGvC,SAAczI,EAAGC,EAAGO,EAAO0L,GAC1B,IAAIQ,EAAK,IAAI9J,EACZ1C,KAAKyM,eAAgBnM,EACrBR,EAAEC,EAAE,EAAE,EAAE,EACRiM,GAKD,OAHAhM,KAAKwI,SAAWxI,KAAKwI,SAASzB,KAAI,SAAC2F,GAAD,OAAOA,KACzC1M,KAAKwI,SAASkB,KAAK8C,GACnBxM,KAAKqK,YACEmC,EAAGnM,K,2BAGX,SAAcA,EAAIoB,EAAIC,EAAIC,GACzB3B,KAAKwI,SAAWxI,KAAKwI,SAASzB,KAAI,SAAAyF,GAIjC,OAHInM,IAAOmM,EAAGnM,IACbmM,EAAGG,OAAOlL,EAAIC,EAAIC,GAEZ6K,KAERxM,KAAKqK,c,yBAGN,SAAYxI,EAAQxB,EAAIH,EAAQC,GAC1BE,EAAGoL,WAAWvF,KAGnBlG,KAAKwI,SAAWxI,KAAKwI,SAASzB,KAAI,SAAAyF,GAIjC,OAHInM,IAAOmM,EAAGnM,IACbmM,EAAGJ,KAAKvK,EAAQ3B,EAAQC,GAElBqM,KAERxM,KAAKqK,e,2BAGN,SAAchK,EAAIyB,EAAMC,EAAMC,GACxB3B,EAAGoL,WAAWvF,KAGnBlG,KAAKwI,SAAWxI,KAAKwI,SAASzB,KAAI,SAAAyF,GAIjC,OAHInM,IAAOmM,EAAGnM,IACbmM,EAAGI,OAAO9K,EAAMC,EAAMC,GAEhBwK,KAERxM,KAAKqK,e,4BAIN,WACCrK,KAAKwI,SAAWxI,KAAKwI,SAAS8D,QAAO,SAAAE,GAAE,OAAIA,EAAG7J,GAAK,GAAK6J,EAAG5J,GAAK,KAChE5C,KAAKqK,c,8BAGN,SAAiBhK,GAChB,QAAKA,EAAGoL,WAAWvF,KAGnBlG,KAAKwI,SAAWxI,KAAKwI,SAASzB,KAAI,SAAAyF,GAIjC,OAHInM,IAAOmM,EAAGnM,KACbmM,EAAGhL,QAAS,GAENgL,KAERxM,KAAKqK,aACE,K,6BAGR,WACCrK,KAAKwI,SAAWxI,KAAKwI,SAASzB,KAAI,SAAAyF,GAEjC,OADAA,EAAGhL,QAAS,EACLgL,O,yBAIT,WAEC,OADAxM,KAAKqI,UAAY,EACVnC,EAAyBlG,KAAKqI,W,0BAGtC,SAAavI,EAAGC,EAAGO,EAAO0L,GACzB,IAAIa,EAAK,IAAIzL,EACZpB,KAAK8M,cAAexM,EACpBR,EAAEC,EAAE,EAAE,EAAE,EACRiM,GAKD,OAHAhM,KAAKsI,QAAUtI,KAAKsI,QAAQvB,KAAI,SAACgG,GAAD,OAAOA,KACvC/M,KAAKsI,QAAQoB,KAAKmD,GAClB7M,KAAKqK,YACEwC,EAAGxM,K,0BAGX,SAAaA,EAAIoB,EAAIC,EAAIC,GACxB3B,KAAKsI,QAAUtI,KAAKsI,QAAQvB,KAAI,SAAA8F,GAI/B,OAHIxM,IAAOwM,EAAGxM,IACbwM,EAAGF,OAAOlL,EAAIC,EAAIC,GAEZkL,KAER7M,KAAKqK,c,wBAGN,SAAWxI,EAAQxB,EAAIH,EAAQC,GACzBE,EAAGoL,WAAWvF,KAGnBlG,KAAKsI,QAAUtI,KAAKsI,QAAQvB,KAAI,SAAA8F,GAI/B,OAHIxM,IAAOwM,EAAGxM,IACbwM,EAAGT,KAAKvK,EAAQ3B,EAAQC,GAElB0M,KAER7M,KAAKqK,e,0BAGN,SAAahK,EAAIyB,EAAMC,EAAMC,GACvB3B,EAAGoL,WAAWvF,KAGnBlG,KAAKsI,QAAUtI,KAAKsI,QAAQvB,KAAI,SAAA8F,GAI/B,OAHIxM,IAAOwM,EAAGxM,IACbwM,EAAGD,OAAO9K,EAAMC,EAAMC,GAEhB6K,KAER7M,KAAKqK,e,2BAIN,WACCrK,KAAKsI,QAAUtI,KAAKsI,QAAQgE,QAAO,SAAAO,GAAE,OAAIA,EAAG3L,MAAQ,GAAK2L,EAAG1L,OAAS,KACrEnB,KAAKqK,c,6BAGN,SAAgBhK,GACf,QAAKA,EAAGoL,WAAWvF,KAGnBlG,KAAKsI,QAAUtI,KAAKsI,QAAQvB,KAAI,SAAA8F,GAI/B,OAHIxM,IAAOwM,EAAGxM,KACbwM,EAAGrL,QAAS,GAENqL,KAER7M,KAAKqK,aACE,K,2BAGR,WACCrK,KAAKsI,QAAUtI,KAAKsI,QAAQvB,KAAI,SAAA8F,GAE/B,OADAA,EAAGrL,QAAS,EACLqL,O,uBAIT,WAEC,OADA7M,KAAK2I,QAAU,EACRzC,EAAuBlG,KAAK2I,S,wBAGpC,SAAW7I,EAAGC,EAAGO,EAAOqF,GACvB,IAAIqH,EAAK,IAAItH,EACZ1F,KAAKiN,YAAa3M,EAAOqF,EAAM,GAC/B7F,EAAEC,EAAE,GACJ,GAAO,GAKR,OAHAC,KAAK4I,MAAQ5I,KAAK4I,MAAM7B,KAAI,SAAC1D,GAAD,OAAOA,KACnCrD,KAAK4I,MAAMc,KAAKsD,GAChBhN,KAAKqK,YACE2C,EAAG3M,K,0BAGX,SAAaA,EAAIuF,EAAME,EAAIC,EAAIC,EAAQC,GACtCjG,KAAK4I,MAAQ5I,KAAK4I,MAAM7B,KAAI,SAAA1D,GAU3B,OATIhD,IAAOgD,EAAEhD,KACZgD,EAAE7B,QAAS,EACX6B,EAAEwC,YAAa,EACfxC,EAAEuC,KAAOA,EACTvC,EAAEyC,GAAKA,EACPzC,EAAE0C,GAAKA,EACP1C,EAAE2C,OAASA,EACX3C,EAAE4C,QAAUA,GAEN5C,KAERrD,KAAKqK,c,2BAGN,SAAchK,GACb,QAAKA,EAAGoL,WAAWvF,KAGnBlG,KAAK4I,MAAQ5I,KAAK4I,MAAM7B,KAAI,SAAAiG,GAI3B,OAHI3M,IAAO2M,EAAG3M,KACb2M,EAAGxL,QAAS,GAENwL,KAERhN,KAAKqK,aACE,K,sBAGR,SAAShK,EAAIH,EAAQC,GACfE,EAAGoL,WAAWvF,KAGnBlG,KAAK4I,MAAQ5I,KAAK4I,MAAM7B,KAAI,SAAAiG,GAI3B,OAHI3M,IAAO2M,EAAG3M,IACb2M,EAAGjI,KAAK7E,EAAQC,GAEV6M,KAERhN,KAAKqK,e,wBAGN,SAAWhK,EAAIyB,EAAMC,EAAMC,GACrB3B,EAAGoL,WAAWvF,KAGnBlG,KAAK4I,MAAQ5I,KAAK4I,MAAM7B,KAAI,SAAAiG,GAI3B,OAHI3M,IAAO2M,EAAG3M,IACb2M,EAAGJ,OAAO9K,EAAMC,EAAMC,GAEhBgL,KAERhN,KAAKqK,e,yBAGN,WAEC,OADArK,KAAK6I,UAAY,EACV3C,EAAyBlG,KAAK6I,W,0BAGtC,SAAaxF,EAAGnC,EAAOC,GAEtB,IAAI+L,EAAK,IAAI5G,EACZtG,KAAKmN,cAAc9J,EACnBrD,KAAKkB,MAAQ,EACblB,KAAKmB,OAAS,EACdD,EAAMC,EAAO,GACb,GAKD,OAHAnB,KAAK8I,OAAS9I,KAAK8I,OAAO/B,KAAI,SAAC2F,GAAD,OAAOA,KACrC1M,KAAK8I,OAAOY,KAAKwD,GACjBlN,KAAKqK,YACE6C,EAAG7M,K,6BAGX,SAAgBA,GACf,QAAKA,EAAGoL,WAAWvF,KAGnBlG,KAAK8I,OAAS9I,KAAK8I,OAAO/B,KAAI,SAAAmG,GAI7B,OAHI7M,IAAO6M,EAAG7M,KACb6M,EAAG1L,QAAS,GAEN0L,KAERlN,KAAKqK,aACE,K,wBAGR,SAAWhK,EAAIH,EAAQC,GACtB,IAAKE,EAAGoL,WAAWvF,GAClB,OAAO,EAERlG,KAAK8I,OAAS9I,KAAK8I,OAAO/B,KAAI,SAAAmG,GAI7B,OAHI7M,IAAO6M,EAAG7M,IACb6M,EAAGnI,KAAK7E,EAAQC,GAEV+M,KAERlN,KAAKqK,c,0BAGN,SAAahK,EAAIyB,EAAMC,EAAMC,GACvB3B,EAAGoL,WAAWvF,KAGnBlG,KAAK8I,OAAS9I,KAAK8I,OAAO/B,KAAI,SAAAmG,GAI7B,OAHI7M,IAAO6M,EAAG7M,IAAM6M,EAAGE,aACtBF,EAAGN,OAAO9K,EAAMC,EAAMC,GAEhBkL,KAERlN,KAAKqK,e,wBAGN,SAAWxI,EAAQxB,EAAIH,EAAQC,GAC9B,GAAKE,EAAGoL,WAAWvF,GAUnB,OAPAlG,KAAK8I,OAAS9I,KAAK8I,OAAO/B,KAAI,SAAAmG,GAI7B,OAHI7M,IAAO6M,EAAG7M,IACb6M,EAAGd,KAAKvK,EAAQ3B,EAAQC,GAElB+M,KAERlN,KAAKqK,YACErK,KAAK8I,S,2BAGb,WACC9I,KAAK8I,OAAS9I,KAAK8I,OAAO/B,KAAI,SAAAmG,GAE7B,OADAA,EAAG1L,QAAS,EACL0L,O,yBAIT,SAAY7M,EAAIH,EAAQC,GACvBH,KAAKqN,WAAW,KAAKhN,EAAIH,EAAQC,GACjCH,KAAKsN,YAAY,KAAKjN,EAAIH,EAAQC,GAClCH,KAAKuN,WAAW,KAAKlN,EAAIH,EAAQC,K,0BAGlC,SAAaE,EAAIH,EAAQC,GACxBH,KAAKqN,WAAW,KAAKhN,EAAIH,EAAQC,GACjCH,KAAKsN,YAAY,KAAKjN,EAAIH,EAAQC,GAClCH,KAAKuN,WAAW,KAAKlN,EAAIH,EAAQC,K,4BAGlC,SAAeE,EAAIH,EAAQC,GAC1BH,KAAKqN,WAAW,KAAKhN,EAAIH,EAAQC,GACjCH,KAAKsN,YAAY,KAAKjN,EAAIH,EAAQC,GAClCH,KAAKuN,WAAW,KAAKlN,EAAIH,EAAQC,K,6BAGlC,SAAgBE,EAAIH,EAAQC,GAC3BH,KAAKqN,WAAW,KAAKhN,EAAIH,EAAQC,GACjCH,KAAKsN,YAAY,KAAKjN,EAAIH,EAAQC,GAClCH,KAAKuN,WAAW,KAAKlN,EAAIH,EAAQC,K,sBAGlC,SAASE,EAAIH,EAAQC,GACpBH,KAAKqN,WAAW,KAAKhN,EAAIH,EAAQC,GACjCH,KAAKsN,YAAY,KAAKjN,EAAIH,EAAQC,GAClCH,KAAKuN,WAAW,KAAKlN,EAAIH,EAAQC,GACjCH,KAAKwN,SAASnN,EAAIH,EAAQC,K,wBAG3B,SAAWE,EAAIyB,EAAMC,EAAMC,GAC1BhC,KAAKyN,aAAapN,EAAIyB,EAAMC,EAAMC,GAClChC,KAAK0N,cAAcrN,EAAIyB,EAAMC,EAAMC,GACnChC,KAAK2N,aAAatN,EAAIyB,EAAMC,EAAMC,GAClChC,KAAK4N,WAAWvN,EAAIyB,EAAMC,EAAMC,K,yBAGjC,WACChC,KAAK6N,cACL7N,KAAK8N,gBACL9N,KAAK+N,kBACL/N,KAAKgO,gBAELhO,KAAKqK,c,mBAGN,WACC,OAAOrK,KAAK+I,U,IAGb,SAAYkF,GACPjO,KAAK+I,WAAakF,IAGtBjO,KAAK+I,SAAWkF,EAChBjO,KAAKqK,e,yBAGN,WACC,OAAQrK,KAAKgK,SACZ,IAAK,WACJ,MAAO,CAAC9I,MAAM,KAAMC,OAAO,KAC5B,IAAK,aACJ,MAAO,CAACD,MAAM,KAAMC,OAAO,MAC5B,IAAK,aACJ,MAAO,CAACD,MAAM,KAAMC,OAAO,KAC5B,QACC,OAAO,U,KChuBI+M,E,WA7Hd,aAAe,oBACdlO,KAAKmO,MAAM,SACXnO,KAAKoO,iBAAkB,EACvBpO,KAAKqO,eAAgB,EACrBrO,KAAKsO,aAAc,EACnBtO,KAAKuO,OAAS,EACdvO,KAAKwO,UAAY,EACjBxO,KAAKyO,cAAgB,OACrBzO,KAAKiJ,WAAa,K,6CAGnB,WACC,IAAIyF,EAAK,IAAIR,EACbQ,EAAGP,MAAQnO,KAAK2O,KAChBD,EAAGN,gBAAkBpO,KAAK4O,eAC1BF,EAAGL,cAAgBrO,KAAK6O,aACxBH,EAAGJ,YAActO,KAAK8O,WACtBJ,EAAGH,OAASvO,KAAKM,MACjBoO,EAAGF,UAAYxO,KAAK+O,SACpBL,EAAGD,cAAgBzO,KAAKgP,aAEpB,OAAShP,KAAKiJ,YACjBjJ,KAAKiJ,WAAWyF,K,uBAUlB,WACC,MAAO,CAAC,SAAS,OAAO,SAAS,UAAU,OAAO,Y,gBAGnD,WACC,OAAO1O,KAAKmO,O,IAGb,SAASF,GACRjO,KAAKmO,MAAQF,EACbjO,KAAKqK,c,0BAGN,WACC,OAAOrK,KAAKoO,iB,IAGb,SAAmBH,GAClBjO,KAAKoO,gBAAkBH,EACvBjO,KAAKqK,c,wBAGN,WACC,OAAOrK,KAAKqO,e,IAGb,SAAiBJ,GAChBjO,KAAKqO,cAAgBJ,EACrBjO,KAAKqK,c,sBAGN,WACC,OAAOrK,KAAKsO,a,IAGb,SAAeL,GACdjO,KAAKsO,YAAcL,EACnBjO,KAAKqK,c,wBAGN,WACC,MAAO,CAAC,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,a,qBAI/E,WACC,MAAO,Y,0BAIR,WACC,OAAO,K,iBAGR,WACC,OAAOrK,KAAKuO,Q,IAGb,SAAUN,GACTjO,KAAKuO,OAASN,EACdjO,KAAKqK,c,2BAGN,WACC,MAAO,CAAC,cAAc,QAAQ,SAAS,QAAQ,iB,oBAGhD,WACC,OAAOrK,KAAKwO,W,IAGb,SAAaP,GACZjO,KAAKwO,UAAYP,EACjBjO,KAAKqK,c,+BAON,WACC,MAAO,CAAC,OAAO,WAAW,aAAa,gB,wBAGxC,WACC,OAAOrK,KAAKyO,e,IAEb,SAAiBR,GAChBjO,KAAKyO,cAAgBR,EACrBjO,KAAKqK,gB,YCtHD4E,E,sKAEL,SAAiBnO,GAChB,OAAI,IAAMA,EAAKsE,OACP,KAGP,0BAAMrF,EAAE,OAAOe,K,oBAIjB,WACC,IAAMoO,EAAKlP,KAAKmP,MAAMtF,OAChBuF,EAASpP,KAAKmP,MAAM3N,OAAS0N,EAAG7O,GAAK,KACrCgP,EAAgBrP,KAAKmP,MAAM3N,OAAS,YAAc,KAClD8N,EAAY,YAAcJ,EAAG5O,OAASN,KAAKmP,MAAMI,YAAc,eAAgB,IAC/EC,EAAY,aAAeN,EAAG3O,IAAIT,EAAI,IAAMoP,EAAG3O,IAAIR,EAAI,YAAcmP,EAAGnO,SAAW,IACzF,OACC,uBAAGuO,UAAWA,EAAWG,WAAW,SAASD,UAAWA,GACvD,4BAAQjK,EAAE,KAAK+J,UAAWD,EAAeK,WAAUN,IACnD,0BAAME,UAAU,SAASK,iBAAiB,WAAWT,EAAGrO,IACvDb,KAAK4P,iBAAiBV,EAAGpO,W,GArBL+O,aA2BzBZ,EAAWa,aAAe,CACzBjG,OAAQ,KACRrI,QAAQ,EACR+N,aAAa,GASCN,QCvCTc,E,+JAEL,WACC,OACC,uBAAGP,UAAU,sBACZ,yBAAKQ,MAAM,6BAA6B9O,MAAM,KAAKC,OAAO,KAAK8O,QAAQ,eACtE,0BAAMC,EAAE,0yB,oBAMZ,WACC,IAAMxP,EAAIV,KAAKmP,MAAMrF,KACfsF,EAASpP,KAAKmP,MAAM3N,OAASd,EAAEL,GAAK,KACpCgP,EAAgBrP,KAAKmP,MAAM3N,OAAS,YAAc,KAClD8N,EAAY,UAAY5O,EAAEJ,OAASN,KAAKmP,MAAMI,YAAc,eAAgB,IAC5EC,EAAY,aAAe9O,EAAEH,IAAIT,EAAI,IAAMY,EAAEH,IAAIR,EAAI,IACrD+J,EAAmB,IAAZpJ,EAAEJ,MAAcN,KAAKmQ,YAAc,KAChD,OACC,uBAAGb,UAAWA,EAAWE,UAAWA,GACnC,4BAAQjK,EAAE,KAAK+J,UAAWD,EAAeK,WAAUN,IAClDtF,O,GAtBkB+F,aA4BvBE,EAASD,aAAe,CACvBhG,KAAM,KACNtI,QAAQ,EACR+N,aAAa,GASCQ,QCxCTK,E,4JACL,WACC,IAAMC,EAAOrQ,KAAKmP,MAAMxJ,KAAO,EACzB7F,EAAIE,KAAKmP,MAAM1H,SAAS3H,EAAIuQ,EAC5BtQ,EAAIC,KAAKmP,MAAM1H,SAAS1H,EAAIsQ,EAClC,OACC,0BAAMf,UAAU,uBAAuBxP,EAAGA,EAAGC,EAAGA,EAAGmB,MAAOlB,KAAKmP,MAAMxJ,KAAMxE,OAAQnB,KAAKmP,MAAMxJ,KAAM+J,WAAU1P,KAAKmP,MAAM9O,S,GANnGwP,aAWzBO,EAAWN,aAAe,CACzBzP,GAAI,GACJsF,KAAM,GACN8B,SAAU,MASI2I,QCvBTE,E,4JACL,WACC,IAAMC,EAAMvQ,KAAKmP,MAAMoB,IACjBF,EAAOE,EAAIrP,MAAQ,EACnBG,EAAKkP,EAAIzQ,EAAIuQ,EACb/O,EAAKiP,EAAIxQ,EACT0B,EAAKJ,EACLK,EAAKJ,EAAK,EAAItB,KAAKmP,MAAMxJ,KAC/B,OACC,kBAAC,IAAM6K,SAAP,KACC,0BAAMnP,GAAIA,EAAIC,GAAIA,EAAIG,GAAIA,EAAIC,GAAIA,IAClC,4BAAQ4N,UAAU,uBAAuBpN,GAAIT,EAAIW,GAAIV,EAAI6D,EAAGvF,KAAKmP,MAAMxJ,KAAK,EAAG+J,WAAU,WAAaa,EAAIlQ,U,GAXnFwP,aAiB3BS,EAAaR,aAAe,CAC3BnK,KAAM,GACN4K,IAAK,MAQSD,QCxBTG,E,mKAEL,SAAcF,GACb,IAAKvQ,KAAKmP,MAAMuB,WACf,OAAO,KAER,IAAMC,EAAK,IAAI9Q,EAAM0Q,EAAIzQ,EAAGyQ,EAAIxQ,GAC1B6Q,EAAK,IAAI/Q,EAAM0Q,EAAIzQ,EAAIyQ,EAAIrP,MAAOqP,EAAIxQ,GACtC8Q,EAAK,IAAIhR,EAAM0Q,EAAIzQ,EAAGyQ,EAAIxQ,EAAIwQ,EAAIpP,QAClC2P,EAAK,IAAIjR,EAAM0Q,EAAIzQ,EAAIyQ,EAAIrP,MAAOqP,EAAIxQ,EAAIwQ,EAAIpP,QACpD,OACC,kBAAC,IAAMqP,SAAP,KACC,kBAAC,EAAD,CAAYnQ,GAAI,WAAakQ,EAAIlQ,GAAIoH,SAAUkJ,IAC/C,kBAAC,EAAD,CAAYtQ,GAAI,WAAakQ,EAAIlQ,GAAIoH,SAAUmJ,IAC/C,kBAAC,EAAD,CAAYvQ,GAAI,WAAakQ,EAAIlQ,GAAIoH,SAAUoJ,IAC/C,kBAAC,EAAD,CAAYxQ,GAAI,WAAakQ,EAAIlQ,GAAIoH,SAAUqJ,O,gCAKlD,SAAmBP,GAClB,OAAKvQ,KAAKmP,MAAM4B,WAIf,kBAAC,EAAD,CAAcR,IAAKA,IAHZ,O,oBAOT,WACC,IAAMA,EAAMvQ,KAAKmP,MAAMoB,IACjBS,EAAWhR,KAAKmP,MAAM8B,QAAU,oBAAsB,4BAE5D,OACC,2BACC,0BAAM3B,UAAW0B,EAAUlR,EAAGyQ,EAAIzQ,EAAGC,EAAGwQ,EAAIxQ,EAAGmB,MAAOqP,EAAIrP,MAAOC,OAAQoP,EAAIpP,OAAQuO,WAAU,WAAaa,EAAIlQ,KAC/GL,KAAKkR,cAAcX,GACnBvQ,KAAKmR,mBAAmBZ,Q,GArCPV,aA2CtBY,EAAQX,aAAe,CACtBS,IAAK,KACLU,SAAQ,EACRP,YAAW,EACXK,YAAW,GAUGN,QC3DTW,G,6JAEL,SAAQ5P,EAAQ+O,GACf,OAAK/O,EAIJ,kBAAC,EAAD,CAAS+O,IAAKA,EAAKU,SAAS,IAHrB,O,oBAOT,WACC,IAAMpE,EAAK7M,KAAKmP,MAAMkC,OAChB/B,GAAazC,EAAGtL,OAAS,mBAAqB,aAAesL,EAAGvM,MAChEkP,EAAY,UAAW3C,EAAG9L,SAAW,IAAM8L,EAAG3K,GAAK,IAAM2K,EAAGzK,GAAK,IACvE,OACC,uBAAGkN,UAAWA,EAAWE,UAAWA,GACnC,0BAAM1P,EAAG+M,EAAG/M,EAAGC,EAAG8M,EAAG9M,EAAGmB,MAAO2L,EAAG3L,MAAOC,OAAQ0L,EAAG1L,OAAQuO,WAAU7C,EAAGxM,KACxEL,KAAKsR,QAAQzE,EAAGrL,OAAQqL,EAAG0D,U,GAlBPV,aAwBzBuB,GAAWtB,aAAe,CACzBuB,OAAQ,MAOMD,UChCTG,G,6JAEL,SAAQ/P,EAAQ+O,GACf,OAAK/O,EAIJ,kBAAC,EAAD,CAAS+O,IAAKA,EAAKU,SAAS,IAHrB,O,oBAOT,WACC,IAAMzE,EAAKxM,KAAKmP,MAAMqC,QAChBlC,GAAa9C,EAAGjL,OAAS,oBAAsB,cAAgBiL,EAAGlM,MAClEkP,EAAY,UAAWhD,EAAGzL,SAAW,IAAMyL,EAAGtK,GAAK,IAAMsK,EAAGpK,GAAK,IACvE,OACC,uBAAGkN,UAAWA,EAAWE,UAAWA,GACnC,6BAAStN,GAAIsK,EAAGtK,GAAIE,GAAIoK,EAAGpK,GAAIO,GAAI6J,EAAG7J,GAAIC,GAAI4J,EAAG5J,GAAI8M,WAAUlD,EAAGnM,KACjEL,KAAKsR,QAAQ9E,EAAGhL,OAAQgL,EAAG+D,U,GAlBNV,aAwB1B0B,GAAYzB,aAAe,CAC1B0B,QAAS,MAOKD,UChCTE,G,iKAEL,SAAYzK,EAAG0K,GACd,OAAK1K,EAAExF,OAIHkQ,EAEF,kBAAC,IAAMlB,SAAP,KACC,kBAAC,EAAD,CAAYnQ,GAAI,WAAa2G,EAAE3G,GAAIoH,SAAUT,EAAEhE,KAC/C,kBAAC,EAAD,CAAY3C,GAAI,WAAa2G,EAAE3G,GAAIoH,SAAUT,EAAE/D,MAMjD,kBAAC,IAAMuN,SAAP,KACC,kBAAC,EAAD,CAAYnQ,GAAI,WAAa2G,EAAE3G,GAAIoH,SAAUT,EAAElE,KAC/C,kBAAC,EAAD,CAAYzC,GAAI,WAAa2G,EAAE3G,GAAIoH,SAAUT,EAAEhE,KAC/C,kBAAC,EAAD,CAAY3C,GAAI,WAAa2G,EAAE3G,GAAIoH,SAAUT,EAAE/D,KAC/C,kBAAC,EAAD,CAAY5C,GAAI,WAAa2G,EAAE3G,GAAIoH,SAAUT,EAAEjE,MAjBzC,O,wBAsBT,SAAW9C,EAAG0R,GACb,IAAMzB,EAAI,KAAOjQ,EAAE6C,GAAGhD,EAAI,IAAMG,EAAE6C,GAAG/C,EAAI,MAAQE,EAAE+C,GAAGlD,EAAI,IAAMG,EAAE+C,GAAGjD,EAAI,IAAME,EAAEgD,GAAGnD,EAAI,IAAMG,EAAEgD,GAAGlD,EAAI,IAAME,EAAE8C,GAAGjD,EAAI,IAAMG,EAAE8C,GAAGhD,EAC3H6R,EAAc3R,EAAEiD,WAAa,mBAAqB,KAClD2O,EAAY5R,EAAEkD,SAAW,iBAAmB,KAClD,OACC,0BAAMwO,IAAKA,EAAKzB,EAAGA,EAAGR,WAAUzP,EAAEI,GAAIuR,YAAaA,EAAaC,UAAWA,M,oBAI7E,WAAU,IAAD,OACF7K,EAAIhH,KAAKmP,MAAM2C,KAEfxC,GADWtP,KAAKmP,MAAMuC,OAAS,OAAS,SAChB1K,EAAEzF,OAAS,aAAe,OAASyF,EAAE1G,MAC7DyR,EAAW/K,EAAE/B,QAAQ8B,KAAI,SAAC9G,EAAG6G,GAAJ,OAAc,EAAKkL,WAAW/R,EAAG6G,EAAMmL,eACtE,OACC,uBAAG3C,UAAWA,GACZyC,EACA/R,KAAKkS,YAAYlL,EAAGhH,KAAKmP,MAAMuC,a,GA3Cb7B,aAiDvB4B,GAAS3B,aAAe,CACvBgC,KAAM,KACNJ,QAAQ,GAQMD,UC3DTU,G,kDACL,WAAYhD,GAAQ,IAAD,8BAClB,cAAMA,IACDiD,gBAAkB,EACvB,EAAKC,cAAgB,EACrB,EAAKC,YAAc,GACnB,EAAKC,SAAWC,IAAMC,YACtB,EAAKC,SAAWF,IAAMC,YACtB,EAAKE,WAAaH,IAAMC,YACxB,EAAKG,QAAUJ,IAAMC,YACrB,EAAKI,UAAY,EAAKA,UAAUC,KAAf,gBACjB,EAAKC,WAAa,EAAKA,WAAWD,KAAhB,gBAClB,EAAKE,UAAY,EAAKA,UAAUF,KAAf,gBACjB,EAAKG,QAAU,EAAKA,QAAQH,KAAb,gBAZG,E,sDAenB,SAAmBI,EAAWC,GACzBnT,KAAKmP,MAAMvJ,KAAKC,YACnB7F,KAAKuS,SAASa,QAAQC,U,wBAKxB,WACC,KAAOrT,KAAK0S,SAASU,QAAQE,YAC5BtT,KAAK0S,SAASU,QAAQG,YAAYvT,KAAK0S,SAASU,QAAQE,c,yBAK1D,SAAYE,GACX,IAAIC,EAAQC,SAASC,gBAAgB,6BAA8B,SACnEF,EAAMG,aAAa,IAAI,KACvBH,EAAMG,aAAa,KAAK,SACxBH,EAAMI,YAAcL,EACpBxT,KAAK0S,SAASU,QAAQU,YAAYL,K,wBAInC,SAAW3T,EAAGC,EAAGoB,GAChB,IAAM4S,EAAM/T,KAAK2S,WAAWS,QAC5BW,EAAIH,aAAa,KAAM9T,GACvBiU,EAAIH,aAAa,KAAM7T,GACvBgU,EAAIH,aAAa,KAAM9T,GACvBiU,EAAIH,aAAa,KAAM7T,EAAIoB,K,iCAI5B,SAAoB6S,GACnB,IAAMlU,EAAIkU,EAAKlU,EAAIE,KAAKsS,YAClBvS,EAAIiU,EAAKjU,EAAIC,KAAKsS,YAClBpR,EAAQ8S,EAAK9S,MAA2B,EAAnBlB,KAAKsS,YAC1BnR,EAAS6S,EAAK7S,OAA4B,EAAnBnB,KAAKsS,YAE5B/B,EAAMvQ,KAAK4S,QAAQQ,QACzB7C,EAAIqD,aAAa,IAAK9T,GACtByQ,EAAIqD,aAAa,IAAK7T,GACtBwQ,EAAIqD,aAAa,QAAS1S,GAC1BqP,EAAIqD,aAAa,SAAUzS,K,uBAG5B,SAAUuL,GACT1M,KAAKuS,SAASa,QAAQnF,MAAQjO,KAAKmP,MAAMvJ,KAAKA,O,wBAG/C,SAAW8G,GACV1M,KAAKiU,aAGL,IAFA,IAAIC,EAAMlU,KAAKuS,SAASa,QAAQnF,MAC5BuF,EAAK,GACAhO,EAAI,EAAGA,EAAI0O,EAAI9O,OAAQI,IAC/BgO,GAAMU,EAAI1O,GACN,OAAS0O,EAAI1O,KAChBxF,KAAKmU,YAAYX,GACjBA,EAAK,IAGHA,EAAGpO,OAAS,GACfpF,KAAKmU,YAAYX,K,4BAInB,WACC,GAAI,IAAMxT,KAAKqS,cAGf,IACC,IAAM+B,EAAKpU,KAAK0S,SAASU,QAAQiB,gBAAgBrU,KAAKqS,cAAc,GACpErS,KAAKsU,WAAWF,EAAGtU,EAAIsU,EAAGlT,MAAOkT,EAAGrU,EAAGqU,EAAGjT,QAE1C,IAAMoT,EAAKvU,KAAK0S,SAASU,QAAQoB,UACjCxU,KAAKyU,oBAAoBF,GAExB,MAAOG,GACRnQ,QAAQC,IAAIkQ,M,uBAId,SAAUhI,GACT1M,KAAKoS,gBAAkBpS,KAAKuS,SAASa,QAAQuB,eAC7C3U,KAAKqS,cAAgBrS,KAAKuS,SAASa,QAAQwB,aAC3C5U,KAAK6U,mB,qBAGN,SAAQnI,GACP,GAAI,OAAS1M,KAAKmP,MAAM2F,WAAxB,CAGM,IAAI9H,EAAKhN,KAAKuS,SAASa,QAAQnF,MAAM8G,OACvCR,EAAKvU,KAAK0S,SAASU,QAAQoB,UAC/BjQ,QAAQC,IAAI+P,GACNvU,KAAKiU,aACXjU,KAAKmP,MAAM2F,WACV9U,KAAKmP,MAAMvJ,KAAKvF,GAAI2M,EACpBuH,EAAGzU,EAAGyU,EAAGxU,EACTwU,EAAGrT,MAAOqT,EAAGpT,W,qBAIf,SAAQK,EAAQ+O,GACf,OAAK/O,EAIJ,kBAAC,EAAD,CAAS+O,IAAKA,EAAKU,SAAS,EAAMP,YAAY,IAHvC,O,oBAOT,SAAO1D,GACN,OAAKA,EAAGnH,WAIP,kBAAC,IAAM2K,SAAP,KACC,0BAAMwE,IAAKhV,KAAK2S,WAAYsC,YAAY,MACxC,0BAAMD,IAAKhV,KAAK4S,QAAStD,UAAU,UAAUxP,EAAE,IAAIC,EAAE,IAAImB,MAAO8L,EAAG9L,MAAOC,OAAQ6L,EAAG7L,SACrF,uCACC,8BAAU6T,IAAKhV,KAAKuS,SAAU2C,QAASlV,KAAK6S,UAAWsC,QAASnV,KAAK+S,WAAYqC,QAASpV,KAAKgT,UAAWqC,OAAQrV,KAAKiT,YAPlH,O,yBAaT,SAAYjG,GAEX,OAAIA,EAAGnH,WACC,KAEImH,EAAGpH,KAAK0P,MAAM,MACbvO,KAAI,SAACyM,EAAI1M,GACrB,OACC,2BAAO6K,IAAK7K,EAAO4I,WAAU1C,EAAG3M,GAAIP,EAAE,IAAIyV,GAAG,SAAS/B,Q,oBAKzD,WACC,IAAMxG,EAAKhN,KAAKmP,MAAMvJ,KACV0J,EAAY,MAAOtC,EAAGrH,KAAO,MAAQqH,EAAG1M,MAC1CkP,EAAY,aAAcxC,EAAGlN,EAAI,IAAMkN,EAAGjN,EAAI,IAClD,GAAI,IAAMiN,EAAGjM,SAAU,CAC5B,IAAImB,EAAK8K,EAAGlH,GAAKkH,EAAGhH,OAAS,EACzB5D,EAAK4K,EAAGjH,GAAKiH,EAAG/G,QAAU,EACrBuJ,GAAa,WAAYxC,EAAGjM,SAAW,IAAMmB,EAAK,IAAME,EAAK,IAEvE,OACC,uBAAGkN,UAAWA,EAAWE,UAAWA,GACnC,0BAAMwF,IAAKhV,KAAK0S,SAAUhD,WAAU1C,EAAG3M,GAAImV,SAAS,YAClDxV,KAAKyV,YAAYzI,IAElBhN,KAAK0V,OAAO1I,GACZhN,KAAKsR,QAAQtE,EAAGxL,OAAQwL,EAAGuD,U,GA1KTV,aAgLvBsC,GAASrC,aAAe,CACvBlK,KAAM,KACNkP,WAAY,MAQE3C,UC5LTwD,G,4JAEL,WACC,IAAMC,EAAI5V,KAAKmP,MAAMjO,MACf2U,EAAI7V,KAAKmP,MAAMhO,OACf2U,EAAKF,EAAI,EACTG,EAAKF,EAAI,EAETG,EAAMhW,KAAKmP,MAAMrP,EAAIgW,EACrBG,EAAMjW,KAAKmP,MAAMpP,EAAIgW,EAErBG,EAAMlW,KAAKmP,MAAMrP,EAAIgW,EACrBK,EAAMnW,KAAKmP,MAAMpP,EAAIgW,EAErBK,EAAMpW,KAAKmP,MAAMrP,EAAIgW,EACrBO,EAAMrW,KAAKmP,MAAMpP,EAAIgW,EAC3B,OACC,2BACC,0BAAMjW,EAAGkW,EAAKjW,EAAGkW,EAAK/U,MAAO0U,EAAGzU,OAAQ0U,EAAGS,KAAK,iBAAiBC,OAAO,UAAUtB,YAAY,IAAIvF,WAAU1P,KAAKmP,MAAM9O,KACvH,0BAAMgB,GAAI6U,EAAK5U,GAAI6U,EAAK1U,GAAI2U,EAAK1U,GAAI2U,EAAKpB,YAAY,IAAIsB,OAAO,UACjE,0BAAMlV,GAAI6U,EAAK5U,GAAI6U,EAAK1U,GAAI2U,EAAK1U,GAAI2U,EAAKE,OAAO,MAAMC,gBAAgB,KAAKvB,YAAY,W,GApBzEpF,aA0BnB8F,GAAK7F,aAAe,CACnBzP,GAAI,KACJP,EAAG,EACHC,EAAG,EACHmB,MAAO,IACPC,OAAQ,KAYMwU,U,SC1CTc,G,2JAEL,SAAMC,EAAIC,EAAIC,EAAIf,EAAGgB,GAAU,IAAD,OACvBC,EAAQjB,GAAKgB,EAAU,GAC7B,OAAO,aAAIE,MAAMF,IAAU9P,KAAI,SAAC2F,EAAGvF,GAClC,IAAMpH,EAAI6W,GAAMzP,EAAM,GAAK2P,EAC3B,OACC,0BAAMnF,IAAKxK,EAAK9F,GAAIqV,EAAIpV,GAAIvB,EAAG0B,GAAIkV,EAAIjV,GAAI3B,EAAGkV,YAAY,IAAIsB,OAAO,QAAQ7G,WAAU,EAAKP,MAAM9O,U,oBAKrG,WACC,IAAMuV,EAAI5V,KAAKmP,MAAMjO,MACf2U,EAAI7V,KAAKmP,MAAMhO,OACf2U,EAAKF,EAAI,EACTG,EAAKF,EAAI,EACTa,EAAK1W,KAAKmP,MAAMrP,EAAEgW,EAClBa,EAAK3W,KAAKmP,MAAMrP,EAAEgW,EAClBc,EAAK5W,KAAKmP,MAAMpP,EAAEgW,EAClBiB,EAAKhX,KAAKmP,MAAMpP,EAAEgW,EACxB,OACC,2BACC,0BAAM1U,GAAIqV,EAAIpV,GAAIsV,EAAInV,GAAIiV,EAAIhV,GAAIsV,EAAI/B,YAAY,IAAIsB,OAAO,QAAQ7G,WAAU1P,KAAKmP,MAAM9O,KACzFL,KAAKiX,MAAMP,EAAIC,EAAIC,EAAIf,EAAG,GAC3B,0BAAMxU,GAAIsV,EAAIrV,GAAIsV,EAAInV,GAAIkV,EAAIjV,GAAIsV,EAAI/B,YAAY,IAAIsB,OAAO,QAAQ7G,WAAU1P,KAAKmP,MAAM9O,U,GAzBzEwP,aAgCrB4G,GAAO3G,aAAe,CACrBzP,GAAI,KACJP,EAAG,EACHC,EAAG,EACHmB,MAAO,IACPC,OAAQ,KAWMsV,UChDTS,G,4JAcL,WAAU,IAAD,OACJC,EAAS,GAMb,OALAD,EAAKE,MAAMC,SAAQ,SAAApX,GAClB,IAAMH,EAAIG,EAAE,GAAK,EAAKkP,MAAMrP,EACtBC,EAAIE,EAAE,GAAK,EAAKkP,MAAMpP,EAC5BoX,GAAM,UAAOrX,EAAP,YAAYC,EAAZ,QAGN,2BACC,6BAASoX,OAAQA,EAAQZ,OAAO,e,GAvBjB1G,aAAbqH,GAIEE,MAAQ,CACd,CAAC,GAAG,IACJ,EAAE,GAAG,IACL,EAAE,GAAG,IACL,EAAE,GAAG,IACL,CAAC,EAAE,IACH,CAAC,GAAG,IACJ,CAAC,GAAG,KAkBNF,GAAKpH,aAAe,CACnBzP,GAAI,KACJP,EAAG,EACHC,EAAG,EACHmB,MAAO,GACPC,OAAQ,IAWM+V,UC7CTI,G,4JAEL,WACC,IAAM1B,EAAI5V,KAAKmP,MAAMjO,MACf2U,EAAI7V,KAAKmP,MAAMhO,OACf2U,EAAKF,EAAI,EACTG,EAAKF,EAAI,EACT0B,EAAKvX,KAAKmP,MAAMrP,EAAIgW,EACpB0B,EAAKxX,KAAKmP,MAAMpP,EAAIgW,EACpB0B,EAAKzX,KAAKmP,MAAMpP,EAAIgW,EAC1B,OACC,2BACC,0BAAMjW,EAAGyX,EAAIxX,EAAGyX,EAAItW,MAAO0U,EAAGzU,OAAQ0U,EAAE,EAAGS,KAAK,MAAMC,OAAO,QAAQtB,YAAY,IAAIvF,WAAU1P,KAAKmP,MAAM9O,KAC1G,0BAAMgB,GAAIkW,EAAIjW,GAAIkW,EAAI/V,GAAI8V,EAAI7V,GAAI+V,EAAIlB,OAAO,QAAQtB,YAAY,IAAIvF,WAAU1P,KAAKmP,MAAM9O,U,GAb3EwP,aAmBnByH,GAAKxH,aAAe,CACnBzP,GAAI,KACJP,EAAG,EACHC,EAAG,EACHmB,MAAO,IACPC,OAAQ,KAWMmW,UC7BTI,G,6JAEL,SAAQlW,EAAQ+O,EAAKoH,EAAcC,EAAaxK,GAC/C,OAAK5L,EAIJ,kBAAC,EAAD,CAAS+O,IAAKA,EAAKU,QAAS0G,EAAcjH,WAAYkH,EAAa7G,WAAY3D,IAHxE,O,uBAOT,SAAUF,GACT,OAAQA,EAAG7J,GACV,KAAK8C,EACL,KAAKA,EACJ,OAAQ,kBAAC,GAAD,CAAM9F,GAAI6M,EAAG7M,GAAIP,EAAGoN,EAAGpN,EAAGC,EAAGmN,EAAGnN,EAAGmB,MAAOgM,EAAGhM,MAAOC,OAAQ+L,EAAG/L,SACxE,KAAKgF,EACJ,OAAQ,kBAAC,GAAD,CAAQ9F,GAAI6M,EAAG7M,GAAIP,EAAGoN,EAAGpN,EAAGC,EAAGmN,EAAGnN,EAAGmB,MAAOgM,EAAGhM,MAAOC,OAAQ+L,EAAG/L,SAC1E,KAAKgF,EACJ,OAAQ,kBAAC,GAAD,CAAM9F,GAAI6M,EAAG7M,GAAIP,EAAGoN,EAAGpN,EAAGC,EAAGmN,EAAGnN,EAAGmB,MAAOgM,EAAGhM,MAAOC,OAAQ+L,EAAG/L,SACxE,KAAKgF,EACJ,OAAQ,kBAAC,GAAD,CAAM9F,GAAI6M,EAAG7M,GAAIP,EAAGoN,EAAGpN,EAAGC,EAAGmN,EAAGnN,EAAGmB,MAAOgM,EAAGhM,MAAOC,OAAQ+L,EAAG/L,SACxE,QACC,OAAQ,0BAAMrB,EAAGoN,EAAGpN,EAAGC,EAAGmN,EAAGnN,EAAGmB,MAAOgM,EAAGhM,MAAOC,OAAQ+L,EAAG/L,OAAQuO,WAAUxC,EAAG7M,Q,oBAIpF,WACC,IAAM6M,EAAKlN,KAAKmP,MAAMrG,OAChB0G,EAAY,UAAWtC,EAAGnM,SAAW,IAAMmM,EAAGpN,EAAI,IAAMoN,EAAGnN,EAAI,IACrE,OACC,uBAAGyP,UAAWA,GACZxP,KAAK6X,UAAU3K,GACflN,KAAKsR,QAAQpE,EAAG1L,OAAQ0L,EAAGqD,IAAKrD,EAAGyK,aAAczK,EAAG0K,YAAa1K,EAAGE,kB,GAjChDyC,aAuCzB6H,GAAW5H,aAAe,CACzBhH,OAAQ,MAOM4O,U,4DChDTI,G,kDACL,WAAY3I,GAAQ,IAAD,8BAClB,cAAMA,IACD4I,MAAQ,CACZC,MAAM,EACNnO,OAAQ,CAACxJ,GAAG,GAAIS,KAAK,GAAID,GAAI,IAI9B,EAAKoX,SAAWzF,IAAMC,YACtB,EAAKyF,WAAa1F,IAAMC,YAGxB,EAAK0F,WAAa,EAAKA,WAAWrF,KAAhB,gBAClB,EAAKsF,MAAQ,EAAKA,MAAMtF,KAAX,gBACb,EAAKuF,KAAO,EAAKA,KAAKvF,KAAV,gBACZ,EAAKnH,OAAS,EAAKA,OAAOmH,KAAZ,gBAfI,E,8CAkBnB,SAAWjJ,GACV7J,KAAKsY,SAAS,CACbN,MAAM,EACNnO,OAAQA,M,mBAIV,WACC7J,KAAKsY,SAAS,CACbN,MAAM,M,kBAIR,WACChY,KAAKoY,QACD,OAASpY,KAAKmP,MAAM2F,YAGxB9U,KAAKmP,MAAM2F,WAAW,CACrBzU,GAAIL,KAAK+X,MAAMlO,OAAOxJ,GACtBsL,QAAQ,EACR7K,KAAMd,KAAKiY,SAAS7E,QAAQnF,MAC5BpN,GAAI0X,OAAOpO,SAASnK,KAAKkY,WAAW9E,QAAQnF,W,oBAI9C,WACCjO,KAAKoY,QACD,OAASpY,KAAKmP,MAAM2F,YAGxB9U,KAAKmP,MAAM2F,WAAW,CACrBzU,GAAIL,KAAK+X,MAAMlO,OAAOxJ,GACtBsL,QAAQ,M,oBAKV,WACC,OACC,kBAAC,IAAM6E,SAAP,KACC,kBAACgI,GAAA,EAAD,CAAQR,KAAMhY,KAAK+X,MAAMC,KAAMS,QAASzY,KAAKoY,MAAOM,kBAAgB,qBACnE,kBAACC,GAAA,EAAD,CAAatY,GAAG,qBAAhB,eACA,kBAACuY,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,CAAWC,SAAU9Y,KAAKkY,WAAYa,OAAO,QAAQ1Y,GAAG,eAAe2Y,aAAchZ,KAAK+X,MAAMlO,OAAOhJ,GAAIoY,MAAM,SAASC,KAAK,SAASC,WAAS,EAACC,WAAS,IAC3J,kBAACP,GAAA,EAAD,CAAWC,SAAU9Y,KAAKiY,SAAUc,OAAO,QAAQ1Y,GAAG,aAAa2Y,aAAchZ,KAAK+X,MAAMlO,OAAO/I,KAAMmY,MAAM,OAAOC,KAAK,OAAOC,WAAS,KAE5I,kBAACE,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,CAAQC,QAASvZ,KAAK2L,OAAQrL,MAAM,WAApC,UACA,kBAACgZ,GAAA,EAAD,CAAQC,QAASvZ,KAAKoY,MAAO9X,MAAM,WAAnC,UACA,kBAACgZ,GAAA,EAAD,CAAQC,QAASvZ,KAAKqY,KAAM/X,MAAM,WAAlC,e,GArEqBuP,aA6E3BiI,GAAahI,aAAe,CAC3BgF,WAAY,MAOEgD,UCxET0B,IACE,EADFA,GAEG,EAFHA,GAGC,EAHDA,GAMQ,EANRA,GAOS,EAPTA,GAQW,EARXA,GASY,EATZA,GAUK,EAVLA,GAWO,EAXPA,GAYO,GAZPA,GAaO,GAbPA,GAcO,GAdPA,GAeO,GAIPC,GAAkB,CACvB,CAACC,OAAQ,KAAMC,cAAc,EAAOC,IAAMJ,IAC1C,CAACE,OAAQ,KAAMC,cAAc,EAAOC,IAAMJ,IAC1C,CAACE,OAAQ,WAAYC,cAAc,EAAMC,IAAMJ,IAC/C,CAACE,OAAQ,WAAYC,cAAc,EAAMC,IAAMJ,IAC/C,CAACE,OAAQ,WAAYC,cAAc,EAAMC,IAAMJ,IAC/C,CAACE,OAAQ,WAAYC,cAAc,EAAMC,IAAMJ,IAC/C,CAACE,OAAQ,WAAYC,cAAc,EAAMC,IAAMJ,IAC/C,CAACE,OAAQ,WAAYC,cAAc,EAAMC,IAAMJ,IAC/C,CAACE,OAAQ,WAAYC,cAAc,EAAMC,IAAMJ,IAC/C,CAACE,OAAQ,WAAYC,cAAc,EAAMC,IAAMJ,IAC/C,CAACE,OAAQ,WAAYC,cAAc,EAAMC,IAAMJ,IAC/C,CAACE,OAAQ,WAAYC,cAAc,EAAMC,IAAMJ,KAI1CK,G,kDAEL,WAAY1K,GAAQ,IAAD,8BAClB,cAAMA,IACDoD,SAAWC,IAAMC,YACtB,EAAKqH,OAAStH,IAAMC,YACpB,EAAKsH,iBAAmBvH,IAAMC,YAC9B,EAAKuH,UAAY,EAAK7K,MAAM8K,aAAe,EAAK9K,MAAM+K,YACtD,EAAKC,WAAa,EAAKhL,MAAMiL,cAAgB,EAAKjL,MAAMkL,WACxD,EAAKC,OAAS,EAAKnL,MAAMoL,MAGzB,EAAKC,UAAY,KACjB,EAAKC,gBAAkBjB,GACvB,EAAKkB,QAAU,EACf,EAAKC,QAAU,EAGf,EAAKC,aAAe,EAAKA,aAAa9H,KAAlB,gBACpB,EAAK+H,WAAa,EAAKA,WAAW/H,KAAhB,gBAClB,EAAKgI,SAAW,EAAKA,SAAShI,KAAd,gBAChB,EAAKiI,WAAa,EAAKA,WAAWjI,KAAhB,gBAClB,EAAKkI,aAAe,EAAKA,aAAalI,KAAlB,gBAGpB,EAAKmI,eAAiB,EAAKA,eAAenI,KAApB,gBAvBJ,E,4CA0BnB,WACC,IAAMvC,EAAMvQ,KAAK8Z,OAAO1G,QAAQ8H,wBAChC,MAAO,CACNC,EAAGnb,KAAKga,UAAYzJ,EAAIrP,MACxBka,EAAGpb,KAAKma,WAAa5J,EAAIpP,U,6BAK3B,SAAgBuL,GACf,IAAIxF,EAAQlH,KAAKqb,WACb9K,EAAMvQ,KAAK8Z,OAAO1G,QAAQ8H,wBACzBpb,EAAI4M,EAAE4O,QAAU/K,EAAIgL,KACnBxb,EAAI2M,EAAE8O,QAAUjL,EAAIkL,IACtBvb,EAASwM,EAAE4O,QAAUtb,KAAK0a,QAC1Bva,EAASuM,EAAE8O,QAAUxb,KAAK2a,QAU9B,OATA3a,KAAK0b,eAAehP,GACD,CAClBiP,OAAQzU,EAAMiU,EACdS,OAAQ1U,EAAMkU,EACdD,EAAGrb,EAAIoH,EAAMiU,EACbC,EAAGrb,EAAImH,EAAMkU,EACblb,OAAQA,EAASgH,EAAMiU,EACvBhb,OAAQA,EAAS+G,EAAMkU,K,4BAKzB,SAAe1O,GACd1M,KAAK0a,QAAUhO,EAAE4O,QACjBtb,KAAK2a,QAAUjO,EAAE8O,U,2BAGlB,SAAc9O,GACb,GAAI,IAAMA,EAAEmP,OACX,OAAO,EAER,IAAKnP,EAAEoP,OAAOC,UAAUC,SAAS,aAChC,OAAO,EAGR,GADAhc,KAAKwa,UAAY9N,EAAEoP,OAAOG,aAAa,YACnC,OAASjc,KAAKwa,UACjB,OAAO,EAERxa,KAAK0b,eAAehP,GAGpB1M,KAAKya,gBAAkBjB,GAdP,oBAeEC,IAfF,IAehB,2BAAoC,CAAC,IAA1ByC,EAAyB,QACnC,GAAKlc,KAAKwa,UAAU/O,WAAWyQ,EAAIxC,QAOnC,OAJA1Z,KAAKya,gBAAkByB,EAAItC,IACvBsC,EAAIvC,eACP3Z,KAAKwa,UAAYxa,KAAKwa,UAAUnP,QAAQ6Q,EAAIxC,OAAO,MAE7C,GAvBQ,8BAyBhB,OAAO,I,+BAGR,SAAkByC,GACjB,IAAMC,EAAapc,KAAKmP,MAAMoL,MAAM8B,gBAAgBF,GACpD,OAAI,OAASC,IAGbpc,KAAK+Z,iBAAiB3G,QAAQ+E,WAAWiE,IAClC,K,4BAIR,SAAevS,GACd7J,KAAKmP,MAAMoL,MAAMU,eAAepR,K,wBAGjC,SAAW/H,EAAMC,EAAM7B,EAAQC,EAAQ6B,GACtC,IAAM/B,EAAID,KAAKmP,MAAMoL,MACrB,OAAQva,KAAKya,iBACZ,KAAKjB,GACJvZ,EAAEqc,WAAWtc,KAAKwa,UAAWta,EAAQC,GACrC,MACD,KAAKqZ,GACJvZ,EAAEsc,SAASvc,KAAKwa,UAAWta,EAAQC,GACnC,MACD,KAAKqZ,GACJvZ,EAAEuc,YAAYxc,KAAKwa,UAAWta,EAAQC,GACtC,MACD,KAAKqZ,GACJvZ,EAAEwc,aAAazc,KAAKwa,UAAWta,EAAQC,GACvC,MACD,KAAKqZ,GACJvZ,EAAEyc,eAAe1c,KAAKwa,UAAWta,EAAQC,GACzC,MACD,KAAKqZ,GACJvZ,EAAE0c,gBAAgB3c,KAAKwa,UAAWta,EAAQC,GAC1C,MACD,KAAKqZ,GACJvZ,EAAE2c,SAAS5c,KAAKwa,UAAWta,EAAQC,GACnC,MACD,KAAKqZ,GACJvZ,EAAE4c,WAAW7c,KAAKwa,UAAW1Y,EAAMC,EAAMC,GACzC,MACD,KAAKwX,GACJvZ,EAAE6c,SAAS,KAAM9c,KAAKwa,UAAWta,EAAQC,GACzC,MACD,KAAKqZ,GACJvZ,EAAE6c,SAAS,KAAM9c,KAAKwa,UAAWta,EAAQC,GACzC,MACD,KAAKqZ,GACJvZ,EAAE6c,SAAS,KAAM9c,KAAKwa,UAAWta,EAAQC,GACzC,MACD,KAAKqZ,GACJvZ,EAAE6c,SAAS,KAAM9c,KAAKwa,UAAWta,EAAQC,GACzC,MACD,QACCoE,QAAQC,IAAI,2BAA4BxE,KAAKya,gBAAiBza,KAAKwa,c,0BAKtE,SAAa9N,GACZ,GAAiC,WAA7B1M,KAAKmP,MAAM4N,SAASpO,KAAxB,CAGA,IAAItO,EAAKqM,EAAEoP,OAAOG,aAAa,YAC/B,GAAI,OAAS5b,EAAb,CAGA,IAAMJ,EAAID,KAAKmP,MAAMoL,OACjBva,KAAKgd,kBAAkB3c,IAIvBJ,EAAEgd,gBAAgB5c,IAIlBJ,EAAEid,iBAAiB7c,IAInBJ,EAAEkd,cAAc9c,IAIhBJ,EAAEmd,cAAc/c,IAIhBJ,EAAEod,gBAAgBhd,KAnBrBqM,EAAE4Q,qB,wBAyBJ,SAAW5Q,GACV,IAAInM,EAAMP,KAAKud,gBAAgB7Q,GACzBgC,EAAK1O,KAAKmP,MAAM4N,SAChB9c,EAAID,KAAKmP,MAAMoL,MACrB,OAAQ7L,EAAGC,MACV,IAAK,OACJjC,EAAE4Q,iBACFtd,KAAKwa,UAAYva,EAAEud,WAClBjd,EAAI4a,EAAG5a,EAAI6a,EAAG1M,EAAGpO,MAAOoO,EAAGE,eAAgBF,EAAGG,aAAcH,EAAGI,YAEhE,MACD,IAAK,SACJpC,EAAE4Q,iBACFtd,KAAKwa,UAAYva,EAAEwd,aAClBld,EAAI4a,EAAG5a,EAAI6a,EAAG1M,EAAGpO,MAAOoO,EAAGI,YAE5B,MACD,IAAK,UACJpC,EAAE4Q,iBACFtd,KAAKwa,UAAYva,EAAEyd,cAClBnd,EAAI4a,EAAG5a,EAAI6a,EAAG1M,EAAGpO,MAAOoO,EAAGI,YAE5B,MACD,IAAK,OACJpC,EAAE4Q,iBACFtd,KAAKwa,UAAYva,EAAE0d,WAClBpd,EAAI4a,EAAG5a,EAAI6a,EAAG1M,EAAGpO,MAAOoO,EAAGK,UAE5B,MACD,IAAK,SACL,QACC,GAAI/O,KAAK4d,cAAclR,GAEtB,YADAA,EAAE4Q,oB,sBAON,SAAS5Q,GACRA,EAAE4Q,iBACF,IAAMrd,EAAID,KAAKmP,MAAMoL,MACjBha,EAAMP,KAAKud,gBAAgB7Q,GAC3BmR,EAAUnR,EAAEoR,iBAAiB,SACjC,OAAQ9d,KAAKmP,MAAM4N,SAASpO,MAC3B,IAAK,OACJ1O,EAAE8d,cACF,MACD,IAAK,SACJ9d,EAAE+d,gBACF,MACD,IAAK,UACJ/d,EAAEge,iBACF,MACD,IAAK,OACJ,MACD,IAAK,SACL,QACCje,KAAKke,WAAW3d,EAAI4a,EAAG5a,EAAI6a,EAAG7a,EAAIL,OAAQK,EAAIJ,OAAQ0d,GAIpD,IAAMnR,EAAEmP,QAAU7b,KAAKya,kBAAoBjB,IAC9CvZ,EAAEke,cAEHne,KAAKwa,UAAY,KACjBxa,KAAKya,gBAAkBjB,K,wBAGxB,SAAW9M,GACV,GAAI,MAAQ1M,KAAKwa,UAAjB,CAGA,IAAMva,EAAID,KAAKmP,MAAMoL,MACrB7N,EAAE4Q,iBACF,IAAI/c,EAAMP,KAAKud,gBAAgB7Q,GAC3BmR,EAAUnR,EAAEoR,iBAAiB,SACjC,OAAQ9d,KAAKmP,MAAM4N,SAASpO,MAC3B,IAAK,OACJ1O,EAAEme,WAAWpe,KAAKwa,UAAWja,EAAIL,OAAQK,EAAIJ,QAC7C,MACD,IAAK,SACJF,EAAEoe,aAAare,KAAKwa,UAAWja,EAAI4a,EAAG5a,EAAI6a,EAAGyC,GAC7C,MACD,IAAK,UACJ5d,EAAEqe,cAActe,KAAKwa,UAAWja,EAAI4a,EAAG5a,EAAI6a,EAAGyC,GAC9C,MACD,IAAK,OACJ,MACD,IAAK,SACL,QACC7d,KAAKke,WAAW3d,EAAI4a,EAAG5a,EAAI6a,EAAG7a,EAAIL,OAAQK,EAAIJ,OAAQ0d,O,0BAKzD,SAAaxd,EAAIuF,EAAME,EAAIC,EAAIC,EAAQC,GACtCjG,KAAKmP,MAAMoL,MAAMS,aAAa3a,EAAIuF,EAAME,EAAIC,EAAIC,EAAQC,K,oBAKzD,WACC,MAAO,CACN/E,MAAOlB,KAAKga,UACZ7Y,OAAQnB,KAAKma,WACboE,QAASve,KAAKuS,SAASa,QAAQoL,SAAS,GAAGC,a,2BAI7C,SAAcjY,EAAShF,EAAQ+N,GAC9B,GAAI,OAAS/I,EACZ,OAAO,KAER,IAAMkY,EAAYld,EAAS,KAAO,GAClC,OAAOgF,EAAQO,KAAI,SAACmI,EAAIpI,GACvB,OACC,kBAAC,EAAD,CAAY6K,IAAK+M,EAAY5X,EAAMmL,WAAYpI,OAAQqF,EAAI1N,OAAQA,EAAQ+N,YAAaA,S,yBAK3F,SAAY7I,EAAOlF,EAAQ+N,GAC1B,GAAI,OAAS7I,EACZ,OAAO,KAER,IAAMgY,EAAYld,EAAS,KAAO,GAClC,OAAOkF,EAAMK,KAAI,SAACrG,EAAGoG,GACpB,OACC,kBAAC,EAAD,CAAU6K,IAAK+M,EAAY5X,EAAMmL,WAAYnI,KAAMpJ,EAAGc,OAAQA,EAAQ+N,YAAaA,S,2BAKtF,SAAcjH,GACb,OAAOA,EAAQvB,KAAI,SAACgG,EAAGjG,GACtB,OACC,kBAAC,GAAD,CAAY6K,IAAK7K,EAAMmL,WAAYZ,OAAQtE,S,4BAK9C,SAAevE,GACd,OAAOA,EAASzB,KAAI,SAACyF,EAAI1F,GACxB,OACC,kBAAC,GAAD,CAAa6K,IAAK7K,EAAMmL,WAAYT,QAAShF,S,yBAKhD,SAAY9D,EAAOgJ,GAClB,GAAI,OAAShJ,EACZ,OAAO,KAER,IAAMgW,EAAYhN,EAAS,KAAO,GAClC,OAAOhJ,EAAM3B,KAAI,SAACC,EAAGF,GAEpB,OAAIE,EAAEuF,QACE,KAGP,kBAAC,GAAD,CAAUoF,IAAK+M,EAAY5X,EAAMmL,WAAYH,KAAM9K,EAAG0K,OAAQA,S,yBAKjE,SAAY9I,GAAO,IAAD,OACjB,OAAOA,EAAM7B,KAAI,SAACiG,EAAIlG,GACrB,OACC,kBAAC,GAAD,CAAU6K,IAAK7K,EAAMmL,WAAYrM,KAAMoH,EAAI8H,WAAY,EAAKkG,oB,0BAK/D,SAAalS,GACZ,OAAOA,EAAO/B,KAAI,SAACmG,EAAIpG,GACtB,OACC,kBAAC,GAAD,CAAY6K,IAAK7K,EAAMmL,WAAYnJ,OAAQoE,S,gCAK9C,WACC,IAAMyR,EAAI3e,KAAKmP,MAAMoL,MAAMqE,cAC3B,GAAI,OAASD,EACZ,OAAO,KAER,IAEMnP,EAAY,cAFJxP,KAAKga,UAAY2E,EAAEzd,OAAS,EAEF,KAD1BlB,KAAKma,WAAawE,EAAExd,QAAU,EACS,IACrD,OAAQ,0BAAMD,MAAOyd,EAAEzd,MAAOC,OAAQwd,EAAExd,OAAQqO,UAAWA,EAAW8G,KAAK,W,iCAG5E,WAWC,OATetW,KAAKmP,MAAM4N,SAAS8B,aAAa9X,KAAI,SAAC+X,EAAKhY,GACzD,MAAO,MAAOA,EAAO,YAAYgY,EAAI,aAAcA,EAAK,SAIhCC,OAAO,CAC/B,MAAQ/e,KAAKmP,MAAM4N,SAASiC,eAAkB,YAAahf,KAAKmP,MAAM4N,SAASkC,UAAW,aAAcjf,KAAKmP,MAAM4N,SAASkC,UAAW,QAGvHF,OAAO,CACvB,0BACA,0BACA,0BACA,0BACA,0BACA,8BACA,2FACA,mCACA,mCACA,iCACA,mCACA,iCACA,oCACA,yDACA,uCACA,oCACA,qEACA,sEACA,8BACA,+CACA,6BACA,8CACA,mDACA,+DACA,oDACA,iEACA,+D,oBAIF,WACC,IAAM9O,EAAUjQ,KAAKmP,MAAM+K,YAAYjI,WAAa,IAAMjS,KAAKmP,MAAMkL,WAAWpI,WAAa,IAAMjS,KAAKmP,MAAM8K,aAAahI,WAAa,IAAMjS,KAAKmP,MAAMiL,cAAcnI,WAGjKiN,EAAe,SAAWlf,KAAKmP,MAAMgQ,QAAQC,OAG7CC,GAAarf,KAAKga,UAAY,KAAQ,EACtCsF,GAAYtf,KAAKma,WAAa,KAAQ,EACtCoF,EAAiB,aAAeF,EAAY,IAAMC,EAAW,IAK7DE,EAAmB,cAFLH,EAAY,IAEsB,KADnCC,EAAW,IAAO,GAAK,IAC+B,IAKnEG,EAAiB,cAFLJ,EAAY,MAEoB,KADjCC,EAAW,IAAO,IACgC,IAEnE,OACC,kBAAC,IAAM9O,SAAP,KACA,yBAAKwE,IAAKhV,KAAKuS,SAAUjD,UAAW4P,GACnC,yBAAKlP,MAAM,6BAA6BC,QAASA,EAASyP,cAAe1f,KAAK4a,aAAc+E,YAAa3f,KAAK6a,WAAY+E,UAAW5f,KAAK8a,SAAU+E,YAAa7f,KAAK+a,YACrK,+BACE/a,KAAK8f,uBAEP,6BAASzf,GAAG,WAAWP,EAAE,IAAIC,EAAE,IAAImB,MAAM,KAAKC,OAAO,KAAKoV,OAAO,QAAQwJ,aAAa,kBACrF,0BAAM1e,GAAG,IAAII,GAAG,KAAKH,GAAG,IAAII,GAAG,OAC/B,0BAAML,GAAG,KAAKI,GAAG,KAAKH,GAAG,IAAII,GAAG,QAEjC,4BAAQrB,GAAG,WAAW2f,YAAY,KAAKC,aAAa,KAAKC,KAAK,IAAIC,KAAK,IAAIC,OAAO,OAAOC,YAAY,eACpG,0BAAMnQ,EAAE,mBAAmBoG,KAAK,UAEjC,4BAAQjW,GAAG,aAAa2f,YAAY,KAAKC,aAAa,KAAKC,KAAK,IAAIC,KAAK,IAAIC,OAAO,OAAOC,YAAY,eACtG,0BAAMnQ,EAAE,mBAAmBoG,KAAK,UAEjC,uBAAGjW,GAAG,aAAa2U,IAAKhV,KAAK8Z,QAC5B,0BAAM5Y,MAAOlB,KAAKga,UAAW7Y,OAAQnB,KAAKma,WAAY7D,KAAK,UAAUgK,YAAY,SAElF,uBAAGjgB,GAAG,QAAQmP,UAAW+P,EAAgBjJ,KAAK,UAAUC,OAAO,QAAQtB,YAAY,KAClF,0BAAM/T,MAAM,OAAOC,OAAO,SAC1B,0BAAME,GAAG,OAAOI,GAAG,OAAOH,GAAG,IAAII,GAAG,SACpC,4BAAQ6D,EAAE,MAAMrD,GAAG,OAAOE,GAAG,OAAOkU,KAAK,SACzC,4BAAQ/Q,EAAE,KAAKrD,GAAG,OAAOE,GAAG,OAAOkU,KAAK,QAAQrB,YAAY,MAC5D,uBAAG5U,GAAG,gBACL,0BAAMiW,KAAK,OAAOpG,EAAE,8BACpB,0BAAMoG,KAAK,OAAOpG,EAAE,kCACpB,0BAAMoG,KAAK,OAAOpG,EAAE,+BACpB,0BAAMoG,KAAK,OAAOpG,EAAE,oCAErB,uBAAG7P,GAAG,sBACL,0BAAMgB,GAAG,OAAOI,GAAG,OAAOH,GAAG,MAAMI,GAAG,OACtC,0BAAML,GAAG,OAAOI,GAAG,OAAOH,GAAG,MAAMI,GAAG,OACtC,0BAAML,GAAG,OAAOI,GAAG,OAAOH,GAAG,MAAMI,GAAG,OACtC,0BAAML,GAAG,OAAOI,GAAG,OAAOH,GAAG,MAAMI,GAAG,QAEvC,uBAAGrB,GAAG,QACL,0BAAMgB,GAAG,MAAMI,GAAG,MAAMH,GAAG,MAAMI,GAAG,SACpC,0BAAML,GAAG,MAAMI,GAAG,MAAMH,GAAG,MAAMI,GAAG,SACpC,4BAAQ6D,EAAE,KAAKrD,GAAG,MAAME,GAAG,OAAOkU,KAAK,QAAQrB,YAAY,MAC3D,0BAAMqB,KAAK,OAAOpG,EAAE,kCACpB,0BAAMoG,KAAK,OAAOpG,EAAE,sCACpB,0BAAM7O,GAAG,MAAMI,GAAG,MAAMH,GAAG,MAAMI,GAAG,QACpC,0BAAML,GAAG,MAAMI,GAAG,MAAMH,GAAG,OAAOI,GAAG,SACrC,uBAAGrB,GAAG,aACL,0BAAMa,MAAM,MAAMC,OAAO,MAAMrB,EAAE,OAAOC,EAAE,MAAMuW,KAAK,iBAAiBC,OAAO,UAAUtB,YAAY,MACnG,0BAAM5T,GAAG,IAAII,GAAG,IAAIH,GAAG,MAAMI,GAAG,SAChC,0BAAML,GAAG,IAAII,GAAG,IAAIH,GAAG,MAAMI,GAAG,OAAO6U,OAAO,MAAMC,gBAAgB,SAGtE,uBAAGnW,GAAG,eAAeiW,KAAK,QAAQrB,YAAY,KAC7C,0BAAM/T,MAAM,KAAKC,OAAO,KAAKrB,EAAE,MAAMC,EAAE,QACvC,4BAAQwF,EAAE,KAAKrD,GAAG,OAAOE,GAAG,SAC5B,0BAAMlB,MAAM,KAAKC,OAAO,KAAKrB,EAAE,MAAMC,EAAE,UAExC,uBAAGM,GAAG,SACL,0BAAMgB,GAAG,OAAOI,GAAG,OAAOH,GAAG,MAAMI,GAAG,SACtC,0BAAML,GAAG,OAAOI,GAAG,OAAOH,GAAG,MAAMI,GAAG,SACtC,4BAAQ6D,EAAE,KAAKrD,GAAG,OAAOE,GAAG,OAAOkU,KAAK,QAAQrB,YAAY,MAC5D,0BAAMqB,KAAK,OAAOpG,EAAE,sCACpB,0BAAMoG,KAAK,OAAOpG,EAAE,sCACpB,0BAAM7O,GAAG,OAAOI,GAAG,OAAOH,GAAG,MAAMI,GAAG,QACtC,0BAAML,GAAG,OAAOI,GAAG,OAAOH,GAAG,OAAOI,GAAG,SACvC,uBAAGrB,GAAG,cACL,0BAAMa,MAAM,MAAMC,OAAO,MAAMrB,EAAE,OAAOC,EAAE,MAAMuW,KAAK,iBAAiBC,OAAO,UAAUtB,YAAY,MACnG,0BAAM5T,GAAG,OAAOI,GAAG,OAAOH,GAAG,MAAMI,GAAG,SACtC,0BAAML,GAAG,OAAOI,GAAG,OAAOH,GAAG,MAAMI,GAAG,OAAO6U,OAAO,MAAMC,gBAAgB,SAG5E,uBAAGnW,GAAG,gBAAgBiW,KAAK,QAAQrB,YAAY,KAC9C,0BAAM/T,MAAM,KAAKC,OAAO,KAAKrB,EAAE,OAAOC,EAAE,QACxC,4BAAQwF,EAAE,KAAKrD,GAAG,OAAOE,GAAG,SAC5B,0BAAMlB,MAAM,KAAKC,OAAO,KAAKrB,EAAE,OAAOC,EAAE,WAG1C,uBAAGM,GAAG,eAAekW,OAAO,QAAQtB,YAAY,KAC9CjV,KAAKugB,sBAEP,uBAAGlgB,GAAG,YAAYL,KAAKwgB,eAAexgB,KAAKmP,MAAMoL,MAAM/R,WACvD,uBAAGnI,GAAG,WAAWL,KAAKygB,cAAczgB,KAAKmP,MAAMoL,MAAMjS,UACrD,uBAAGjI,GAAG,UAAUL,KAAK0gB,aAAa1gB,KAAKmP,MAAMoL,MAAMzR,SACnD,uBAAGzI,GAAG,UAAUmP,UAAWgQ,EAAkBmB,SAAS,MACpD3gB,KAAKyV,YAAYzV,KAAKmP,MAAMoL,MAAMhP,8BAA8B,GAChEvL,KAAK4gB,cAAc5gB,KAAKmP,MAAMoL,MAAMsG,2BAA2B,GAAO,GACtE7gB,KAAK4gB,cAAc5gB,KAAKmP,MAAMoL,MAAMpP,0BAA0B,GAAM,GACpEnL,KAAK4gB,cAAc5gB,KAAKmP,MAAMoL,MAAMpS,aAAa,GAAO,IAE1D,uBAAG9H,GAAG,QAAQmP,UAAWiQ,GACvBzf,KAAKyV,YAAYzV,KAAKmP,MAAMoL,MAAMxO,4BAA4B,GAC9D/L,KAAK8gB,YAAY9gB,KAAKmP,MAAMoL,MAAMwG,yBAAyB,GAAO,GAClE/gB,KAAK8gB,YAAY9gB,KAAKmP,MAAMoL,MAAM1O,wBAAwB,GAAM,GAChE7L,KAAK8gB,YAAY9gB,KAAKmP,MAAMoL,MAAMnS,WAAW,GAAO,IAEtD,uBAAG/H,GAAG,SAASL,KAAKyV,YAAYzV,KAAKmP,MAAMoL,MAAM7R,OAAO,IACxD,uBAAGrI,GAAG,SAASL,KAAKghB,YAAYhhB,KAAKmP,MAAMoL,MAAM3R,UAGnD,kBAAC,GAAD,CAAcoM,IAAKhV,KAAK+Z,iBAAkBjF,WAAY9U,KAAKib,sB,GAzhBtCpL,aA+hBxBgK,GAAU/J,aAAe,CACxByK,MAAO,KACPwC,SAAU,KACV7C,YAAa,EACbG,WAAY,EACZJ,aAAc,KACdG,cAAe,MAYD6G,oBA3lBA,SAAAC,GAAK,MAAK,CACxB9B,OAAQ,CACP+B,WAAYD,EAAME,OAAOC,QAAQC,cAylBD,CAAEC,WAAW,GAAhCN,CAAwCpH,I,0lBCplBjD2H,G,kDACL,WAAYrS,GAAQ,IAAD,8BAClB,cAAMA,IACD4I,MAAQ,CACZC,MAAM,EACNyJ,YAAY,EACZC,aAAa,EACbC,eAAe,EACfC,WAAW,GAGZ,EAAK5J,KAAO,EAAKA,KAAKlF,KAAV,gBACZ,EAAKsF,MAAQ,EAAKA,MAAMtF,KAAX,gBAEb,EAAK+O,iBAAmB,EAAKA,iBAAiB/O,KAAtB,gBACxB,EAAKgP,mBAAqB,EAAKA,mBAAmBhP,KAAxB,gBAC1B,EAAKiP,qBAAuB,EAAKA,qBAAqBjP,KAA1B,gBAE5B,EAAKkP,kBAAoB,EAAKA,kBAAkBlP,KAAvB,gBACzB,EAAKmP,aAAe,EAAKA,aAAanP,KAAlB,gBACpB,EAAKoP,cAAgB,EAAKA,cAAcpP,KAAnB,gBAErB,EAAKqP,oBAAsB,EAAKA,oBAAoBrP,KAAzB,gBAC3B,EAAKsP,qBAAuB,EAAKA,qBAAqBtP,KAA1B,gBAE5B,EAAKuP,YAAc,EAAKA,YAAYvP,KAAjB,gBACnB,EAAKwP,aAAe,EAAKA,aAAaxP,KAAlB,gBAEpB,EAAKyP,gBAAkB,EAAKA,gBAAgBzP,KAArB,gBACvB,EAAK0P,iBAAmB,EAAKA,iBAAiB1P,KAAtB,gBA5BN,E,wCA+BnB,WACC9S,KAAKsY,SAAS,CAACN,MAAK,M,mBAGrB,SAAMtL,GAEL,IAAIiC,EAAOjC,EAAE+V,cAAcC,QAAQzU,MACnC1J,QAAQC,IAAImK,GACRA,IACH3O,KAAKmP,MAAM4N,SAASpO,KAAOA,GAG5B3O,KAAKsY,SAAS,CACbN,MAAK,EACLyJ,YAAY,EACZC,aAAa,EACbC,eAAe,EACfC,WAAW,M,8BAIb,WACC5hB,KAAKsY,SAAS,CACbmJ,YAAazhB,KAAK+X,MAAM0J,e,kCAI1B,WACCzhB,KAAKmP,MAAM4N,SAASnO,gBAAkB5O,KAAKmP,MAAM4N,SAASnO,iB,gCAG3D,WACC5O,KAAKmP,MAAM4N,SAASlO,cAAgB7O,KAAKmP,MAAM4N,SAASlO,e,4BAGzD,WACC,IAAMH,EAAK1O,KAAKmP,MAAM4N,SACtB,OAAIrO,EAAGE,gBAAkBF,EAAGG,aACnB,kBAAC,KAAD,OAEJH,EAAGE,gBAAkBF,EAAGG,aACpB,kBAAC,KAAD,MAELH,EAAGE,iBAAmBF,EAAGG,aACpB,kBAAC,KAAD,MAED,kBAAC,KAAD,Q,+BAGT,WACC7O,KAAKsY,SAAS,CACboJ,aAAc1hB,KAAK+X,MAAM2J,gB,0BAI3B,WACC1hB,KAAKmP,MAAM4N,SAASjO,YAAa,EACjC9O,KAAKsY,SAAS,CACboJ,aAAa,M,2BAIf,WACC1hB,KAAKmP,MAAM4N,SAASjO,YAAa,EACjC9O,KAAKsY,SAAS,CACboJ,aAAa,M,6BAIf,WACC,OAAI1hB,KAAKmP,MAAM4N,SAASjO,WACf,kBAAC,KAAD,MAED,kBAAC,KAAD,Q,iCAGT,WACC,OAAO9O,KAAKmP,MAAM4N,SAAS4F,oBAAoB5b,KAAI,SAACmN,EAAKpN,GACxD,OACC,kBAAC8b,GAAA,EAAD,CAAkBjR,IAAK7K,EAAO+b,QAAS,kBAACC,GAAA,EAAD,MAAW7J,MAAO/E,EAAKjG,MAAOiG,EAAK6O,MAAO,CAACC,WAAW,U,iCAKhG,WACChjB,KAAKsY,SAAS,CACbqJ,eAAgB3hB,KAAK+X,MAAM4J,kB,kCAI7B,SAAqBsB,GACpBjjB,KAAKmP,MAAM4N,SAAS/N,aAAeiU,EAAMnH,OAAO7N,MAChDjO,KAAKsY,SAAS,CACbqJ,eAAe,EACf3J,MAAM,M,yBAIR,SAAYtL,GACX1M,KAAKoY,MAAM1L,GACX1M,KAAKmP,MAAM+T,mBAAmBC,S,0BAG/B,SAAazW,GACZ1M,KAAKoY,MAAM1L,GACX1M,KAAKmP,MAAMiU,kBAAkBD,S,6BAG9B,WACCnjB,KAAKsY,SAAS,CACbsJ,WAAY5hB,KAAK+X,MAAM6J,c,8BAIzB,SAAiBlV,GAChB,IAAI2W,EAAK3W,EAAEoP,OAAO7N,MACdoV,IACHrjB,KAAKmP,MAAM4N,SAAShO,SAAW5E,SAASkZ,IAEzCrjB,KAAKuiB,oB,iCAGN,WACC,OAAOviB,KAAKmP,MAAM4N,SAASuG,gBAAgBvc,KAAI,SAACmN,EAAKpN,GACpD,OACC,kBAAC8b,GAAA,EAAD,CAAkBjR,IAAK7K,EAAO+b,QAAS,kBAACC,GAAA,EAAD,MAAW7J,MAAO/E,EAAKjG,MAAOnH,EAAOic,MAAO,CAACC,WAAW,U,oBAKlG,WACC,IAAMO,EAAavjB,KAAKwjB,iBAClBC,EAAczjB,KAAK0jB,kBAGnBC,EADY3jB,KAAKmP,MAAM4N,SAAS8B,aACN7e,KAAKmP,MAAM4N,SAASzc,OAC9CsjB,EAAoB,SAAW5jB,KAAKmP,MAAM4N,SAASzc,MAEzD,OACA,kBAAC,KAAD,CAAMD,GAAG,cAAcwjB,SAAU7jB,KAAKmP,MAAM0U,SAAUC,aAAW,EAAC9L,KAAMhY,KAAK+X,MAAMC,KAAMS,QAASzY,KAAKoY,OACtG,kBAAC2L,GAAA,EAAD,CAAUC,aAAW,SAASzK,QAASvZ,KAAKoY,OAC3C,kBAAC6L,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,mBAEvB,kBAACC,GAAA,EAAD,MACA,kBAACL,GAAA,EAAD,CAAUxK,QAASvZ,KAAKmiB,qBACvB,kBAAC+B,GAAA,EAAD,CAAcC,QAAQ,kBACrBnkB,KAAK+X,MAAM4J,cAAgB,kBAAC,KAAD,MAAiB,kBAAC,KAAD,OAE9C,kBAAC0C,GAAA,EAAD,CAAUC,GAAItkB,KAAK+X,MAAM4J,cAAe4C,QAAQ,OAAOC,eAAa,GACnE,kBAACC,GAAA,EAAD,CAAY3jB,KAAK,uBAAuBmN,MAAOjO,KAAKmP,MAAM4N,SAAS/N,aAAc0V,SAAU1kB,KAAKoiB,sBAC9FpiB,KAAK2kB,wBAGR,kBAACP,GAAA,EAAD,MACA,kBAACL,GAAA,EAAD,CAAUxK,QAASvZ,KAAKqiB,aACvB,kBAAC4B,GAAA,EAAD,KACC,kBAAC,KAAD,CAAalB,MAAO,CAAEziB,MAAOqjB,MAE9B,kBAACO,GAAA,EAAD,CAAcC,QAASP,KAExB,kBAACQ,GAAA,EAAD,MACA,kBAACL,GAAA,EAAD,CAAUxK,QAASvZ,KAAKsiB,cACvB,kBAAC2B,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,YAEvB,kBAACC,GAAA,EAAD,MACA,kBAACL,GAAA,EAAD,CAAUC,aAAW,OAAOzK,QAASvZ,KAAKoY,OACzC,kBAAC6L,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,eAEvB,kBAACJ,GAAA,EAAD,CAAUxK,QAASvZ,KAAK6hB,kBACvB,kBAACoC,GAAA,EAAD,KACEV,GAEF,kBAACW,GAAA,EAAD,CAAcC,QAAQ,gBACrBnkB,KAAK+X,MAAM0J,WAAa,kBAAC,KAAD,MAAiB,kBAAC,KAAD,OAE3C,kBAAC4C,GAAA,EAAD,CAAUC,GAAItkB,KAAK+X,MAAM0J,WAAY8C,QAAQ,OAAOC,eAAa,GAChE,kBAACI,GAAA,EAAD,CAAMC,UAAU,MAAMC,gBAAc,GACnC,kBAACf,GAAA,EAAD,CAAUxK,QAASvZ,KAAK8hB,oBACvB,kBAACmC,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,QACtB,kBAACY,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,CAAQC,KAAK,MAAMP,SAAU1kB,KAAK8hB,mBAAoBoD,QAASllB,KAAKmP,MAAM4N,SAASlO,iBAGrF,kBAACkV,GAAA,EAAD,CAAUxK,QAASvZ,KAAK+hB,sBACvB,kBAACkC,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,UACtB,kBAACY,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,CAAQC,KAAK,MAAMP,SAAU1kB,KAAK+hB,qBAAsBmD,QAASllB,KAAKmP,MAAM4N,SAASnO,qBAKzF,kBAACmV,GAAA,EAAD,CAAUxK,QAASvZ,KAAKgiB,mBACvB,kBAACiC,GAAA,EAAD,KACER,GAEF,kBAACS,GAAA,EAAD,CAAcC,QAAQ,iBACrBnkB,KAAK+X,MAAM2J,YAAc,kBAAC,KAAD,MAAiB,kBAAC,KAAD,OAE5C,kBAAC2C,GAAA,EAAD,CAAUC,GAAItkB,KAAK+X,MAAM2J,YAAa6C,QAAQ,OAAOC,eAAa,GACjE,kBAACI,GAAA,EAAD,CAAMC,UAAU,MAAMC,gBAAc,GACnC,kBAACf,GAAA,EAAD,CAAUxK,QAASvZ,KAAKkiB,eACvB,kBAAC+B,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,WAEvB,kBAACJ,GAAA,EAAD,CAAUxK,QAASvZ,KAAKiiB,cACvB,kBAACgC,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,cAIzB,kBAACC,GAAA,EAAD,MACA,kBAACL,GAAA,EAAD,CAAUC,aAAW,SAASzK,QAASvZ,KAAKoY,OAC3C,kBAAC6L,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,iBAEvB,kBAACC,GAAA,EAAD,MACA,kBAACL,GAAA,EAAD,CAAUC,aAAW,UAAUzK,QAASvZ,KAAKoY,OAC5C,kBAAC6L,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,kBAEvB,kBAACC,GAAA,EAAD,MACA,kBAACL,GAAA,EAAD,CAAUC,aAAW,OAAOzK,QAASvZ,KAAKoY,OACzC,kBAAC6L,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,gBAEvB,kBAACJ,GAAA,EAAD,CAAUxK,QAASvZ,KAAKuiB,iBACvB,kBAAC2B,GAAA,EAAD,CAAcC,QAAQ,cACrBnkB,KAAK+X,MAAM6J,UAAY,kBAAC,KAAD,MAAiB,kBAAC,KAAD,OAE1C,kBAACyC,GAAA,EAAD,CAAUC,GAAItkB,KAAK+X,MAAM6J,UAAW2C,QAAQ,OAAOC,eAAa,GAC/D,kBAACC,GAAA,EAAD,CAAY3jB,KAAK,uBAAuBmN,MAAOjO,KAAKmP,MAAM4N,SAAShO,SAAU2V,SAAU1kB,KAAKwiB,kBAC1FxiB,KAAKmlB,6B,GAhSYtV,aAwSvB2R,GAAS1R,aAAe,CACvB+T,SAAU,KACV9G,SAAU,KACVmG,iBAAkB,MASJ1B,U,oBC5ST4D,G,kDACL,WAAYjW,EAAOkW,GAAU,IAAD,8BAC3B,cAAMlW,EAAOkW,IACRtN,MAAQ,CACZC,MAAM,GAEP,EAAKmL,KAAO,EAAKA,KAAKrQ,KAAV,gBACZ,EAAKwS,YAAc,EAAKA,YAAYxS,KAAjB,gBACnB,EAAKyS,YAAc,EAAKA,YAAYzS,KAAjB,gBAPQ,E,wCAU5B,WACC9S,KAAKsY,SAAS,CACbN,MAAM,M,yBAIR,WACChY,KAAKsY,SAAS,CACbN,MAAM,M,yBAIR,SAAYtL,GACX1M,KAAKmP,MAAM4N,SAASzc,MAAQ6J,SAASuC,EAAEoP,OAAO7N,OAC9CjO,KAAKslB,gB,uBAGN,SAAUE,EAAWllB,GACpB,OAAKklB,EAMJ,yBAAKlW,UAAWtP,KAAKmP,MAAMgQ,QAAQsG,kBAAmB1C,MAAO,CAAE2C,gBAAiBplB,IAC/E,kBAAC,KAAD,CAAWyiB,MAAO,CAAEpC,SAAU,OAL9B,yBAAKrR,UAAWtP,KAAKmP,MAAMgQ,QAAQwG,UAAW5C,MAAO,CAAE2C,gBAAiBplB,O,0BAU3E,WAAgB,IAAD,OACRoO,EAAK1O,KAAKmP,MAAM4N,SACtB,OAAOrO,EAAGmQ,aAAa9X,KAAI,SAAC+X,EAAKhY,GAChC,IAAM8e,EAAM,EAAKD,WAAU,EAAO7G,GAC5B+G,EAAS,EAAKF,WAAU,EAAM7G,GACpC,OACC,kBAACgE,GAAA,EAAD,CAAOhiB,KAAK,eAAe6Q,IAAK7K,EAAOmH,MAAOnH,EAAOwI,UAAW,EAAKH,MAAMgQ,QAAQ2G,MAAOZ,QAASpe,IAAU4H,EAAGpO,MAAOylB,KAAMH,EAAKI,YAAaH,EAAQnB,SAAU,EAAKa,mB,oBAKzK,WACC,OACC,kBAAC/M,GAAA,EAAD,CAAQR,KAAMhY,KAAK+X,MAAMC,KAAMS,QAASzY,KAAKslB,YAAa5M,kBAAgB,2BACzE,kBAACC,GAAA,EAAD,CAAatY,GAAG,2BAAhB,iBACA,kBAACuY,GAAA,EAAD,KACE5Y,KAAKimB,qB,GAzDiBpW,aAgE5BuV,GAActV,aAAe,CAC5BiN,SAAU,MAQIkE,oBA5FA,SAAAC,GAAK,MAAK,CACxB4E,MAAO,CACNI,QAAS,GAEVP,UAAW,CACVzkB,MAAO,GACPC,OAAQ,IAETskB,kBAAmB,CAClBvkB,MAAO,GACPC,OAAQ,GACRglB,OAAQ,kBACR7lB,MAAO4gB,EAAMkF,QAAQC,OAAOC,MAC5BC,QAAS,OACTC,eAAgB,SAChBC,WAAY,aA6EoB,CAAElF,WAAW,GAAhCN,CAAwCmE,I,wCC5BxCsB,G,kDAnEd,WAAYvX,GAAQ,IAAD,8BAClB,cAAMA,IACD4I,MAAQ,CACZ4O,YAAY,GAGb,EAAKC,iBAAmB,EAAKA,iBAAiB9T,KAAtB,gBANN,E,uDASnB,SAAoB+T,GACnB,GAAIA,EAAJ,CACC,IAAIC,EAAOpT,SAASqT,gBAChBD,EAAKE,kBACRF,EAAKE,oBACMF,EAAKG,qBAChBH,EAAKG,uBACMH,EAAKI,wBAChBJ,EAAKI,0BACMJ,EAAKK,qBAChBL,EAAKK,2BAKHzT,SAAS0T,eACZ1T,SAAS0T,iBACC1T,SAAS2T,oBACnB3T,SAAS2T,sBACC3T,SAAS4T,qBACnB5T,SAAS4T,uBACC5T,SAAS6T,kBACnB7T,SAAS6T,qB,8BAIX,WACC,IAAMC,GAAgBxnB,KAAK+X,MAAM4O,WAEjC3mB,KAAKynB,oBAAoBD,GAEzBxnB,KAAKsY,SAAS,CACbqO,WAAWa,M,uBAIb,WACC,OAAIxnB,KAAK+X,MAAM4O,WACP,kBAAC,KAAD,MAEA,kBAAC,KAAD,Q,oBAIT,WACC,IAAMe,EAAS1nB,KAAK2nB,YACdC,EAAU5nB,KAAK+X,MAAM4O,WAAa,mBAAqB,oBAE7D,OACC,kBAACkB,GAAA,EAAD,CAASC,MAAOF,GACf,kBAACG,GAAA,EAAD,CAAYC,aAAYJ,EAAStnB,MAAM,UAAUiZ,QAASvZ,KAAK4mB,kBAC7Dc,Q,GA7DyB7X,a,mHCKzBoY,G,kDAEL,WAAY9Y,GAAQ,IAAD,8BAClB,cAAMA,IACD+Y,aAAe,EAAKA,aAAapV,KAAlB,gBAFF,E,gDAKnB,SAAamQ,GACZjjB,KAAKmP,MAAMgZ,oBAAoBlF,EAAMnH,OAAO7N,S,0BAG7C,WACC,OAAOjO,KAAKmP,MAAMiZ,cAAgB,I,yBAGnC,WACC,IAAMC,EAAeroB,KAAKmP,MAAMiZ,cAAc,EAC9C,OAAOpoB,KAAKmP,MAAMmZ,kBAAoBD,I,4BAGvC,WACC,IAAMA,EAAeroB,KAAKmP,MAAMiZ,cAAc,EAC9C,OAAOpoB,KAAKmP,MAAMmZ,kBAAoBD,GAAgB,IAAMA,I,8BAG7D,WACC,OAAO,IAAMroB,KAAKmP,MAAMmZ,kB,0BAGzB,WACC,IAAMD,EAAeroB,KAAKmP,MAAMiZ,cAAc,EAC9C,OAAOpoB,KAAKmP,MAAMmZ,kBAAoBD,I,oBAGvC,WACC,OACC,kBAAC,IAAM7X,SAAP,KAEC,kBAACqX,GAAA,EAAD,CAASC,MAAM,kBACd,8BACC,kBAACC,GAAA,EAAD,CAAY9C,KAAK,MAAM3kB,MAAM,UAAU0nB,aAAW,iBAAiBzO,QAASvZ,KAAKmP,MAAMoZ,iBAAkBC,SAAUxoB,KAAKyoB,oBACvH,kBAAC,KAAD,CAAe9H,SAAS,aAI3B,kBAACkH,GAAA,EAAD,CAASC,MAAM,iBACd,kBAACC,GAAA,EAAD,CAAYznB,MAAM,UAAU0nB,aAAW,iBACrChoB,KAAKmP,MAAMmZ,kBAGd,kBAACT,GAAA,EAAD,CAASC,MAAM,cACd,8BACC,kBAACC,GAAA,EAAD,CAAY9C,KAAK,QAAQ3kB,MAAM,UAAU0nB,aAAW,aAAazO,QAASvZ,KAAKmP,MAAMuZ,aAAcF,SAAUxoB,KAAK2oB,gBACjH,kBAAC,KAAD,CAAkBhI,SAAS,aAK9B,kBAACkH,GAAA,EAAD,CAASC,MAAM,aACd,8BACC,kBAACC,GAAA,EAAD,CAAYznB,MAAM,UAAU0nB,aAAW,YAAYzO,QAASvZ,KAAKmP,MAAMyZ,YAAaJ,SAAUxoB,KAAK6oB,eAClG,kBAAC,KAAD,SAIH,kBAAChB,GAAA,EAAD,CAASC,MAAM,gBACd,8BACC,kBAACC,GAAA,EAAD,CAAYznB,MAAM,UAAU0nB,aAAW,YAAYzO,QAASvZ,KAAKmP,MAAM2Z,eAAgBN,SAAUxoB,KAAK+oB,kBACrG,kBAAC,KAAD,SAKH,kBAAClB,GAAA,EAAD,CAASC,MAAM,kBACd,8BACC,kBAACC,GAAA,EAAD,CAAYC,aAAW,iBAAiB1nB,MAAM,UAAUiZ,QAASvZ,KAAKmP,MAAM6Z,eAAgBR,SAAUxoB,KAAKipB,gBAC1G,kBAAC,KAAD,SAIH,kBAACpB,GAAA,EAAD,CAASqB,kBAAgB,OAAOpB,MAAM,yBACrC,kBAACqB,GAAA,EAAD,CACC9oB,GAAG,sBACHqkB,SAAU1kB,KAAKkoB,aACflP,aAAc,GACd,kBAAC+K,GAAA,EAAD,CAAU9V,MAAO,GAAjB,KACA,kBAAC8V,GAAA,EAAD,CAAU9V,MAAO,GAAjB,KACA,kBAAC8V,GAAA,EAAD,CAAU9V,MAAO,GAAjB,KACA,kBAAC8V,GAAA,EAAD,CAAU9V,MAAO,GAAjB,KACA,kBAAC8V,GAAA,EAAD,CAAU9V,MAAO,IAAjB,a,GAzFqB4B,aAkG3BoY,GAAanY,aAAe,CAC3BwY,gBAAiB,EACjBF,cAAe,EACfQ,YAAa,KACbE,eAAgB,KAChBJ,aAAc,KACdH,iBAAkB,KAClBJ,oBAAqB,KACrBa,eAAgB,MAcFf,U,SC5GTmB,G,kDACL,WAAYja,EAAOkW,GAAU,IAAD,8BAC3B,cAAMlW,EAAOkW,IACRtN,MAAQ,CACZC,MAAM,GAEP,EAAKmL,KAAO,EAAKA,KAAKrQ,KAAV,gBACZ,EAAKwS,YAAc,EAAKA,YAAYxS,KAAjB,gBACnB,EAAKuW,aAAe,EAAKA,aAAavW,KAAlB,gBAPO,E,wCAU5B,WACC9S,KAAKsY,SAAS,CACbN,MAAM,M,yBAIR,WACChY,KAAKsY,SAAS,CACbN,MAAM,M,0BAIR,SAAatL,GACZ,GAAI1M,KAAKmP,MAAMma,aAAc,CAC5B,IAAIjmB,EAAI8G,SAASuC,EAAEoP,OAAO7N,OACpBsb,EAAMnjB,EAAe/C,GAC3BrD,KAAKmP,MAAMma,aAAajmB,EAAGkmB,EAAIroB,MAAOqoB,EAAIpoB,QAE3CnB,KAAKslB,gB,0BAGN,SAAakE,GACZ,IAAMD,EAAMnjB,EAAeojB,GACrB1pB,EAAIypB,EAAIroB,MAAQ,EAAIqoB,EAAIljB,aACxBtG,EAAIwpB,EAAIpoB,OAAS,EAAIooB,EAAIljB,aAC/B,OAAQmjB,GACP,KAAKrjB,EACL,KAAKA,EACJ,OAAQ,kBAAC,GAAD,CAAMrG,EAAGA,EAAGC,EAAGA,EAAGmB,MAAOqoB,EAAIroB,MAAOC,OAAQooB,EAAIpoB,SACzD,KAAKgF,EACJ,OAAQ,kBAAC,GAAD,CAAQrG,EAAGA,EAAGC,EAAGA,EAAGmB,MAAOqoB,EAAIroB,MAAOC,OAAQooB,EAAIpoB,SAC3D,KAAKgF,EACJ,OAAQ,kBAAC,GAAD,CAAMrG,EAAGA,EAAGC,EAAGA,EAAGmB,MAAOqoB,EAAIroB,MAAOC,OAAQooB,EAAIpoB,SACzD,KAAKgF,EACJ,OAAQ,kBAAC,GAAD,CAAMrG,EAAGA,EAAGC,EAAGA,EAAGmB,MAAOqoB,EAAIroB,MAAOC,OAAQooB,EAAIpoB,SACzD,QACC,MAAM,IAAIsoB,MAAM,0B,uBAInB,SAAUD,GACT,IAAMD,EAAMnjB,EAAeojB,GACrBvZ,EAAO,cAAUsZ,EAAIroB,MAAQqoB,EAAIljB,aAA1B,YAA0CkjB,EAAIpoB,OAASooB,EAAIljB,cACxE,OACC,kBAACqjB,GAAA,EAAD,CAASzZ,QAASA,EAASX,UAAWtP,KAAKmP,MAAMgQ,QAAQwG,WACvD3lB,KAAK2pB,aAAaH,M,0BAKtB,WAAgB,IAAD,OAEd,MADkB,CAACrjB,EAAiBA,EAAsBA,EAAmBA,EAAiBA,GAC7EY,KAAI,SAAC6iB,EAAK9iB,GAC1B,IAAM8e,EAAM,EAAKD,UAAUiE,GACrBL,EAAMnjB,EAAewjB,GAC3B,OACC,yBAAKjY,IAAK7K,EAAOic,MAAO,CAACwD,QAAS,iBACjC,2BAAOxD,MAAO,CAACwD,QAAS,QAAUsD,UAAW,WAAYN,EAAIzoB,MAC7D,kBAACgiB,GAAA,EAAD,CAAOhiB,KAAK,gBAAgBmN,MAAO2b,EAAKta,UAAW,EAAKH,MAAMgQ,QAAQ2G,MAAOC,KAAMH,EAAKlB,SAAU,EAAK2E,qB,oBAM3G,WACC,OACC,kBAAC7Q,GAAA,EAAD,CAAQR,KAAMhY,KAAK+X,MAAMC,KAAMS,QAASzY,KAAKslB,YAAa5M,kBAAgB,2BACzE,kBAACC,GAAA,EAAD,yCACA,kBAACC,GAAA,EAAD,KACE5Y,KAAKimB,qB,GAhFgBpW,aAuF3BuZ,GAAatZ,aAAe,CAC3BwZ,aAAc,MAQArI,oBA1GA,SAAAC,GAAK,MAAK,CACxB4E,MAAO,CACNI,QAAS,GAEVP,UAAW,CACVzkB,MAAO,IACPC,OAAQ,QAoGwB,CAAEogB,WAAW,GAAhCN,CAAwCmI,ICnFjDU,G,kDACL,WAAY3a,GAAQ,IAAD,8BAClB,cAAMA,IACD4I,MAAQ,CACZgS,YAAY,GAEb,EAAKC,aAAe,EAAKA,aAAalX,KAAlB,gBAGpB,EAAKmX,aAAezX,IAAMC,YAC1B,EAAKyX,iBAAmB1X,IAAMC,YAC9B,EAAK0X,gBAAkB,EAAKA,gBAAgBrX,KAArB,gBACvB,EAAKsX,iBAAmB,EAAKA,iBAAiBtX,KAAtB,gBACxB,EAAKuX,aAAe,EAAKA,aAAavX,KAAlB,gBACpB,EAAKwX,gBAAkB,EAAKA,gBAAgBxX,KAArB,gBACvB,EAAKyX,mBAAqB,EAAKA,mBAAmBzX,KAAxB,gBAG1B,EAAK0X,kBAAoBhY,IAAMC,YAC/B,EAAKyQ,iBAAmB,EAAKA,iBAAiBpQ,KAAtB,gBACxB,EAAKsQ,gBAAkB,EAAKA,gBAAgBtQ,KAArB,gBACvB,EAAK2X,iBAAmBjY,IAAMC,YApBZ,E,6CAuBnB,SAAUiY,GACT1qB,KAAKsY,SAAS,CACbyR,WAAWW,M,0BAIb,SAAahe,IACG,YAAXA,EAAEwM,MAAiC,QAAVxM,EAAEiF,KAA2B,UAAVjF,EAAEiF,MAGlD3R,KAAK2qB,WAAW3qB,KAAK+X,MAAMgS,c,6BAG5B,WACC/pB,KAAK2qB,WAAU,GACf3qB,KAAKmP,MAAMmb,oB,gCAGZ,WACCtqB,KAAK2qB,WAAU,GACf3qB,KAAKmP,MAAMob,uB,8BAGZ,WACC,OAAOvqB,KAAKkqB,iBAAiB9W,U,0BAG9B,WACCpT,KAAKiqB,aAAa7W,QAAQ4E,S,6BAG3B,WACC,OAAQhY,KAAKmP,MAAM4N,SAASpO,MAC3B,IAAK,OACJ,OAAQ,kBAAC,KAAD,MACT,IAAK,SACJ,OAAQ,kBAAC,KAAD,MACT,IAAK,UACJ,OAAQ,kBAAC,KAAD,MACT,IAAK,OACJ,OAAQ,kBAAC,KAAD,MACT,IAAK,SACJ,OAAQ,kBAAC,KAAD,MACT,IAAK,SACL,QACC,OAAQ,kBAAC,KAAD,S,8BAIX,WACC,OAAO3O,KAAKwqB,kBAAkBpX,U,6BAG/B,WACC,OAAOpT,KAAKyqB,iBAAiBrX,U,oBAG9B,WACC,IAAM+W,EAAkBnqB,KAAKmqB,kBAE7B,OACC,kBAAC,IAAM3Z,SAAP,KACC,kBAACoa,GAAA,EAAD,CAAQnjB,SAAS,SAChB,kBAACojB,GAAA,EAAD,CAASC,QAAQ,WAChB,kBAAC/C,GAAA,EAAD,CAAY9C,KAAK,QAAQ3kB,MAAM,UAAU0nB,aAAW,OAAOzO,QAASvZ,KAAKgqB,cACxE,kBAAC,KAAD,OAED,kBAACe,GAAA,EAAD,CAAYD,QAAQ,KAAKxqB,MAAM,WAA/B,wBACA,yBAAKgP,UAAWtP,KAAKmP,MAAMgQ,QAAQ6L,OACnC,kBAAC,GAAD,CACC1C,gBAAiBtoB,KAAKmP,MAAM8b,oBAC5B7C,cAAepoB,KAAKmP,MAAM+b,kBAC1BtC,YAAa5oB,KAAKmP,MAAMgc,gBACxBrC,eAAgB9oB,KAAKmP,MAAMic,mBAC3B1C,aAAc1oB,KAAKmP,MAAMkc,iBACzB9C,iBAAkBvoB,KAAKmP,MAAMmc,qBAC7BnD,oBAAqBnoB,KAAKmP,MAAMoc,wBAChCvC,eAAgBhpB,KAAKmP,MAAM6Z,iBAE5B,yBAAK1Z,UAAWtP,KAAKmP,MAAMgQ,QAAQ6L,OACnC,kBAACnD,GAAA,EAAD,CAASC,MAAM,sBACd,kBAACC,GAAA,EAAD,CAAY/S,IAAKhV,KAAKkqB,iBAAkBlC,aAAW,qBAAqB1nB,MAAM,UAAUiZ,QAASvZ,KAAKqqB,cACpGF,IAGH,kBAACtC,GAAA,EAAD,CAASC,MAAM,gBACd,kBAACC,GAAA,EAAD,CAAYC,aAAW,eAAe1nB,MAAM,UAAUiZ,QAASvZ,KAAKmP,MAAMqc,WACzE,kBAAC,KAAD,QAGF,kBAAC3D,GAAA,EAAD,CAASC,MAAM,cACd,kBAACC,GAAA,EAAD,CAAYC,aAAW,aAAa1nB,MAAM,WACzC,kBAAC,KAAD,QAGF,kBAAC,GAAD,QAGF,kBAACmrB,GAAA,EAAD,CAAQC,OAAO,OAAO1T,KAAMhY,KAAK+X,MAAMgS,WAAYtR,QAASzY,KAAKgqB,cAChE,kBAAC,KAAD,CAAK/pB,EAAG,GACP,kBAAC8qB,GAAA,EAAD,CAAYD,QAAQ,KAAKjG,UAAU,MAAnC,iBACA,kBAACT,GAAA,EAAD,MACA,kBAACQ,GAAA,EAAD,CAAMC,UAAU,MAAMmD,aAAW,wBAChC,kBAAC2D,GAAA,EAAD,CAAU9P,QAAM,EAACtC,QAASvZ,KAAKsqB,iBAC9B,kBAACrG,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,uBAEvB,kBAACwH,GAAA,EAAD,CAAU9P,QAAM,EAACtC,QAASvZ,KAAKuqB,oBAC9B,kBAACtG,GAAA,EAAD,KACC,kBAAC,KAAD,OAED,kBAACC,GAAA,EAAD,CAAcC,QAAQ,6BAM1B,kBAAC,GAAD,CAAUnP,IAAKhV,KAAKiqB,aAAcpG,SAAU7jB,KAAKoqB,iBAAkBrN,SAAU/c,KAAKmP,MAAM4N,SAAUmG,iBAAkBljB,KAAKkjB,iBAAkBE,gBAAiBpjB,KAAKojB,kBACjK,kBAAC,GAAD,CAAepO,IAAKhV,KAAKwqB,kBAAmBzN,SAAU/c,KAAKmP,MAAM4N,WACjE,kBAAC,GAAD,CAAc/H,IAAKhV,KAAKyqB,iBAAkBnB,aAActpB,KAAKmP,MAAMma,oB,GAjJhDzZ,aAuJvBia,GAASha,aAAe,CACvBiN,SAAU,KACVyO,UAAW,KACXlB,gBAAiB,KACjBC,mBAAoB,KACpBqB,aAAc,KACdX,oBAAqB,EACrBC,kBAAmB,EACnBC,gBAAiB,KACjBC,mBAAoB,KACpBC,iBAAkB,KAClBC,qBAAsB,KACtBnD,oBAAqB,KACrBa,eAAgB,KAChBM,aAAc,MAoBArI,oBA/LA,SAAAC,GAAK,MAAK,CACxB8J,KAAM,CACLa,SAAU,MA6LsB,CAAEtK,WAAW,GAAhCN,CAAwC6I,I,oGClNjDgC,GAAuB7K,aAAW,SAACC,GAAD,MAAY,CACnD6K,KAAM,CACL5qB,OAAQ,GACR6qB,aAAc,EACd9qB,MAAO,KAER+qB,IAAK,CACJD,aAAc,EACdE,WAAY,WARejL,CAUzBkL,MAGEC,G,kDACL,WAAYjd,GAAQ,IAAD,8BAClB,cAAMA,IACD4I,MAAQ,CACZ2S,QAAQ,EACR2B,WAAW,EACXC,UAAU,EACVC,SAAU,GAEX,EAAKC,YAAc,EACnB,EAAKC,KAAO,EAAKA,KAAK3Z,KAAV,gBACZ,EAAKwS,YAAc,EAAKA,YAAYxS,KAAjB,gBACnB,EAAK4Z,UAAY,EAAKA,UAAU5Z,KAAf,gBACjB,EAAK6Z,KAAO,EAAKA,KAAK7Z,KAAV,gBACZ,EAAK8Z,SAAW,EAAKA,SAAS9Z,KAAd,gBAChB,EAAK+Z,WAAa,EAAKA,WAAW/Z,KAAhB,gBAClB,EAAK4V,aAAe,EAAKA,aAAa5V,KAAlB,gBACpB,EAAKyV,iBAAmB,EAAKA,iBAAiBzV,KAAtB,gBAhBN,E,wCAmBnB,WACC9S,KAAKsY,SAAS,CACboS,QAAQ,EACR2B,WAAW,EACXC,UAAU,EACVC,SAAU,IAGP,MAAQvsB,KAAKmP,MAAM2d,WACtB9sB,KAAKmP,MAAM2d,YAGZ9sB,KAAKwsB,YAAc,EAEnBO,OAAOC,sBAAsBhtB,KAAK4sB,Y,yBAGnC,WAEC5sB,KAAKsY,SAAS,CACboS,QAAQ,EACR2B,WAAW,EACXC,UAAU,EACVC,SAAU,IAGP,MAAQvsB,KAAKmP,MAAM8d,UACtBjtB,KAAKmP,MAAM8d,a,wBAIb,WACCjtB,KAAKsY,SAAS,CACbgU,UAAWtsB,KAAK+X,MAAMuU,a,uBAIxB,WACCtsB,KAAKsY,SAAS,CACb+T,WAAYrsB,KAAK+X,MAAMsU,c,kBAIzB,WACCrsB,KAAKsY,SAAS,CACb+T,WAAW,EACXE,SAAU,M,gCAIZ,WACC,OAAqC,IAA9BvsB,KAAKmP,MAAM+d,mB,0BAGnB,WACC,OAAOltB,KAAKmP,MAAMge,YAAc,I,sCAGjC,WACC,OAAO,IAAMntB,KAAK+X,MAAMwU,W,8BAGzB,WACC,IAAM1hB,EAAa7K,KAAKotB,qBACpBb,EAAWvsB,KAAK+X,MAAMwU,SAAW1hB,EACjC0hB,EAAW,IACdA,EAAW,GAEZA,EAAWjqB,KAAKG,MAAM8pB,EAAW1hB,GAAcA,EAC/C7K,KAAKsY,SAAS,CACbiU,SAAUA,M,kCAIZ,WACC,OAAOvsB,KAAK+X,MAAMwU,UAAYvsB,KAAKqtB,kB,0BAGpC,WACC,IAAMxiB,EAAa7K,KAAKotB,qBAClBE,EAAYttB,KAAKqtB,gBACnBd,EAAWvsB,KAAK+X,MAAMwU,SAAW1hB,EACjC0hB,EAAWe,IACdf,EAAWe,GAEZf,EAAWjqB,KAAKG,MAAM8pB,EAAW1hB,GAAcA,EAC/C7K,KAAKsY,SAAS,CACbiU,SAAUA,M,2BAIZ,WAGC,OAAOvsB,KAAKutB,eAAiBvtB,KAAKotB,uB,0BAGnC,WACC,IACII,EAAM,IADKxtB,KAAK+X,MAAMwU,SACCvsB,KAAKqtB,gBAChC,OAAO/qB,KAAKmrB,MAAMD,K,sBAGnB,WACC,IAAIE,EAAU1tB,KAAK+X,MAAMwU,SAAW,IAChCoB,EAAMrrB,KAAKG,MAAMirB,GAASzb,WAC1B2b,EAAOtrB,KAAKG,MAAwB,KAAjBirB,EAAUC,IAAa1b,WAI9C,OAFA0b,EAAM,MAAME,UAAU,EAAG,EAAIF,EAAIvoB,QAAUuoB,GAE9B,KADbC,EAAO,MAAMC,UAAU,EAAG,EAAID,EAAKxoB,QAAUwoB,K,sBAI9C,SAAShjB,GAER,IAAMkjB,EAAcljB,EAAO5K,KAAKwsB,YAChCxsB,KAAKwsB,YAAc5hB,EAEnB,IAAM0iB,EAAYttB,KAAKqtB,gBACnBd,EAAWvsB,KAAK+X,MAAMwU,SAEtBvsB,KAAK+X,MAAMsU,aACdE,GAAYuB,GACGR,IAEbf,EADGvsB,KAAK+X,MAAMuU,SACH,EAEAgB,GAGbttB,KAAKsY,SAAS,CACbiU,SAAUA,KAIRvsB,KAAK+X,MAAM2S,SAEV,MAAQ1qB,KAAKmP,MAAMxE,WACtB3K,KAAKmP,MAAMxE,UAAU4hB,GAGtBQ,OAAOC,sBAAsBhtB,KAAK4sB,a,0BAIpC,WACC,OAAI5sB,KAAK+X,MAAMuU,SACN,kBAACyB,GAAA,EAAD,MAED,kBAACC,GAAA,EAAD,Q,6BAGT,WACC,OAAIhuB,KAAK+X,MAAMsU,UACN,kBAAC4B,GAAA,EAAD,MAED,kBAAC,KAAD,Q,0BAGT,WACC,OAAO,IAAMjuB,KAAK+X,MAAMwU,W,oBAGzB,WACC,OACC,kBAAC2B,GAAA,EAAD,CAASlW,KAAMhY,KAAK+X,MAAM2S,OACzBjS,QAASzY,KAAKslB,YACdzB,SAAU7jB,KAAKmP,MAAM0U,SACrBsK,aAAc,CAACC,SAAU,SAAUC,WAAY,UAC/CC,gBAAiB,CAACD,WAAY,SAAUD,SAAU,QAElD,kBAACG,GAAA,EAAD,CAAMC,WAAS,EAAC/H,WAAW,UAC1B,kBAAC8H,GAAA,EAAD,CAAME,MAAI,GACT,kBAAC5G,GAAA,EAAD,CAASC,MAAM,oBACd,kBAACC,GAAA,EAAD,CAAYC,aAAW,mBAAmB1nB,MAAM,UAAUiZ,QAASvZ,KAAK6sB,YACtE7sB,KAAK0uB,iBAGR,kBAAC7G,GAAA,EAAD,CAASC,MAAM,sBACd,8BACC,kBAACC,GAAA,EAAD,CAAYC,aAAW,qBAAqB1nB,MAAM,UAAUiZ,QAASvZ,KAAKuoB,iBAAkBC,SAAUxoB,KAAK2uB,4BAC1G,kBAACC,GAAA,EAAD,SAIH,kBAAC/G,GAAA,EAAD,CAASC,MAAM,wBACd,kBAACC,GAAA,EAAD,CAAYC,aAAW,uBAAuB1nB,MAAM,UAAUiZ,QAASvZ,KAAK0sB,WAC1E1sB,KAAK6uB,oBAGR,kBAAChH,GAAA,EAAD,CAASC,MAAM,kBACd,8BACC,kBAACC,GAAA,EAAD,CAAYC,aAAW,qBAAqB1nB,MAAM,UAAUiZ,QAASvZ,KAAK0oB,aAAcF,SAAUxoB,KAAK8uB,wBACtG,kBAACC,GAAA,EAAD,SAIH,kBAAClH,GAAA,EAAD,CAASC,MAAM,kBACd,8BACC,kBAACC,GAAA,EAAD,CAAYC,aAAW,iBAAiB1nB,MAAM,UAAUiZ,QAASvZ,KAAK2sB,KAAMnE,SAAUxoB,KAAKgvB,gBAC1F,kBAACC,GAAA,EAAD,UAKJ,kBAACV,GAAA,EAAD,CAAME,MAAI,GACT,kBAAC,KAAD,CAAKlI,QAAQ,OAAOE,WAAW,UAC9B,kBAAC,KAAD,CAAKyI,GAAI,EAAGC,SAAU,IACrB,kBAACpE,GAAA,EAAD,CAAYD,QAAQ,QAAQxqB,MAAM,iBAAiBN,KAAKusB,aAEzD,kBAAC,KAAD,CAAK2C,GAAI,GACR,kBAACpD,GAAD,CAAsBhB,QAAQ,cAAc7c,MAAOjO,KAAKovB,0B,GAvOvCvf,aAiPzBuc,GAAWtc,aAAe,CACzB+T,SAAU,KACVsJ,YAAa,EACbD,iBAAkB,EAClBJ,UAAW,KACXG,SAAU,KACVtiB,UAAW,MAYGyhB,U,UC/NAiD,G,kDApDd,WAAYlgB,EAAOkW,GAAU,IAAD,8BAC3B,cAAMlW,EAAOkW,IACRiK,WAAa,KAClB,EAAKvX,MAAQ,CACZC,MAAM,EACN8P,MAAO,GACPliB,KAAM,IAEP,EAAKud,KAAO,EAAKA,KAAKrQ,KAAV,gBACZ,EAAKyc,SAAW,EAAKA,SAASzc,KAAd,gBAChB,EAAKwS,YAAc,EAAKA,YAAYxS,KAAjB,gBAVQ,E,wCAa5B,SAAKgV,EAAOliB,EAAM4pB,GACjBxvB,KAAKsvB,WAAaE,EAClBxvB,KAAKsY,SAAS,CACbN,MAAM,EACN8P,MAAOA,EACPliB,KAAMA,M,yBAIR,WACC5F,KAAKsvB,WAAa,KAClBtvB,KAAKsY,SAAS,CACbN,MAAM,M,sBAIR,WACK,OAAShY,KAAKsvB,YACjBtvB,KAAKsvB,aAENtvB,KAAKslB,gB,oBAGN,WACC,OACC,kBAAC9M,GAAA,EAAD,CAAQR,KAAMhY,KAAK+X,MAAMC,KAAMS,QAASzY,KAAKslB,YAAa5M,kBAAgB,2BACzE,kBAACC,GAAA,EAAD,CAAatY,GAAG,2BAA2BL,KAAK+X,MAAM+P,OACtD,kBAAClP,GAAA,EAAD,KACC,kBAAC6W,GAAA,EAAD,KAAoBzvB,KAAK+X,MAAMnS,OAEhC,kBAACyT,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,CAAQC,QAASvZ,KAAKslB,YAAawF,QAAQ,YAAYxqB,MAAM,UAAU8Y,WAAS,GAAhF,UACA,kBAACE,GAAA,EAAD,CAAQC,QAASvZ,KAAKuvB,SAAUzE,QAAQ,YAAYxqB,MAAM,aAA1D,Y,GA9CuBuP,a,oBC0Pb6f,I,yDApPd,WAAYvgB,GAAQ,IAAD,8BAClB,cAAMA,IAEDwgB,SAAWC,cAEhB,EAAKC,aAAerd,IAAMC,YAC1B,EAAKqd,YAActd,IAAMC,YACzB,EAAKsd,iBAAmBvd,IAAMC,YAC9B,EAAKud,cAAgBxd,IAAMC,YAE3B,EAAKwd,UAAY,EAAKA,UAAUnd,KAAf,gBACjB,EAAKod,gBAAkB,EAAKA,gBAAgBpd,KAArB,gBACvB,EAAKqd,mBAAqB,EAAKA,mBAAmBrd,KAAxB,gBAC1B,EAAKsd,WAAa,EAAKA,WAAWtd,KAAhB,gBAClB,EAAKud,aAAe,EAAKA,aAAavd,KAAlB,gBACpB,EAAKwd,gBAAkB,EAAKA,gBAAgBxd,KAArB,gBACvB,EAAKyd,mBAAqB,EAAKA,mBAAmBzd,KAAxB,gBAC1B,EAAK0d,aAAa,EAAKA,aAAa1d,KAAlB,gBAClB,EAAK2d,gBAAgB,EAAKA,gBAAgB3d,KAArB,gBACrB,EAAK4d,gBAAgB,EAAKA,gBAAgB5d,KAArB,gBACrB,EAAK6d,mBAAmB,EAAKA,mBAAmB7d,KAAxB,gBACxB,EAAK8d,iBAAiB,EAAKA,iBAAiB9d,KAAtB,gBACtB,EAAK+d,qBAAqB,EAAKA,qBAAqB/d,KAA1B,gBAC1B,EAAKge,wBAAwB,EAAKA,wBAAwBhe,KAA7B,gBAC7B,EAAKie,UAAU,EAAKA,UAAUje,KAAf,gBACf,EAAKke,SAAS,EAAKA,SAASle,KAAd,gBACd,EAAKme,UAAU,EAAKA,UAAUne,KAAf,gBACf,EAAKoe,mBAAmB,EAAKA,mBAAmBpe,KAAxB,gBACxB,EAAKkW,eAAe,EAAKA,eAAelW,KAApB,gBAGpB,EAAKyH,MAAQ,EAAK4W,eAClB,EAAK5W,MAAMtR,WAAa,EAAKqnB,gBAC7B,EAAKvT,SAAW,IAAI7O,EACpB,EAAK6O,SAAS9T,WAAa,EAAKsnB,mBAChC,EAAKxY,MAAQ,CACZwC,MAAO,EAAKA,MACZwC,SAAU,EAAKA,SACfqU,SAAU,CACTjO,MAAM,EACNkO,SAAU,OACVC,QAAS,KAzCO,E,gDA8CnB,WACC,IAAI/W,EAAQ,IAAIzS,EAKhB,OAJAyS,EAAMgX,YACL,IAAK,EAAG,IACR,IAAK,EAAG,IAEFhX,I,wBAGR,WACChW,QAAQC,IAAI,eACZxE,KAAKua,MAAMtR,WAAa,KACxBjJ,KAAKua,MAAQva,KAAKmxB,eAClBnxB,KAAKua,MAAMtR,WAAajJ,KAAKswB,gBAC7BtwB,KAAK+c,SAAS9T,WAAa,KAC3BjJ,KAAK+c,SAAW,IAAI7O,EACpBlO,KAAK+c,SAAS9T,WAAajJ,KAAKuwB,mBAChCvwB,KAAKsY,SAAS,CACbiC,MAAOva,KAAKua,MACZwC,SAAU/c,KAAK+c,a,6BAIjB,SAAgByU,GACfxxB,KAAKua,MAAMtR,WAAa,KACxBjJ,KAAKua,MAAQiX,EACbxxB,KAAKua,MAAMtR,WAAajJ,KAAKswB,gBAC7BtwB,KAAKsY,SAAS,CACbiC,MAAOva,KAAKua,U,gCAId,SAAmBkX,GAClBzxB,KAAK+c,SAAS9T,WAAa,KAC3BjJ,KAAK+c,SAAW0U,EAChBzxB,KAAK+c,SAAS9T,WAAajJ,KAAKuwB,mBAChCvwB,KAAKsY,SAAS,CACbyE,SAAU/c,KAAK+c,WAIhB/c,KAAKua,MAAMvQ,QAAUhK,KAAK+c,SAAS/N,e,6BAGpC,WACMhP,KAAK+X,MAAMwC,MAAMvR,YAGtBhJ,KAAK+vB,iBAAiB3c,QAAQ+P,KAC7B,oBAAqB,+DACrBnjB,KAAKowB,c,gCAIP,WACCpwB,KAAK+vB,iBAAiB3c,QAAQ+P,KAC7B,uBAAwB,iDACxB,Q,uBAIF,WACC5e,QAAQC,IAAI,kBACZ,IAAIktB,EAAM1xB,KAAK6vB,aAAazc,QAAQue,SACpC3xB,KAAK8vB,YAAY1c,QAAQwe,MACxBF,EAAInT,QACJmT,EAAIxwB,MAAOwwB,EAAIvwB,OACfuwB,EAAIxwB,MAAM,EAAGwwB,EAAIvwB,OAAO,K,0BAK1B,SAAa0wB,EAAUC,GACtB9xB,KAAKsY,SAAS,CACb8Y,SAAU,CACTjO,MAAM,EACNkO,SAAUQ,EACVP,QAASQ,O,6BAMZ,WAEC,IAAMD,EAAW7xB,KAAK+X,MAAMqZ,SAASC,SAC/BS,EAAU9xB,KAAK+X,MAAMqZ,SAASE,QAEpCtxB,KAAKsY,SAAS,CACb8Y,SAAU,CACTjO,MAAM,EACNkO,SAAUQ,EACVP,QAASQ,O,0BAKZ,SAAazuB,EAAGnC,EAAOC,GACtBnB,KAAKua,MAAM+O,aAAajmB,EAAGnC,EAAOC,K,6BAGnC,WACKnB,KAAKua,MAAM4Q,kBACdnrB,KAAKwwB,aAAa,UAAW,oCAE7BxwB,KAAKwwB,aAAa,QAAS,oE,gCAI7B,WACKxwB,KAAKua,MAAM6Q,qBACdprB,KAAKwwB,aAAa,UAAW,oCAE7BxwB,KAAKwwB,aAAa,QAAS,uD,8BAI7B,WACMxwB,KAAKua,MAAM8Q,oBACfrrB,KAAKwwB,aAAa,UAAW,oC,kCAI/B,WACMxwB,KAAKua,MAAM+Q,wBACftrB,KAAKwwB,aAAa,UAAW,gC,qCAI/B,SAAwBvmB,GAClBjK,KAAKua,MAAMgR,wBAAwBthB,IACvCjK,KAAKwwB,aAAa,OAAlB,wCAA2DvmB,EAA3D,Q,uBAIF,WACCjK,KAAK+X,MAAMwC,MAAMuS,c,sBAGlB,WACC9sB,KAAK+X,MAAMwC,MAAM0S,a,uBAGlB,SAAUriB,GACT5K,KAAK+X,MAAMwC,MAAM5P,UAAUC,K,gCAG5B,WACC,OAAO5K,KAAK6vB,aAAazc,U,4BAG1B,WACKpT,KAAK+X,MAAMwC,MAAMtS,cAAc7C,OAAS,EAC3CpF,KAAKwwB,aAAa,UAAW,2BAG9BxwB,KAAKgwB,cAAc5c,QAAQqZ,S,oBAG5B,WACC,OACC,kBAAC,IAAMjc,SAAP,KACC,kBAACuhB,EAAA,EAAD,CAAe7Q,MAAOlhB,KAAK2vB,UAC1B,kBAAC,GAAD,CAAU5S,SAAU/c,KAAK+X,MAAMgF,SAC9ByO,UAAWxrB,KAAKiwB,UAChB3F,gBAAiBtqB,KAAKkwB,gBACtB3F,mBAAoBvqB,KAAKmwB,mBACzBlF,oBAAqBjrB,KAAK+X,MAAMwC,MAAMxS,oBACtCmjB,kBAAmBlrB,KAAK+X,MAAMwC,MAAMtS,cAAc7C,OAClD+lB,gBAAiBnrB,KAAK0wB,gBACtBtF,mBAAoBprB,KAAK2wB,mBACzBtF,iBAAkBrrB,KAAK4wB,iBACvBtF,qBAAsBtrB,KAAK6wB,qBAC3BtF,wBAAyBvrB,KAAK8wB,wBAC9B9H,eAAgBhpB,KAAKgpB,eACrBM,aAActpB,KAAKqwB,eAEpB,kBAAC,GAAD,CAAWrb,IAAKhV,KAAK6vB,aAActV,MAAOva,KAAK+X,MAAMwC,MAAOwC,SAAU/c,KAAK+X,MAAMgF,SAAU7C,YAAa,EAAGG,WAAY,EAAGJ,aAAc,KAAMG,cAAe,OAC7J,kBAAC,GAAD,CACCpF,IAAKhV,KAAKgwB,cACVnM,SAAU7jB,KAAKkxB,mBACf/D,YAAantB,KAAK+X,MAAMwC,MAAMtS,cAAc7C,OAC5C8nB,iBAAkBltB,KAAK+X,MAAMwC,MAAMvS,qBACnC8kB,UAAW9sB,KAAK+wB,UAChB9D,SAAUjtB,KAAKgxB,SACfrmB,UAAW3K,KAAKixB,YAEjB,kBAAC,GAAD,CAAejc,IAAKhV,KAAK+vB,mBACzB,kBAACiC,GAAA,EAAD,CAAUha,KAAMhY,KAAK+X,MAAMqZ,SAASjO,KAAMgL,aAAc,CAAEC,SAAU,SAAUC,WAAY,UAAW4D,iBAAkB,IAAMxZ,QAASzY,KAAKywB,iBAC1I,kBAAC,KAAD,CAAUyB,UAAW,EAAGpH,QAAQ,SAASrS,QAASzY,KAAKywB,gBAAiBoB,SAAU7xB,KAAK+X,MAAMqZ,SAASC,UAAWrxB,KAAK+X,MAAMqZ,SAASE,UAEtI,kBAACa,GAAA,EAAD,CAAUnd,IAAKhV,KAAK8vB,oB,GA9OPjgB,cCDEuiB,QACW,cAA7BrF,OAAOsF,SAASC,UAEa,UAA7BvF,OAAOsF,SAASC,UAEhBvF,OAAOsF,SAASC,SAASC,MACzB,2D,qBCXFC,IAASC,OACR,kBAAC,IAAMC,WAAP,KAEC,kBAACC,GAAA,EAAD,MACA,kBAAC,GAAD,OAEDjf,SAASkf,eAAe,SDoHpB,kBAAmBC,WACtBA,UAAUC,cAAcC,MACvBC,MAAK,SAAAC,GACLA,EAAaC,gBAEbC,OAAM,SAAAze,GACNnQ,QAAQmQ,MAAMA,EAAMod,a,gHEpIjBK,E,kDACL,WAAYhjB,GAAQ,IAAD,8BAClB,cAAMA,IACDikB,aAAe5gB,IAAMC,YAFR,E,yCAMnB,SAAM8L,EAAS8U,EAAUC,EAAWC,EAAUC,GAAY,IAAD,OAEpDC,EAAS/f,SAASggB,cAAc,UACpCD,EAAOvyB,MAAQqyB,EACfE,EAAOtyB,OAASqyB,EAChB,IAAIG,EAAMF,EAAOG,WAAW,MAMxBC,EAAMngB,SAASggB,cAAc,OAEjCG,EAAIC,iBAAiB,QAAQ,SAAApnB,GAE5BinB,EAAII,UAAUF,EACb,EAAG,EAAGR,EAAUC,EAEhB,EAAG,EAAGD,EAAUC,GAGjBG,EAAOO,QAAO,SAASC,GACtBC,IAAUC,OAAOF,EAAM,wBAGxB,EAAKb,aAAahgB,QAAQghB,UAAY,MAIvC,IAAMC,EAAgB,6BAA+B,IAAIC,EAAO/V,GAAStM,SAAS,UAClF4hB,EAAIU,IAAMF,I,oBAGX,WACC,OACC,yBAAKrf,IAAKhV,KAAKozB,aAAcrQ,MAAO,CAACwD,QAAQ,c,GA1CzB1W,aA+CRsiB,Q","file":"static/js/main.26402cdf.chunk.js","sourcesContent":["class Point {\n\tconstructor(x=0, y=0){\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tequalTo(p) {\n\t\treturn p.x === this.x && p.y === this.y\n\t}\n\n\tmove(deltaX, deltaY) {\n\t\tthis.x += deltaX;\n\t\tthis.y += deltaY;\n\t}\n\n\tclone() {\n\t\treturn new Point(this.x, this.y);\n\t}\n}\n\nexport default Point;\n","import Point from \"./Point\";\n\nclass Ball {\n\tconstructor(id=\"\", color=0, pos=new Point(0,0), posDefault=new Point(0,0)){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.pos = pos;\n\t\tthis.posDefault = posDefault;\n\t}\n\n\treset() {\n\t\tthis.pos = this.posDefault.clone();\n\t}\n\n\tclone() {\n\t\treturn new Ball(\n\t\t\tthis.id, \n\t\t\tthis.color, \n\t\t\tthis.pos.clone(),\n\t\t\tthis.posDefault.clone()\n\t\t);\n\t}\n\n\tequalTo(b) {\n\t\treturn this.id === b.id\n\t\t\t&& this.color === b.color\n\t\t\t&& this.pos.equalTo(b.pos)\n\t\t\t&& this.posDefault.equalTo(b.posDefault)\n\t}\n\n\tget isPlaced() {\n\t\treturn !this.pos.equalTo(this.posDefault);\n\t}\n}\n\nexport default Ball;\n","import Point from \"./Point\";\n\nclass Player {\n\tconstructor(id=\"\", no=\"0\", name=\"\", color=0, pos=new Point(0,0), rotation=0, posDefault=new Point(0,0), noDefault=\"0\"){\n\t\tthis.id = id;\n\t\tthis.no = no;\n\t\tthis.name = name;\n\t\tthis.color = color;\n\t\tthis.pos = pos;\n\t\tthis.rotation = rotation;\n\t\tthis.posDefault = posDefault;\n\t\tthis.noDefault = noDefault;\n\t}\t\n\n\treset() {\n\t\tthis.pos = this.posDefault.clone();\n\t\tthis.rotation = 0;\n\t\tthis.name = \"\";\n\t\tthis.no = this.noDefault;\n\t}\n\n\tclone() {\n\t\treturn new Player(\n\t\t\tthis.id, \n\t\t\tthis.no, \n\t\t\tthis.name, \n\t\t\tthis.color, \n\t\t\tthis.pos.clone(),\n\t\t\tthis.rotation,\n\t\t\tthis.posDefault.clone(),\n\t\t\tthis.noDefault\n\t\t);\n\t}\n\n\tequalTo(p) {\n\t\treturn this.id === p.id\n\t\t\t&& this.no === p.no\n\t\t\t&& this.name === p.name\n\t\t\t&& this.color === p.color\n\t\t\t&& this.pos.equalTo(p.pos)\n\t\t\t&& this.rotation === p.rotation\n\t\t\t&& this.posDefault.equalTo(p.posDefault)\n\t\t\t&& this.noDefault === p.noDefault\n\t}\n\n\tget isPlaced() {\n\t\treturn !this.pos.equalTo(this.posDefault);\n\t}\n}\n\nexport default Player;\n","class Box {\n\tconstructor(id=\"\", x=0, y=0, width=0, height=0){\n\t\tthis.id = id;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n}\n\nexport default Box;\n","import Box from './Box';\n\nclass Square {\n\tconstructor(id=\"\", color=0, x1=0, y1=0, width=0, height=0, rotation=0, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x1 + width;\n\t\tthis.y2 = y1 + height;\n\t\tthis.rotation = rotation;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.width,\n\t\t\tthis.height\n\t\t);\n\t}\n\n\tget x() {\n\t\treturn this.x1 < this.x2 ? this.x1 : this.x2;\n\t}\n\n\tget width() {\n\t\treturn this.x1 < this.x2 ? this.x2 - this.x1 : this.x1 - this.x2;\n\t}\n\n\tget y() {\n\t\treturn this.y1 < this.y2 ? this.y1 : this.y2;\n\t}\n\n\tget height() {\n\t\treturn this.y1 < this.y2 ? this.y2 - this.y1 : this.y1 - this.y2;\n\t}\n\n\tget cx() {\n\t\treturn this.x + this.width / 2;\n\t}\n\n\tget cy() {\n\t\treturn this.y + this.height / 2;\n\t}\n\n\tresize(x2, y2, proportional) {\n\t\tthis.x2 = x2;\n\t\tif (!proportional) {\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tlet szy = this.width * (this.y1 < y2 ? 1 : -1);\n\t\t\tthis.y2 = this.y1 + szy;\n\t\t}\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.cx;\n\t\tlet vy = posY - this.cy;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Square;\n","import Box from './Box';\n\nclass Ellipse {\n\tconstructor(id=\"\", color=0, x1=0, y1=0, rx=0, ry=0, rotation=0, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x1 + rx * 2;\n\t\tthis.y2 = y1 + ry * 2;\n\t\tthis.rotation = rotation;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tget cx() {\n\t\treturn (this.x1 < this.x2 ? this.x1 : this.x2) + this.rx;\n\t}\n\n\tget cy() {\n\t\treturn (this.y1 < this.y2 ? this.y1 : this.y2) + this.ry;\n\t}\n\n\tget rx() {\n\t\treturn (this.x1 < this.x2 ? this.x2 - this.x1 : this.x1 - this.x2) / 2;\n\t}\n\n\tget ry() {\n\t\treturn (this.y1 < this.y2 ? this.y2 - this.y1 : this.y1 - this.y2) / 2;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.cx - this.rx,\n\t\t\tthis.cy - this.ry,\n\t\t\tthis.rx * 2,\n\t\t\tthis.ry * 2\n\t\t);\n\t}\n\n\tresize(x2, y2, proportional) {\n\t\tthis.x2 = x2;\n\t\tif (!proportional) {\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tlet szy = this.rx * (this.y1 < y2 ? 2 : -2);\n\t\t\tthis.y2 = this.y1 + szy;\n\t\t}\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.cx;\n\t\tlet vy = posY - this.cy;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Ellipse;\n","import Point from \"./Point\";\n\n// path is cubic bezier spline with 2 control points\nclass Path {\n\tconstructor(id=\"\", p1=new Point(0,0), p2=new Point(0,0), c1=new Point(0,0), c2=new Point(0,0), arrowStart=false, arrowEnd=false){\n\t\tthis.id = id;\n\t\tthis.p1 = p1;\n\t\tthis.p2 = p2;\n\t\tthis.c1 = c1;\n\t\tthis.c2 = c2;\n\t\tthis.arrowStart = arrowStart;\n\t\tthis.arrowEnd = arrowEnd;\n\t}\n\n\t// ref: https://github.com/mrdoob/three.js/blob/master/src/extras/core/Interpolations.js\n\tCubicBezierP0(k, p) {\n\t\treturn k * k * k * p;\n\t}\n\t\n\tCubicBezierP1(t, k, p) {\n\t\treturn 3 * k * k * t * p;\n\t}\n\t\n\tCubicBezierP2(t, k, p) {\n\t\treturn 3 * k * t * t * p;\n\t}\n\t\n\tCubicBezierP3(t, p) {\n\t\treturn t * t * t * p;\n\t}\n\t\n\tCubicBezier(t, p0, p1, p2, p3) {\n\t\tconst k = 1 - t;\n\t\treturn this.CubicBezierP0(k, p0)\n\t\t\t+ this.CubicBezierP1(t, k, p1)\n\t\t\t+ this.CubicBezierP2(t, k, p2)\n\t\t\t+ this.CubicBezierP3(t, p3);\n\t}\n\n\t// rotation aligned to bezier spline\n\t// TODO: Not working fix it\n\trotation(t) {\n\t\tconst k = 1 - t;\n\t\t// all lengths of enclosing lines\n\t\tconst l1x = this.c1.x - this.p1.x;\n\t\tconst l1y = this.c1.y - this.p1.y;\n\n\t\tconst l2x = this.c2.x - this.c1.x;\n\t\tconst l2y = this.c2.y - this.c1.y;\n\n\t\tconst l3x = this.p2.x - this.c2.x;\n\t\tconst l3y = this.p2.y - this.c2.y;\n\n\t\t// spline tangent points at t\n\t\tconst t1 = new Point(\n\t\t\tl1x * k,\n\t\t\tl1y * k\n\t\t);\n\n\t\tconst t2 = new Point(\n\t\t\tl2x * k,\n\t\t\tl2y * k\n\t\t);\n\t\t\n\t\tconst t3 = new Point(\n\t\t\tl3x * k,\n\t\t\tl3y * k\n\t\t);\n\n\t\tconst t4 = new Point(\n\t\t\t(t2.x - t1.x) * k,\n\t\t\t(t2.y - t1.y) * k\n\t\t)\n\n\t\tconst t5 = new Point(\n\t\t\t(t3.x - t2.x) * k,\n\t\t\t(t3.y - t2.y) * k,\n\t\t)\n\n\t\tconst vx = t5.x - t4.x;\n\t\tconst vy = t5.y - t4.y;\n\t\tlet angle = Math.atan2(vx, vy) * 180 / Math.PI;\n\t\t//angle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tconsole.log(angle);\n\t\treturn angle;\n\t}\n\n\t// point position on cubic bezier spline for distance 0-1 from start to end\n\tposition(t) {\n\t\treturn new Point(\n\t\t\tthis.CubicBezier(t, this.p1.x, this.c1.x, this.c2.x, this.p2.x),\n\t\t\tthis.CubicBezier(t, this.p1.y, this.c1.y, this.c2.y, this.p2.y)\n\t\t)\n\t}\n}\n\nexport default Path;\n","import Point from \"./Point\";\nimport Path from \"./Path\";\n\nclass Line {\n\t// For line spline with control points see https://www.particleincell.com/2012/bezier-splines/\n\t// Line is created as straight line with 3 cubic bezier spline segments\n\tconstructor(id=\"\", color=0, p1=new Point(0,0), p2=new Point(0,0), c1=new Point(0,0), c2=new Point(0,0), arrowStart=false, arrowEnd=false, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.p1 = p1;\n\t\tthis.p2 = p2;\n\t\tthis.c1 = c1;\n\t\tthis.c2 = c2;\n\t\tthis.arrowStart = arrowStart;\n\t\tthis.arrowEnd = arrowEnd;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tempty() {\n\t\treturn this.p1.equalTo(this.p2) \n\t\t\t&& this.p1.equalTo(this.c1)\n\t\t\t&& this.p1.equalTo(this.c2);\n\t}\n\n\tresizeP1(deltaX, deltaY) {\n\t\tthis.p1 = new Point(this.p1.x + deltaX, this.p1.y + deltaY);\n\t\tthis.linearControlPoints();\n\t}\n\n\tresizeP2(deltaX, deltaY) {\n\t\tthis.p2 = new Point(this.p2.x + deltaX, this.p2.y + deltaY);\n\t\tthis.linearControlPoints();\n\t}\n\n\t// calculate linear control points position\n\tlinearControlPoints() {\n\t\tlet lx = this.p2.x - this.p1.x;\n\t\tlet ly = this.p2.y - this.p1.y;\n\t\tthis.c1 = new Point(\n\t\t\tthis.p1.x + lx / 3,\n\t\t\tthis.p1.y + ly / 3,\n\t\t); \n\t\tthis.c2 = new Point(\n\t\t\tthis.p1.x + lx / 3 * 2,\n\t\t\tthis.p1.y + ly / 3 * 2,\n\t\t); \n\t}\n\n\tedit(pid, deltaX, deltaY) {\n\t\tswitch (pid) {\n\t\t\tcase \"p1\":\n\t\t\t\tthis.p1.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"c1\":\n\t\t\t\tthis.c1.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"c2\":\n\t\t\t\tthis.c2.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"p2\":\n\t\t\t\tthis.p2.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaths() {\n\t\tlet cx = this.computeControlPoints([this.p1.x, this.c1.x, this.c2.x, this.p2.x]);\n\t\tlet cy = this.computeControlPoints([this.p1.y, this.c1.y, this.c2.y, this.p2.y]);\n\t\tlet paths = [];\n\t\tpaths[0] = new Path(\n\t\t\tthis.id, this.p1, this.c1,\n\t\t\tnew Point(cx.p1[0], cy.p1[0]),\n\t\t\tnew Point(cx.p2[0], cy.p2[0]),\n\t\t\tthis.arrowStart, false\n\t\t);\n\t\tpaths[1] = new Path(\n\t\t\tthis.id, this.c1, this.c2,\n\t\t\tnew Point(cx.p1[1], cy.p1[1]),\n\t\t\tnew Point(cx.p2[1], cy.p2[1]),\n\t\t\tfalse, false\n\t\t);\n\t\tpaths[2] = new Path(\n\t\t\tthis.id, this.c2, this.p2,\n\t\t\tnew Point(cx.p1[2], cy.p1[2]),\n\t\t\tnew Point(cx.p2[2], cy.p2[2]),\n\t\t\tfalse, this.arrowEnd\n\t\t);\n\t\treturn paths;\n\t}\n\n\t// computes control points given knots K, this is the brain of the operation\n\tcomputeControlPoints(K) {\n\t\tlet p1 = [];\n\t\tlet p2 = [];\n\t\tlet n = K.length-1;\n\t\t\n\t\t// rhs vector\n\t\tlet a = [];\n\t\tlet b = [];\n\t\tlet c = [];\n\t\tlet r = [];\n\t\t\n\t\t// left most segment\n\t\ta[0]=0;\n\t\tb[0]=2;\n\t\tc[0]=1;\n\t\tr[0] = K[0] + 2*K[1];\n\t\t\n\t\t// internal segments\n\t\tfor (let i = 1; i < n - 1; i++) {\n\t\t\ta[i]=1;\n\t\t\tb[i]=4;\n\t\t\tc[i]=1;\n\t\t\tr[i] = 4 * K[i] + 2 * K[i+1];\n\t\t}\n\n\t\t// right segment\n\t\ta[n-1]=2;\n\t\tb[n-1]=7;\n\t\tc[n-1]=0;\n\t\tr[n-1] = 8*K[n-1] + K[n];\n\t\t\n\t\t// solves Ax=b with the Thomas algorithm (from Wikipedia)\n\t\tfor (let i = 1; i < n; i++) {\n\t\t\tlet m = a[i] / b[i - 1];\n\t\t\tb[i] = b[i] - m * c[i - 1];\n\t\t\tr[i] = r[i] - m * r[i - 1];\n\t\t}\n\t\n\t\tp1[n-1] = r[n-1] / b[n-1];\n\t\tfor (let i = n - 2; i >= 0; --i) {\n\t\t\tp1[i] = (r[i] - c[i] * p1[i+1]) / b[i];\n\t\t}\n\t\t\t\n\t\t// we have p1, now compute p2\n\t\tfor (let i = 0; i < n-1; i++) {\n\t\t\tp2[i] = 2 * K[i+1] - p1[i+1];\n\t\t}\n\t\tp2[n-1] = 0.5 * (K[n]+p1[n-1]);\n\t\t\n\t\treturn { p1:p1, p2:p2 };\n\t}\n}\n\nexport default Line;\n","import Box from './Box';\n\nclass Text {\n\tconstructor(id=\"\", color=0, size=0, text=\"\", x=0, y=0, rotation=0, isEdit=false, isTextEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.size = size;\n\t\tthis.text = text;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.rotation = rotation;\n\t\tthis.bx = x;\t\t// bounding box X\n\t\tthis.by = y;\t\t// bounding box Y\n\t\tthis.bwidth = 0;\t// bounding box Width\n\t\tthis.bheight = 0;\t// bounding box Height\n\t\tthis.isEdit = isEdit;\n\t\tthis.isTextEdit = isTextEdit;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.bx,\n\t\t\tthis.by,\n\t\t\tthis.bwidth,\n\t\t\tthis.bheight\n\t\t);\n\t}\n\n\tmove(deltaX, deltaY) {\n\t\tthis.x += deltaX;\n\t\tthis.y += deltaY;\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - (this.x + this.bwidth / 2);\n\t\tlet vy = posY - (this.y + this.bheight / 2);\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Text;\n","const ElementIDPrefix = {\n\tBall: 'bl',\n\tPlayer: 'pl',\n\tSquare: 'sq',\n\tEllipse: 'el',\n\tLine: 'ln',\n\tText: 'txt',\n\tPathPlayer: 'pp',\n\tPathBall: 'bp',\n\tExtras: 'ex'\n};\n\nconst ExtrasType = {\n\tGoal: 0,\n\tGoalSmall: 1,\n\tLadder: 2,\n\tCone: 3,\n\tFlag: 4\n};\n\nconst ExtrasDefaults = [\n\t{ name:'Goal', width: 100, height: 300, viewBoxScale: 1 },\n\t{ name:'Small Goal', width: 50, height: 150, viewBoxScale: 2 },\n\t{ name:'Ladder', width: 100, height: 350, viewBoxScale: 1 },\n\t{ name:'Cone', width: 70, height: 85, viewBoxScale: 3 },\n\t{ name:'Flag', width: 130, height: 280, viewBoxScale: 2 }\n];\n\n\n\nexport { ElementIDPrefix, ExtrasType, ExtrasDefaults }","import Box from './Box';\nimport { ExtrasType } from './Constants';\n\nclass Extras {\n\tconstructor(id=\"\", t=ExtrasType.Goal, x=0, y=0, width=0, height=0, rotation=0, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.t = t;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.rotation = rotation;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tget isBoxVisible() {\n\t\tswitch (this.t) {\n\t\t\tcase ExtrasType.Cone:\n\t\t\tcase ExtrasType.Flag:\n\t\t\t\treturn true;\n\t\t\tcase ExtrasType.Goal:\n\t\t\tcase ExtrasType.GoalSmall:\n\t\t\tcase ExtrasType.Ladder:\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tget isResizable() {\n\t\tswitch (this.t) {\n\t\t\tcase ExtrasType.Ladder:\n\t\t\t\treturn true;\n\t\t\tcase ExtrasType.Goal:\n\t\t\tcase ExtrasType.GoalSmall:\n\t\t\tcase ExtrasType.Cone:\n\t\t\tcase ExtrasType.Flag:\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tget isRotatable() {\n\t\tswitch (this.t) {\n\t\t\tcase ExtrasType.Goal:\n\t\t\tcase ExtrasType.GoalSmall:\n\t\t\tcase ExtrasType.Ladder:\n\t\t\t\treturn true;\n\t\t\tcase ExtrasType.Cone:\n\t\t\tcase ExtrasType.Flag:\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.x - this.width / 2,\n\t\t\tthis.y - this.height / 2,\n\t\t\tthis.width,\n\t\t\tthis.height\n\t\t);\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x += deltaX;\n\t\t\t\tthis.y += deltaY;\n\t\t\t\tthis.width += deltaX;\n\t\t\t\tthis.height += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x += deltaX;\n\t\t\t\tthis.y += deltaY;\n\t\t\t\tthis.width += deltaX;\n\t\t\t\tthis.height += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x += deltaX;\n\t\t\t\tthis.y += deltaY;\n\t\t\t\tthis.width += deltaX;\n\t\t\t\tthis.height += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x += deltaX;\n\t\t\t\tthis.y += deltaY;\n\t\t\t\tthis.width += deltaX;\n\t\t\t\tthis.height += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x += deltaX;\n\t\t\t\tthis.y += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.x;\n\t\tlet vy = posY - this.y;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Extras;","import Line from \"./Line\";\nimport { ElementIDPrefix } from \"./Constants\";\n\nclass AnimKeyFrame {\n\tconstructor(players=null, playerPaths=null, balls=null, ballPaths=null){\n\t\tthis.players = players;\n\t\tthis.playerPaths = playerPaths;\n\t\tthis.playerPathSplines = [];\n\t\tthis.balls = balls;\n\t\tthis.ballPaths = ballPaths;\n\t\tthis.ballPathSplines = [];\n\t}\n\n\tplayerPathID(index) {\n\t\treturn ElementIDPrefix.PathPlayer + index;\n\t}\n\n\tballPathID(index) {\n\t\treturn ElementIDPrefix.PathBall + index;\n\t}\n\n\t// this is to pre calc bezier splines from lines instead doing it every anim frame\n\tanimPreCalcSplines() {\n\t\tif (null !== this.playerPaths) {\n\t\t\tthis.playerPathSplines = this.playerPaths.map(l => l.paths());\n\t\t}\n\t\tif (null != this.ballPaths) {\n\t\t\tthis.ballPathSplines = this.ballPaths.map(l => l.paths());\n\t\t}\n\t}\n\n\t// there are 3 cubic bezier splines forming a path\n\tsplinePathPos(keyFramePos) {\n\t\tconst scale = keyFramePos * 3;\n\t\tlet idx = Math.floor(scale);\n\t\t// clip to last bezier spline\n\t\t// Note: this happens when keyFramePos is 1 = max last position \n\t\tif (idx >= 3) {\n\t\t\tidx = 2;\n\t\t}\n\t\treturn {\n\t\t\tidx: idx,\t\t// bezier spline index\n\t\t\tt: scale - idx\t// bezier spline position\n\t\t};\n\t}\n\n\tanimatePlayersOnPaths(keyFramePos) {\n\t\tconst splinePos = this.splinePathPos(keyFramePos);\n\t\treturn this.players.map((p, index)=> {\n\t\t\tif (!p.isPlaced) {\n\t\t\t\treturn p;\n\t\t\t}\n\t\t\tlet pc = p.clone();\n\t\t\tlet splines = this.playerPathSplines[index];\n\t\t\tpc.pos = splines[splinePos.idx].position(splinePos.t);\n\t\t\t//pc.rotation = splines[splinePos.idx].rotation(splinePos.t);\n\t\t\treturn pc;\n\t\t});\n\t}\n\n\tanimateBallsOnPaths(keyFramePos) {\n\t\tconst splinePos = this.splinePathPos(keyFramePos);\n\t\treturn this.balls.map((b, index) => {\n\t\t\tif (!b.isPlaced) {\n\t\t\t\treturn b;\n\t\t\t}\n\t\t\tlet bc = b.clone();\n\t\t\tlet splines = this.ballPathSplines[index];\n\t\t\tbc.pos = splines[splinePos.idx].position(splinePos.t);\n\t\t\treturn bc;\n\t\t});\n\t}\n\n\tclone() {\n\t\treturn new AnimKeyFrame(\n\t\t\tthis.players.map(p => p.clone()),\n\t\t\tthis.players.map((p, index) => {\n\t\t\t\t// new key frame has line with all points at same position\n\t\t\t\treturn new Line(\n\t\t\t\t\tthis.playerPathID(index), 99,\t// using 99 as edit color \n\t\t\t\t\tp.pos.clone(), \n\t\t\t\t\tp.pos.clone(),\n\t\t\t\t\tp.pos.clone(), \n\t\t\t\t\tp.pos.clone(),\n\t\t\t\t\tfalse, false, true, true\n\t\t\t\t);\n\t\t\t}),\n\t\t\tthis.balls.map(b => b.clone()),\n\t\t\tthis.balls.map((b, index) => {\n\t\t\t\t// new key frame has line with all points at same position\n\t\t\t\treturn new Line(\n\t\t\t\t\tthis.ballPathID(index), 99,\t// using 99 as edit color \n\t\t\t\t\tb.pos.clone(),\n\t\t\t\t\tb.pos.clone(),\n\t\t\t\t\tb.pos.clone(), \n\t\t\t\t\tb.pos.clone(),\n\t\t\t\t\tfalse, false, true, true\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t}\n\n\tequalTo(kf) {\n\t\tif (this.players.length !== kf.players.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let i = 0; i < this.players.length; i++) {\n\t\t\tif (!this.players[i].equalTo(kf.players[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.balls.length !== kf.balls.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let i = 0; i < this.balls.length; i++) {\n\t\t\tif (!this.balls[i].equalTo(kf.balls[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nexport default AnimKeyFrame;\n","import Ball from \"./Ball\";\nimport Player from \"./Player\";\nimport Square from \"./Square\";\nimport Ellipse from \"./Ellipse\";\nimport Line from \"./Line\";\nimport Point from \"./Point\";\nimport Text from \"./Text\";\nimport Extras from \"./Extras\";\nimport AnimKeyFrame from \"./AnimKeyFrame\";\nimport { ElementIDPrefix } from \"./Constants\";\n\nclass PitchFutsal {\n\n\tconstructor() {\n\t\tthis.width = 4500;\t// pitch width in cm\n\t\tthis.height = 2500;\t// pitch height in cm\n\n\t\tthis.AnimKeyFrameCurrent = 0;\n\t\tthis.AnimKeyFrameDuration = 5;\t// duration of each key frame in seconds\n\t\tthis.AnimKeyFrames = [];\n\t\tthis.AnimPlaying = false;\n\t\tthis.AnimPlayers = null;\n\t\tthis.AnimBalls = null;\n\n\t\tthis.squareID = -1;\n\t\tthis.squares = [];\n\t\tthis.ellipseID = -1;\n\t\tthis.ellipses = [];\n\t\tthis.lineID = -1;\n\t\tthis.lines = [];\n\t\tthis.textID = -1;\n\t\tthis.texts = [];\n\t\tthis.extrasID = -1;\n\t\tthis.extras = [];\n\n\t\tthis._overlay = \"none\";\n\n\t\tthis.isModified = false;\n\t\tthis.onModified = null;\n\t}\n\n\tinitDefault(noPlayers, noPlayerColors, playerSize, noBalls, noBallColors, ballSize) {\n\t\tlet kf = new AnimKeyFrame(\n\t\t\tthis._initPlayers(noPlayers, noPlayerColors, playerSize),\n\t\t\tnull,\n\t\t\tthis._initBalls(noBalls, noBallColors, ballSize),\n\t\t\tnull\n\t\t);\n\t\tthis.AnimKeyFrames.push(kf);\n\t}\n\n\t_initPlayers(noPlayers, noPlayerColors, playerSize) {\n\t\tlet players = [];\n\t\tlet groupSize = Math.floor(noPlayers / noPlayerColors);\n\t\tfor (var i = 0; i < noPlayers; i++) {\n\t\t\tlet color = Math.floor(i / groupSize);\n\t\t\tlet number = groupSize - (i % groupSize);\n\t\t\tlet posX = color * playerSize;\n\t\t\tlet player = new Player(\n\t\t\t\tElementIDPrefix.Player + i, number, \"\", color,\n\t\t\t\tnew Point(posX, 0),\n\t\t\t\t0,\n\t\t\t\tnew Point(posX, 0),\n\t\t\t\tnumber\n\t\t\t);\n\t\t\tplayers.push(player);\n\t\t}\n\t\treturn players;\n\t}\n\n\t_initBalls(noBalls, noBallColors, ballSize) {\n\t\tlet balls = [];\n\t\tlet groupSize = Math.floor(noBalls / noBallColors);\n\t\tfor (var i = 0; i < noBalls; i++) {\n\t\t\tlet color = Math.floor(i / groupSize);\n\t\t\tlet posX = color * ballSize;\n\t\t\tlet ball = new Ball(\n\t\t\t\tElementIDPrefix.Ball + i, color,\n\t\t\t\tnew Point(posX, 0),\n\t\t\t\tnew Point(posX, 0)\n\t\t\t);\n\t\t\tballs.push(ball);\n\t\t}\n\t\treturn balls;\n\t}\n\n\t_modified() {\n\t\tlet cp = new PitchFutsal();\n\t\tcp.isModified = true;\n\n\t\tcp.width = this.width;\n\t\tcp.height = this.height;\n\n\t\tcp.AnimKeyFrameCurrent = this.AnimKeyFrameCurrent;\n\t\tcp.AnimKeyFrameDuration = this.AnimKeyFrameDuration;\n\t\tcp.AnimKeyFrames = this.AnimKeyFrames;\n\t\tcp.AnimPlaying = this.AnimPlaying;\n\t\tcp.AnimPlayers = this.AnimPlayers;\n\t\tcp.AnimBalls = this.AnimBalls;\n\n\t\tcp.squareID = this.squareID;\n\t\tcp.squares = this.squares;\n\t\tcp.ellipseID = this.ellipseID;\n\t\tcp.ellipses = this.ellipses;\n\t\tcp.lineID = this.lineID;\n\t\tcp.lines = this.lines;\n\t\tcp.textID = this.textID;\n\t\tcp.texts = this.texts;\n\t\tcp.extrasID = this.extrasID;\n\t\tcp.extras = this.extras;\n\t\tcp._overlay = this.overlay;\n\t\t// trigger event modified\n\t\tif (null !== this.onModified) {\n\t\t\tthis.onModified(cp);\n\t\t}\n\t}\n\n\tplayersCurrentKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].players;\n\t}\n\n\tplayerPathsCurrentKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths;\n\t}\n\n\tplayersPreviousKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\tif (0 === this.AnimKeyFrameCurrent) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent-1].players;\n\t}\n\n\tanimKeyFrameDurationSet(duration) {\n\t\tlet newDuration = parseInt(duration);\n\t\tthis.AnimKeyFrameDuration = isNaN(newDuration) ? 1 : newDuration;\n\t\tif (0 >= this.AnimKeyFrameDuration) {\n\t\t\tthis.AnimKeyFrameDuration = 1;\n\t\t}\n\t\tthis._modified();\n\t}\n\n\tanimKeyFrameAdd() {\n\t\tlet last = this.AnimKeyFrames.length - 1;\n\t\tlet beforeLast = last-1;\n\t\tif (beforeLast >= 0) {\n\t\t\t// Add check if there is diff between previous and last key frame, \n\t\t\t// forbid adding if no changes between last two frames\n\t\t\tif (this.AnimKeyFrames[last].equalTo(this.AnimKeyFrames[beforeLast])) {\n\t\t\t\tconsole.log(\"No change in data new add frame forbidden\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t// clone last\n\t\tlet newKeyFrame = this.AnimKeyFrames[last].clone();\n\t\t// copy and add new\n\t\tthis.AnimKeyFrames = this.AnimKeyFrames.map(kf => kf);\n\t\tthis.AnimKeyFrames.push(newKeyFrame);\n\t\t// position to last key frame\n\t\tthis.AnimKeyFrameCurrent = this.AnimKeyFrames.length - 1;\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tanimKeyFrameDelete() {\n\t\tlet last = this.AnimKeyFrames.length - 1;\n\t\tif (0 === last) {\n\t\t\treturn false;\n\t\t}\n\t\tif (last !== this.AnimKeyFrameCurrent) {\n\t\t\treturn false;\n\t\t}\n\t\t// remove last key frame\n\t\tlet kf = [];\n\t\tfor (let i = 0; i < last; i++) {\n\t\t\tkf.push(this.AnimKeyFrames[i])\n\t\t}\n\t\tthis.AnimKeyFrames = kf;\n\t\t// position to last key frame\n\t\tthis.AnimKeyFrameCurrent = this.AnimKeyFrames.length - 1;\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tanimKeyFrameNext() {\n\t\tlet next = this.AnimKeyFrameCurrent + 1;\n\t\tif (next >= this.AnimKeyFrames.length) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.AnimKeyFrameCurrent = next;\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tanimKeyFramePrevious() {\n\t\tif (0 === this.AnimKeyFrameCurrent) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.AnimKeyFrameCurrent--;\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tanimStart() {\n\t\tthis.AnimPlaying = true;\n\t\tthis.AnimKeyFrames.map(kf => kf.animPreCalcSplines());\n\t\tthis.animFrame(0);\t// prepare first frame\n\t\tthis._modified();\n\t}\n\n\tanimStop() {\n\t\tthis.AnimPlaying = false;\n\t\tthis.AnimPlayers = null;\n\t\tthis.AnimBalls = null;\n\t\tthis._modified();\n\t}\n\n\tanimFrame(time) {\n\t\tconst kfDuration = this.AnimKeyFrameDuration * 1000;\n\t\tconst keyFrame = Math.floor(time / kfDuration);\n\t\tconst kfTime = time - (keyFrame * kfDuration);\n\t\tlet kfPos = kfTime / kfDuration;\n\t\t// keyFrame+1 is because paths are stored on next key frame\n\t\tlet keyFrameShow = keyFrame + 1;\n\t\t// clip to last key frame end\n\t\tif (keyFrameShow >= this.AnimKeyFrames.length) {\n\t\t\tkeyFrameShow = this.AnimKeyFrames.length - 1;\n\t\t\tkfPos = 1.0;\n\t\t}\n\t\tthis.AnimPlayers = this.AnimKeyFrames[keyFrameShow].animatePlayersOnPaths(kfPos);\n\t\tthis.AnimBalls = this.AnimKeyFrames[keyFrameShow].animateBallsOnPaths(kfPos);\n\t\tthis._modified();\n\t}\n\n\t// note: only move current key frame player\n\tplayerMove(id, deltaX, deltaY) {\n\t\tlet players = this.playersCurrentKeyFrame().map(p => {\n\t\t\tif (id === p.id) {\n\t\t\t\tp.pos.move(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn p;\n\t\t});\n\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].players = players;\n\t\t// Adjust player anim paths when player is moved\n\t\tthis.playerAdjustAnimPaths(\n\t\t\tid.replace(ElementIDPrefix.Player, ElementIDPrefix.PathPlayer), \n\t\t\tdeltaX, deltaY\n\t\t);\n\t\tthis._modified();\n\t}\n\n\t// NOTE: adjustment always makes path straight line\n\t// this same on original tactics-board\n\tplayerAdjustAnimPaths(playerPathID, deltaX, deltaY) {\n\t\t// Adjust path end position\n\t\tif (this.AnimKeyFrameCurrent > 0) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths = this.lineResizeP2(\n\t\t\t\tthis.playerPathsCurrentKeyFrame(),\n\t\t\t\tplayerPathID, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\t// Adjust path start position on next frame\n\t\tif (this.AnimKeyFrameCurrent < (this.AnimKeyFrames.length - 1)) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent+1].playerPaths = this.lineResizeP1(\n\t\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent+1].playerPaths,\n\t\t\t\tplayerPathID, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t}\n\n\tplayerEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Player)) {\n\t\t\treturn null;\n\t\t}\n\t\t// Edit player data\n\t\tconst p = this.playersCurrentKeyFrame().find(p => id === p.id);\n\t\t// disable editing non placed players\n\t\tif (!p.isPlaced) {\n\t\t\treturn null;\n\t\t}\n\t\tconst editPlayer = {\n\t\t\tid: p.id,\n\t\t\tname: p.name,\n\t\t\tno: p.no\n\t\t}\n\t\treturn editPlayer;\n\t}\n\n\t// note: edit player attributes changes player on all key frames\n\tplayerEditDone(player) {\n\t\tthis.AnimKeyFrames = this.AnimKeyFrames.map(kf => {\n\t\t\tkf.players = kf.players.map(p => {\n\t\t\t\tif (player.id !== p.id) {\n\t\t\t\t\treturn p;\n\t\t\t\t}\n\t\t\t\tif (player.remove) {\n\t\t\t\t\tp.reset();\n\t\t\t\t} else {\n\t\t\t\t\tp.name = player.name;\n\t\t\t\t\tp.no = player.no;\n\t\t\t\t}\n\t\t\t\treturn p;\n\t\t\t});\n\t\t\treturn kf;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tballsCurrentKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].balls;\n\t}\n\n\tballPathsCurrentKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths;\n\t}\n\n\tballsPreviousKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\tif (0 === this.AnimKeyFrameCurrent) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent-1].balls;\n\t}\n\n\t// note: only move current key frame ball\n\tballMove(id, deltaX, deltaY) {\n\t\tlet balls = this.ballsCurrentKeyFrame().map(b => {\n\t\t\tif (id === b.id) {\n\t\t\t\tb.pos.move(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn b;\n\t\t});\n\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].balls = balls;\n\t\t// Adjust ball paths when ball is moved\n\t\tthis.ballAdjustAnimPaths(\n\t\t\tid.replace(ElementIDPrefix.Ball, ElementIDPrefix.PathBall), \n\t\t\tdeltaX, deltaY\n\t\t);\n\t\tthis._modified();\n\t}\n\n\t// NOTE: adjustment always makes path straight line\n\t// this same on original tactics-board\n\tballAdjustAnimPaths(ballPathID, deltaX, deltaY) {\n\t\t// Adjust path end position\n\t\tif (this.AnimKeyFrameCurrent > 0) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths = this.lineResizeP2(\n\t\t\t\tthis.ballPathsCurrentKeyFrame(),\n\t\t\t\tballPathID, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\t// Adjust path start position on next frame\n\t\tif (this.AnimKeyFrameCurrent < (this.AnimKeyFrames.length - 1)) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent+1].ballPaths = this.lineResizeP1(\n\t\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent+1].ballPaths,\n\t\t\t\tballPathID, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t}\n\n\tlineNewID() {\n\t\tthis.lineID += 1;\n\t\treturn ElementIDPrefix.Line + this.lineID;\n\t}\n\n\tlineCreate(x,y, color, arrowStart, arrowEnd, isDashed) {\n\t\tlet l = new Line(\n\t\t\tthis.lineNewID(), color,\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tarrowStart,\n\t\t\tarrowEnd,\n\t\t\tisDashed\n\t\t);\n\t\tthis.lines = this.lines.map((lx) => lx);\n\t\tthis.lines.push(l);\n\t\tthis._modified();\n\t\treturn l.id;\n\t}\n\n\tlineResizeP1(lines, id, deltaX, deltaY) {\n\t\treturn lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.resizeP1(deltaX,deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t}\n\n\tlineResizeP2(lines, id, deltaX, deltaY) {\n\t\treturn lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.resizeP2(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t}\n\n\tlineResize(id, deltaX, deltaY) {\n\t\tthis.lines = this.lineResizeP2(this.lines, id, deltaX, deltaY);\n\t\tthis._modified();\n\t}\n\n\tlineOrPathEdit(lines, pid, id, deltaX, deltaY) {\n\t\treturn lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.edit(pid, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t}\n\n\tlineEdit(pid, id, deltaX, deltaY) {\n\t\tif (id.startsWith(ElementIDPrefix.Line)) {\n\t\t\tthis.lines = this.lineOrPathEdit(\n\t\t\t\tthis.lines,\n\t\t\t\tpid, id, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\tif (id.startsWith(ElementIDPrefix.PathPlayer)) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths = this.lineOrPathEdit(\n\t\t\t\tthis.playerPathsCurrentKeyFrame(),\n\t\t\t\tpid, id, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\tif (id.startsWith(ElementIDPrefix.PathBall)) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths = this.lineOrPathEdit(\n\t\t\t\tthis.ballPathsCurrentKeyFrame(),\n\t\t\t\tpid, id, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\tthis._modified();\n\t}\n\n\t// remove empty lines\n\tlineCleanup() {\n\t\tthis.lines = this.lines.filter(l => !l.empty());\n\t\tthis._modified();\n\t}\n\n\tlineEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Line)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.isEdit = true;\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tlineEditEnd() {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tl.isEdit = false;\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipseNewID() {\n\t\tthis.ellipseID += 1;\n\t\treturn ElementIDPrefix.Ellipse + this.ellipseID;\n\t}\n\n\tellipseCreate(x, y, color, isDashed) {\n\t\tlet el = new Ellipse(\n\t\t\tthis.ellipseNewID(), color,\n\t\t\tx,y,0,0,0,\n\t\t\tisDashed\n\t\t);\n\t\tthis.ellipses = this.ellipses.map((e) => e);\n\t\tthis.ellipses.push(el);\n\t\tthis._modified();\n\t\treturn el.id;\n\t}\n\n\tellipseResize(id, x2, y2, proportional) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.resize(x2, y2, proportional);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipseEdit(corner, id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Ellipse)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipseRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Ellipse)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\t// remove empty ellipses\n\tellipseCleanup() {\n\t\tthis.ellipses = this.ellipses.filter(el => el.rx > 0 && el.ry > 0);\n\t\tthis._modified();\n\t}\n\n\tellipseEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Ellipse)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.isEdit = true;\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tellipsesEditEnd() {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tel.isEdit = false;\n\t\t\treturn el;\n\t\t});\n\t}\n\n\tsquareNewID() {\n\t\tthis.squareID += 1;\n\t\treturn ElementIDPrefix.Square + this.squareID;\n\t}\n\n\tsquareCreate(x, y, color, isDashed) {\n\t\tlet sq = new Square(\n\t\t\tthis.squareNewID(), color,\n\t\t\tx,y,0,0,0,\n\t\t\tisDashed\n\t\t);\n\t\tthis.squares = this.squares.map((s) => s);\n\t\tthis.squares.push(sq);\n\t\tthis._modified();\n\t\treturn sq.id;\n\t}\n\n\tsquareResize(id, x2, y2, proportional) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.resize(x2, y2, proportional);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tsquareEdit(corner, id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Square)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tsquareRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Square)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\t// remove empty squares\n\tsquareCleanup() {\n\t\tthis.squares = this.squares.filter(sq => sq.width > 0 && sq.height > 0);\n\t\tthis._modified();\n\t}\n\n\tsquareEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Square)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.isEdit = true;\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tsquareEditEnd() {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tsq.isEdit = false;\n\t\t\treturn sq;\n\t\t});\n\t}\n\n\ttextNewID() {\n\t\tthis.textID += 1;\n\t\treturn ElementIDPrefix.Text + this.textID;\n\t}\n\n\ttextCreate(x, y, color, size) {\n\t\tlet tx = new Text(\n\t\t\tthis.textNewID(), color, size, \"\",\n\t\t\tx,y,0,\n\t\t\tfalse, true\n\t\t);\n\t\tthis.texts = this.texts.map((t) => t);\n\t\tthis.texts.push(tx);\n\t\tthis._modified();\n\t\treturn tx.id;\n\t}\n\n\ttextEditDone(id, text, bx, by, bwidth, bheight) {\n\t\tthis.texts = this.texts.map(t => {\n\t\t\tif (id === t.id) {\n\t\t\t\tt.isEdit = false;\n\t\t\t\tt.isTextEdit = false;\n\t\t\t\tt.text = text;\n\t\t\t\tt.bx = bx;\n\t\t\t\tt.by = by;\n\t\t\t\tt.bwidth = bwidth;\n\t\t\t\tt.bheight = bheight;\n\t\t\t}\n\t\t\treturn t;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\ttextEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Text)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.isEdit = true;\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\ttextMove(id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Text)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.move(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\ttextRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Text)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\textrasNewID() {\n\t\tthis.extrasID += 1;\n\t\treturn ElementIDPrefix.Extras + this.extrasID;\n\t}\n\n\textrasCreate(t, width, height) {\n\t\t// note: extras is always added to center of pitch with edit mode selected\n\t\tlet ex = new Extras(\n\t\t\tthis.extrasNewID(),t,\n\t\t\tthis.width / 2,\n\t\t\tthis.height / 2,\n\t\t\twidth,height,0,\n\t\t\ttrue\n\t\t);\n\t\tthis.extras = this.extras.map((e) => e);\n\t\tthis.extras.push(ex);\n\t\tthis._modified();\n\t\treturn ex.id;\n\t}\n\n\textrasEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Extras)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.extras = this.extras.map(ex => {\n\t\t\tif (id === ex.id) {\n\t\t\t\tex.isEdit = true;\n\t\t\t}\n\t\t\treturn ex;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\textrasMove(id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Extras)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.extras = this.extras.map(ex => {\n\t\t\tif (id === ex.id) {\n\t\t\t\tex.move(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn ex;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\textrasRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Extras)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.extras = this.extras.map(ex => {\n\t\t\tif (id === ex.id && ex.isRotatable) {\n\t\t\t\tex.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn ex;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\textrasEdit(corner, id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Extras)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.extras = this.extras.map(ex => {\n\t\t\tif (id === ex.id) {\n\t\t\t\tex.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn ex;\n\t\t});\n\t\tthis._modified();\n\t\treturn this.extras;\n\t}\n\n\textrasEditEnd() {\n\t\tthis.extras = this.extras.map(ex => {\n\t\t\tex.isEdit = false;\n\t\t\treturn ex;\n\t\t});\n\t}\n\n\teditTopLeft(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"tl\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"tl\",id, deltaX, deltaY);\n\t\tthis.extrasEdit(\"tl\",id, deltaX, deltaY);\n\t}\n\t\n\teditTopRight(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"tr\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"tr\",id, deltaX, deltaY);\n\t\tthis.extrasEdit(\"tr\",id, deltaX, deltaY);\n\t}\n\n\teditBottomLeft(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"bl\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"bl\",id, deltaX, deltaY);\n\t\tthis.extrasEdit(\"bl\",id, deltaX, deltaY);\n\t}\n\n\teditBottomRight(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"br\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"br\",id, deltaX, deltaY);\n\t\tthis.extrasEdit(\"br\",id, deltaX, deltaY);\n\t}\n\n\teditMove(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"mv\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"mv\",id, deltaX, deltaY);\n\t\tthis.extrasEdit(\"mv\",id, deltaX, deltaY);\n\t\tthis.textMove(id, deltaX, deltaY);\n\t}\n\n\teditRotate(id, posX, posY, snap) {\n\t\tthis.squareRotate(id, posX, posY, snap);\n\t\tthis.ellipseRotate(id, posX, posY, snap);\n\t\tthis.extrasRotate(id, posX, posY, snap);\n\t\tthis.textRotate(id, posX, posY, snap);\n\t}\n\n\tendAllEdits() {\n\t\tthis.lineEditEnd();\n\t\tthis.squareEditEnd();\n\t\tthis.ellipsesEditEnd();\n\t\tthis.extrasEditEnd();\n\t\t// TODO: Text end editing\n\t\tthis._modified();\n\t}\n\n\tget overlay() {\n\t\treturn this._overlay;\n\t}\n\n\tset overlay(value) {\n\t\tif (this._overlay === value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._overlay = value;\n\t\tthis._modified();\n\t}\n\n\toverlaySize() {\n\t\tswitch (this.overlay) {\n\t\t\tcase \"exercise\":\n\t\t\t\treturn {width:2800, height:2000};\n\t\t\tcase \"basketball\":\n\t\t\t\treturn {width:2800, height:1500}\n\t\t\tcase \"volleyball\":\n\t\t\t\treturn {width:1800, height:900}\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default PitchFutsal;","class DrawMode {\n\tconstructor() {\n\t\tthis._mode='select';\n\t\tthis._lineArrowStart = false;\n\t\tthis._lineArrowEnd = false;\n\t\tthis._lineDashed = false;\n\t\tthis._color = 0;\n\t\tthis._textSize = 2;\n\t\tthis._pitchOverlay = 'none';\n\t\tthis.onModified = null;\n\t}\n\n\t_modified() {\n\t\tlet dm = new DrawMode();\n\t\tdm._mode = this.mode;\n\t\tdm._lineArrowStart = this.lineArrowStart;\n\t\tdm._lineArrowEnd = this.lineArrowEnd;\n\t\tdm._lineDashed = this.lineDashed;\n\t\tdm._color = this.color;\n\t\tdm._textSize = this.textSize;\n\t\tdm._pitchOverlay = this.pitchOverlay;\n\t\t// trigger event modified\n\t\tif (null !== this.onModified) {\n\t\t\tthis.onModified(dm);\n\t\t}\n\t}\n\n\t// default modes\n\t// select\t- select / move\n\t// line\t\t- draw lines\n\t// square\t- draw square\n\t// ellipse\t- draw ellipse\n\t// text\t\t- draw text\n\tget modeOptions(){\n\t\treturn ['select','line','square','ellipse','text','extras'];\n\t}\n\n\tget mode() {\n\t\treturn this._mode;\n\t}\n\n\tset mode(value) {\n\t\tthis._mode = value;\n\t\tthis._modified();\n\t}\n\n\tget lineArrowStart() {\n\t\treturn this._lineArrowStart;\n\t}\n\n\tset lineArrowStart(value) {\n\t\tthis._lineArrowStart = value;\n\t\tthis._modified();\n\t}\n\n\tget lineArrowEnd() {\n\t\treturn this._lineArrowEnd;\n\t}\n\n\tset lineArrowEnd(value) {\n\t\tthis._lineArrowEnd = value;\n\t\tthis._modified();\n\t}\n\n\tget lineDashed() {\n\t\treturn this._lineDashed;\n\t}\n\n\tset lineDashed(value) {\n\t\tthis._lineDashed = value;\n\t\tthis._modified();\n\t}\n\n\tget colorOptions() {\n\t\treturn ['#8b2323','#e7e739','#912cee','#04b804','#1d4ba0','#ee2c2c','#ff7f50','#56c6eb'];\n\t}\n\n\t// hardcoded edit color\n\tget editColor() {\n\t\treturn '#666666';\n\t}\n\n\t// hardcoded edit color index\n\tget editColorIndex() {\n\t\treturn 99;\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color(value) {\n\t\tthis._color = value;\n\t\tthis._modified();\n\t}\n\n\tget textSizeOptions() {\n\t\treturn [\"Extra small\",\"Small\",\"Normal\",\"Large\",\"Extra large\"];\n\t}\n\n\tget textSize() {\n\t\treturn this._textSize;\n\t}\n\n\tset textSize(value) {\n\t\tthis._textSize = value;\n\t\tthis._modified();\n\t}\n\n\t// default pitch overlay options\n\t// 28x20, exercises pitch\n\t// 28x15, basketball court\n\t// 18x9, volleyball court\n\tget pitchOverlayOptions(){\n\t\treturn ['none','exercise','basketball','volleyball'];\n\t}\n\n\tget pitchOverlay() {\n\t\treturn this._pitchOverlay;\n\t}\n\tset pitchOverlay(value) {\n\t\tthis._pitchOverlay = value;\n\t\tthis._modified();\n\t}\n}\n\nexport default DrawMode;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Player from '../pitch/Player';\n\nclass PlayerEdit extends Component {\n\n\trenderPlayerName(name) {\n\t\tif (0 === name.length) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<text y=\"-70\">{name}</text>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst pl = this.props.player;\n\t\tconst editID = this.props.isEdit ? pl.id : null;\n\t\tconst editClassName = this.props.isEdit ? 'draggable' : null;\n\t\tconst className = 'player pc' + pl.color + (this.props.isPrevFrame ? ' transparent': '');\n\t\tconst transform = 'translate(' + pl.pos.x + ' ' + pl.pos.y + ') rotate(' + pl.rotation + ')';\n\t\treturn (\n\t\t\t<g className={className} textAnchor=\"middle\" transform={transform}>\n\t\t\t\t<circle r=\"50\" className={editClassName} data-ref={editID} />\n\t\t\t\t<text className=\"number\" dominantBaseline=\"central\">{pl.no}</text>\n\t\t\t\t{this.renderPlayerName(pl.name)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nPlayerEdit.defaultProps = {\n\tplayer: null,\n\tisEdit: true, \n\tisPrevFrame: false\n}\n\nPlayerEdit.propTypes = {\n\tplayer: PropTypes.instanceOf(Player),\n\tisEdit: PropTypes.bool,\n\tisPrevFrame: PropTypes.bool\n}\n\nexport default PlayerEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Ball from '../pitch/Ball';\n\nclass BallEdit extends Component {\n\n\tballImage() {\n\t\treturn (\n\t\t\t<g transform=\"translate(-30 -30)\">\n\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"60\" height=\"60\" viewBox=\"0 0 952 952\">\n\t\t\t\t\t<path d=\"M813 139A475 475 0 000 476a474 474 0 00476 476 474 474 0 00476-476 474 474 0 00-139-337zm-600-31l12-10a457 457 0 01370-60c-14 6-33 18-65 45a393 393 0 00-182 22c-31 11-55 23-71 33l-74-25c3 1 8-4 10-5zm433 119l-81 222-196 37-161-166c11-76 63-143 63-143s34-25 88-44a403 403 0 01174-20l113 114zM39 460c-5 32-6 66-3 100l-9-20a451 451 0 0136-252c-3 30-2 61 0 85-11 28-19 57-24 87zm40 173a418 418 0 018-239c33-28 77-44 101-52l158 164-16 179-155 52c-39-29-72-68-96-104zm470 260c-34 22-121 28-157 29a451 451 0 01-200-92c0-1-4-49-4-66l156-52 181 78 25 103h-1zm300-158c-27 38-59 75-98 102-36 25-85 34-128 41-3 1-44 8-45 6l-25-103 128-132 168-15 8 89-8 12zm3-135l-2 3-168 16-90-158 82-223 115 7a366 366 0 01118 169 434 434 0 01-55 186zm60-250a396 396 0 00-108-131c-5-25-19-65-57-107l2 2 7 5a459 459 0 01156 230v1z\"/>\n\t\t\t\t</svg>\n\t\t\t</g>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst b = this.props.ball;\n\t\tconst editID = this.props.isEdit ? b.id : null;\n\t\tconst editClassName = this.props.isEdit ? 'draggable' : null;\n\t\tconst className = 'ball bc' + b.color + (this.props.isPrevFrame ? ' transparent': '');\n\t\tconst transform = 'translate(' + b.pos.x + ' ' + b.pos.y + ')';\n\t\tconst ball = b.color === 4 ? this.ballImage() : null;\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<circle r=\"30\" className={editClassName} data-ref={editID} />\n\t\t\t\t{ball}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nBallEdit.defaultProps = {\n\tball: null,\n\tisEdit: true,\n\tisPrevFrame: false\n}\n\nBallEdit.propTypes = {\n\tball: PropTypes.instanceOf(Ball),\n\tisEdit: PropTypes.bool,\n\tisPrevFrame: PropTypes.bool\n}\n\nexport default BallEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Point from '../pitch/Point';\n\nclass DragHandle extends Component {\n\trender() {\n\t\tconst half = this.props.size / 2;\n\t\tconst x = this.props.position.x - half;\n\t\tconst y = this.props.position.y - half;\n\t\treturn (\n\t\t\t<rect className=\"editCorner draggable\" x={x} y={y} width={this.props.size} height={this.props.size} data-ref={this.props.id} />\n\t\t);\n\t}\n}\n\nDragHandle.defaultProps = {\n\tid: \"\",\n\tsize: 40,\n\tposition: null\n}\n\nDragHandle.propTypes = {\n\tid: PropTypes.string,\n\tsize: PropTypes.number,\n\tposition: PropTypes.instanceOf(Point)\n}\n\nexport default DragHandle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '../pitch/Box';\n\nclass RotateHandle extends Component {\n\trender() {\n\t\tconst box = this.props.box;\n\t\tconst half = box.width / 2;\n\t\tconst x1 = box.x + half;\n\t\tconst y1 = box.y;\n\t\tconst x2 = x1;\n\t\tconst y2 = y1 - 2 * this.props.size;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<line x1={x1} y1={y1} x2={x2} y2={y2} />\n\t\t\t\t<circle className=\"editCorner draggable\" cx={x2} cy={y2} r={this.props.size/2} data-ref={\"edit-rt-\" + box.id} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nRotateHandle.defaultProps = {\n\tsize: 50,\n\tbox: null\n}\n\nRotateHandle.propTypes = {\n\tsize: PropTypes.number,\n\tbox: PropTypes.instanceOf(Box),\n}\n\nexport default RotateHandle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '../pitch/Box';\nimport Point from '../pitch/Point';\nimport DragHandle from './DragHandle';\nimport RotateHandle from './RotateHandle';\n\nclass EditBox extends Component {\n\n\trenderHandles(box) {\n\t\tif (!this.props.showResize) {\n\t\t\treturn null;\n\t\t}\n\t\tconst tl = new Point(box.x, box.y);\n\t\tconst tr = new Point(box.x + box.width, box.y);\n\t\tconst bl = new Point(box.x, box.y + box.height);\n\t\tconst br = new Point(box.x + box.width, box.y + box.height);\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<DragHandle id={\"edit-tl-\" + box.id} position={tl} />\n\t\t\t\t<DragHandle id={\"edit-tr-\" + box.id} position={tr} />\n\t\t\t\t<DragHandle id={\"edit-bl-\" + box.id} position={bl} />\n\t\t\t\t<DragHandle id={\"edit-br-\" + box.id} position={br} />\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\trenderRotateHandle(box) {\n\t\tif (!this.props.showRotate) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<RotateHandle box={box} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst box = this.props.box;\n\t\tconst boxClass = this.props.showBox ? \"editBox draggable\" : \"editTransparent draggable\";\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect className={boxClass} x={box.x} y={box.y} width={box.width} height={box.height} data-ref={\"edit-mv-\" + box.id} />\n\t\t\t\t{this.renderHandles(box)}\n\t\t\t\t{this.renderRotateHandle(box)}\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nEditBox.defaultProps = {\n\tbox: null,\n\tshowBox:false,\n\tshowResize:true,\n\tshowRotate:true\n}\n\nEditBox.propTypes = {\n\tbox: PropTypes.instanceOf(Box),\n\tshowBox: PropTypes.bool,\n\tshowResize: PropTypes.bool,\n\tshowRotate: PropTypes.bool\n}\n\nexport default EditBox;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox'\nimport Square from '../pitch/Square';\n\nclass SquareEdit extends Component {\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={false} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst sq = this.props.square;\n\t\tconst className = (sq.dashed ? 'square dashed pc' : 'square pc') + sq.color;\n\t\tconst transform = 'rotate('+ sq.rotation + ',' + sq.cx + ',' + sq.cy + ')';\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<rect x={sq.x} y={sq.y} width={sq.width} height={sq.height} data-ref={sq.id} />\n\t\t\t\t{this.editBox(sq.isEdit, sq.box)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nSquareEdit.defaultProps = {\n\tsquare: null\n}\n\nSquareEdit.propTypes = {\n\tsquare: PropTypes.instanceOf(Square)\n}\n\nexport default SquareEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox'\nimport Ellipse from '../pitch/Ellipse';\n\nclass EllipseEdit extends Component {\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={true} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst el = this.props.ellipse;\n\t\tconst className = (el.dashed ? 'ellipse dashed pc' : 'ellipse pc') + el.color;\n\t\tconst transform = 'rotate('+ el.rotation + ',' + el.cx + ',' + el.cy + ')';\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<ellipse cx={el.cx} cy={el.cy} rx={el.rx} ry={el.ry} data-ref={el.id} />\n\t\t\t\t{this.editBox(el.isEdit, el.box)}\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nEllipseEdit.defaultProps = {\n\tellipse: null\n}\n\nEllipseEdit.propTypes = {\n\tellipse: PropTypes.instanceOf(Ellipse)\n}\n\nexport default EllipseEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Line from '../pitch/Line';\nimport DragHandle from './DragHandle';\n\nclass LineEdit extends Component {\n\n\teditHandles(l, isPath) {\n\t\tif (!l.isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\t// path editing only shows control points\n\t\tif (isPath) {\n\t\t\treturn (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<DragHandle id={\"edit-l2-\" + l.id} position={l.c1} />\n\t\t\t\t\t<DragHandle id={\"edit-l3-\" + l.id} position={l.c2} />\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t\t// line editing shows all control points\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<DragHandle id={\"edit-l1-\" + l.id} position={l.p1} />\n\t\t\t\t<DragHandle id={\"edit-l2-\" + l.id} position={l.c1} />\n\t\t\t\t<DragHandle id={\"edit-l3-\" + l.id} position={l.c2} />\n\t\t\t\t<DragHandle id={\"edit-l4-\" + l.id} position={l.p2} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\trenderPath(p, key) {\n\t\tconst d = \"M \" + p.p1.x + \" \" + p.p1.y + \" C \" + p.c1.x + \" \" + p.c1.y + \" \" + p.c2.x + \" \" + p.c2.y + \" \" + p.p2.x + \" \" + p.p2.y;\n\t\tconst markerStart = p.arrowStart ? \"url(#arrowStart)\" : null;\n\t\tconst markerEnd = p.arrowEnd ? \"url(#arrowEnd)\" : null;\n\t\treturn (\n\t\t\t<path key={key} d={d} data-ref={p.id} markerStart={markerStart} markerEnd={markerEnd} />\n\t\t);\n\t}\n\n\trender() {\n\t\tconst l = this.props.line;\n\t\tconst lineType = this.props.isPath ? 'path' : 'line';\n\t\tconst className = lineType + (l.dashed ? ' dashed pc' : ' pc') + l.color;\n\t\tconst allPaths = l.paths().map((p, index) => this.renderPath(p, index.toString()));\n\t\treturn (\n\t\t\t<g className={className}>\n\t\t\t\t{allPaths}\n\t\t\t\t{this.editHandles(l, this.props.isPath)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nLineEdit.defaultProps = {\n\tline: null,\n\tisPath: false\n}\n\nLineEdit.propTypes = {\n\tline: PropTypes.instanceOf(Line),\n\tisPath: PropTypes.bool\n}\n\nexport default LineEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Text from '../pitch/Text';\nimport EditBox from './EditBox'\n\nclass TextEdit extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._selectionStart = 0;\n\t\tthis._selectionEnd = 0;\n\t\tthis._boxPadding = 10;\t\t\t\t\t// padding for text bounding box\n\t\tthis._editRef = React.createRef();\t\t// reference to editor\n\t\tthis._textRef = React.createRef();\t\t// reference to text\n\t\tthis._cursorRef = React.createRef();\t// reference to cursor\n\t\tthis._boxRef = React.createRef();\t\t// reference to text box\n\t\tthis.editStart = this.editStart.bind(this);\n\t\tthis.editChange = this.editChange.bind(this);\n\t\tthis.editKeyUp = this.editKeyUp.bind(this);\n\t\tthis.editEnd = this.editEnd.bind(this);\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (this.props.text.isTextEdit) {\n\t\t\tthis._editRef.current.focus();\n\t\t}\n\t}\n\n\t// remove all previous text elements\n\tremoveText() {\n\t\twhile (this._textRef.current.firstChild) {\n\t\t\tthis._textRef.current.removeChild(this._textRef.current.firstChild);\n\t\t}\n\t}\n\n\t// add text element\n\taddTextLine(ln) {\n\t\tlet tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n\t\ttspan.setAttribute('x','0');\n\t\ttspan.setAttribute('dy','1.2em'); \n\t\ttspan.textContent = ln;\n\t\tthis._textRef.current.appendChild(tspan);\n\t}\n\n\t// draw cursor line for text\n\tdrawCursor(x, y, height) {\n\t\tconst cln = this._cursorRef.current;\n\t\tcln.setAttribute('x1', x);\n\t\tcln.setAttribute('y1', y);\n\t\tcln.setAttribute('x2', x);\n\t\tcln.setAttribute('y2', y + height);\n\t}\n\n\t// draw bounding box around text\n\tdrawTextBoundingBox(bBox) {\n\t\tconst x = bBox.x - this._boxPadding;\n\t\tconst y = bBox.y - this._boxPadding;\n\t\tconst width = bBox.width + this._boxPadding * 2;\n\t\tconst height = bBox.height + this._boxPadding * 2;\n\n\t\tconst box = this._boxRef.current;\n\t\tbox.setAttribute('x', x);\n\t\tbox.setAttribute('y', y);\n\t\tbox.setAttribute('width', width);\n\t\tbox.setAttribute('height', height);\n\t}\n\n\teditStart(e) {\n\t\tthis._editRef.current.value = this.props.text.text;\n\t}\n\n\teditChange(e) {\n\t\tthis.removeText();\n\t\tlet txt = this._editRef.current.value;\n\t\tlet ln = '';\n\t\tfor (let i = 0; i < txt.length; i++) {\n\t\t\tln += txt[i];\n\t\t\tif ('\\n' === txt[i]) {\n\t\t\t\tthis.addTextLine(ln);\n\t\t\t\tln = '';\n\t\t\t}\n\t\t}\n\t\tif (ln.length > 0) {\n\t\t\tthis.addTextLine(ln);\n\t\t}\n\t}\n\n\teditShowCursor() {\n\t\tif (0 === this._selectionEnd) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tconst cr = this._textRef.current.getExtentOfChar(this._selectionEnd-1);\n\t\t\tthis.drawCursor(cr.x + cr.width, cr.y, cr.height);\n\n\t\t\tconst bb = this._textRef.current.getBBox();\n\t\t\tthis.drawTextBoundingBox(bb);\n\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\t\t\t\n\t\t}\n\t}\n\n\teditKeyUp(e) {\n\t\tthis._selectionStart = this._editRef.current.selectionStart;\n\t\tthis._selectionEnd = this._editRef.current.selectionEnd;\n\t\tthis.editShowCursor();\n\t}\n\n\teditEnd(e) {\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n        let tx = this._editRef.current.value.trim();\n\t\tvar bb = this._textRef.current.getBBox();\n\t\tconsole.log(bb);\n        this.removeText();\n\t\tthis.props.onEditDone(\n\t\t\tthis.props.text.id, tx, \n\t\t\tbb.x, bb.y,\n\t\t\tbb.width, bb.height\n\t\t);\n\t}\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={true} showResize={false} />\n\t\t)\n\t}\n\n\teditor(tx) {\n\t\tif (!tx.isTextEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<line ref={this._cursorRef} strokeWidth=\"8\" />\n\t\t\t\t<rect ref={this._boxRef} className=\"editBox\" x=\"0\" y=\"0\" width={tx.width} height={tx.height} />\n\t\t\t\t<foreignObject>\n\t\t\t\t\t<textarea ref={this._editRef} onFocus={this.editStart} onInput={this.editChange} onKeyUp={this.editKeyUp} onBlur={this.editEnd}></textarea>\n\t\t\t\t</foreignObject>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\trenderLines(tx){\n\t\t// don't render lines in edit mode, created manually\n\t\tif (tx.isTextEdit) {\n\t\t\treturn null;\n\t\t}\n\t\tlet lines = tx.text.split(\"\\n\");\n\t\treturn lines.map((ln, index) => {\n\t\t\treturn (\n\t\t\t\t<tspan key={index} data-ref={tx.id} x=\"0\" dy=\"1.2em\">{ln}</tspan>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst tx = this.props.text;\n        const className = 'txt'+ tx.size + ' pc' + tx.color;\n        let transform = 'translate('+ tx.x + ',' + tx.y + ')';\n        if (0 !== tx.rotation) {\n\t\t\tlet cx = tx.bx + tx.bwidth / 2;\n\t\t\tlet cy = tx.by + tx.bheight / 2;\n            transform += ' rotate('+ tx.rotation + ',' + cx + ',' + cy + ')';\n        }\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<text ref={this._textRef} data-ref={tx.id} xmlSpace=\"preserve\">\n\t\t\t\t\t{this.renderLines(tx)}\n\t\t\t\t</text>\n\t\t\t\t{this.editor(tx)}\n\t\t\t\t{this.editBox(tx.isEdit, tx.box)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nTextEdit.defaultProps = {\n\ttext: null,\n\tonEditDone: null\n}\n\nTextEdit.propTypes = {\n\ttext: PropTypes.instanceOf(Text),\n\tonEditDone: PropTypes.func\n}\n\nexport default TextEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Goal extends Component {\n\n\trender() {\n\t\tconst w = this.props.width;\n\t\tconst h = this.props.height;\n\t\tconst hW = w / 2;\t// half width\n\t\tconst hH = h / 2;\t// half height\n\t\t// top left corner of rect regarding x,y center position\n\t\tconst tlX = this.props.x - hW;\n\t\tconst tlY = this.props.y - hH;\n\t\t// top right corner of rect regarding x,y center position\n\t\tconst trX = this.props.x + hW;\n\t\tconst trY = this.props.y - hH;\n\t\t// bottom right corner of rect regarding x,y center position\n\t\tconst brX = this.props.x + hW;\n\t\tconst brY = this.props.y + hH;\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect x={tlX} y={tlY} width={w} height={h} fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" data-ref={this.props.id} />\n\t\t\t\t<line x1={trX} y1={trY} x2={brX} y2={brY} strokeWidth=\"5\" stroke=\"white\" />\n\t\t\t\t<line x1={trX} y1={trY} x2={brX} y2={brY} stroke=\"red\" strokeDasharray=\"20\" strokeWidth=\"6\" />\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nGoal.defaultProps = {\n\tid: null,\n\tx: 0,\n\ty: 0,\n\twidth: 100,\n\theight: 300\n}\n\nGoal.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\twidth: PropTypes.number,\n\theight: PropTypes.number\n}\n\n\nexport default Goal;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n\nclass Ladder extends Component {\n\n\tsteps(xL, xR, yT, h, noSteps) {\n\t\tconst yStep = h / (noSteps + 1);\n\t\treturn [...Array(noSteps)].map((e, idx) => {\n\t\t\tconst y = yT + (idx + 1) * yStep;\n\t\t\treturn (\n\t\t\t\t<line key={idx} x1={xL} y1={y} x2={xR} y2={y} strokeWidth=\"5\" stroke=\"black\" data-ref={this.props.id} />\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst w = this.props.width;\n\t\tconst h = this.props.height;\n\t\tconst hW = w / 2;\t// half width\n\t\tconst hH = h / 2;\t// half height\n\t\tconst xL = this.props.x-hW;\t// left side\n\t\tconst xR = this.props.x+hW;\t// right side\n\t\tconst yT = this.props.y-hH;\t// top side\n\t\tconst yB = this.props.y+hH;\t// bottom side\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<line x1={xL} y1={yT} x2={xL} y2={yB} strokeWidth=\"5\" stroke=\"black\" data-ref={this.props.id} />\n\t\t\t\t{this.steps(xL, xR, yT, h, 5)}\n\t\t\t\t<line x1={xR} y1={yT} x2={xR} y2={yB} strokeWidth=\"5\" stroke=\"black\" data-ref={this.props.id} />\n\t\t\t</g>\n\t\t);\n\t}\n\n}\n\nLadder.defaultProps = {\n\tid: null,\n\tx: 0,\n\ty: 0,\n\twidth: 150,\n\theight: 350\n}\n\nLadder.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\twidth: PropTypes.number,\n\theight: PropTypes.number\n}\n\nexport default Ladder;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n\nclass Cone extends Component {\n\n\t// original shape points \"55,10 45,10 30,75 15,80 50,95 85,80 70,75\"\n\t// new is centered on cord 0,0\n\tstatic shape = [\n\t\t[5,-42],\n\t\t[-5,-42],\n\t\t[-20,23],\n\t\t[-35,28],\n\t\t[0,43],\n\t\t[35,28],\n\t\t[20,23]\n\t];\n\n\trender() {\n\t\tlet points = \"\";\n\t\tCone.shape.forEach(p => {\n\t\t\tconst x = p[0] + this.props.x;\n\t\t\tconst y = p[1] + this.props.y;\n\t\t\tpoints += `${x},${y} `;\n\t\t});\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<polygon points={points} stroke=\"black\"/>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nCone.defaultProps = {\n\tid: null,\n\tx: 0,\n\ty: 0,\n\twidth: 70,\n\theight: 85\n}\n\nCone.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\twidth: PropTypes.number,\n\theight: PropTypes.number\n}\n\nexport default Cone;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n\nclass Flag extends Component {\n\n\trender() {\n\t\tconst w = this.props.width;\n\t\tconst h = this.props.height;\n\t\tconst hW = w / 2;\t// half width\n\t\tconst hH = h / 2;\t// half height\n\t\tconst lX = this.props.x - hW;\t// left X\n\t\tconst tY = this.props.y - hH;\t// top Y\n\t\tconst bY = this.props.y + hH;\t// bottom Y\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect x={lX} y={tY} width={w} height={h/3} fill=\"red\" stroke=\"black\" strokeWidth=\"3\" data-ref={this.props.id} />\n\t\t\t\t<line x1={lX} y1={tY} x2={lX} y2={bY} stroke=\"black\" strokeWidth=\"6\" data-ref={this.props.id} />\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nFlag.defaultProps = {\n\tid: null,\n\tx: 0,\n\ty: 0,\n\twidth: 130,\n\theight: 280\n}\n\nFlag.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\twidth: PropTypes.number,\n\theight: PropTypes.number\n}\n\nexport default Flag;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox';\nimport Goal from './Goal';\nimport Ladder from './Ladder';\nimport Cone from './Cone';\nimport Flag from './Flag';\nimport Extras from '../pitch/Extras';\nimport { ExtrasType } from '../pitch/Constants';\n\nclass ExtrasEdit extends Component {\n\n\teditBox(isEdit, box, isBoxVisible, isResizable, isRotatable) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={isBoxVisible} showResize={isResizable} showRotate={isRotatable} />\n\t\t)\n\t}\n\n\trenderGfx(ex) {\n\t\tswitch (ex.t) {\n\t\t\tcase ExtrasType.Goal:\n\t\t\tcase ExtrasType.GoalSmall:\n\t\t\t\treturn (<Goal id={ex.id} x={ex.x} y={ex.y} width={ex.width} height={ex.height} />);\n\t\t\tcase ExtrasType.Ladder:\n\t\t\t\treturn (<Ladder id={ex.id} x={ex.x} y={ex.y} width={ex.width} height={ex.height} />);\n\t\t\tcase ExtrasType.Cone:\n\t\t\t\treturn (<Cone id={ex.id} x={ex.x} y={ex.y} width={ex.width} height={ex.height} />);\n\t\t\tcase ExtrasType.Flag:\n\t\t\t\treturn (<Flag id={ex.id} x={ex.x} y={ex.y} width={ex.width} height={ex.height} />);\n\t\t\tdefault:\n\t\t\t\treturn (<rect x={ex.x} y={ex.y} width={ex.width} height={ex.height} data-ref={ex.id} />);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst ex = this.props.extras;\n\t\tconst transform = 'rotate('+ ex.rotation + ',' + ex.x + ',' + ex.y + ')';\n\t\treturn (\n\t\t\t<g transform={transform}>\n\t\t\t\t{this.renderGfx(ex)}\n\t\t\t\t{this.editBox(ex.isEdit, ex.box, ex.isBoxVisible, ex.isResizable, ex.isRotatable)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nExtrasEdit.defaultProps = {\n\textras: null\n}\n\nExtrasEdit.propTypes = {\n\textras: PropTypes.instanceOf(Extras)\n}\n\nexport default ExtrasEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nclass PlayerDialog extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tplayer: {id:\"\", name:\"\", no: 0}\n\t\t};\n\n\t\t// input references\n\t\tthis._refName = React.createRef();\n\t\tthis._refNumber = React.createRef();\n\n\t\t// events\n\t\tthis.openDialog = this.openDialog.bind(this);\n\t\tthis.close = this.close.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.remove = this.remove.bind(this);\n\t}\n\t\n\topenDialog(player) {\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\tplayer: player\n\t\t});\n\t}\n\n\tclose() {\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\tsave() {\n\t\tthis.close();\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onEditDone({\n\t\t\tid: this.state.player.id,\n\t\t\tremove: false,\n\t\t\tname: this._refName.current.value,\n\t\t\tno: Number.parseInt(this._refNumber.current.value)\n\t\t})\n\t}\n\n\tremove() {\n\t\tthis.close();\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onEditDone({\n\t\t\tid: this.state.player.id,\n\t\t\tremove: true\n\t\t})\n\t}\n\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Dialog open={this.state.open} onClose={this.close} aria-labelledby=\"form-dialog-title\">\n\t\t\t\t\t<DialogTitle id=\"form-dialog-title\">Edit player</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<TextField inputRef={this._refNumber} margin=\"dense\" id=\"playerNumber\" defaultValue={this.state.player.no} label=\"Number\" type=\"number\" fullWidth autoFocus />\n\t\t\t\t\t\t<TextField inputRef={this._refName} margin=\"dense\" id=\"playerName\" defaultValue={this.state.player.name} label=\"Name\" type=\"text\" fullWidth />\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={this.remove} color=\"primary\">Remove</Button>\n\t\t\t\t\t\t<Button onClick={this.close} color=\"primary\">Cancel</Button>\n\t\t\t\t\t\t<Button onClick={this.save} color=\"primary\">Save</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nPlayerDialog.defaultProps = {\n\tonEditDone: null\n}\n\nPlayerDialog.propTypes = {\n\tonEditDone: PropTypes.func\n}\n\nexport default PlayerDialog;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PitchFutsal from '../pitch/PitchFutsal';\nimport DrawMode from '../pitch/DrawMode';\nimport { withStyles } from '@material-ui/core/styles';\nimport PlayerEdit from './PlayerEdit'\nimport BallEdit from './BallEdit'\nimport SquareEdit from './SquareEdit'\nimport EllipseEdit from './EllipseEdit'\nimport LineEdit from './LineEdit'\nimport TextEdit from './TextEdit'\nimport ExtrasEdit from './ExtrasEdit'\nimport PlayerDialog from './PlayerDialog'\n\n// this is for offset from toolbar and default class\nconst styles = theme => ({\n\toffset: {\n\t\tpaddingTop: theme.mixins.toolbar.minHeight,\n\t}\n})\n\n// define object types for mouse dragging\nconst DragObject = {\n\tNone: -1,\n\tPlayer: 0,\n\tBall: 1,\n\tCone: 2,\n\tGoal: 3,\n\tEditTopLeft: 4,\n\tEditTopRight: 5,\n\tEditBottomLeft: 6,\n\tEditBottomRight: 7,\n\tEditMove: 8,\n\tEditRotate: 9,\n\tEditLineP1: 10,\n\tEditLineC1: 11,\n\tEditLineC2: 12,\n\tEditLineP2: 13\n};\n\n// defines way to check draggable object\nconst DragObjectCheck = [\n\t{prefix: \"pl\", removePrefix: false, typ:  DragObject.Player},\n\t{prefix: \"bl\", removePrefix: false, typ:  DragObject.Ball},\n\t{prefix: \"edit-tl-\", removePrefix: true, typ:  DragObject.EditTopLeft},\n\t{prefix: \"edit-tr-\", removePrefix: true, typ:  DragObject.EditTopRight},\n\t{prefix: \"edit-bl-\", removePrefix: true, typ:  DragObject.EditBottomLeft},\n\t{prefix: \"edit-br-\", removePrefix: true, typ:  DragObject.EditBottomRight},\n\t{prefix: \"edit-mv-\", removePrefix: true, typ:  DragObject.EditMove},\n\t{prefix: \"edit-rt-\", removePrefix: true, typ:  DragObject.EditRotate},\n\t{prefix: \"edit-l1-\", removePrefix: true, typ:  DragObject.EditLineP1},\n\t{prefix: \"edit-l2-\", removePrefix: true, typ:  DragObject.EditLineC1},\n\t{prefix: \"edit-l3-\", removePrefix: true, typ:  DragObject.EditLineC2},\n\t{prefix: \"edit-l4-\", removePrefix: true, typ:  DragObject.EditLineP2}\n];\n\n\nclass PitchEdit extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._editRef = React.createRef();\t// reference to editor container\n\t\tthis._bgRef = React.createRef();\t// background reference to get client size of pitch for editing\n\t\tthis._playerDialogRef = React.createRef(); // edit player dialog reference\n\t\tthis._orgWidth = this.props.viewBoxRight - this.props.viewBoxLeft;\n\t\tthis._orgHeight = this.props.viewBoxBottom - this.props.viewBoxTop;\n\t\tthis._pitch = this.props.pitch;\n\n\t\t// mouse drag init\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t\tthis._mouseX = 0;\n\t\tthis._mouseY = 0;\n\n\t\t// add events\n\t\tthis.hContextMenu = this.hContextMenu.bind(this);\n\t\tthis.hMouseDown = this.hMouseDown.bind(this);\n\t\tthis.hMouseUp = this.hMouseUp.bind(this);\n\t\tthis.hMouseMove = this.hMouseMove.bind(this);\n\t\tthis.textEditDone = this.textEditDone.bind(this);\n\t\t\n\t\t// callbacks\n\t\tthis.playerEditDone = this.playerEditDone.bind(this);\n\t}\n\n\tgetScale() {\n\t\tconst box = this._bgRef.current.getBoundingClientRect();\n\t\treturn {\n\t\t\tX: this._orgWidth / box.width,\n\t\t\tY: this._orgHeight / box.height\n\t\t}\n\t}\n\n\t// TODO: reconsider name since it returns all positions\n\tgetRealPosition(e) {\n\t\tlet scale = this.getScale();\t// TODO: reconsider scale\n\t\tlet box = this._bgRef.current.getBoundingClientRect();\n \t\tlet x = e.clientX - box.left;\t\t\t//x position within the element.\n  \t\tlet y = e.clientY - box.top; \t\t\t//y position within the element.\n\t\tlet deltaX = e.clientX - this._mouseX;\t// deltaX mouse move on screen\n\t\tlet deltaY = e.clientY - this._mouseY;\t// deltaY mouse move on screen\n\t\tthis.resetMouseDrag(e);\n\t\tlet realPosition = {\n\t\t\tscaleX: scale.X,\n\t\t\tscaleY: scale.Y,\n\t\t\tX: x * scale.X,\n\t\t\tY: y * scale.Y,\n\t\t\tdeltaX: deltaX * scale.X,\n\t\t\tdeltaY: deltaY * scale.Y\n\t\t}\n\t\treturn realPosition;\n\t}\n\n\tresetMouseDrag(e) {\n\t\tthis._mouseX = e.clientX;\n\t\tthis._mouseY = e.clientY;\n\t}\n\t\n\tisDragStarted(e) {\n\t\tif (0 !== e.button) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!e.target.classList.contains('draggable')) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._dragNode = e.target.getAttribute(\"data-ref\");\n\t\tif (null === this._dragNode) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.resetMouseDrag(e);\n\n\t\t// get drag object\n\t\tthis._dragObjectType = DragObject.None;\n\t\tfor (const chk of DragObjectCheck ) {\n\t\t\tif (!this._dragNode.startsWith(chk.prefix)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._dragObjectType = chk.typ;\n\t\t\tif (chk.removePrefix) {\n\t\t\t\tthis._dragNode = this._dragNode.replace(chk.prefix,\"\");\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t\n\tplayerEditStarted(editNode) {\n\t\tconst editPlayer = this.props.pitch.playerEditStart(editNode);\n\t\tif (null === editPlayer) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._playerDialogRef.current.openDialog(editPlayer);\n\t\treturn true;\n\t}\n\n\t// player edit dialog callback\n\tplayerEditDone(player) {\n\t\tthis.props.pitch.playerEditDone(player);\n\t}\n\n\tobjectDrag(posX, posY, deltaX, deltaY, snap) {\n\t\tconst p = this.props.pitch;\n\t\tswitch (this._dragObjectType) {\n\t\t\tcase DragObject.Player:\n\t\t\t\tp.playerMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.Ball:\n\t\t\t\tp.ballMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopLeft:\n\t\t\t\tp.editTopLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopRight:\n\t\t\t\tp.editTopRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomLeft:\n\t\t\t\tp.editBottomLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomRight:\n\t\t\t\tp.editBottomRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditMove:\n\t\t\t\tp.editMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditRotate:\n\t\t\t\tp.editRotate(this._dragNode, posX, posY, snap);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP1:\n\t\t\t\tp.lineEdit('p1', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC1:\n\t\t\t\tp.lineEdit('c1', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC2:\n\t\t\t\tp.lineEdit('c2', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP2:\n\t\t\t\tp.lineEdit('p2', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Invalid drag object type\", this._dragObjectType, this._dragNode);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thContextMenu(e) {\n\t\tif (this.props.drawMode.mode !== 'select') {\n\t\t\treturn;\n\t\t}\n\t\tlet id = e.target.getAttribute(\"data-ref\");\n\t\tif (null === id) {\n\t\t\treturn;\n\t\t}\n\t\tconst p = this.props.pitch;\n\t\tif (this.playerEditStarted(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.squareEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.ellipseEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.lineEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.textEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.extrasEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t}\n\n\thMouseDown(e) {\n\t\tlet pos = this.getRealPosition(e);\n\t\tconst dm = this.props.drawMode;\n\t\tconst p = this.props.pitch;\n\t\tswitch (dm.mode) {\n\t\t\tcase 'line':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.lineCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineArrowStart, dm.lineArrowEnd, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.squareCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.ellipseCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.textCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.textSize\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tif (this.isDragStarted(e)) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thMouseUp(e) {\n\t\te.preventDefault();\n\t\tconst p = this.props.pitch;\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tp.lineCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tp.squareCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tp.ellipseCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, pos.deltaX, pos.deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t\t// Reset editing\n\t\tif (0 === e.button && this._dragObjectType === DragObject.None) {\n\t\t\tp.endAllEdits();\n\t\t}\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t}\n\n\thMouseMove(e) {\n\t\tif (null == this._dragNode) {\n\t\t\treturn;\n\t\t}\n\t\tconst p = this.props.pitch;\n\t\te.preventDefault();\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tp.lineResize(this._dragNode, pos.deltaX, pos.deltaY);\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tp.squareResize(this._dragNode, pos.X, pos.Y, isShift);\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tp.ellipseResize(this._dragNode, pos.X, pos.Y, isShift);\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, pos.deltaX, pos.deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\ttextEditDone(id, text, bx, by, bwidth, bheight) {\n\t\tthis.props.pitch.textEditDone(id, text, bx, by, bwidth, bheight);\n\t}\n\n\t// return current SVG in editor\n\t// TODO: Cleanup unused players and balls\n\tgetSVG() {\n\t\treturn {\n\t\t\twidth: this._orgWidth,\n\t\t\theight: this._orgHeight,\n\t\t\tsvgText: this._editRef.current.children[0].outerHTML\n\t\t}\n\t}\n\n\trenderPlayers(players, isEdit, isPrevFrame) {\n\t\tif (null === players) {\n\t\t\treturn null;\n\t\t}\n\t\tconst keyPrefix = isEdit ? \"ed\" : \"\";\n\t\treturn players.map((pl, index) => {\n\t\t\treturn (\n\t\t\t\t<PlayerEdit key={keyPrefix + index.toString()} player={pl} isEdit={isEdit} isPrevFrame={isPrevFrame} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderBalls(balls, isEdit, isPrevFrame) {\n\t\tif (null === balls) {\n\t\t\treturn null;\n\t\t}\n\t\tconst keyPrefix = isEdit ? \"ed\" : \"\";\n\t\treturn balls.map((b, index) => {\n\t\t\treturn (\n\t\t\t\t<BallEdit key={keyPrefix + index.toString()} ball={b} isEdit={isEdit} isPrevFrame={isPrevFrame} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderSquares(squares){\n\t\treturn squares.map((s, index) => {\n\t\t\treturn (\n\t\t\t\t<SquareEdit key={index.toString()} square={s} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderEllipses(ellipses){\n\t\treturn ellipses.map((el, index) => {\n\t\t\treturn (\n\t\t\t\t<EllipseEdit key={index.toString()} ellipse={el} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderLines(lines, isPath){\n\t\tif (null === lines) {\n\t\t\treturn null;\n\t\t}\n\t\tconst keyPrefix = isPath ? \"ph\" : \"\";\n\t\treturn lines.map((l, index) => {\n\t\t\t// don't render lines that are single point\n\t\t\tif (l.empty()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<LineEdit key={keyPrefix + index.toString()} line={l} isPath={isPath} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderTexts(texts){\n\t\treturn texts.map((tx, index) => {\n\t\t\treturn (\n\t\t\t\t<TextEdit key={index.toString()} text={tx} onEditDone={this.textEditDone} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderExtras(extras){\n\t\treturn extras.map((ex, index) => {\n\t\t\treturn (\n\t\t\t\t<ExtrasEdit key={index.toString()} extras={ex} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderPitchOverlay(){\n\t\tconst o = this.props.pitch.overlaySize();\n\t\tif (null === o) {\n\t\t\treturn null;\n\t\t}\n\t\tconst posX = (this._orgWidth - o.width) / 2;\n\t\tconst posY = (this._orgHeight - o.height) / 2;\n\t\tconst transform = 'translate(' + posX + ' ' + posY + ')';\n\t\treturn (<rect width={o.width} height={o.height} transform={transform} fill=\"none\" />);\n\t}\n\n\tgeneratePicthStyles() {\n\t\t// default colors list\n\t\tconst colors = this.props.drawMode.colorOptions.map((col, index) => {\n\t\t\treturn '.pc'+ index +' { fill: '+col+'; stroke: '+ col +'; }';\n\t\t});\n\n\t\t// edit color\n\t\tconst allColors = colors.concat([\n\t\t\t'.pc' + this.props.drawMode.editColorIndex  + ' { fill: '+ this.props.drawMode.editColor +'; stroke: '+ this.props.drawMode.editColor +'; }'\n\t\t]);\n\n\t\treturn allColors.concat([\n\t\t\t'.bc0 { fill: #ffa500; }',\n\t\t\t'.bc1 { fill: #cc3333; }',\n\t\t\t'.bc2 { fill: #222333; }',\n\t\t\t'.bc3 { fill: #0000ff; }',\n\t\t\t'.bc4 { fill: #ffffff; }',\n\t\t\t'.bc4 svg { fill: #000000; }',\n\t\t\t'#texts { font-family: sans-serif; font-size: 10em; cursor: default; user-select: none; }',\n\t\t\t'.txt0 text { font-size: 0.5em; }',\n\t\t\t'.txt1 text { font-size: 0.8em; }',\n\t\t\t'.txt2 text { font-size: 1em; }',\n\t\t\t'.txt3 text { font-size: 1.5em; }',\n\t\t\t'.txt4 text { font-size: 2em; }',\n\t\t\t'.player { pointer-events: none; }',\n\t\t\t'.player text { font-family: sans-serif; fill: black; }',\n\t\t\t'.player text.number { fill: white; }',\n\t\t\t'.dashed { stroke-dasharray: 20; }',\n\t\t\t'.square { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t'.ellipse { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t'.line { stroke-width: 12; }',\n\t\t\t'.line path { fill: none; stroke-width: 12; }',\n\t\t\t'.path { stroke-width: 6; }',\n\t\t\t'.path path { fill: none; stroke-width: 6; }',\n\t\t\t'.draggable { cursor: move; pointer-events: all;}',\n\t\t\t'.editBox { fill: none; stroke-width: 8; stroke-opacity: 1; }',\n\t\t\t'.editTransparent { fill: none; stroke-width: 0; }',\n\t\t\t'.editCorner { fill: red; stroke-width: 0; stroke-opacity: 1; }',\n\t\t\t'.transparent { fill-opacity: 50%; stroke-opacity: 50%; }'\n\t\t]);\n\t}\n\n\trender() {\n\t\tconst viewBox = this.props.viewBoxLeft.toString() + ' ' + this.props.viewBoxTop.toString() + ' ' + this.props.viewBoxRight.toString() + ' ' + this.props.viewBoxBottom.toString()\n\n\t\t// default class is full screen width and height with padding for menu height\n\t\tconst pitchClasses = \"pitch \" + this.props.classes.offset;\n\n\t\t// Calculate pitch position in viewBox\n\t\tconst pitchLeft = (this._orgWidth - 4000) / 2; // Goals are relative to pitch no need to take them in calc\n\t\tconst pitchTop = (this._orgHeight - 2000) / 2;\n\t\tconst pitchTransform = 'translate(' + pitchLeft + ' ' + pitchTop + ')';\n\n\t\t// calculate players position in viewbox\n\t\tconst playersLeft = pitchLeft + 50;\n\t\tconst playersTop = pitchTop + 2000 + 50 + 25;\n\t\tconst playersTransform = 'translate(' + playersLeft + ' ' + playersTop + ')';\n\n\t\t// calculate balls position in viewBox\n\t\tconst ballsLeft = pitchLeft + 1050\n\t\tconst ballsTop = pitchTop + 2000 + 90;\n\t\tconst ballsTransform = 'translate(' + ballsLeft + ' ' + ballsTop + ')'; // \"translate(1200 2210)\"\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t<div ref={this._editRef} className={pitchClasses}>\n\t\t\t\t<svg xmlns='http://www.w3.org/2000/svg' viewBox={viewBox} onContextMenu={this.hContextMenu} onMouseDown={this.hMouseDown} onMouseUp={this.hMouseUp} onMouseMove={this.hMouseMove}>\n\t\t\t\t\t<style>\n\t\t\t\t\t\t{this.generatePicthStyles()}\n\t\t\t\t\t</style>\n\t\t\t\t\t<pattern id=\"goal-net\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" stroke=\"black\" patternUnits=\"userSpaceOnUse\">\n\t\t\t\t\t\t<line x1=\"0\" x2=\"20\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t\t<line x1=\"20\" x2=\"00\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t</pattern>\n\t\t\t\t\t<marker id=\"arrowEnd\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M0,0 L0,6 L9,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<marker id=\"arrowStart\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M9,0 L9,6 L0,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<g id=\"background\" ref={this._bgRef}>\n\t\t\t\t\t\t<rect width={this._orgWidth} height={this._orgHeight} fill=\"#b7b7b7\" fillOpacity=\"0.5\" />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitch\" transform={pitchTransform} fill=\"#0280c6\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t<rect width=\"4000\" height=\"2000\" />\n\t\t\t\t\t\t<line x1=\"2000\" x2=\"2000\" y1=\"0\" y2=\"2000\" />\n\t\t\t\t\t\t<circle r=\"300\" cx=\"2000\" cy=\"1000\" fill=\"none\" />\n\t\t\t\t\t\t<circle r=\"12\" cx=\"2000\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t<g id=\"corner_marks\">\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M25,0 a25,25 0 0,1 -25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M4000,25 a25,25 0 0,1 -25,-25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,1975 a25,25 0 0,1 25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3975,2000 a25,25 0 0,1 25,-25\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"substitition-zones\">\n\t\t\t\t\t\t\t<line x1=\"1000\" x2=\"1000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"1500\" x2=\"1500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"2500\" x2=\"2500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"3000\" x2=\"3000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left\">\n\t\t\t\t\t\t\t<line x1=\"500\" x2=\"500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"600\" x2=\"600\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"600\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,242 a600,600 0 0,1 600,600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M600,1158 a600,600 0 0,1 -600,600\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t\t<g id=\"goal-left\">\n\t\t\t\t\t\t\t\t<rect width=\"100\" height=\"300\" x=\"-100\" y=\"850\" fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" />\n\t\t\t\t\t\t\t\t<line x1=\"0\" x2=\"0\" y1=\"850\" y2=\"1150\" />\n\t\t\t\t\t\t\t\t<line x1=\"0\" x2=\"0\" y1=\"850\" y2=\"1150\" stroke=\"red\" strokeDasharray=\"20\" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"1000\" cy=\"1000\"/>\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right\">\n\t\t\t\t\t\t\t<line x1=\"3500\" x2=\"3500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"3400\" x2=\"3400\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3400\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,842 a600,600 0 0,1 600,-600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,1158 a600,600 0 0,0 600,600\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t\t<g id=\"goal-right\">\n\t\t\t\t\t\t\t\t<rect width=\"100\" height=\"300\" x=\"4000\" y=\"850\" fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" />\n\t\t\t\t\t\t\t\t<line x1=\"4000\" x2=\"4000\" y1=\"850\" y2=\"1150\" />\n\t\t\t\t\t\t\t\t<line x1=\"4000\" x2=\"4000\" y1=\"850\" y2=\"1150\" stroke=\"red\" strokeDasharray=\"20\" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3000\" cy=\"1000\" />\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitchOverlay\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t{this.renderPitchOverlay()}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"ellipses\">{this.renderEllipses(this.props.pitch.ellipses)}</g>\n\t\t\t\t\t<g id=\"squares\">{this.renderSquares(this.props.pitch.squares)}</g>\n\t\t\t\t\t<g id=\"extras\">{this.renderExtras(this.props.pitch.extras)}</g>\n\t\t\t\t\t<g id=\"players\" transform={playersTransform} fontSize=\"50\">\n\t\t\t\t\t\t{this.renderLines(this.props.pitch.playerPathsCurrentKeyFrame(), true)}\n\t\t\t\t\t\t{this.renderPlayers(this.props.pitch.playersPreviousKeyFrame(), false, true)}\n\t\t\t\t\t\t{this.renderPlayers(this.props.pitch.playersCurrentKeyFrame(), true, false)}\n\t\t\t\t\t\t{this.renderPlayers(this.props.pitch.AnimPlayers, false, false)}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"balls\" transform={ballsTransform}>\n\t\t\t\t\t\t{this.renderLines(this.props.pitch.ballPathsCurrentKeyFrame(), true)}\n\t\t\t\t\t\t{this.renderBalls(this.props.pitch.ballsPreviousKeyFrame(), false, true)}\n\t\t\t\t\t\t{this.renderBalls(this.props.pitch.ballsCurrentKeyFrame(), true, false)}\n\t\t\t\t\t\t{this.renderBalls(this.props.pitch.AnimBalls, false, false)}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"lines\">{this.renderLines(this.props.pitch.lines, false)}</g>\n\t\t\t\t\t<g id=\"texts\">{this.renderTexts(this.props.pitch.texts)}</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<PlayerDialog ref={this._playerDialogRef} onEditDone={this.playerEditDone} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nPitchEdit.defaultProps = {\n\tpitch: null,\n\tdrawMode: null,\n\tviewBoxLeft: 0,\n\tviewBoxTop: 0,\n\tviewBoxRight: 4500,\n\tviewBoxBottom: 2500\n}\n\nPitchEdit.propTypes = {\n\tpitch: PropTypes.instanceOf(PitchFutsal),\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\tviewBoxLeft: PropTypes.number,\n\tviewBoxTop: PropTypes.number,\n\tviewBoxRight: PropTypes.number,\n\tviewBoxBottom: PropTypes.number\n}\n\nexport default withStyles(styles, { withTheme: true })(PitchEdit);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Divider from '@material-ui/core/Divider';\nimport Collapse from '@material-ui/core/Collapse';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Switch from '@material-ui/core/Switch';\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport SportsSoccerIcon from '@material-ui/icons/SportsSoccer';\nimport { CursorDefault, VectorLine, ShapeSquarePlus, ShapeOvalPlus, ArrowLeft, ArrowRight, ArrowLeftRight, Minus, DotsHorizontal } from 'mdi-material-ui'\n\nclass DrawMenu extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tlineArrows: false,\n\t\t\tlinePattern: false,\n\t\t\tpitchOverlays: false,\n\t\t\ttextSizes: false\n\t\t}\n\n\t\tthis.open = this.open.bind(this);\n\t\tthis.close = this.close.bind(this);\n\n\t\tthis.lineArrowsToggle = this.lineArrowsToggle.bind(this);\n\t\tthis.lineArrowEndToggle = this.lineArrowEndToggle.bind(this);\n\t\tthis.lineArrowStartToggle = this.lineArrowStartToggle.bind(this);\n\n\t\tthis.linePatternToggle = this.linePatternToggle.bind(this);\n\t\tthis.lineDashedOn = this.lineDashedOn.bind(this);\n\t\tthis.lineDashedOff = this.lineDashedOff.bind(this);\n\n\t\tthis.pitchOverlaysToggle = this.pitchOverlaysToggle.bind(this); \n\t\tthis.pitchOverlayOnChange = this.pitchOverlayOnChange.bind(this);\n\n\t\tthis.colorSelect = this.colorSelect.bind(this);\n\t\tthis.extrasSelect = this.extrasSelect.bind(this);\n\n\t\tthis.textSizesToggle = this.textSizesToggle.bind(this);\n\t\tthis.textSizeSelected = this.textSizeSelected.bind(this);\n\t}\n\n\topen() {\n\t\tthis.setState({open:true});\n\t}\n\n\tclose(e) {\n\t\t// read from \"data-value\" attribute\n\t\tlet mode = e.currentTarget.dataset.value;\n\t\tconsole.log(mode);\n\t\tif (mode) {\n\t\t\tthis.props.drawMode.mode = mode;\n\t\t}\n\t\t// close sub menus\n\t\tthis.setState({\n\t\t\topen:false,\n\t\t\tlineArrows: false,\n\t\t\tlinePattern: false,\n\t\t\tpitchOverlays: false,\n\t\t\ttextSizes: false\n\t\t});\n\t}\n\n\tlineArrowsToggle() {\n\t\tthis.setState({\n\t\t\tlineArrows: !this.state.lineArrows\n\t\t});\n\t}\n\n\tlineArrowStartToggle() {\n\t\tthis.props.drawMode.lineArrowStart = !this.props.drawMode.lineArrowStart\n\t}\n\n\tlineArrowEndToggle() {\n\t\tthis.props.drawMode.lineArrowEnd = !this.props.drawMode.lineArrowEnd\n\t}\n\n\tlineArrowsIcon() {\n\t\tconst dm = this.props.drawMode;\n\t\tif (dm.lineArrowStart && dm.lineArrowEnd) {\n\t\t\treturn (<ArrowLeftRight />);\n\t\t}\n\t\tif (!dm.lineArrowStart && dm.lineArrowEnd) {\n\t\t\treturn (<ArrowRight />);\n\t\t}\n\t\tif (dm.lineArrowStart && !dm.lineArrowEnd) {\n\t\t\treturn (<ArrowLeft />);\n\t\t}\n\t\treturn (<Minus />);\n\t}\n\n\tlinePatternToggle() {\n\t\tthis.setState({\n\t\t\tlinePattern: !this.state.linePattern\n\t\t});\n\t}\n\n\tlineDashedOn() {\n\t\tthis.props.drawMode.lineDashed = true;\n\t\tthis.setState({\n\t\t\tlinePattern: false\n\t\t});\n\t}\n\n\tlineDashedOff() {\n\t\tthis.props.drawMode.lineDashed = false;\n\t\tthis.setState({\n\t\t\tlinePattern: false\n\t\t});\n\t}\n\n\tlinePatternIcon() {\n\t\tif (this.props.drawMode.lineDashed) {\n\t\t\treturn (<DotsHorizontal />);\n\t\t}\n\t\treturn (<Minus />);\n\t}\n\n\tpitchOverlaysRender() {\n\t\treturn this.props.drawMode.pitchOverlayOptions.map((txt, index) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={index} control={<Radio />} label={txt} value={txt} style={{marginLeft:0}} />\n\t\t\t);\n\t\t});\n\t}\n\n\tpitchOverlaysToggle() {\n\t\tthis.setState({\n\t\t\tpitchOverlays: !this.state.pitchOverlays\n\t\t});\n\t}\n\n\tpitchOverlayOnChange(event) {\n\t\tthis.props.drawMode.pitchOverlay = event.target.value;\n\t\tthis.setState({\n\t\t\tpitchOverlays: false,\n\t\t\topen: false\n\t\t});\n\t}\n\n\tcolorSelect(e) {\n\t\tthis.close(e);\n\t\tthis.props.paletteDialogRef().Show();\n\t}\n\n\textrasSelect(e) {\n\t\tthis.close(e);\n\t\tthis.props.extrasDialogRef().Show();\n\t}\n\n\ttextSizesToggle() {\n\t\tthis.setState({\n\t\t\ttextSizes: !this.state.textSizes\n\t\t});\n\t}\n\n\ttextSizeSelected(e) {\n\t\tlet sz = e.target.value;\n\t\tif (sz) {\n\t\t\tthis.props.drawMode.textSize = parseInt(sz);\n\t\t}\n\t\tthis.textSizesToggle();\n\t}\n\n\ttextSizeItemsRender() {\n\t\treturn this.props.drawMode.textSizeOptions.map((txt, index) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={index} control={<Radio />} label={txt} value={index} style={{marginLeft:0}} />\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst arrowsIcon = this.lineArrowsIcon();\n\t\tconst patternIcon = this.linePatternIcon();\n\n\t\tconst allColors = this.props.drawMode.colorOptions;\n\t\tconst colorSelected = allColors[this.props.drawMode.color];\n\t\tconst colorNameSelected = \"Color \" + this.props.drawMode.color;\n\n\t\treturn (\n\t\t<Menu id=\"drawingMenu\" anchorEl={this.props.anchorEl} keepMounted open={this.state.open} onClose={this.close}>\n\t\t\t<MenuItem data-value=\"select\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<CursorDefault />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Select / Move\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem onClick={this.pitchOverlaysToggle}>\n\t\t\t\t<ListItemText primary=\"Pitch overlay\" />\n\t\t\t\t{this.state.pitchOverlays ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.pitchOverlays} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<RadioGroup name=\"radio-pitch-overlays\" value={this.props.drawMode.pitchOverlay} onChange={this.pitchOverlayOnChange}>\n\t\t\t\t\t{this.pitchOverlaysRender()}\n\t\t\t\t</RadioGroup>\n\t\t\t</Collapse>\n\t\t\t<Divider />\n\t\t\t<MenuItem onClick={this.colorSelect}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<PaletteIcon style={{ color: colorSelected }} />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary={colorNameSelected} />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem onClick={this.extrasSelect}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<SportsSoccerIcon/>\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Extras\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"line\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<VectorLine />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw line\" />\n\t\t\t</MenuItem>\n\t\t\t<MenuItem onClick={this.lineArrowsToggle}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t{arrowsIcon}\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Line arrows\" />\n\t\t\t\t{this.state.lineArrows ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.lineArrows} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<List component=\"div\" disablePadding>\n\t\t\t\t\t<MenuItem onClick={this.lineArrowEndToggle}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<ArrowRight />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"End\" />\n\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t<Switch edge=\"end\" onChange={this.lineArrowEndToggle} checked={this.props.drawMode.lineArrowEnd} />\n\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem onClick={this.lineArrowStartToggle}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<ArrowLeft />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Start\" />\n\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t<Switch edge=\"end\" onChange={this.lineArrowStartToggle} checked={this.props.drawMode.lineArrowStart} />\n\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</List>\n\t\t\t</Collapse>\n\t\t\t<MenuItem onClick={this.linePatternToggle}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t{patternIcon}\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Line pattern\" />\n\t\t\t\t{this.state.linePattern ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.linePattern} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<List component=\"div\" disablePadding>\n\t\t\t\t\t<MenuItem onClick={this.lineDashedOff}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<Minus />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Solid\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem onClick={this.lineDashedOn}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<DotsHorizontal />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Dashed\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</List>\n\t\t\t</Collapse>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"square\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<ShapeSquarePlus />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw square\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"ellipse\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<ShapeOvalPlus />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw ellipse\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"text\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<TextFieldsIcon />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Write text\" />\n\t\t\t</MenuItem>\n\t\t\t<MenuItem onClick={this.textSizesToggle}>\n\t\t\t\t<ListItemText primary=\"Text size\" />\n\t\t\t\t{this.state.textSizes ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.textSizes} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<RadioGroup name=\"radio-pitch-textSize\" value={this.props.drawMode.textSize} onChange={this.textSizeSelected}>\n\t\t\t\t\t{this.textSizeItemsRender()}\n\t\t\t\t</RadioGroup>\n\t\t\t</Collapse>\n\t\t</Menu>\n\t\t);\n\t}\n}\n\nDrawMenu.defaultProps = {\n\tanchorEl: null,\n\tdrawMode: null,\n\tpaletteDialogRef: null\n}\n\nDrawMenu.propTypes = {\n\tanchorEl: PropTypes.func,\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\tpaletteDialogRef: PropTypes.func\n};\n\nexport default DrawMenu;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport { withStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Radio from '@material-ui/core/Radio';\nimport CheckIcon from '@material-ui/icons/Check';\n\n// this is for offset from toolbar and default class\nconst styles = theme => ({\n\tradio: {\n\t\tpadding: 0,\n\t},\n\tradioIcon: {\n\t\twidth: 48,\n\t\theight: 48,\n\t},\n\tradioIconSelected: {\n\t\twidth: 48,\n\t\theight: 48,\n\t\tborder: '1px solid white',\n\t\tcolor: theme.palette.common.white,\n\t\tdisplay: 'flex',\n\t\tjustifyContent: 'center',\n\t\talignItems: 'center',\n\t}\n})\n\nclass PaletteDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\topen: false\n\t\t}\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.colorChange = this.colorChange.bind(this);\n\t}\n\n\tShow() {\n\t\tthis.setState({\n\t\t\topen: true\n\t\t});\n\t}\n\n\thandleClose() {\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\tcolorChange(e) {\n\t\tthis.props.drawMode.color = parseInt(e.target.value);\n\t\tthis.handleClose();\n\t}\n\n\tradioIcon(isChecked, color) {\n\t\tif (!isChecked) {\n\t\t\treturn (\n\t\t\t\t<div className={this.props.classes.radioIcon} style={{ backgroundColor: color }} />\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div className={this.props.classes.radioIconSelected} style={{ backgroundColor: color }}>\n\t\t\t\t<CheckIcon style={{ fontSize: 30 }} />\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderRadios() {\n\t\tconst dm = this.props.drawMode;\n\t\treturn dm.colorOptions.map((col, index) => {\n\t\t\tconst ico = this.radioIcon(false, col);\n\t\t\tconst icoChk = this.radioIcon(true, col);\n\t\t\treturn (\n\t\t\t\t<Radio name=\"color-select\" key={index} value={index} className={this.props.classes.radio} checked={index === dm.color} icon={ico} checkedIcon={icoChk} onChange={this.colorChange} />\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitle id=\"responsive-dialog-title\">Color palette</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t{this.renderRadios()}\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nPaletteDialog.defaultProps = {\n\tdrawMode: null\n}\n\nPaletteDialog.propTypes = {\n\tclasses: PropTypes.object.isRequired,\n\tdrawMode: PropTypes.instanceOf(DrawMode)\n};\n\nexport default withStyles(styles, { withTheme: true })(PaletteDialog);","import React, { Component } from 'react';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\n\n// TODO: Fix fullscreen exit on esc key\nclass FullscreenToggle extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tfullScreen: false\n\t\t}\n\n\t\tthis.toggleFullScreen = this.toggleFullScreen.bind(this);\n\t}\n\n\tdomFullScreenToggle(toFullScreen) {\n\t\tif (toFullScreen) {\n\t\t\tvar elem = document.documentElement;\n\t\t\tif (elem.requestFullscreen) {\n\t\t\t\telem.requestFullscreen();\n\t\t\t\t} else if (elem.mozRequestFullScreen) { /* Firefox */\n\t\t\t\telem.mozRequestFullScreen();\n\t\t\t\t} else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */\n\t\t\t\telem.webkitRequestFullscreen();\n\t\t\t\t} else if (elem.msRequestFullscreen) { /* IE/Edge */\n\t\t\t\telem.msRequestFullscreen();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.exitFullscreen) {\n\t\t\tdocument.exitFullscreen();\n\t\t} else if (document.mozCancelFullScreen) {\n\t\t\tdocument.mozCancelFullScreen();\n\t\t} else if (document.webkitExitFullscreen) {\n\t\t\tdocument.webkitExitFullscreen();\n\t\t} else if (document.msExitFullscreen) {\n\t\t\tdocument.msExitFullscreen();\n\t\t}\n\t}\n\n\ttoggleFullScreen() {\n\t\tconst isFullScreen = !this.state.fullScreen;\n\t\t// dom toogle\n\t\tthis.domFullScreenToggle(isFullScreen);\n\t\t// change state to update buttons\n\t\tthis.setState({\n\t\t\tfullScreen:isFullScreen\n\t\t});\n\t}\n\n\tfsIconGet(){\n\t\tif (this.state.fullScreen) {\n\t\t\treturn(<FullscreenExitIcon />);\n\t\t} else {\n\t\t\treturn(<FullscreenIcon />);\n\t\t};\n\t}\n\n\trender() {\n\t\tconst fsIcon = this.fsIconGet();\n\t\tconst fsLabel = this.state.fullScreen ? \"Exit full screen\" : \"Enter full screen\";\n\n\t\treturn (\n\t\t\t<Tooltip title={fsLabel}>\n\t\t\t\t<IconButton aria-label={fsLabel} color=\"inherit\" onClick={this.toggleFullScreen}>\n\t\t\t\t\t{fsIcon}\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t);\n\t}\n}\n\nexport default FullscreenToggle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nclass AnimControls extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\t\n\thandleChange(event) {  \n\t\tthis.props.keyFrameDurationSet(event.target.value)\n\t}\n\n\tplayDisabled() {\n\t\treturn this.props.keyFrameTotal < 2;\n\t}\n\n\taddDisabled() {\n\t\tconst lastKeyFrame = this.props.keyFrameTotal-1;\n\t\treturn this.props.keyFrameCurrent !== lastKeyFrame;\n\t}\n\n\tdeleteDisabled() {\n\t\tconst lastKeyFrame = this.props.keyFrameTotal-1;\n\t\treturn this.props.keyFrameCurrent !== lastKeyFrame || 0 === lastKeyFrame;\n\t}\n\n\tpreviousDisabled() {\n\t\treturn 0 === this.props.keyFrameCurrent;\n\t}\n\n\tnextDisabled() {\n\t\tconst lastKeyFrame = this.props.keyFrameTotal-1;\n\t\treturn this.props.keyFrameCurrent === lastKeyFrame;\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<React.Fragment>\n\n\t\t\t\t<Tooltip title=\"Previous Frame\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<IconButton edge=\"end\" color=\"inherit\" aria-label=\"Previous Frame\" onClick={this.props.keyFramePrevious} disabled={this.previousDisabled()}>\n\t\t\t\t\t\t\t<ArrowBackIcon fontSize=\"small\"/>\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Tooltip title=\"Current Frame\">\n\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Current Frame\">\n\t\t\t\t\t\t{this.props.keyFrameCurrent}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Tooltip title=\"Next Frame\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"Next Frame\" onClick={this.props.keyFrameNext} disabled={this.nextDisabled()}>\n\t\t\t\t\t\t\t<ArrowForwardIcon fontSize=\"small\"/>\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<Tooltip title=\"Add Frame\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Add Frame\" onClick={this.props.keyFrameAdd} disabled={this.addDisabled()}>\n\t\t\t\t\t\t\t<AddIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Tooltip title=\"Delete Frame\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Add Frame\" onClick={this.props.keyFrameDelete} disabled={this.deleteDisabled()}>\n\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<Tooltip title=\"Play Animation\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<IconButton aria-label=\"Play Animation\" color=\"inherit\" onClick={this.props.animPlayerShow} disabled={this.playDisabled()}>\n\t\t\t\t\t\t\t<PlayArrowIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Tooltip data-delay-hide=\"1000\" title=\"Select frame duration\">\n\t\t\t\t\t<Select\n\t\t\t\t\t\tid=\"frameDurationSelect\"\n\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\tdefaultValue={5}>\n\t\t\t\t\t\t<MenuItem value={1}>1</MenuItem>\n\t\t\t\t\t\t<MenuItem value={3}>3</MenuItem>\n\t\t\t\t\t\t<MenuItem value={5}>5</MenuItem>\n\t\t\t\t\t\t<MenuItem value={7}>7</MenuItem>\n\t\t\t\t\t\t<MenuItem value={10}>10</MenuItem>\n\t\t\t\t\t</Select>\n\t\t\t\t</Tooltip>\n\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nAnimControls.defaultProps = {\n\tkeyFrameCurrent: 0,\n\tkeyFrameTotal: 0,\n\tkeyFrameAdd: null,\n\tkeyFrameDelete: null,\n\tkeyFrameNext: null,\n\tkeyFramePrevious: null,\n\tkeyFrameDurationSet: null,\n\tanimPlayerShow: null\n}\n\nAnimControls.propTypes = {\n\tkeyFrameCurrent: PropTypes.number,\n\tkeyFrameTotal: PropTypes.number,\n\tkeyFrameAdd: PropTypes.func,\n\tkeyFrameDelete: PropTypes.func,\n\tkeyFrameNext: PropTypes.func,\n\tkeyFramePrevious: PropTypes.func,\n\tkeyFrameDurationSet: PropTypes.func,\n\tanimPlayerShow: PropTypes.func\n}\n\nexport default AnimControls;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Goal from '../editors/Goal';\nimport Ladder from '../editors/Ladder';\nimport Cone from '../editors/Cone';\nimport Flag from '../editors/Flag';\nimport { ExtrasDefaults, ExtrasType } from '../pitch/Constants';\nimport { withStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Radio from '@material-ui/core/Radio';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nconst styles = theme => ({\n\tradio: {\n\t\tpadding: 0,\n\t},\n\tradioIcon: {\n\t\twidth: 100,\n\t\theight: 100,\n\t}\n})\n\nclass ExtrasDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\topen: false\n\t\t}\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.extrasChange = this.extrasChange.bind(this);\n\t}\n\n\tShow() {\n\t\tthis.setState({\n\t\t\topen: true\n\t\t});\n\t}\n\n\thandleClose() {\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\textrasChange(e) {\n\t\tif (this.props.extrasCreate) {\n\t\t\tlet t = parseInt(e.target.value);\n\t\t\tconst def = ExtrasDefaults[t];\n\t\t\tthis.props.extrasCreate(t, def.width, def.height);\n\t\t}\n\t\tthis.handleClose();\n\t}\n\n\tgetExtrasGfx(extrasType) {\n\t\tconst def = ExtrasDefaults[extrasType];\n\t\tconst x = def.width / 2 * def.viewBoxScale;\n\t\tconst y = def.height / 2 * def.viewBoxScale;\n\t\tswitch (extrasType) {\n\t\t\tcase ExtrasType.Goal:\n\t\t\tcase ExtrasType.GoalSmall:\n\t\t\t\treturn (<Goal x={x} y={y} width={def.width} height={def.height} />);\n\t\t\tcase ExtrasType.Ladder:\n\t\t\t\treturn (<Ladder x={x} y={y} width={def.width} height={def.height} />);\n\t\t\tcase ExtrasType.Cone:\n\t\t\t\treturn (<Cone x={x} y={y} width={def.width} height={def.height} />);\n\t\t\tcase ExtrasType.Flag:\n\t\t\t\treturn (<Flag x={x} y={y} width={def.width} height={def.height} />);\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Unknown extras type\");\n\t\t}\n\t}\n\n\tradioIcon(extrasType) {\n\t\tconst def = ExtrasDefaults[extrasType];\n\t\tconst viewBox = `0 0 ${def.width * def.viewBoxScale} ${def.height * def.viewBoxScale}`;\n\t\treturn (\n\t\t\t<SvgIcon viewBox={viewBox} className={this.props.classes.radioIcon}>\n\t\t\t\t{this.getExtrasGfx(extrasType)}\n\t\t\t</SvgIcon>\n\t\t);\n\t}\n\n\trenderRadios() {\n\t\tconst allExtras = [ExtrasType.Goal, ExtrasType.GoalSmall, ExtrasType.Ladder, ExtrasType.Cone, ExtrasType.Flag];\n\t\treturn allExtras.map((val, index) => {\n\t\t\tconst ico = this.radioIcon(val);\n\t\t\tconst def = ExtrasDefaults[val];\n\t\t\treturn (\n\t\t\t\t<div key={index} style={{display: 'inline-block'}}>\n\t\t\t\t\t<label style={{display: 'block',  textAlign: \"center\"}}>{def.name}</label>\n\t\t\t\t\t<Radio name=\"extras-select\" value={val} className={this.props.classes.radio} icon={ico} onChange={this.extrasChange} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitle>Select element to place on pitch</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t{this.renderRadios()}\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nExtrasDialog.defaultProps = {\n\textrasCreate: null,\n}\n\nExtrasDialog.propTypes = {\n\tclasses: PropTypes.object.isRequired,\n\textrasCreate: PropTypes.func\n};\n\nexport default withStyles(styles, { withTheme: true })(ExtrasDialog);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport Box from '@material-ui/core/Box';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport MovieCreationIcon from '@material-ui/icons/MovieCreation';\nimport LinkIcon from '@material-ui/icons/Link';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\nimport SportsSoccerIcon from '@material-ui/icons/SportsSoccer';\nimport { CursorDefault, VectorLine, ShapeSquarePlus, ShapeOvalPlus } from 'mdi-material-ui';\nimport DrawMenu from './DrawMenu';\nimport PaletteDialog from './PaletteDialog';\nimport FullscreenToggle from './FullscreenToggle';\nimport AnimControls from './AnimControls';\nimport ExtrasDialog from './ExtrasDialog';\n\n// this is for custom position classes\nconst styles = theme => ({\n\tgrow: {\n\t\tflexGrow: 1,\n\t},\n});\n\nclass AppTools extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdrawerOpen: false\n\t\t}\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\n\t\t// Drawing menu\n\t\tthis._refDrawMenu = React.createRef();\n\t\tthis._refOpenDrawMenu = React.createRef();\n\t\tthis.drawingModeIcon = this.drawingModeIcon.bind(this);\n\t\tthis.drawMenuAnchorEl = this.drawMenuAnchorEl.bind(this);\n\t\tthis.drawMenuOpen = this.drawMenuOpen.bind(this);\n\t\tthis.createNewScheme = this.createNewScheme.bind(this);\n\t\tthis.createNewAnimation = this.createNewAnimation.bind(this);\n\n\t\t// palette dialog\n\t\tthis._refPaletteDialog = React.createRef();\n\t\tthis.paletteDialogRef = this.paletteDialogRef.bind(this);\n\t\tthis.extrasDialogRef = this.extrasDialogRef.bind(this);\n\t\tthis._refExtrasDialog = React.createRef();\n\t}\n\n\tsetDrawer(isOpen) {\n\t\tthis.setState({\n\t\t\tdrawerOpen:isOpen\n\t\t});\n\t}\n\n\ttoggleDrawer(e) {\n\t\tif (e.type === 'keydown' && (e.key === 'Tab' || e.key === 'Shift')) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setDrawer(!this.state.drawerOpen);\n\t}\n\n\tcreateNewScheme() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.createNewScheme();\n\t}\n\n\tcreateNewAnimation() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.createNewAnimation();\n\t}\n\n\tdrawMenuAnchorEl() {\n\t\treturn this._refOpenDrawMenu.current;\n\t}\n\n\tdrawMenuOpen() {\n\t\tthis._refDrawMenu.current.open();\n\t}\n\n\tdrawingModeIcon() {\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\treturn (<VectorLine />);\n\t\t\tcase 'square':\n\t\t\t\treturn (<ShapeSquarePlus />);\n\t\t\tcase 'ellipse':\n\t\t\t\treturn (<ShapeOvalPlus />);\n\t\t\tcase 'text':\n\t\t\t\treturn (<TextFieldsIcon />);\n\t\t\tcase 'extras':\n\t\t\t\treturn (<SportsSoccerIcon />);\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\treturn (<CursorDefault />);\n\t\t}\n\t}\n\n\tpaletteDialogRef() {\n\t\treturn this._refPaletteDialog.current;\n\t}\n\n\textrasDialogRef() {\n\t\treturn this._refExtrasDialog.current;\n\t}\n\n\trender() {\n\t\tconst drawingModeIcon = this.drawingModeIcon();\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<AppBar position=\"fixed\">\n\t\t\t\t\t<Toolbar variant=\"regular\">\n\t\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={this.toggleDrawer}>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">Futsal tactics board</Typography>\n\t\t\t\t\t\t<div className={this.props.classes.grow} />\n\t\t\t\t\t\t<AnimControls \n\t\t\t\t\t\t\tkeyFrameCurrent={this.props.animKeyFrameCurrent}\n\t\t\t\t\t\t\tkeyFrameTotal={this.props.animKeyFrameTotal}\n\t\t\t\t\t\t\tkeyFrameAdd={this.props.animKeyFrameAdd}\n\t\t\t\t\t\t\tkeyFrameDelete={this.props.animKeyFrameDelete}\n\t\t\t\t\t\t\tkeyFrameNext={this.props.animKeyFrameNext}\n\t\t\t\t\t\t\tkeyFramePrevious={this.props.animKeyFramePrevious}\n\t\t\t\t\t\t\tkeyFrameDurationSet={this.props.animKeyFrameDurationSet}\n\t\t\t\t\t\t\tanimPlayerShow={this.props.animPlayerShow}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className={this.props.classes.grow} />\n\t\t\t\t\t\t<Tooltip title=\"Selected draw mode\">\n\t\t\t\t\t\t\t<IconButton ref={this._refOpenDrawMenu} aria-label=\"Selected draw mode\" color=\"inherit\" onClick={this.drawMenuOpen}>\n\t\t\t\t\t\t\t\t{drawingModeIcon}\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Save picture\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Save picture\" color=\"inherit\" onClick={this.props.saveImage}>\n\t\t\t\t\t\t\t\t<GetAppIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Share link\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Share link\" color=\"inherit\">\n\t\t\t\t\t\t\t\t<LinkIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<FullscreenToggle />\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</AppBar>\n\t\t\t\t<Drawer anchor=\"left\" open={this.state.drawerOpen} onClose={this.toggleDrawer}>\n\t\t\t\t\t<Box p={2}>\n\t\t\t\t\t\t<Typography variant=\"h4\" component=\"h2\">Tactics board</Typography>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<List component=\"nav\" aria-label=\"main mailbox folders\">\n\t\t\t\t\t\t\t<ListItem button onClick={this.createNewScheme}>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<OpenInNewIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Create new scheme\" />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem button onClick={this.createNewAnimation}>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<MovieCreationIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Create new animation\" />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Box>\n\t\t\t\t</Drawer>\n\t\t\t\t\n\t\t\t\t<DrawMenu ref={this._refDrawMenu} anchorEl={this.drawMenuAnchorEl} drawMode={this.props.drawMode} paletteDialogRef={this.paletteDialogRef} extrasDialogRef={this.extrasDialogRef} />\n\t\t\t\t<PaletteDialog ref={this._refPaletteDialog} drawMode={this.props.drawMode} />\n\t\t\t\t<ExtrasDialog ref={this._refExtrasDialog} extrasCreate={this.props.extrasCreate} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nAppTools.defaultProps = {\n\tdrawMode: null,\n\tsaveImage: null,\n\tcreateNewScheme: null,\n\tcreateNewAnimation: null,\n\tsnackbarOpen: null,\n\tanimKeyFrameCurrent: 0,\n\tanimKeyFrameTotal: 0,\n\tanimKeyFrameAdd: null,\n\tanimKeyFrameDelete: null,\n\tanimKeyFrameNext: null,\n\tanimKeyFramePrevious: null,\n\tkeyFrameDurationSet: null,\n\tanimPlayerShow: null,\n\textrasCreate: null,\n}\n\nAppTools.propTypes = {\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\tsaveImage: PropTypes.func,\n\tcreateNewScheme: PropTypes.func,\n\tcreateNewAnimation: PropTypes.func,\n\tsnackbarOpen: PropTypes.func,\n\tanimKeyFrameCurrent: PropTypes.number,\n\tanimKeyFrameTotal: PropTypes.number,\n\tanimKeyFrameAdd: PropTypes.func,\n\tanimKeyFrameDelete: PropTypes.func,\n\tanimKeyFrameNext: PropTypes.func,\n\tanimKeyFramePrevious: PropTypes.func,\n\tkeyFrameDurationSet: PropTypes.func,\n\tanimPlayerShow: PropTypes.func,\n\textrasCreate: PropTypes.func\n}\n\nexport default withStyles(styles, { withTheme: true })(AppTools);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Popover from '@material-ui/core/Popover';\nimport { withStyles } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport { PlayArrow, Stop, Pause, SkipNext, SkipPrevious, Repeat, RepeatOne } from '@material-ui/icons';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst BorderLinearProgress = withStyles((theme) => ({\n\troot: {\n\t\theight: 10,\n\t\tborderRadius: 5,\n\t\twidth: 250\n\t},\n\tbar: {\n\t\tborderRadius: 5,\n\t\ttransition: 'none'\t// disable animation to have immediate feedback\n\t}\n}))(LinearProgress);\n  \n\nclass AnimPlayer extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisOpen: false,\n\t\t\tisPlaying: false,\n\t\t\tisRepeat: false,\n\t\t\tanimTime: 0\n\t\t}\n\t\tthis.currentTime = 0;\n\t\tthis.show = this.show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.playPause = this.playPause.bind(this);\n\t\tthis.stop = this.stop.bind(this);\n\t\tthis.animStep = this.animStep.bind(this);\n\t\tthis.loopToggle = this.loopToggle.bind(this);\n\t\tthis.keyFrameNext = this.keyFrameNext.bind(this);\n\t\tthis.keyFramePrevious = this.keyFramePrevious.bind(this);\n\t}\n\n\tshow() {\n\t\tthis.setState({ \n\t\t\tisOpen: true,\n\t\t\tisPlaying: false,\n\t\t\tisRepeat: false,\n\t\t\tanimTime: 0\n\t\t});\n\t\t// Prepare animation for playback\n\t\tif (null != this.props.animStart) {\n\t\t\tthis.props.animStart();\n\t\t}\n\t\t// reset current time so anim can start from beginning\n\t\tthis.currentTime = 0;\n\t\t// start animation frames\n\t\twindow.requestAnimationFrame(this.animStep);\n\t}\n\n\thandleClose() {\n\t\t// close player\n\t\tthis.setState({\n\t\t\tisOpen: false,\n\t\t\tisPlaying: false,\n\t\t\tisRepeat: false,\n\t\t\tanimTime: 0\n\t\t});\n\t\t// stop / cancel anim playback\n\t\tif (null != this.props.animStop) {\n\t\t\tthis.props.animStop();\n\t\t}\n\t}\n\n\tloopToggle() {\n\t\tthis.setState({\n\t\t\tisRepeat: !this.state.isRepeat\n\t\t});\n\t}\n\n\tplayPause() {\n\t\tthis.setState({\n\t\t\tisPlaying: !this.state.isPlaying\n\t\t});\n\t}\n\n\tstop() {\n\t\tthis.setState({\n\t\t\tisPlaying: false,\n\t\t\tanimTime: 0\n\t\t});\n\t}\n\n\tkeyFrameDurationMs() {\n\t\treturn this.props.keyFrameDuration * 1000;\n\t}\n\n\tkeyFrameLast() {\n\t\treturn this.props.keyFramesNo - 1;\n\t}\n\n\tkeyFramePreviousDisabled() {\n\t\treturn 0 === this.state.animTime;\n\t}\n\n\tkeyFramePrevious() {\n\t\tconst kfDuration = this.keyFrameDurationMs();\n\t\tlet animTime = this.state.animTime - kfDuration;\n\t\tif (animTime < 0) {\n\t\t\tanimTime = 0;\n\t\t}\n\t\tanimTime = Math.floor(animTime / kfDuration) * kfDuration;\n\t\tthis.setState({\n\t\t\tanimTime: animTime\n\t\t});\n\t}\n\n\tkeyFrameNextDisabled() {\n\t\treturn this.state.animTime >= this.animTotalTime();\n\t}\n\n\tkeyFrameNext() {\n\t\tconst kfDuration = this.keyFrameDurationMs();\n\t\tconst totalTime = this.animTotalTime();\n\t\tlet animTime = this.state.animTime + kfDuration;\n\t\tif (animTime > totalTime) {\n\t\t\tanimTime = totalTime;\n\t\t}\n\t\tanimTime = Math.floor(animTime / kfDuration) * kfDuration;\n\t\tthis.setState({\n\t\t\tanimTime: animTime\n\t\t});\n\t}\n\n\tanimTotalTime() {\n\t\t// note: first keyframe is only initial position so it is skipped\n\t\t// total time is in milliseconds\n\t\treturn this.keyFrameLast() * this.keyFrameDurationMs();\n\t}\n\n\tanimProgress() {\n\t\tlet animTime = this.state.animTime;\n\t\tlet pct = 100 * animTime / this.animTotalTime();\n\t\treturn Math.round(pct);\n\t}\n\n\tanimTime() {\n\t\tlet timeSec = this.state.animTime / 1000;\n\t\tlet sec = Math.floor(timeSec).toString();\n\t\tlet msec = Math.floor((timeSec - sec) * 1000).toString();\n\t\t// correct formatting '000:000'\n\t\tsec = '000'.substring(0, 3 - sec.length) + sec;\n\t\tmsec = '000'.substring(0, 3 - msec.length) + msec;\n\t\treturn sec + ':' + msec;\n\t}\n\n\tanimStep(time) {\n\t\t// calc elapsed time from previous frame\n\t\tconst elapsedTime = time - this.currentTime;\n\t\tthis.currentTime = time;\n\n\t\tconst totalTime = this.animTotalTime();\n\t\tlet animTime = this.state.animTime;\n\n\t\tif (this.state.isPlaying) {\n\t\t\tanimTime += elapsedTime;\n\t\t\tif (animTime > totalTime) {\n\t\t\t\tif (this.state.isRepeat) {\n\t\t\t\t\tanimTime = 0;\n\t\t\t\t} else {\n\t\t\t\t\tanimTime = totalTime;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tanimTime: animTime\n\t\t\t})\n\t\t}\n\n\t\tif (this.state.isOpen) {\n\t\t\t// show current frame only when anim time changed\n\t\t\tif (null != this.props.animFrame) {\n\t\t\t\tthis.props.animFrame(animTime);\n\t\t\t}\n\t\t\t// request next frame\n\t\t\twindow.requestAnimationFrame(this.animStep);\n\t\t}\n\t}\n\n\trenderRepeat() {\n\t\tif (this.state.isRepeat) {\n\t\t\treturn (<RepeatOne />);\n\t\t}\n\t\treturn (<Repeat />);\n\t}\n\n\trenderPlayPause() {\n\t\tif (this.state.isPlaying) {\n\t\t\treturn (<Pause />);\n\t\t}\n\t\treturn (<PlayArrow />);\n\t}\n\n\tstopDisabled() {\n\t\treturn 0 === this.state.animTime;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Popover open={this.state.isOpen}\n\t\t\t\tonClose={this.handleClose}\n\t\t\t\tanchorEl={this.props.anchorEl}\n\t\t\t\tanchorOrigin={{vertical: 'bottom', horizontal: 'center'}}\n\t\t\t\ttransformOrigin={{horizontal: 'center', vertical: 'top'}}\n\t\t\t>\n\t\t\t\t<Grid container alignItems=\"center\">\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<Tooltip title=\"Repeat Animation\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Repeat Animation\" color=\"inherit\" onClick={this.loopToggle}>\n\t\t\t\t\t\t\t\t{this.renderRepeat()}\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Previous key frame\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<IconButton aria-label=\"Previous key frame\" color=\"inherit\" onClick={this.keyFramePrevious} disabled={this.keyFramePreviousDisabled()}>\n\t\t\t\t\t\t\t\t\t<SkipPrevious />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Play/Pause Animation\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Play/Pause Animation\" color=\"inherit\" onClick={this.playPause}>\n\t\t\t\t\t\t\t\t{this.renderPlayPause()}\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Next key frame\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<IconButton aria-label=\"Previous key frame\" color=\"inherit\" onClick={this.keyFrameNext} disabled={this.keyFrameNextDisabled()}>\n\t\t\t\t\t\t\t\t\t<SkipNext />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Stop Animation\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<IconButton aria-label=\"Stop Animation\" color=\"inherit\" onClick={this.stop} disabled={this.stopDisabled()}>\n\t\t\t\t\t\t\t\t\t<Stop />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\">\n\t\t\t\t\t\t\t<Box mr={1} minWidth={55}>\n\t\t\t\t\t\t\t\t<Typography variant=\"body2\" color=\"textSecondary\">{this.animTime()}</Typography>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box mr={1}>\n\t\t\t\t\t\t\t\t<BorderLinearProgress variant=\"determinate\" value={this.animProgress()} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Popover>\n\t\t);\n\t}\n}\n\nAnimPlayer.defaultProps = {\n\tanchorEl: null,\n\tkeyFramesNo: 0,\n\tkeyFrameDuration: 0,\n\tanimStart: null,\n\tanimStop: null,\n\tanimFrame: null,\n}\n\nAnimPlayer.propTypes = {\n\tanchorEl: PropTypes.func,\n\tkeyFramesNo: PropTypes.number,\n\tkeyFrameDuration: PropTypes.number,\n\tanimStart: PropTypes.func,\n\tanimStop: PropTypes.func,\n\tanimFrame: PropTypes.func\n}\n\nexport default AnimPlayer;","import React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nclass ConfirmDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.okCallback = null;\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\ttitle: \"\",\n\t\t\ttext: \"\"\n\t\t}\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleOk = this.handleOk.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t}\n\n\tShow(title, text, fnCallback) {\n\t\tthis.okCallback = fnCallback;\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\ttitle: title,\n\t\t\ttext: text\n\t\t});\n\t}\n\t\n\thandleClose() {\n\t\tthis.okCallback = null;\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\thandleOk() {\n\t\tif (null !== this.okCallback) {\n\t\t\tthis.okCallback();\n\t\t}\n\t\tthis.handleClose();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitle id=\"responsive-dialog-title\">{this.state.title}</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText>{this.state.text}</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={this.handleClose} variant=\"contained\" color=\"primary\" autoFocus>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.handleOk} variant=\"contained\" color=\"secondary\">Ok</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default ConfirmDialog;","import React, { Component } from 'react';\nimport { createTheme, ThemeProvider } from '@material-ui/core/styles';\nimport PitchEdit from './editors/PitchEdit'\nimport SvgToImg from './editors/SvgToImg'\nimport AppTools from './ui/AppTools'\nimport AnimPlayer from './ui/AnimPlayer'\nimport ConfirmDialog from './ui/ConfirmDialog'\nimport PitchFutsal from './pitch/PitchFutsal'\nimport DrawMode from './pitch/DrawMode'\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport './App.css';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// application Material-UI theme\n\t\tthis.appTheme = createTheme();\n\t\t// references\n\t\tthis.refPitchEdit = React.createRef();\n\t\tthis.refSvgToImg = React.createRef();\n\t\tthis.refConfirmDialog = React.createRef();\n\t\tthis.refAnimPlayer = React.createRef();\n\t\t// event handlers\n\t\tthis.SaveImage = this.SaveImage.bind(this);\n\t\tthis.CreateNewScheme = this.CreateNewScheme.bind(this);\n\t\tthis.CreateNewAnimation = this.CreateNewAnimation.bind(this);\n\t\tthis.PitchReset = this.PitchReset.bind(this);\n\t\tthis.ExtrasCreate = this.ExtrasCreate.bind(this);\n\t\tthis.OnPitchModified = this.OnPitchModified.bind(this);\n\t\tthis.OnDrawModeModified = this.OnDrawModeModified.bind(this);\n\t\tthis.SnackbarOpen=this.SnackbarOpen.bind(this);\n\t\tthis.SnackbarOnClose=this.SnackbarOnClose.bind(this);\n\t\tthis.AnimKeyFrameAdd=this.AnimKeyFrameAdd.bind(this);\n\t\tthis.AnimKeyFrameDelete=this.AnimKeyFrameDelete.bind(this);\n\t\tthis.AnimKeyFrameNext=this.AnimKeyFrameNext.bind(this);\n\t\tthis.AnimKeyFramePrevious=this.AnimKeyFramePrevious.bind(this);\n\t\tthis.AnimKeyFrameDurationSet=this.AnimKeyFrameDurationSet.bind(this);\n\t\tthis.AnimStart=this.AnimStart.bind(this);\n\t\tthis.AnimStop=this.AnimStop.bind(this);\n\t\tthis.AnimFrame=this.AnimFrame.bind(this);\n\t\tthis.animPlayerAnchorEl=this.animPlayerAnchorEl.bind(this);\n\t\tthis.animPlayerShow=this.animPlayerShow.bind(this);\n\n\t\t// init default state\n\t\tthis.pitch = this.DefaultPitch();\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.drawMode = new DrawMode();\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.state = {\n\t\t\tpitch: this.pitch,\n\t\t\tdrawMode: this.drawMode,\n\t\t\tsnackBar: {\n\t\t\t\tShow: false,\n\t\t\t\tSeverity: 'info',\n\t\t\t\tMessage: ''\n\t\t\t}\n\t\t}\n\t}\n\t\n\tDefaultPitch() {\n\t\tlet pitch = new PitchFutsal();\n\t\tpitch.initDefault(\n\t\t\t200, 8, 120, \n\t\t\t100, 5, 80\n\t\t);\n\t\treturn pitch;\n\t}\n\n\tPitchReset() {\n\t\tconsole.log(\"Pitch reset\");\n\t\tthis.pitch.onModified = null;\n\t\tthis.pitch = this.DefaultPitch();\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.drawMode.onModified = null;\n\t\tthis.drawMode = new DrawMode();\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.setState({\n\t\t\tpitch: this.pitch,\n\t\t\tdrawMode: this.drawMode\n\t\t});\n\t}\n\n\tOnPitchModified(newPitch) {\n\t\tthis.pitch.onModified = null;\n\t\tthis.pitch = newPitch;\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.setState({\n\t\t\tpitch: this.pitch\n\t\t});\n\t}\n\n\tOnDrawModeModified(newDrawMode) {\n\t\tthis.drawMode.onModified = null;\n\t\tthis.drawMode = newDrawMode;\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.setState({\n\t\t\tdrawMode: this.drawMode\n\t\t});\n\t\t// update pitch overlay\n\t\t// TODO: reconsider this\n\t\tthis.pitch.overlay = this.drawMode.pitchOverlay;\n\t}\n\n\tCreateNewScheme() {\n\t\tif (!this.state.pitch.isModified) {\n\t\t\treturn;\n\t\t}\n\t\tthis.refConfirmDialog.current.Show(\n\t\t\t\"Create new scheme\", \"Pitch is modified, are you sure you want to discard changes?\",\n\t\t\tthis.PitchReset\n\t\t);\n\t}\n\n\tCreateNewAnimation() {\n\t\tthis.refConfirmDialog.current.Show(\n\t\t\t\"Create new animation\", \"Are you sure you want to create new animation?\",\n\t\t\tnull\n\t\t);\n\t}\n\n\tSaveImage() {\n\t\tconsole.log(\"App save image\");\n\t\tlet svg = this.refPitchEdit.current.getSVG();\n\t\tthis.refSvgToImg.current.toImg(\n\t\t\tsvg.svgText, \n\t\t\tsvg.width, svg.height, \n\t\t\tsvg.width/2, svg.height/2\n\t\t);\n\t}\n\n\t// function to open Snackbar\n\tSnackbarOpen(severity, message) {\n\t\tthis.setState({\n\t\t\tsnackBar: {\n\t\t\t\tShow: true,\n\t\t\t\tSeverity: severity,\n\t\t\t\tMessage: message\n\t\t\t}\n\t\t});\n\t}\n\n\t// Event when Snackbar closes\n\tSnackbarOnClose(){\n\t\t// read current state to avoid changing message while hiding\n\t\tconst severity = this.state.snackBar.Severity;\n\t\tconst message = this.state.snackBar.Message;\n\t\t// hide snackbar\n\t\tthis.setState({\n\t\t\tsnackBar: {\n\t\t\t\tShow: false,\n\t\t\t\tSeverity: severity,\n\t\t\t\tMessage: message\n\t\t\t}\n\t\t});\n\t}\n\n\tExtrasCreate(t, width, height) {\n\t\tthis.pitch.extrasCreate(t, width, height);\n\t}\n\n\tAnimKeyFrameAdd() {\n\t\tif (this.pitch.animKeyFrameAdd()){\n\t\t\tthis.SnackbarOpen(\"success\", \"New key frame added to animation\");\n\t\t} else {\n\t\t\tthis.SnackbarOpen(\"error\", \"Can't add new key frame no change is done to current key frame\");\n\t\t}\n\t}\n\n\tAnimKeyFrameDelete() {\n\t\tif (this.pitch.animKeyFrameDelete()) {\n\t\t\tthis.SnackbarOpen(\"success\", \"Key frame deleted from animation\");\n \t\t} else {\n\t\t\tthis.SnackbarOpen(\"error\", \"Can't delete key frame, only last can be deleted.\");\n\t\t}\n\t}\n\n\tAnimKeyFrameNext() {\n\t\tif (!this.pitch.animKeyFrameNext()) {\n\t\t\tthis.SnackbarOpen(\"warning\", \"No more key frames to navigate\");\n\t\t}\n\t}\n\n\tAnimKeyFramePrevious() {\n\t\tif (!this.pitch.animKeyFramePrevious()) {\n\t\t\tthis.SnackbarOpen(\"warning\", \"You are on first key frame\");\n\t\t}\n\t}\n\n\tAnimKeyFrameDurationSet(duration){\n\t\tif (!this.pitch.animKeyFrameDurationSet(duration)) {\n\t\t\tthis.SnackbarOpen(\"info\", `You set the frame duration to ${duration}s` );\n\t\t}\n\t}\n\n\tAnimStart() {\n\t\tthis.state.pitch.animStart();\n\t}\n\n\tAnimStop() {\n\t\tthis.state.pitch.animStop();\n\t}\n\n\tAnimFrame(time) {\n\t\tthis.state.pitch.animFrame(time);\n\t}\n\n\tanimPlayerAnchorEl() {\n\t\treturn this.refPitchEdit.current;\n\t}\n\n\tanimPlayerShow() {\n\t\tif (this.state.pitch.AnimKeyFrames.length < 2) {\n\t\t\tthis.SnackbarOpen(\"warning\", \"No animation is created\");\n\t\t\treturn;\n\t\t}\n\t\tthis.refAnimPlayer.current.show();\n    }\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ThemeProvider theme={this.appTheme}>\n\t\t\t\t\t<AppTools drawMode={this.state.drawMode}\n\t\t\t\t\t\tsaveImage={this.SaveImage}\n\t\t\t\t\t\tcreateNewScheme={this.CreateNewScheme}\n\t\t\t\t\t\tcreateNewAnimation={this.CreateNewAnimation}\n\t\t\t\t\t\tanimKeyFrameCurrent={this.state.pitch.AnimKeyFrameCurrent}\n\t\t\t\t\t\tanimKeyFrameTotal={this.state.pitch.AnimKeyFrames.length}\n\t\t\t\t\t\tanimKeyFrameAdd={this.AnimKeyFrameAdd}\n\t\t\t\t\t\tanimKeyFrameDelete={this.AnimKeyFrameDelete}\n\t\t\t\t\t\tanimKeyFrameNext={this.AnimKeyFrameNext}\n\t\t\t\t\t\tanimKeyFramePrevious={this.AnimKeyFramePrevious}\n\t\t\t\t\t\tanimKeyFrameDurationSet={this.AnimKeyFrameDurationSet}\n\t\t\t\t\t\tanimPlayerShow={this.animPlayerShow}\n\t\t\t\t\t\textrasCreate={this.ExtrasCreate}\n\t\t\t\t\t/>\n\t\t\t\t\t<PitchEdit ref={this.refPitchEdit} pitch={this.state.pitch} drawMode={this.state.drawMode} viewBoxLeft={0} viewBoxTop={0} viewBoxRight={4500} viewBoxBottom={2500} />\n\t\t\t\t\t<AnimPlayer\n\t\t\t\t\t\tref={this.refAnimPlayer} \n\t\t\t\t\t\tanchorEl={this.animPlayerAnchorEl}\n\t\t\t\t\t\tkeyFramesNo={this.state.pitch.AnimKeyFrames.length}\n\t\t\t\t\t\tkeyFrameDuration={this.state.pitch.AnimKeyFrameDuration}\n\t\t\t\t\t\tanimStart={this.AnimStart}\n\t\t\t\t\t\tanimStop={this.AnimStop}\n\t\t\t\t\t\tanimFrame={this.AnimFrame}\n\t\t\t\t\t/>\n\t\t\t\t\t<ConfirmDialog ref={this.refConfirmDialog} />\n\t\t\t\t\t<Snackbar open={this.state.snackBar.Show} anchorOrigin={{ vertical: 'bottom', horizontal: 'center'}} autoHideDuration={2000} onClose={this.SnackbarOnClose}>\n\t\t\t\t\t\t<MuiAlert elevation={6} variant=\"filled\" onClose={this.SnackbarOnClose} severity={this.state.snackBar.Severity}>{this.state.snackBar.Message}</MuiAlert>\n\t\t\t\t\t</Snackbar>\n\t\t\t\t\t<SvgToImg ref={this.refSvgToImg} />\n\t\t\t\t</ThemeProvider>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\t\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t.register(swUrl)\n\t.then(registration => {\n\t\tregistration.onupdatefound = () => {\n\t\t\tconst installingWorker = registration.installing;\n\t\t\tif (installingWorker == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t})\n\t.catch(error => {\n\t\tconsole.error('Error during service worker registration:', error);\n\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { 'Service-Worker': 'script' },\n\t})\n\t.then(response => {\n\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\tconst contentType = response.headers.get('content-type');\n\t\tif (\n\t\t\tresponse.status === 404 ||\n\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t) {\n\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\t// Service worker found. Proceed as normal.\n\t\t\tregisterValidSW(swUrl, config);\n\t\t}\n\t})\n\t.catch(() => {\n\t\tconsole.log('No internet connection found. App is running in offline mode.');\n\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t.then(registration => {\n\t\t\tregistration.unregister();\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error(error.message);\n\t\t});\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport './index.css';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t{/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n\t\t<CssBaseline />\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { Component } from 'react';\nimport FileSaver from 'browser-filesaver';\n\nclass SvgToImg extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._refRenderer = React.createRef();\n\t}\n\t\n\t// create image from svg text\n\ttoImg(svgText, orgWidth, orgHeight, imgWidth, imgHeight) {\n\t\t// Create Canvas\n\t\tlet canvas = document.createElement('canvas');\n\t\tcanvas.width = imgWidth;\n\t\tcanvas.height = imgHeight;\n\t\tlet ctx = canvas.getContext(\"2d\");\n\n\t\t// show canvas\n\t\t//this._refRenderer.current.appendChild(canvas);\n\n\t\t// Create image\n\t\tlet img = document.createElement('img');\n\t\t// when loaded draw and save\n\t\timg.addEventListener('load', e=> {\n\t\t\t// draw image\n\t\t\tctx.drawImage(img,\n\t\t\t\t0, 0, orgWidth, orgHeight,\n\t\t\t\t//0, 0, imgWidth, imgHeight\n\t\t\t\t0, 0, orgWidth, orgHeight\n\t\t\t);\n\t\t\t// save image\n\t\t\tcanvas.toBlob(function(blob) {\n\t\t\t\tFileSaver.saveAs(blob, \"tactics-board.png\");\n\t\t\t});\n\t\t\t// clear everything\n\t\t\tthis._refRenderer.current.innerHTML = '';\n\t\t});\n\n\t\t// prepare svg to load image\n\t\tconst encodedString = 'data:image/svg+xml;base64,' + new Buffer(svgText).toString('base64');\n\t\timg.src = encodedString;\t// start loading image\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div ref={this._refRenderer} style={{display:\"none\"}}></div>\n\t\t);\n\t}\n}\n\nexport default SvgToImg;"],"sourceRoot":""}