(this["webpackJsonptactics-board"]=this["webpackJsonptactics-board"]||[]).push([[0],{105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(8),i=a.n(l),o=a(75),c=a(162),s=a(15),u=a(13),m=a(11),h=a(19),d=a(18),f=a(4),p=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e="player pc"+this.props.color,t="translate("+this.props.x+" "+this.props.y+")";return n.a.createElement("g",{className:e,textAnchor:"middle",transform:t},n.a.createElement("circle",{r:"50",cx:"50",cy:"70",className:"draggable","data-ref":this.props.id}),n.a.createElement("text",{className:"number",x:"50",y:"70",dominantBaseline:"central"},this.props.number),n.a.createElement("text",{x:"50"},this.props.name))}}]),a}(r.Component);p.defaultProps={id:"",x:0,y:0,color:0,number:"",name:""};var g=p,y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"ballImage",value:function(){return n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 952 952"},n.a.createElement("path",{d:"M813 139A475 475 0 000 476a474 474 0 00476 476 474 474 0 00476-476 474 474 0 00-139-337zm-600-31l12-10a457 457 0 01370-60c-14 6-33 18-65 45a393 393 0 00-182 22c-31 11-55 23-71 33l-74-25c3 1 8-4 10-5zm433 119l-81 222-196 37-161-166c11-76 63-143 63-143s34-25 88-44a403 403 0 01174-20l113 114zM39 460c-5 32-6 66-3 100l-9-20a451 451 0 0136-252c-3 30-2 61 0 85-11 28-19 57-24 87zm40 173a418 418 0 018-239c33-28 77-44 101-52l158 164-16 179-155 52c-39-29-72-68-96-104zm470 260c-34 22-121 28-157 29a451 451 0 01-200-92c0-1-4-49-4-66l156-52 181 78 25 103h-1zm300-158c-27 38-59 75-98 102-36 25-85 34-128 41-3 1-44 8-45 6l-25-103 128-132 168-15 8 89-8 12zm3-135l-2 3-168 16-90-158 82-223 115 7a366 366 0 01118 169 434 434 0 01-55 186zm60-250a396 396 0 00-108-131c-5-25-19-65-57-107l2 2 7 5a459 459 0 01156 230v1z"}))}},{key:"render",value:function(){var e="ball bc"+this.props.color,t="translate("+this.props.x+" "+this.props.y+")",a=4===this.props.color?this.ballImage():null;return n.a.createElement("g",{className:e,transform:t},n.a.createElement("circle",{r:"30",cx:"30",cy:"30",className:"draggable","data-ref":this.props.id}),a)}}]),a}(r.Component);y.defaultProps={id:"",x:0,y:0,color:0};var b=y,v=a(145),E=a(153),x=a(150),w=a(149),k=a(154),_=a(164),O=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).state={open:!1,player:{id:"",name:"",number:0}},r._refName=n.a.createRef(),r._refNumber=n.a.createRef(),r.openDialog=r.openDialog.bind(Object(m.a)(r)),r.close=r.close.bind(Object(m.a)(r)),r.save=r.save.bind(Object(m.a)(r)),r.remove=r.remove.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"openDialog",value:function(e){this.setState({open:!0,player:e})}},{key:"close",value:function(){this.setState({open:!1})}},{key:"save",value:function(){this.close(),null!==this.props.onEditDone&&this.props.onEditDone({id:this.state.player.id,remove:!1,name:this._refName.current.value,number:this._refNumber.current.value})}},{key:"remove",value:function(){this.close(),null!==this.props.onEditDone&&this.props.onEditDone({id:this.state.player.id,remove:!0})}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(v.a,{open:this.state.open,onClose:this.close,"aria-labelledby":"form-dialog-title"},n.a.createElement(w.a,{id:"form-dialog-title"},"Edit player"),n.a.createElement(x.a,null,n.a.createElement(_.a,{inputRef:this._refNumber,margin:"dense",id:"playerNumber",defaultValue:this.state.player.number,label:"Number",type:"number",fullWidth:!0,autoFocus:!0}),n.a.createElement(_.a,{inputRef:this._refName,margin:"dense",id:"playerName",defaultValue:this.state.player.name,label:"Name",type:"text",fullWidth:!0})),n.a.createElement(E.a,null,n.a.createElement(k.a,{onClick:this.remove,color:"primary"},"Remove"),n.a.createElement(k.a,{onClick:this.close,color:"primary"},"Cancel"),n.a.createElement(k.a,{onClick:this.save,color:"primary"},"Save"))))}}]),a}(r.Component);O.defaultProps={onEditDone:null};var S=O,j=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e))._editRef=n.a.createRef(),r._bgRef=n.a.createRef(),r._playerDialogRef=n.a.createRef(),r._orgWidth=r.props.viewBoxRight-r.props.viewBoxLeft,r._orgHeight=r.props.viewBoxBottom-r.props.viewBoxTop,r.state={players:r.initPlayers(e.noPlayers,8),balls:r.initBalls(e.noBalls,5)},r._dragNode=null,r._dragObjectType=-1,r._mouseX=0,r._mouseY=0,r.hContextMenu=r.hContextMenu.bind(Object(m.a)(r)),r.hMouseDown=r.hMouseDown.bind(Object(m.a)(r)),r.hMouseUp=r.hMouseUp.bind(Object(m.a)(r)),r.hMouseMove=r.hMouseMove.bind(Object(m.a)(r)),r.playerEditDone=r.playerEditDone.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"initPlayers",value:function(e,t){for(var a=Math.floor(e/t),r=[],n=0;n<e;n++){var l=Math.floor(n/a),i=a-n%a;r.push({id:"pl"+n.toString(),x:120*l,orgx:120*l,y:0,orgy:0,rotation:0,color:l,number:i,orgnumber:i,name:""})}return r}},{key:"initBalls",value:function(e,t){for(var a=Math.floor(e/t),r=[],n=0;n<e;n++){var l=Math.floor(n/a);r.push({id:"bl"+n.toString(),x:80*l,y:0,color:l})}return r}},{key:"getScale",value:function(){var e=this._bgRef.current.getBoundingClientRect();return{X:this._orgWidth/e.width,Y:this._orgHeight/e.height}}},{key:"playerDrag",value:function(e,t,a){var r=this.state.players.map((function(r){return e===r.id&&(r.x+=t,r.y+=a),r}));this.setState({players:r})}},{key:"ballDrag",value:function(e,t,a){var r=this.state.balls.map((function(r){return e===r.id&&(r.x+=t,r.y+=a),r}));this.setState({balls:r})}},{key:"isDragStarted",value:function(e){return 0===e.button&&(!!e.target.classList.contains("draggable")&&(this._dragNode=e.target.getAttribute("data-ref"),null!==this._dragNode&&(this._dragObjectType=-1,this._dragNode.startsWith("pl")&&(this._dragObjectType=0),this._dragNode.startsWith("bl")&&(this._dragObjectType=1),this._mouseX=e.clientX,this._mouseY=e.clientY,!0)))}},{key:"playerEditStarted",value:function(e){var t=e.target.getAttribute("data-ref");if(null===t)return!1;if(!t.startsWith("pl"))return!1;var a=this.state.players.find((function(e){return t===e.id}));if(a.x===a.orgx&&a.y===a.orgy)return!1;var r={id:a.id,name:a.name,number:a.number};return this._playerDialogRef.current.openDialog(r),!0}},{key:"playerEditDone",value:function(e){var t=this.state.players.map((function(t){return e.id!==t.id||(e.remove?(t.x=t.orgx,t.y=t.orgy,t.number=t.orgnumber,t.name=""):(t.name=e.name,t.number=e.number)),t}));this.setState({players:t})}},{key:"hContextMenu",value:function(e){this.playerEditStarted(e)&&e.preventDefault()}},{key:"hMouseDown",value:function(e){this.isDragStarted(e)&&e.preventDefault()}},{key:"hMouseUp",value:function(e){e.preventDefault(),this._dragNode=null,this._dragObjectType=-1}},{key:"hMouseMove",value:function(e){if(null!=this._dragNode){e.preventDefault();var t=this.getScale(),a=(e.clientX-this._mouseX)*t.X,r=(e.clientY-this._mouseY)*t.Y;switch(this._mouseX=e.clientX,this._mouseY=e.clientY,this._dragObjectType){case 0:this.playerDrag(this._dragNode,a,r);break;case 1:this.ballDrag(this._dragNode,a,r);break;default:console.log("Invalid drag object type",this._dragObjectType,this._dragNode)}}}},{key:"getSVG",value:function(){return{width:this._orgWidth,height:this._orgHeight,svgText:this._editRef.current.children[0].outerHTML}}},{key:"render",value:function(){var e=this.props.viewBoxLeft.toString()+" "+this.props.viewBoxTop.toString()+" "+this.props.viewBoxRight.toString()+" "+this.props.viewBoxBottom.toString(),t=this.state.players.map((function(e,t){return n.a.createElement(g,{key:t.toString(),id:e.id,x:e.x,y:e.y,number:e.number,name:e.name,color:e.color})})),a=this.state.balls.map((function(e,t){return n.a.createElement(b,{key:t.toString(),id:e.id,x:e.x,y:e.y,color:e.color})})),r="pitch "+this.props.classes.offset,l=(this._orgWidth-4e3)/2,i=(this._orgHeight-2e3)/2,o="translate("+l+" "+i+")",c="translate("+l+" "+(i+2e3+50)+")",s="translate("+(l+1050)+" "+(i+2e3+100)+")";return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{ref:this._editRef,className:r},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:e,onContextMenu:this.hContextMenu,onMouseDown:this.hMouseDown,onMouseUp:this.hMouseUp,onMouseMove:this.hMouseMove},n.a.createElement("style",null,[".pc0 {\tfill: #8b2323;\t}",".pc0 {\tfill: #8b2323;\t}",".pc1 {\tfill: #e7e739;\t}",".pc2 {\tfill: #912cee;\t}",".pc3 {\tfill: #04b804;\t}",".pc4 {\tfill: #1d4ba0;\t}",".pc5 {\tfill: #ee2c2c;\t}",".pc6 {\tfill: #ff7f50;\t}",".pc7 {\tfill: #56c6eb;\t}",".bc0 { fill: #ffa500; }",".bc1 { fill: #cc3333; }",".bc2 { fill: #222333; }",".bc3 { fill: #0000ff; }",".bc4 { fill: #ffffff; }",".bc4 svg { fill: #000000; }",".player { pointer-events: none; }",".player text { fill: black;\t}",".player text.number { fill: white; }",".draggable { cursor: move; pointer-events: all;}"]),n.a.createElement("pattern",{id:"goal-net",x:"0",y:"0",width:"20",height:"20",stroke:"black",patternUnits:"userSpaceOnUse"},n.a.createElement("line",{x1:"0",x2:"20",y1:"0",y2:"20"}),n.a.createElement("line",{x1:"20",x2:"00",y1:"0",y2:"20"})),n.a.createElement("g",{id:"background",ref:this._bgRef},n.a.createElement("rect",{width:this._orgWidth,height:this._orgHeight,fill:"#b7b7b7",fillOpacity:"0.5"})),n.a.createElement("g",{id:"pitch",transform:o,fill:"#0280c6",stroke:"white",strokeWidth:"8"},n.a.createElement("rect",{width:"4000",height:"2000"}),n.a.createElement("line",{x1:"2000",x2:"2000",y1:"0",y2:"2000"}),n.a.createElement("circle",{r:"300",cx:"2000",cy:"1000",fill:"none"}),n.a.createElement("circle",{r:"12",cx:"2000",cy:"1000",fill:"white",strokeWidth:"0"}),n.a.createElement("g",{id:"corner_marks"},n.a.createElement("path",{fill:"none",d:"M25,0 a25,25 0 0,1 -25,25"}),n.a.createElement("path",{fill:"none",d:"M4000,25 a25,25 0 0,1 -25,-25"}),n.a.createElement("path",{fill:"none",d:"M0,1975 a25,25 0 0,1 25,25"}),n.a.createElement("path",{fill:"none",d:"M3975,2000 a25,25 0 0,1 25,-25"})),n.a.createElement("g",{id:"substitition-zones"},n.a.createElement("line",{x1:"1000",x2:"1000",y1:"-48",y2:"32"}),n.a.createElement("line",{x1:"1500",x2:"1500",y1:"-48",y2:"32"}),n.a.createElement("line",{x1:"2500",x2:"2500",y1:"-48",y2:"32"}),n.a.createElement("line",{x1:"3000",x2:"3000",y1:"-48",y2:"32"})),n.a.createElement("g",{id:"left"},n.a.createElement("line",{x1:"600",x2:"600",y1:"842",y2:"1158"}),n.a.createElement("circle",{r:"12",cx:"600",cy:"1000",fill:"white",strokeWidth:"0"}),n.a.createElement("path",{fill:"none",d:"M0,242 a600,600 0 0,1 600,600"}),n.a.createElement("path",{fill:"none",d:"M600,1158 a600,600 0 0,1 -600,600"}),n.a.createElement("line",{x1:"0",x2:"-40",y1:"500",y2:"500"}),n.a.createElement("line",{x1:"0",x2:"-40",y1:"1500",y2:"1500"}),n.a.createElement("g",{id:"goal-left"},n.a.createElement("rect",{width:"100",height:"300",x:"-100",y:"850",fill:"url(#goal-net)",stroke:"#777777",strokeWidth:"4"}),n.a.createElement("line",{x1:"0",x2:"0",y1:"850",y2:"1150"}),n.a.createElement("line",{x1:"0",x2:"0",y1:"850",y2:"1150",stroke:"red",strokeDasharray:"20"}))),n.a.createElement("g",{id:"left-penalty",fill:"white",strokeWidth:"0"},n.a.createElement("rect",{width:"16",height:"16",x:"992",y:"492"}),n.a.createElement("circle",{r:"12",cx:"1000",cy:"1000"}),n.a.createElement("rect",{width:"16",height:"16",x:"992",y:"1492"})),n.a.createElement("g",{id:"right"},n.a.createElement("line",{x1:"3400",x2:"3400",y1:"842",y2:"1158"}),n.a.createElement("circle",{r:"12",cx:"3400",cy:"1000",fill:"white",strokeWidth:"0"}),n.a.createElement("path",{fill:"none",d:"M3400,842 a600,600 0 0,1 600,-600"}),n.a.createElement("path",{fill:"none",d:"M3400,1158 a600,600 0 0,0 600,600"}),n.a.createElement("line",{x1:"4000",x2:"4040",y1:"500",y2:"500"}),n.a.createElement("line",{x1:"4000",x2:"4040",y1:"1500",y2:"1500"}),n.a.createElement("g",{id:"goal-right"},n.a.createElement("rect",{width:"100",height:"300",x:"4000",y:"850",fill:"url(#goal-net)",stroke:"#777777",strokeWidth:"4"}),n.a.createElement("line",{x1:"4000",x2:"4000",y1:"850",y2:"1150"}),n.a.createElement("line",{x1:"4000",x2:"4000",y1:"850",y2:"1150",stroke:"red",strokeDasharray:"20"}))),n.a.createElement("g",{id:"right-penalty",fill:"white",strokeWidth:"0"},n.a.createElement("rect",{width:"16",height:"16",x:"2992",y:"492"}),n.a.createElement("circle",{r:"12",cx:"3000",cy:"1000"}),n.a.createElement("rect",{width:"16",height:"16",x:"2992",y:"1492"}))),n.a.createElement("g",{id:"players",transform:c,fontSize:"50"},t),n.a.createElement("g",{id:"balls",transform:s},a))),n.a.createElement(S,{ref:this._playerDialogRef,onEditDone:this.playerEditDone}))}}]),a}(r.Component);j.defaultProps={noPlayers:0,viewBoxLeft:0,viewBoxTop:0,viewBoxRight:4500,viewBoxBottom:2500};var M=Object(f.a)((function(e){return{offset:{paddingTop:e.mixins.toolbar.minHeight}}}),{withTheme:!0})(j),D=a(65),R=a(155),B=a(156),F=a(39),N=a(157),C=a(69),T=a.n(C),W=a(158),I=a(168),z=a(166),P=a(152),X=a(159),Y=a(160),q=a(161),H=a(167),L=a(73),U=a.n(L),A=a(74),G=a.n(A),V=a(68),J=a.n(V),$=a(67),K=a.n($),Q=a(72),Z=a.n(Q),ee=a(71),te=a.n(ee),ae=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).state={drawerOpen:!1,fullScreen:!1},r.toggleDrawer=r.toggleDrawer.bind(Object(m.a)(r)),r.toggleFullScreen=r.toggleFullScreen.bind(Object(m.a)(r)),r.saveImage=r.saveImage.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"toggleDrawer",value:function(e){if("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key){var t=!this.state.drawerOpen;this.setState({drawerOpen:t})}}},{key:"saveImage",value:function(){this.props.pitchEditSaveImage()}},{key:"domFullScreenToggle",value:function(e){if(e){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"toggleFullScreen",value:function(){var e=!this.state.fullScreen;this.domFullScreenToggle(e),this.setState({fullScreen:e})}},{key:"fsIconGet",value:function(){return this.state.fullScreen?n.a.createElement(K.a,null):n.a.createElement(J.a,null)}},{key:"render",value:function(){var e=this.fsIconGet(),t=this.state.fullScreen?"Exit full screen":"Enter full screen";return n.a.createElement(n.a.Fragment,null,n.a.createElement(R.a,{position:"fixed"},n.a.createElement(B.a,{variant:"regular"},n.a.createElement(N.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:this.toggleDrawer},n.a.createElement(T.a,null)),n.a.createElement(F.a,{variant:"h6",color:"inherit"},"Futsal tactics board"),n.a.createElement("div",{className:this.props.classes.grow}),n.a.createElement(H.a,{title:"Save picture"},n.a.createElement(N.a,{"aria-label":"Save picture",color:"inherit",onClick:this.saveImage},n.a.createElement(te.a,null))),n.a.createElement(H.a,{title:"Share link"},n.a.createElement(N.a,{"aria-label":"Share link",color:"inherit"},n.a.createElement(Z.a,null))),n.a.createElement(H.a,{title:t},n.a.createElement(N.a,{"aria-label":t,color:"inherit",onClick:this.toggleFullScreen},e)))),n.a.createElement(I.a,{anchor:"left",open:this.state.drawerOpen,onClose:this.toggleDrawer},n.a.createElement(z.a,{p:2},n.a.createElement(F.a,{variant:"h4",component:"h2"},"Tactics board"),n.a.createElement(W.a,null),n.a.createElement(P.a,{component:"nav","aria-label":"main mailbox folders"},n.a.createElement(X.a,{button:!0},n.a.createElement(Y.a,null,n.a.createElement(U.a,null)),n.a.createElement(q.a,{primary:"Create new scheme"})),n.a.createElement(X.a,{button:!0},n.a.createElement(Y.a,null,n.a.createElement(G.a,null)),n.a.createElement(q.a,{primary:"Create new animation"}))))))}}]),a}(r.Component);ae.defaultProps={pitchEditSaveImage:null};var re=Object(f.a)((function(e){return{grow:{flexGrow:1}}}),{withTheme:!0})(ae),ne=(a(105),Object(o.a)()),le=n.a.createRef(),ie=n.a.createRef();function oe(){console.log("App save image");var e=le.current.getSVG();ie.current.toImg(e.svgText,e.width,e.height,e.width/2,e.height/2)}var ce=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{theme:ne},n.a.createElement(re,{pitchEditSaveImage:oe}),n.a.createElement(M,{ref:le,noPlayers:200,noBalls:100,viewBoxLeft:0,viewBoxTop:0,viewBoxRight:4500,viewBoxBottom:2500}),n.a.createElement(D.a,{ref:ie})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=a(163);a(106);i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(se.a,null),n.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){"use strict";(function(e){var r=a(15),n=a(13),l=a(19),i=a(18),o=a(0),c=a.n(o),s=a(66),u=a.n(s),m=function(t){Object(l.a)(o,t);var a=Object(i.a)(o);function o(e){var t;return Object(r.a)(this,o),(t=a.call(this,e))._refRenderer=c.a.createRef(),t}return Object(n.a)(o,[{key:"toImg",value:function(t,a,r,n,l){var i=this,o=document.createElement("canvas");o.width=n,o.height=l;var c=o.getContext("2d"),s=document.createElement("img");s.addEventListener("load",(function(e){c.drawImage(s,0,0,a,r,0,0,a,r),o.toBlob((function(e){u.a.saveAs(e,"tactics-board.png")})),i._refRenderer.current.innerHTML=""}));var m="data:image/svg+xml;base64,"+new e(t).toString("base64");s.src=m}},{key:"render",value:function(){return c.a.createElement("div",{ref:this._refRenderer,style:{display:"none"}})}}]),o}(o.Component);t.a=m}).call(this,a(98).Buffer)},90:function(e,t,a){e.exports=a(107)}},[[90,1,2]]]);
//# sourceMappingURL=main.baf81c94.chunk.js.map