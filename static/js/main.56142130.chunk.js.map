{"version":3,"sources":["pitch/Ball.js","pitch/Player.js","pitch/DrawMode.js","pitch/Box.js","pitch/Square.js","pitch/Ellipse.js","pitch/Point.js","pitch/Path.js","pitch/Line.js","pitch/PitchFutsal.js","editors/PlayerEdit.js","editors/BallEdit.js","editors/DragHandle.js","editors/RotateHandle.js","editors/EditBox.js","editors/SquareEdit.js","editors/EllipseEdit.js","editors/LineEdit.js","editors/PlayerDialog.js","editors/PitchEdit.js","ui/DrawMenu.js","ui/FullscreenToggle.js","ui/AppTools.js","App.js","serviceWorker.js","index.js","editors/SvgToImg.js"],"names":["Ball","id","color","x","y","xDefault","yDefault","this","_id","_color","_x","_y","_xDefault","_yDefault","value","Player","no","name","rotation","noDefault","_no","_name","_rotation","_noDefault","DrawMode","mode","lineArrowStart","lineArrowEnd","lineDashed","_mode","_lineArrowStart","_lineArrowEnd","_lineDashed","_pitchOverlay","_pitchOverlayCallback","console","log","Box","width","height","_width","_height","Square","x1","y1","dashed","isEdit","_x1","_y1","_x2","_y2","_dashed","_isEdit","x2","y2","proportional","szy","corner","deltaX","deltaY","posX","posY","snap","vx","cx","vy","cy","angle","Math","atan2","PI","floor","Ellipse","rx","ry","Point","p","Path","p1","p2","c1","c2","arrowStart","arrowEnd","_p1","_p2","_c1","_c2","_arrowStart","_arrowEnd","Line","equalTo","lx","ly","pid","move","computeControlPoints","paths","K","n","length","a","b","c","r","i","m","PitchFutsal","noPlayers","noPlayerColors","playerSize","noBalls","noBallColors","ballSize","_playersIdPrefix","_noPlayers","_noPlayerColors","_playerSize","_players","_ballsIdPrefix","_noBalls","_noBallColors","_ballSize","_balls","_squareID","_squares","_ellipseID","_ellipses","_lineID","_lines","_textID","_texts","_overlay","_initPlayers","_initBalls","_drawMode","groupSize","number","player","toString","push","ball","players","map","startsWith","find","isPlaced","remove","reset","balls","l","lines","resize","edit","filter","empty","el","ellipses","e","rotate","sq","squares","s","PlayerEdit","className","props","transform","textAnchor","data-ref","dominantBaseline","Component","defaultProps","BallEdit","xmlns","viewBox","d","ballImage","DragHandle","half","size","position","RotateHandle","box","Fragment","EditBox","tl","tr","bl","br","boxClass","showBox","SquareEdit","square","editBox","EllipseEdit","ellipse","LineEdit","markerStart","markerEnd","line","allPaths","renderPath","editHandles","PlayerDialog","state","open","_refName","React","createRef","_refNumber","openDialog","bind","close","save","setState","onEditDone","current","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","TextField","inputRef","margin","defaultValue","label","type","fullWidth","autoFocus","DialogActions","Button","onClick","DragObject","PitchEdit","_editRef","_bgRef","_playerDialogRef","_orgWidth","viewBoxRight","viewBoxLeft","_orgHeight","viewBoxBottom","viewBoxTop","_pitch","pitch","texts","overlay","overlayChanged","drawMode","pitchOverlayCallback","_dragNode","_dragObjectType","_mouseX","_mouseY","hContextMenu","hMouseDown","hMouseUp","hMouseMove","playerEditDone","getBoundingClientRect","X","Y","scale","getScale","clientX","left","clientY","top","playerMove","ballMove","squareEdit","ellipseEdit","squareRotate","ellipseRotate","lineEdit","button","target","classList","contains","getAttribute","replace","resetMouseDrag","editNode","editPlayer","playerEditStart","playerDrag","ballDrag","editTopLeft","editTopRight","editBottomLeft","editBottomRight","editMove","editRotate","editLinePoint","playerEditStarted","squareEditStarted","preventDefault","squareEditStart","ellipseEditStarted","ellipseEditStart","lineEditStarted","lineEditStart","pos","getRealPosition","lineCreate","lineAdd","squareCreate","squareAdd","ellipseCreate","ellipseAdd","isDragStarted","isShift","getModifierState","lineCleanup","squareCleanup","ellipseCleanup","objectDrag","lineEditEnd","squareEditEnd","ellipsesEditEnd","lineResize","squareResize","ellipseResize","svgText","children","outerHTML","pl","index","key","o","overlaySize","fill","playersShow","renderPlayers","ballsShow","renderBalls","squaresShow","renderSquares","ellipsesShow","renderEllipses","linesShow","renderLines","pitchOverlayShow","renderPitchOverlay","pitchClasses","classes","offset","pitchLeft","pitchTop","pitchTransform","playersTransform","ballsTransform","ref","onContextMenu","onMouseDown","onMouseUp","onMouseMove","stroke","patternUnits","markerWidth","markerHeight","refX","refY","orient","markerUnits","fillOpacity","strokeWidth","strokeDasharray","fontSize","withStyles","theme","paddingTop","mixins","toolbar","minHeight","withTheme","DrawMenu","lineArrows","linePattern","pitchOverlays","pitchOverlay","lineArrowsToggle","lineArrowEndToggle","lineArrowStartToggle","linePatternToggle","lineDashedOn","lineDashedOff","pitchOverlaysToggle","pitchOverlayOnChange","currentTarget","dataset","pitchOverlayOptions","txt","FormControlLabel","control","Radio","event","arrowsIcon","lineArrowsIcon","patternIcon","linePatternIcon","overlaySelect","pitchOverlaysRender","anchorEl","keepMounted","MenuItem","data-value","ListItemIcon","ListItemText","primary","Divider","Collapse","in","timeout","unmountOnExit","RadioGroup","onChange","List","component","disablePadding","ListItemSecondaryAction","Switch","edge","checked","FullscreenToggle","fullScreen","toggleFullScreen","toFullScreen","elem","document","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","isFullScreen","domFullScreenToggle","fsIcon","fsIconGet","fsLabel","Tooltip","title","IconButton","aria-label","AppTools","drawerOpen","drawingMode","pitchFutsal","toggleDrawer","saveImage","_refDrawMenu","_refOpenDrawMenu","drawingModeIcon","drawMenuAnchorEl","drawMenuOpen","drawMenuClose","isOpen","pitchEditSaveImage","AppBar","Toolbar","variant","Typography","grow","Drawer","anchor","ListItem","flexGrow","appTheme","createMuiTheme","refPitchEdit","refSvgToImg","SaveImage","svg","getSVG","toImg","App","ThemeProvider","SvgToImg","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","CssBaseline","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message","_refRenderer","orgWidth","orgHeight","imgWidth","imgHeight","canvas","createElement","ctx","getContext","img","addEventListener","drawImage","toBlob","blob","FileSaver","saveAs","innerHTML","encodedString","Buffer","src","style","display"],"mappings":"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","file":"static/js/main.56142130.chunk.js","sourcesContent":["class Ball {\n\tconstructor(id=\"\", color=0, x=0, y=0, xDefault=0, yDefault=0){\n\t\tthis._id = id;\n\t\tthis._color = color;\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._xDefault = xDefault;\n\t\tthis._yDefault = yDefault;\n\t}\n\n\treset() {\n\t\tthis._x = this._xDefault;\n\t\tthis._y = this._yDefault;\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\tset id(value) {\n\t\tthis._id = value;\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\tset color(value) {\n\t\tthis._color = value;\n\t}\n\n\tget x() {\n\t\treturn this._x;\n\t}\n\tset x(value) {\n\t\tthis._x = value;\n\t}\n\n\tget y() {\n\t\treturn this._y;\n\t}\n\tset y(value) {\n\t\tthis._y = value;\n\t}\n\n\tget xDefault() {\n\t\treturn this._xDefault;\n\t}\n\tset xDefault(value) {\n\t\tthis._xDefault = value;\n\t}\n\n\tget yDefault() {\n\t\treturn this._yDefault;\n\t}\n\tset yDefault(value) {\n\t\tthis._yDefault = value;\n\t}\n}\n\nexport default Ball;\n","class Player {\n\tconstructor(id=\"\", no=\"0\", name=\"\", color=0, x=0, y=0, rotation=0, xDefault=0, yDefault=0, noDefault=\"0\"){\n\t\tthis._id = id;\n\t\tthis._no = no;\n\t\tthis._name = name;\n\t\tthis._color = color;\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._rotation = rotation;\n\t\tthis._xDefault = xDefault;\n\t\tthis._yDefault = yDefault;\n\t\tthis._noDefault = noDefault;\n\t}\t\n\n\treset() {\n\t\tthis._x = this._xDefault;\n\t\tthis._y = this._yDefault;\n\t\tthis._rotation = 0;\n\t\tthis._name = \"\";\n\t\tthis._no = this._noDefault;\n\t}\n\n\tget isPlaced() {\n\t\treturn this._x !== this._xDefault || this._y !== this._yDefault;\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\tset id(value) {\n\t\tthis._id = value;\n\t}\n\n\tget no() {\n\t\treturn this._no;\n\t}\n\tset no(value) {\n\t\tthis._no = value;\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\tset name(value) {\n\t\tthis._name = value;\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\tset color(value) {\n\t\tthis._color = value;\n\t}\n\n\tget x() {\n\t\treturn this._x;\n\t}\n\tset x(value) {\n\t\tthis._x = value;\n\t}\n\n\tget y() {\n\t\treturn this._y;\n\t}\n\tset y(value) {\n\t\tthis._y = value;\n\t}\n\n\tget rotation() {\n\t\treturn this._rotation;\n\t}\n\tset rotation(value) {\n\t\tthis._rotation = value;\n\t}\n\n\tget xDefault() {\n\t\treturn this._xDefault;\n\t}\n\tset xDefault(value) {\n\t\tthis._xDefault = value;\n\t}\n\n\tget yDefault() {\n\t\treturn this._yDefault;\n\t}\n\tset yDefault(value) {\n\t\tthis._yDefault = value;\n\t}\n\n\tget noDefault() {\n\t\treturn this._noDefault;\n\t}\n\tset noDefault(value) {\n\t\tthis._noDefault = value;\n\t}\n}\n\nexport default Player;\n","class DrawMode {\n\tconstructor(mode='select', lineArrowStart=false, lineArrowEnd=false, lineDashed=false) {\n\t\tthis._mode=mode;\n\t\tthis._lineArrowStart = lineArrowStart;\n\t\tthis._lineArrowEnd = lineArrowEnd;\n\t\tthis._lineDashed = lineDashed;\n\t\tthis._color = 0;\n\t\tthis._pitchOverlay = 'none';\n\t\tthis._pitchOverlayCallback = null;\n\t}\n\n\tget mode() {\n\t\treturn this._mode;\n\t}\n\tset mode(value) {\n\t\tthis._mode = value;\n\t}\n\t// default modes\n\t// select\t- select / move\n\t// line\t\t- draw lines\n\t// square\t- draw square\n\t// ellipse\t- draw ellipse\n\t// text\t\t- draw text\n\tget modeOptions(){\n\t\treturn ['select','line','square','ellipse','text'];\n\t}\n\n\tget lineArrowStart() {\n\t\treturn this._lineArrowStart;\n\t}\n\tset lineArrowStart(value) {\n\t\tconsole.log(\"Line Arrow Start\", value);\n\t\tthis._lineArrowStart = value;\n\t}\n\n\tget lineArrowEnd() {\n\t\treturn this._lineArrowEnd;\n\t}\n\tset lineArrowEnd(value) {\n\t\tconsole.log(\"Line Arrow End\", value);\n\t\tthis._lineArrowEnd = value;\n\t}\n\n\tget lineDashed() {\n\t\treturn this._lineDashed;\n\t}\n\tset lineDashed(value) {\n\t\tconsole.log(\"Line Dashed\", value);\n\t\tthis._lineDashed = value;\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\tset color(value) {\n\t\tconsole.log(\"Color\", value);\n\t\tthis._color = value;\n\t}\n\n\t// default pitch overlay options\n\t// 28x20, exercises pitch\n\t// 28x15, basketball court\n\t// 18x9, volleyball court\n\tget pitchOverlayOptions(){\n\t\treturn ['none','exercise','basketball','volleyball'];\n\t}\n\n\tget pitchOverlay() {\n\t\treturn this._pitchOverlay;\n\t}\n\tset pitchOverlay(value) {\n\t\tconsole.log(\"PitchOverlay\", value);\n\t\tif (value === this._pitchOverlay) {\n\t\t\treturn;\n\t\t}\n\t\tthis._pitchOverlay = value;\n\t\tif (null !== this._pitchOverlayCallback) {\n\t\t\tthis._pitchOverlayCallback(this._pitchOverlay);\n\t\t}\n\t}\n\n\tget pitchOverlayCallback() {\n\t\treturn this._pitchOverlayCallback;\n\t}\n\tset pitchOverlayCallback(value) {\n\t\tthis._pitchOverlayCallback = value;\n\t}\n}\n\nexport default DrawMode;","class Box {\n\tconstructor(id=\"\", x=0, y=0, width=0, height=0){\n\t\tthis._id = id;\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t}\n\n    get id() {\n\t\treturn this._id;\n\t}\n\tset id(value) {\n\t\tthis._id = value;\n\t}\n\n\tget x() {\n\t\treturn this._x;\n\t}\n\tset x(value) {\n\t\tthis._x = value;\n\t}\n\n\tget y() {\n\t\treturn this._y;\n\t}\n\tset y(value) {\n\t\tthis._y = value;\n\t}\n\n\tget width() {\n\t\treturn this._width;\n\t}\n\tset width(value) {\n\t\tthis._width = value;\n\t}\n\n\tget height() {\n\t\treturn this._height;\n\t}\n\tset height(value) {\n\t\tthis._height = value;\n\t}\n}\n\nexport default Box;\n","import Box from './Box';\n\nclass Square {\n\tconstructor(id=\"\", color=0, x1=0, y1=0, width=0, height=0, rotation=0, dashed=false, isEdit=false){\n\t\tthis._id = id;\n\t\tthis._color = color;\n\t\tthis._x1 = x1;\n\t\tthis._y1 = y1;\n\t\tthis._x2 = x1 + width;\n\t\tthis._y2 = y1 + height;\n\t\tthis._rotation = rotation;\n\t\tthis._dashed = dashed;\n\t\tthis._isEdit = isEdit;\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\tset id(value) {\n\t\tthis._id = value;\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\tset color(value) {\n\t\tthis._color = value;\n\t}\n\n\tget x1() {\n\t\treturn this._x1;\n\t}\n\tset x1(value) {\n\t\tthis._x1 = value;\n\t}\n\n\tget y1() {\n\t\treturn this._y1;\n\t}\n\tset y1(value) {\n\t\tthis._y1 = value;\n\t}\n\n\tget x2() {\n\t\treturn this._x2;\n\t}\n\tset x2(value) {\n\t\tthis._x2 = value;\n\t}\n\n\tget y2() {\n\t\treturn this._y2;\n\t}\n\tset y2(value) {\n\t\tthis._y2 = value;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.width,\n\t\t\tthis.height\n\t\t);\n\t}\n\n\tget x() {\n\t\treturn this._x1 < this._x2 ? this._x1 : this._x2;\n\t}\n\n\tget width() {\n\t\treturn this._x1 < this._x2 ? this._x2 - this._x1 : this._x1 - this._x2;\n\t}\n\n\tget y() {\n\t\treturn this._y1 < this._y2 ? this._y1 : this._y2;\n\t}\n\n\tget height() {\n\t\treturn this._y1 < this._y2 ? this._y2 - this._y1 : this._y1 - this._y2;\n\t}\n\n\tget cx() {\n\t\treturn this.x + this.width / 2;\n\t}\n\n\tget cy() {\n\t\treturn this.y + this.height / 2;\n\t}\n\n\tget rotation() {\n\t\treturn this._rotation;\n\t}\n\tset rotation(value) {\n\t\tthis._rotation = value;\n\t}\n\n\tget dashed() {\n\t\treturn this._dashed;\n\t}\n\tset dashed(value) {\n\t\tthis._dashed = value;\n\t}\n\n\tget isEdit() {\n\t\treturn this._isEdit;\n\t}\n\tset isEdit(value) {\n\t\tthis._isEdit = value;\n\t}\n\n\tresize(x2, y2, proportional) {\n\t\tthis.x2 = x2;\n\t\tif (!proportional) {\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tlet szy = this.width * (this.y1 < y2 ? 1 : -1);\n\t\t\tthis.y2 = this.y1 + szy;\n\t\t}\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.cx;\n\t\tlet vy = posY - this.cy;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Square;\n","import Box from './Box';\n\nclass Ellipse {\n\tconstructor(id=\"\", color=0, x1=0, y1=0, rx=0, ry=0, rotation=0, dashed=false, isEdit=false){\n\t\tthis._id = id;\n\t\tthis._color = color;\n\t\tthis._x1 = x1;\n\t\tthis._y1 = y1;\n\t\tthis._x2 = x1 + rx * 2;\n\t\tthis._y2 = y1 + ry * 2;\n\t\tthis._rotation = rotation;\n\t\tthis._dashed = dashed;\n\t\tthis._isEdit = isEdit;\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\tset id(value) {\n\t\tthis._id = value;\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\tset color(value) {\n\t\tthis._color = value;\n\t}\n\n\tget x1() {\n\t\treturn this._x1;\n\t}\n\tset x1(value) {\n\t\tthis._x1 = value;\n\t}\n\n\tget y1() {\n\t\treturn this._y1;\n\t}\n\tset y1(value) {\n\t\tthis._y1 = value;\n\t}\n\n\tget x2() {\n\t\treturn this._x2;\n\t}\n\tset x2(value) {\n\t\tthis._x2 = value;\n\t}\n\n\tget y2() {\n\t\treturn this._y2;\n\t}\n\tset y2(value) {\n\t\tthis._y2 = value;\n\t}\n\n\tget cx() {\n\t\treturn (this._x1 < this._x2 ? this._x1 : this._x2) + this.rx;\n\t}\n\n\tget cy() {\n\t\treturn (this._y1 < this._y2 ? this._y1 : this._y2) + this.ry;\n\t}\n\n\tget rx() {\n\t\treturn (this._x1 < this._x2 ? this._x2 - this._x1 : this._x1 - this._x2) / 2;\n\t}\n\n\tget ry() {\n\t\treturn (this._y1 < this._y2 ? this._y2 - this._y1 : this._y1 - this._y2) / 2;\n\t}\n\n\tget rotation() {\n\t\treturn this._rotation;\n\t}\n\tset rotation(value) {\n\t\tthis._rotation = value;\n\t}\n\n\tget dashed() {\n\t\treturn this._dashed;\n\t}\n\tset dashed(value) {\n\t\tthis._dashed = value;\n\t}\n\n\tget isEdit() {\n\t\treturn this._isEdit;\n\t}\n\tset isEdit(value) {\n\t\tthis._isEdit = value;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.cx - this.rx,\n\t\t\tthis.cy - this.ry,\n\t\t\tthis.rx * 2,\n\t\t\tthis.ry * 2\n\t\t);\n\t}\n\n\tresize(x2, y2, proportional) {\n\t\tthis.x2 = x2;\n\t\tif (!proportional) {\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tlet szy = this.rx * (this.y1 < y2 ? 2 : -2);\n\t\t\tthis.y2 = this.y1 + szy;\n\t\t}\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.cx;\n\t\tlet vy = posY - this.cy;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Ellipse;\n","class Point {\n\tconstructor(x=0, y=0){\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t}\n\n\tget x() {\n\t\treturn this._x;\n\t}\n\tset x(value) {\n\t\tthis._x = value;\n\t}\n\n\tget y() {\n\t\treturn this._y;\n\t}\n\tset y(value) {\n\t\tthis._y = value;\n\t}\n\n\tequalTo(p) {\n\t\treturn p.x === this.x && p.y === this.y\n\t}\n\n\tmove(deltaX, deltaY) {\n\t\tthis._x += deltaX;\n\t\tthis._y += deltaY;\n\t}\n}\n\nexport default Point;\n","import Point from \"./Point\";\n\nclass Path {\n\tconstructor(id=\"\", p1=new Point(0,0), p2=new Point(0,0), c1=new Point(0,0), c2=new Point(0,0), arrowStart=false, arrowEnd=false){\n\t\tthis._id = id;\n\t\tthis._p1 = p1;\n\t\tthis._p2 = p2;\n\t\tthis._c1 = c1;\n\t\tthis._c2 = c2;\n\t\tthis._arrowStart = arrowStart;\n\t\tthis._arrowEnd = arrowEnd;\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\tset id(value) {\n\t\tthis._id = value;\n\t}\n\n\tget p1() {\n\t\treturn this._p1;\n\t}\n\tset p1(value) {\n\t\tthis._p1 = value;\n\t}\n\n\tget p2() {\n\t\treturn this._p2;\n\t}\n\tset p2(value) {\n\t\tthis._p2 = value;\n\t}\n\n\tget c1() {\n\t\treturn this._c1;\n\t}\n\tset c1(value) {\n\t\tthis._c1 = value;\n\t}\n\n\tget c2() {\n\t\treturn this._c2;\n\t}\n\tset c2(value) {\n\t\tthis._c2 = value;\n\t}\n\n\tget arrowStart() {\n\t\treturn this._arrowStart;\n\t}\n\tset arrowStart(value) {\n\t\tthis._arrowStart = value;\n\t}\n\n\tget arrowEnd() {\n\t\treturn this._arrowEnd;\n\t}\n\tset arrowEnd(value) {\n\t\tthis._arrowEnd = value;\n\t}\n}\n\nexport default Path;\n","import Point from \"./Point\";\nimport Path from \"./Path\";\n\nclass Line {\n\t// For line spline with control points see https://www.particleincell.com/2012/bezier-splines/\n\t// Line iz created as straight line with 2 spline segments\n\tconstructor(id=\"\", color=0, p1=new Point(0,0), p2=new Point(0,0), c1=new Point(0,0), c2=new Point(0,0), arrowStart=false, arrowEnd=false, dashed=false, isEdit=false){\n\t\tthis._id = id;\n\t\tthis._color = color;\n\t\tthis._p1 = p1;\n\t\tthis._p2 = p2;\n\t\tthis._c1 = c1;\n\t\tthis._c2 = c2;\n\t\tthis._arrowStart = arrowStart;\n\t\tthis._arrowEnd = arrowEnd;\n\t\tthis._dashed = dashed;\n\t\tthis._isEdit = isEdit;\n\t}\n\n\tget id() {\n\t\treturn this._id;\n\t}\n\tset id(value) {\n\t\tthis._id = value;\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\tset color(value) {\n\t\tthis._color = value;\n\t}\n\n\tget p1() {\n\t\treturn this._p1;\n\t}\n\tset p1(value) {\n\t\tthis._p1 = value;\n\t}\n\n\tget p2() {\n\t\treturn this._p2;\n\t}\n\tset p2(value) {\n\t\tthis._p2 = value;\n\t}\n\n\tget c1() {\n\t\treturn this._c1;\n\t}\n\tset c1(value) {\n\t\tthis._c1 = value;\n\t}\n\n\tget c2() {\n\t\treturn this._c2;\n\t}\n\tset c2(value) {\n\t\tthis._c2 = value;\n\t}\n\n\tget arrowStart() {\n\t\treturn this._arrowStart;\n\t}\n\tset arrowStart(value) {\n\t\tthis._arrowStart = value;\n\t}\n\n\tget arrowEnd() {\n\t\treturn this._arrowEnd;\n\t}\n\tset arrowEnd(value) {\n\t\tthis._arrowEnd = value;\n\t}\n\n\tget dashed() {\n\t\treturn this._dashed;\n\t}\n\tset dashed(value) {\n\t\tthis._dashed = value;\n\t}\n\n\tget isEdit() {\n\t\treturn this._isEdit;\n\t}\n\tset isEdit(value) {\n\t\tthis._isEdit = value;\n\t}\n\n\tempty() {\n\t\treturn this.p1.equalTo(this.p2) \n\t\t\t&& this.p1.equalTo(this.c1)\n\t\t\t&& this.p1.equalTo(this.c2);\n\t}\n\n\tresize(x2,y2) {\n\t\tthis.p2= new Point(x2,y2);\n\t\tlet lx = this.p2.x - this.p1.x;\n\t\tlet ly = this.p2.y - this.p1.y;\n\t\tthis.c1 = new Point(\n\t\t\tthis.p1.x + lx / 3,\n\t\t\tthis.p1.y + ly / 3,\n\t\t); \n\t\tthis.c2 = new Point(\n\t\t\tthis.p1.x + lx / 3 * 2,\n\t\t\tthis.p1.y + ly / 3 * 2,\n\t\t); \n\t}\n\n\tedit(pid, deltaX, deltaY) {\n\t\tswitch (pid) {\n\t\t\tcase \"p1\":\n\t\t\t\tconsole.log(deltaX, deltaY);\n\t\t\t\tthis.p1.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"c1\":\n\t\t\t\tthis.c1.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"c2\":\n\t\t\t\tthis.c2.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"p2\":\n\t\t\t\tthis.p2.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaths() {\n\t\tlet cx = this.computeControlPoints([this.p1.x, this.c1.x, this.c2.x, this.p2.x]);\n\t\tlet cy = this.computeControlPoints([this.p1.y, this.c1.y, this.c2.y, this.p2.y]);\n\t\tlet paths = [];\n\t\tpaths[0] = new Path(\n\t\t\tthis.id, this.p1, this.c1,\n\t\t\tnew Point(cx.p1[0], cy.p1[0]),\n\t\t\tnew Point(cx.p2[0], cy.p2[0]),\n\t\t\tthis.arrowStart, false\n\t\t);\n\t\tpaths[1] = new Path(\n\t\t\tthis.id, this.c1, this.c2,\n\t\t\tnew Point(cx.p1[1], cy.p1[1]),\n\t\t\tnew Point(cx.p2[1], cy.p2[1]),\n\t\t\tfalse, false\n\t\t);\n\t\tpaths[2] = new Path(\n\t\t\tthis.id, this.c2, this.p2,\n\t\t\tnew Point(cx.p1[2], cy.p1[2]),\n\t\t\tnew Point(cx.p2[2], cy.p2[2]),\n\t\t\tfalse, this.arrowEnd\n\t\t);\n\t\treturn paths;\n\t}\n\n\t// computes control points given knots K, this is the brain of the operation\n\tcomputeControlPoints(K) {\n\t\tlet p1 = [];\n\t\tlet p2 = [];\n\t\tlet n = K.length-1;\n\t\t\n\t\t// rhs vector\n\t\tlet a = [];\n\t\tlet b = [];\n\t\tlet c = [];\n\t\tlet r = [];\n\t\t\n\t\t// left most segment\n\t\ta[0]=0;\n\t\tb[0]=2;\n\t\tc[0]=1;\n\t\tr[0] = K[0] + 2*K[1];\n\t\t\n\t\t// internal segments\n\t\tfor (let i = 1; i < n - 1; i++) {\n\t\t\ta[i]=1;\n\t\t\tb[i]=4;\n\t\t\tc[i]=1;\n\t\t\tr[i] = 4 * K[i] + 2 * K[i+1];\n\t\t}\n\n\t\t// right segment\n\t\ta[n-1]=2;\n\t\tb[n-1]=7;\n\t\tc[n-1]=0;\n\t\tr[n-1] = 8*K[n-1] + K[n];\n\t\t\n\t\t// solves Ax=b with the Thomas algorithm (from Wikipedia)\n\t\tfor (let i = 1; i < n; i++) {\n\t\t\tlet m = a[i] / b[i - 1];\n\t\t\tb[i] = b[i] - m * c[i - 1];\n\t\t\tr[i] = r[i] - m * r[i - 1];\n\t\t}\n\t\n\t\tp1[n-1] = r[n-1] / b[n-1];\n\t\tfor (let i = n - 2; i >= 0; --i) {\n\t\t\tp1[i] = (r[i] - c[i] * p1[i+1]) / b[i];\n\t\t}\n\t\t\t\n\t\t// we have p1, now compute p2\n\t\tfor (let i = 0; i < n-1; i++) {\n\t\t\tp2[i] = 2 * K[i+1] - p1[i+1];\n\t\t}\n\t\tp2[n-1] = 0.5 * (K[n]+p1[n-1]);\n\t\t\n\t\treturn { p1:p1, p2:p2 };\n\t}\n}\n\nexport default Line;\n","import Ball from \"./Ball\";\nimport Player from \"./Player\";\nimport DrawMode from \"./DrawMode\";\nimport Square from \"./Square\";\nimport Ellipse from \"./Ellipse\";\nimport Line from \"./Line\";\nimport Point from \"./Point\";\n\nclass PitchFutsal {\n\tconstructor(noPlayers = 0, noPlayerColors=0, playerSize=1, noBalls=0, noBallColors=0, ballSize=1) {\n\t\tthis._playersIdPrefix = \"pl\";\n\t\tthis._noPlayers = noPlayers;\n\t\tthis._noPlayerColors = noPlayerColors;\n\t\tthis._playerSize = playerSize;\n\t\tthis._players = [];\n\n\t\tthis._ballsIdPrefix = \"bl\";\n\t\tthis._noBalls = noBalls;\n\t\tthis._noBallColors = noBallColors;\n\t\tthis._ballSize = ballSize;\n\t\tthis._balls = [];\n\n\t\tthis._squareID = 0;\n\t\tthis._squares = [];\n\n\t\tthis._ellipseID = 0;\n\t\tthis._ellipses = [];\n\t\t\n\t\tthis._lineID = 0;\n\t\tthis._lines = [];\n\n\t\tthis._textID = 0;\n\t\tthis._texts = [];\n\n\t\tthis._overlay = \"none\";\n\n\t\t// init objects\n\t\tthis._initPlayers();\n\t\tthis._initBalls();\n\t\tthis._drawMode = new DrawMode();\n\t}\n\n\t_initPlayers() {\n\t\t//console.log(\"Create players noPlayers:\", this._noPlayers);\n\t\tlet groupSize = Math.floor(this._noPlayers / this._noPlayerColors);\n\t\tfor (var i = 0; i < this._noPlayers; i++) {\n\t\t\tlet color = Math.floor(i / groupSize);\n\t\t\tlet number = groupSize - (i % groupSize);\n\t\t\tlet player = new Player(\n\t\t\t\tthis._playersIdPrefix+i.toString(), number, \"\", color,\n\t\t\t\tcolor * this._playerSize, 0,\n\t\t\t\t0,\n\t\t\t\tcolor * this._playerSize, 0,\n\t\t\t\tnumber\n\t\t\t);\n\t\t\tthis._players.push(player);\n\t\t}\n\t}\n\n\t_initBalls() {\n\t\t//console.log(\"Create balls noBalls:\", this._noBalls);\n\t\tlet groupSize = Math.floor(this._noBalls / this._noBallColors);\n\t\tfor (var i = 0; i < this._noBalls; i++) {\n\t\t\tlet color = Math.floor(i / groupSize);\n\t\t\tlet ball = new Ball(\n\t\t\t\tthis._ballsIdPrefix+i.toString(), color,\n\t\t\t\tcolor * this._ballSize,0,\n\t\t\t\tcolor * this._ballSize,0\n\t\t\t);\n\t\t\tthis._balls.push(ball);\n\t\t}\n\t}\n\n\tget drawMode() {\n\t\treturn this._drawMode;\n\t}\n\tset drawMode(value) {\n\t\tthis._drawMode = value;\n\t}\n\n\tget players() {\n\t\treturn this._players;\n\t}\n\tset players(value) {\n\t\tthis._players = value;\n\t}\n\n\tplayerMove(id, deltaX, deltaY) {\n\t\tthis.players = this.players.map(p => {\n\t\t\tif (id === p.id) {\n\t\t\t\tp.x += deltaX;\n\t\t\t\tp.y += deltaY;\n\t\t\t}\n\t\t\treturn p;\n\t\t});\n\t\treturn this.players;\n\t}\n\n\tplayerEditStart(id) {\n\t\tif (!id.startsWith(\"pl\")) {\n\t\t\treturn null;\n\t\t}\n\t\t// Edit player data\n\t\tconst p = this.players.find(p => id === p.id);\n\t\t// disable editing non placed players\n\t\tif (!p.isPlaced) {\n\t\t\treturn null;\n\t\t}\n\t\tconst editPlayer = {\n\t\t\tid: p.id,\n\t\t\tname: p.name,\n\t\t\tno: p.no\n\t\t}\n\t\treturn editPlayer;\n\t}\n\n\tplayerEditDone(player) {\n\t\tthis.players = this.players.map(p => {\n\t\t\tif (player.id !== p.id) {\n\t\t\t\treturn p;\n\t\t\t}\n\t\t\tif (player.remove) {\n\t\t\t\tp.reset();\n\t\t\t} else {\n\t\t\t\tp.name = player.name;\n\t\t\t\tp.no = player.no;\n\t\t\t}\n\t\t\treturn p;\n\t\t});\n\t\treturn this.players;\n\t}\n\n\tget balls() {\n\t\treturn this._balls;\n\t}\n\tset balls(value) {\n\t\tthis._balls = value;\n\t}\n\n\tballMove(id, deltaX, deltaY) {\n\t\tthis.balls = this.balls.map(b => {\n\t\t\tif (id === b.id) {\n\t\t\t\tb.x += deltaX;\n\t\t\t\tb.y += deltaY;\n\t\t\t}\n\t\t\treturn b;\n\t\t});\n\t\treturn this.balls;\n\t}\n\n\tget lines() {\n\t\treturn this._lines;\n\t}\n\tset lines(value) {\n\t\tthis._lines = value;\n\t}\n\n\tlineCreate(x,y) {\n\t\tlet id = 'ln'+this._lineID.toString();\n\t\tthis._lineID += 1;\n\t\treturn new Line(\n\t\t\tid, this._drawMode.color,\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tthis._drawMode.lineArrowStart,\n\t\t\tthis._drawMode.lineArrowEnd,\n\t\t\tthis._drawMode.lineDashed\n\t\t);\n\t}\n\n\tlineAdd(l) {\n\t\tthis.lines = this.lines.map((lx) => lx);\n\t\tthis.lines.push(l);\n\t\treturn this.lines;\n\t}\n\n\tlineResize(id, x2, y2) {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.resize(x2,y2);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t\treturn this.lines;\n\t}\n\n\tlineEdit(pid, id, deltaX, deltaY) {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.edit(pid, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t\treturn this.lines;\n\t}\n\n\t// remove empty lines\n\tlineCleanup() {\n\t\tthis.lines = this.lines.filter(l => !l.empty());\n\t\treturn this.lines;\n\t}\n\n\tlineEditStart(id) {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.isEdit = true;\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t\treturn this.lines;\n\t}\n\n\tlineEditEnd() {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tl.isEdit = false;\n\t\t\treturn l;\n\t\t});\n\t\treturn this.lines;\n\t}\n\n\n\tget ellipses() {\n\t\treturn this._ellipses;\n\t}\n\tset ellipses(value) {\n\t\tthis._ellipses = value;\n\t}\n\n\tellipseCreate(x,y) {\n\t\tlet id = 'el'+this._ellipseID.toString();\n\t\tthis._ellipseID += 1;\n\t\treturn new Ellipse(\n\t\t\tid, this._drawMode.color,\n\t\t\tx,y,0,0,0,\n\t\t\tthis._drawMode.lineDashed\n\t\t);\n\t}\n\n\tellipseAdd(el) {\n\t\tthis.ellipses = this.ellipses.map((e) => e);\n\t\tthis.ellipses.push(el);\n\t\treturn this.ellipses;\n\t}\n\n\tellipseResize(id, x2, y2, proportional) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.resize(x2, y2, proportional);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\treturn this.ellipses;\n\t}\n\n\tellipseEdit(corner, id, deltaX, deltaY) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\treturn this.ellipses;\n\t}\n\n\tellipseRotate(id, posX, posY, snap) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\treturn this.ellipses;\n\t}\n\n\t// remove empty ellipses\n\tellipseCleanup() {\n\t\tthis.ellipses = this.ellipses.filter(el => el.rx > 0 && el.ry > 0);\n\t\treturn this.ellipses;\n\t}\n\n\tellipseEditStart(id) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.isEdit = true;\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\treturn this.ellipses;\n\t}\n\n\tellipsesEditEnd() {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tel.isEdit = false;\n\t\t\treturn el;\n\t\t});\n\t\treturn this.ellipses;\n\t}\n\n\tget squares() {\n\t\treturn this._squares;\n\t}\n\tset squares(value) {\n\t\tthis._squares = value;\n\t}\n\n\tsquareCreate(x,y) {\n\t\tlet id = 'sq'+this._squareID.toString();\n\t\tthis._squareID += 1;\n\t\treturn new Square(\n\t\t\tid, this._drawMode.color,\n\t\t\tx,y,0,0,0,\n\t\t\tthis._drawMode.lineDashed\n\t\t);\n\t}\n\n\tsquareAdd(sq) {\n\t\tthis.squares = this.squares.map((s) => s);\n\t\tthis.squares.push(sq);\n\t\treturn this.squares;\n\t}\n\n\tsquareResize(id, x2, y2, proportional) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.resize(x2, y2, proportional);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\treturn this.squares;\n\t}\n\n\tsquareEdit(corner, id, deltaX, deltaY) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\treturn this.squares;\n\t}\n\n\tsquareRotate(id, posX, posY, snap) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\treturn this.squares;\n\t}\n\n\t// remove empty squares\n\tsquareCleanup() {\n\t\tthis.squares = this.squares.filter(sq => sq.width > 0 && sq.height > 0);\n\t\treturn this.squares;\n\t}\n\n\tsquareEditStart(id) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.isEdit = true;\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\treturn this.squares;\n\t}\n\n\tsquareEditEnd() {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tsq.isEdit = false;\n\t\t\treturn sq;\n\t\t});\n\t\treturn this.squares;\n\t}\n\n\tget texts() {\n\t\treturn this._texts;\n\t}\n\tset texts(value) {\n\t\tthis._texts = value;\n\t}\n\n\tget overlay() {\n\t\treturn this._overlay;\n\t}\n\tset overlay(value) {\n\t\tthis._overlay = value;\n\t}\n\n\toverlaySize() {\n\t\tswitch (this._overlay) {\n\t\t\tcase \"exercise\":\n\t\t\t\treturn {width:2800, height:2000};\n\t\t\tcase \"basketball\":\n\t\t\t\treturn {width:2800, height:1500}\n\t\t\tcase \"volleyball\":\n\t\t\t\treturn {width:1800, height:900}\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default PitchFutsal;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass PlayerEdit extends Component {\n\n\trender() {\n\t\tconst className = 'player pc' + this.props.color;\n\t\tconst transform = 'translate(' + this.props.x + ' ' + this.props.y + ')';\n\t\treturn (\n\t\t\t<g className={className} textAnchor=\"middle\" transform={transform}>\n\t\t\t\t<circle r=\"50\" cx=\"50\" cy=\"70\" className=\"draggable\" data-ref={this.props.id} />\n\t\t\t\t<text className=\"number\" x=\"50\" y=\"70\" dominantBaseline=\"central\">{this.props.no}</text>\n\t\t\t\t<text x=\"50\">{this.props.name}</text>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nPlayerEdit.defaultProps = {\n\tid:\"\",\n\tx:0,\n\ty:0,\n\tcolor:0,\n\tno: 0,\n\tname: \"\"\n}\n\nPlayerEdit.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\tcolor: PropTypes.number,\n\tno: PropTypes.number,\n\tname: PropTypes.string\n}\n\nexport default PlayerEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass BallEdit extends Component {\n\n\tballImage() {\n\t\treturn (\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"60\" height=\"60\" viewBox=\"0 0 952 952\">\n\t\t\t\t<path d=\"M813 139A475 475 0 000 476a474 474 0 00476 476 474 474 0 00476-476 474 474 0 00-139-337zm-600-31l12-10a457 457 0 01370-60c-14 6-33 18-65 45a393 393 0 00-182 22c-31 11-55 23-71 33l-74-25c3 1 8-4 10-5zm433 119l-81 222-196 37-161-166c11-76 63-143 63-143s34-25 88-44a403 403 0 01174-20l113 114zM39 460c-5 32-6 66-3 100l-9-20a451 451 0 0136-252c-3 30-2 61 0 85-11 28-19 57-24 87zm40 173a418 418 0 018-239c33-28 77-44 101-52l158 164-16 179-155 52c-39-29-72-68-96-104zm470 260c-34 22-121 28-157 29a451 451 0 01-200-92c0-1-4-49-4-66l156-52 181 78 25 103h-1zm300-158c-27 38-59 75-98 102-36 25-85 34-128 41-3 1-44 8-45 6l-25-103 128-132 168-15 8 89-8 12zm3-135l-2 3-168 16-90-158 82-223 115 7a366 366 0 01118 169 434 434 0 01-55 186zm60-250a396 396 0 00-108-131c-5-25-19-65-57-107l2 2 7 5a459 459 0 01156 230v1z\"/>\n\t\t\t</svg>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst className = 'ball bc' + this.props.color;\n\t\tconst transform = 'translate(' + this.props.x + ' ' + this.props.y + ')';\n\t\tconst ball = this.props.color === 4 ? this.ballImage() : null;\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<circle r=\"30\" cx=\"30\" cy=\"30\" className=\"draggable\" data-ref={this.props.id} />\n\t\t\t\t{ball}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nBallEdit.defaultProps = {\n\tid:\"\",\n\tx:0,\n\ty:0,\n\tcolor:0\n}\n\nBallEdit.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\tcolor: PropTypes.number\n}\n\nexport default BallEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Point from '../pitch/Point';\n\nclass DragHandle extends Component {\n\trender() {\n\t\tconst half = this.props.size / 2;\n\t\tconst x = this.props.position.x - half;\n\t\tconst y = this.props.position.y - half;\n\t\treturn (\n\t\t\t<rect className=\"editCorner draggable\" x={x} y={y} width={this.props.size} height={this.props.size} data-ref={this.props.id} />\n\t\t);\n\t}\n}\n\nDragHandle.defaultProps = {\n\tid: \"\",\n\tsize: 50,\n\tposition: null\n}\n\nDragHandle.propTypes = {\n\tid: PropTypes.string,\n\tsize: PropTypes.number,\n\tposition: PropTypes.instanceOf(Point)\n}\n\nexport default DragHandle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '../pitch/Box';\n\nclass RotateHandle extends Component {\n\trender() {\n\t\tconst box = this.props.box;\n\t\tconst half = box.width / 2;\n\t\tconst x1 = box.x + half;\n\t\tconst y1 = box.y;\n\t\tconst x2 = x1;\n\t\tconst y2 = y1 - 2 * this.props.size;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<line x1={x1} y1={y1} x2={x2} y2={y2} />\n\t\t\t\t<circle className=\"editCorner draggable\" cx={x2} cy={y2} r={this.props.size/2} data-ref={\"edit-rt-\" + box.id} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nRotateHandle.defaultProps = {\n\tsize: 50,\n\tbox: null\n}\n\nRotateHandle.propTypes = {\n\tsize: PropTypes.number,\n\tbox: PropTypes.instanceOf(Box),\n}\n\nexport default RotateHandle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '../pitch/Box';\nimport Point from '../pitch/Point';\nimport DragHandle from './DragHandle';\nimport RotateHandle from './RotateHandle';\n\nclass EditBox extends Component {\n\n\trender() {\n\t\tconst box = this.props.box;\n\t\tconst tl = new Point(box.x, box.y);\n\t\tconst tr = new Point(box.x + box.width, box.y);\n\t\tconst bl = new Point(box.x, box.y + box.height);\n\t\tconst br = new Point(box.x + box.width, box.y + box.height);\n\t\tconst boxClass = this.props.showBox ? \"editBox draggable\" : \"editTransparent draggable\";\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect className={boxClass} x={box.x} y={box.y} width={box.width} height={box.height} data-ref={\"edit-mv-\" + box.id} />\n\t\t\t\t<DragHandle id={\"edit-tl-\" + box.id} position={tl} />\n\t\t\t\t<DragHandle id={\"edit-tr-\" + box.id} position={tr} />\n\t\t\t\t<DragHandle id={\"edit-bl-\" + box.id} position={bl} />\n\t\t\t\t<DragHandle id={\"edit-br-\" + box.id} position={br} />\n\t\t\t\t<RotateHandle box={box} />\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nEditBox.defaultProps = {\n\tbox: null,\n\tshowBox:false\n}\n\nEditBox.propTypes = {\n\tbox: PropTypes.instanceOf(Box),\n\tshowBox: PropTypes.bool\n}\n\nexport default EditBox;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox'\nimport Square from '../pitch/Square';\n\nclass SquareEdit extends Component {\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={false} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst sq = this.props.square;\n\t\tconst className = (sq.dashed ? 'square dashed pc' : 'square pc') + sq.color;\n\t\tconst transform = 'rotate('+ sq.rotation + ',' + sq.cx + ',' + sq.cy + ')';\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<rect x={sq.x} y={sq.y} width={sq.width} height={sq.height} data-ref={sq.id} />\n\t\t\t\t{this.editBox(sq.isEdit, sq.box)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nSquareEdit.defaultProps = {\n\tsquare: null\n}\n\nSquareEdit.propTypes = {\n\tsquare: PropTypes.instanceOf(Square)\n}\n\nexport default SquareEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox'\nimport Ellipse from '../pitch/Ellipse';\n\nclass EllipseEdit extends Component {\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={true} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst el = this.props.ellipse;\n\t\tconst className = (el.dashed ? 'ellipse dashed pc' : 'ellipse pc') + el.color;\n\t\tconst transform = 'rotate('+ el.rotation + ',' + el.cx + ',' + el.cy + ')';\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<ellipse cx={el.cx} cy={el.cy} rx={el.rx} ry={el.ry} data-ref={el.id} />\n\t\t\t\t{this.editBox(el.isEdit, el.box)}\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nEllipseEdit.defaultProps = {\n\tellipse: null\n}\n\nEllipseEdit.propTypes = {\n\tellipse: PropTypes.instanceOf(Ellipse)\n}\n\nexport default EllipseEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Line from '../pitch/Line';\nimport DragHandle from './DragHandle';\n\nclass LineEdit extends Component {\n\n\teditHandles(l) {\n\t\tif (!l.isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<DragHandle id={\"edit-l1-\" + l.id} position={l.p1} />\n\t\t\t\t<DragHandle id={\"edit-l2-\" + l.id} position={l.c1} />\n\t\t\t\t<DragHandle id={\"edit-l3-\" + l.id} position={l.c2} />\n\t\t\t\t<DragHandle id={\"edit-l4-\" + l.id} position={l.p2} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\trenderPath(p) {\n\t\tconst d = \"M \" + p.p1.x + \" \" + p.p1.y + \" C \" + p.c1.x + \" \" + p.c1.y + \" \" + p.c2.x + \" \" + p.c2.y + \" \" + p.p2.x + \" \" + p.p2.y;\n\t\tconst markerStart = p.arrowStart ? \"url(#arrowStart)\" : \"\";\n\t\tconst markerEnd = p.arrowEnd ? \"url(#arrowEnd)\" : \"\";\n\t\treturn (\n\t\t\t<path d={d} data-ref={p.id} markerStart={markerStart} markerEnd={markerEnd} />\n\t\t);\n\t}\n\n\trender() {\n\t\tconst l = this.props.line;\n\t\tconst className = (l.dashed ? 'line dashed pc' : 'line pc') + l.color;\n\t\tconst allPaths = l.paths().map(p => this.renderPath(p));\n\t\treturn (\n\t\t\t<g className={className}>\n\t\t\t\t{allPaths}\n\t\t\t\t{this.editHandles(l)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nLineEdit.defaultProps = {\n\tline: null\n}\n\nLineEdit.propTypes = {\n\tline: PropTypes.instanceOf(Line)\n}\n\nexport default LineEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nclass PlayerDialog extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tplayer: {id:\"\", name:\"\", no: 0}\n\t\t};\n\n\t\t// input references\n\t\tthis._refName = React.createRef();\n\t\tthis._refNumber = React.createRef();\n\n\t\t// events\n\t\tthis.openDialog = this.openDialog.bind(this);\n\t\tthis.close = this.close.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.remove = this.remove.bind(this);\n\t}\n\t\n\topenDialog(player) {\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\tplayer: player\n\t\t});\n\t}\n\n\tclose() {\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\tsave() {\n\t\tthis.close();\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onEditDone({\n\t\t\tid: this.state.player.id,\n\t\t\tremove: false,\n\t\t\tname: this._refName.current.value,\n\t\t\tno: this._refNumber.current.value\n\t\t})\n\t}\n\n\tremove() {\n\t\tthis.close();\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onEditDone({\n\t\t\tid: this.state.player.id,\n\t\t\tremove: true\n\t\t})\n\t}\n\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Dialog open={this.state.open} onClose={this.close} aria-labelledby=\"form-dialog-title\">\n\t\t\t\t\t<DialogTitle id=\"form-dialog-title\">Edit player</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<TextField inputRef={this._refNumber} margin=\"dense\" id=\"playerNumber\" defaultValue={this.state.player.no} label=\"Number\" type=\"number\" fullWidth autoFocus />\n\t\t\t\t\t\t<TextField inputRef={this._refName} margin=\"dense\" id=\"playerName\" defaultValue={this.state.player.name} label=\"Name\" type=\"text\" fullWidth />\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={this.remove} color=\"primary\">Remove</Button>\n\t\t\t\t\t\t<Button onClick={this.close} color=\"primary\">Cancel</Button>\n\t\t\t\t\t\t<Button onClick={this.save} color=\"primary\">Save</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nPlayerDialog.defaultProps = {\n\tonEditDone: null\n}\n\nPlayerDialog.propTypes = {\n\tonEditDone: PropTypes.func\n}\n\nexport default PlayerDialog;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PitchFutsal from '../pitch/PitchFutsal';\nimport { withStyles } from '@material-ui/core/styles';\nimport PlayerEdit from './PlayerEdit'\nimport BallEdit from './BallEdit'\nimport SquareEdit from './SquareEdit'\nimport EllipseEdit from './EllipseEdit'\nimport LineEdit from './LineEdit'\nimport PlayerDialog from './PlayerDialog'\n// import './PitchEdit.css';\t// embedded to svg for now\n\n// this is for offset from toolbar and default class\nconst styles = theme => ({\n\toffset: {\n\t\tpaddingTop: theme.mixins.toolbar.minHeight,\n\t}\n})\n\n// define object types for mouse dragging\nconst DragObject = {\n\tNone: -1,\n\tPlayer: 0,\n\tBall: 1,\n\tCone: 2,\n\tGoal: 3,\n\tEditTopLeft: 4,\n\tEditTopRight: 5,\n\tEditBottomLeft: 6,\n\tEditBottomRight: 7,\n\tEditMove: 8,\n\tEditRotate: 9,\n\tEditLineP1: 10,\n\tEditLineC1: 11,\n\tEditLineC2: 12,\n\tEditLineP2: 13\n}\n\nclass PitchEdit extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._editRef = React.createRef();\t// reference to editor container\n\t\tthis._bgRef = React.createRef();\t// background reference to get client size of pitch for editing\n\t\tthis._playerDialogRef = React.createRef(); // edit player dialog reference\n\t\tthis._orgWidth = this.props.viewBoxRight - this.props.viewBoxLeft;\n\t\tthis._orgHeight = this.props.viewBoxBottom - this.props.viewBoxTop;\n\t\tthis._pitch = this.props.pitch;\n\t\tthis.state = {\n\t\t\tplayers: this._pitch.players,\n\t\t\tballs: this._pitch.balls,\n\t\t\tsquares: this._pitch.squares,\n\t\t\tellipses: this._pitch.ellipses,\n\t\t\ttexts: this._pitch.texts,\n\t\t\tlines: this._pitch.lines,\n\t\t\toverlay: this._pitch.overlay\n\t\t};\n\t\t\n\t\t// overlay changes\n\t\tthis.overlayChanged = this.overlayChanged.bind(this);\n\t\tthis._pitch.drawMode.pitchOverlayCallback = this.overlayChanged;\n\t\n\t\t// mouse drag init\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t\tthis._mouseX = 0;\n\t\tthis._mouseY = 0;\n\n\t\t// add events\n\t\tthis.hContextMenu = this.hContextMenu.bind(this);\n\t\tthis.hMouseDown = this.hMouseDown.bind(this);\n\t\tthis.hMouseUp = this.hMouseUp.bind(this);\n\t\tthis.hMouseMove = this.hMouseMove.bind(this);\n\t\t\n\t\t// callbacks\n\t\tthis.playerEditDone = this.playerEditDone.bind(this);\n\t}\n\n\toverlayChanged(value) {\n\t\tconsole.log(\"Overlay change\", value, this.state.overlay);\n\t\tthis._pitch.overlay = value;\n\t\tthis.setState({\n\t\t\toverlay: value\n\t\t});\n\t}\n\n\tgetScale() {\n\t\tconst box = this._bgRef.current.getBoundingClientRect();\n\t\treturn {\n\t\t\tX: this._orgWidth / box.width,\n\t\t\tY: this._orgHeight / box.height\n\t\t}\n\t}\n\n\tgetRealPosition(e) {\n\t\tlet scale = this.getScale();\t// TODO: reconsider scale\n\t\tlet box = this._bgRef.current.getBoundingClientRect();\n \t\tlet x = e.clientX - box.left;\t//x position within the element.\n  \t\tlet y = e.clientY - box.top; \t//y position within the element.\n\t\tlet realPosition = {\n\t\t\tX: x * scale.X,\n\t\t\tY: y * scale.Y\n\t\t}\n\t\treturn realPosition;\n\t}\n\n\tresetMouseDrag(e) {\n\t\tthis._mouseX = e.clientX;\n\t\tthis._mouseY = e.clientY;\n\t}\n\n\tplayerDrag(id, deltaX, deltaY) {\n\t\tthis.setState({\n\t\t\tplayers: this._pitch.playerMove(id, deltaX, deltaY)\n\t\t});\n\t}\n\n\tballDrag(id, deltaX, deltaY) {\n\t\tthis.setState({\n\t\t\tballs: this._pitch.ballMove(id, deltaX, deltaY)\n\t\t});\n\t}\n\n\teditTopLeft(id, deltaX, deltaY) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.setState({\n\t\t\t\tsquares: this._pitch.squareEdit(\"tl\",id, deltaX, deltaY)\n\t\t\t});\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.setState({\n\t\t\t\tellipses: this._pitch.ellipseEdit(\"tl\",id, deltaX, deltaY)\n\t\t\t});\n\t\t}\n\t}\n\t\n\teditTopRight(id, deltaX, deltaY) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.setState({\n\t\t\t\tsquares: this._pitch.squareEdit(\"tr\",id, deltaX, deltaY)\n\t\t\t});\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.setState({\n\t\t\t\tellipses: this._pitch.ellipseEdit(\"tr\",id, deltaX, deltaY)\n\t\t\t});\n\t\t}\n\t}\n\n\teditBottomLeft(id, deltaX, deltaY) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.setState({\n\t\t\t\tsquares: this._pitch.squareEdit(\"bl\",id, deltaX, deltaY)\n\t\t\t});\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.setState({\n\t\t\t\tellipses: this._pitch.ellipseEdit(\"bl\",id, deltaX, deltaY)\n\t\t\t});\n\t\t}\n\t}\n\n\teditBottomRight(id, deltaX, deltaY) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.setState({\n\t\t\t\tsquares: this._pitch.squareEdit(\"br\",id, deltaX, deltaY)\n\t\t\t});\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.setState({\n\t\t\t\tellipses: this._pitch.ellipseEdit(\"br\",id, deltaX, deltaY)\n\t\t\t});\n\t\t}\n\t}\n\n\teditMove(id, deltaX, deltaY) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.setState({\n\t\t\t\tsquares: this._pitch.squareEdit(\"mv\",id, deltaX, deltaY)\n\t\t\t});\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.setState({\n\t\t\t\tellipses: this._pitch.ellipseEdit(\"mv\",id, deltaX, deltaY)\n\t\t\t});\n\t\t}\n\t}\n\n\teditRotate(id, posX, posY, snap) {\n\t\tif (id.startsWith(\"sq\")) {\n\t\t\tthis.setState({\n\t\t\t\tsquares: this._pitch.squareRotate(id, posX, posY, snap)\n\t\t\t});\n\t\t}\n\t\tif (id.startsWith(\"el\")) {\n\t\t\tthis.setState({\n\t\t\t\tellipses: this._pitch.ellipseRotate(id, posX, posY, snap)\n\t\t\t});\n\t\t}\n\t}\n\n\teditLinePoint(pid, id, deltaX, deltaY) {\n\t\tthis.setState({\n\t\t\tlines: this._pitch.lineEdit(pid, id, deltaX, deltaY)\n\t\t});\n\t}\n\n\tisDragStarted(e) {\n\t\tif (0 !== e.button) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!e.target.classList.contains('draggable')) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._dragNode = e.target.getAttribute(\"data-ref\");\n\t\tif (null === this._dragNode) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._dragObjectType = DragObject.None;\n\t\tif (this._dragNode.startsWith(\"pl\")) {\n\t\t\tthis._dragObjectType = DragObject.Player;\n\t\t}\n\t\tif (this._dragNode.startsWith(\"bl\")) {\n\t\t\tthis._dragObjectType = DragObject.Ball;\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-tl-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditTopLeft;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-tl-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-tr-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditTopRight;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-tr-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-bl-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditBottomLeft;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-bl-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-br-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditBottomRight;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-br-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-mv-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditMove;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-mv-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-rt-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditRotate;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-rt-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-l1-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditLineP1;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-l1-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-l2-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditLineC1;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-l2-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-l3-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditLineC2;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-l3-\",\"\");\n\t\t}\n\t\tif (this._dragNode.startsWith(\"edit-l4-\")) {\n\t\t\tthis._dragObjectType = DragObject.EditLineP2;\n\t\t\tthis._dragNode = this._dragNode.replace(\"edit-l4-\",\"\");\n\t\t}\n\t\tthis.resetMouseDrag(e);\n\t\treturn true;\n\t}\n\t\n\tplayerEditStarted(editNode) {\n\t\tif (!editNode.startsWith(\"pl\")) {\n\t\t\treturn false;\n\t\t}\n\t\tconst editPlayer = this._pitch.playerEditStart(editNode);\n\t\tif (null === editPlayer) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._playerDialogRef.current.openDialog(editPlayer);\n\t\treturn true;\n\t}\n\n\tsquareEditStarted(editNode) {\n\t\tif (!editNode.startsWith(\"sq\")) {\n\t\t\treturn false;\n\t\t}\n\t\tconsole.log(\"Square edit start\", editNode);\n\t\treturn true;\n\t}\n\n\tellipseEditStarted(editNode) {\n\t\tif (!editNode.startsWith(\"el\")) {\n\t\t\treturn false;\n\t\t}\n\t\tconsole.log(\"Ellipse edit start\", editNode);\n\t\treturn true;\n\t}\n\n\tlineEditStarted(editNode) {\n\t\tif (!editNode.startsWith(\"ln\")) {\n\t\t\treturn false;\n\t\t}\n\t\tconsole.log(\"Line edit start\", editNode);\n\t\treturn true;\n\t}\n\n\t// player edit dialog callback\n\tplayerEditDone(player) {\n\t\tthis.setState({\n\t\t\tplayers: this._pitch.playerEditDone(player)\n\t\t});\n\t}\n\n\tobjectDrag(posX, posY, deltaX, deltaY, snap) {\n\t\tswitch (this._dragObjectType) {\n\t\t\tcase DragObject.Player:\n\t\t\t\tthis.playerDrag(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.Ball:\n\t\t\t\tthis.ballDrag(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopLeft:\n\t\t\t\tthis.editTopLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopRight:\n\t\t\t\tthis.editTopRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomLeft:\n\t\t\t\tthis.editBottomLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomRight:\n\t\t\t\tthis.editBottomRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditMove:\n\t\t\t\tthis.editMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditRotate:\n\t\t\t\tthis.editRotate(this._dragNode, posX, posY, snap);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP1:\n\t\t\t\tthis.editLinePoint(\"p1\", this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC1:\n\t\t\t\tthis.editLinePoint(\"c1\", this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC2:\n\t\t\t\tthis.editLinePoint(\"c2\", this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP2:\n\t\t\t\tthis.editLinePoint(\"p2\", this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Invalid drag object type\", this._dragObjectType, this._dragNode);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thContextMenu(e) {\n\t\tif (this.props.pitch.drawMode.mode !== 'select') {\n\t\t\treturn;\n\t\t}\n\t\tlet editNode = e.target.getAttribute(\"data-ref\");\n\t\tif (null === editNode) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.playerEditStarted(editNode)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (this.squareEditStarted(editNode)) {\n\t\t\te.preventDefault();\n\t\t\tthis.setState({\n\t\t\t\tsquares: this.props.pitch.squareEditStart(editNode)\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif (this.ellipseEditStarted(editNode)) {\n\t\t\te.preventDefault();\n\t\t\tthis.setState({\n\t\t\t\tellipses: this.props.pitch.ellipseEditStart(editNode)\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif (this.lineEditStarted(editNode)) {\n\t\t\te.preventDefault();\n\t\t\tthis.setState({\n\t\t\t\tlines: this.props.pitch.lineEditStart(editNode)\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t}\n\n\thMouseDown(e) {\n\t\tlet pos = this.getRealPosition(e);\n\t\tswitch (this.props.pitch.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\te.preventDefault();\n\t\t\t\tlet l = this.props.pitch.lineCreate(pos.X, pos.Y);\n\t\t\t\tthis._dragNode = l.id;\n\t\t\t\tthis.setState({\n\t\t\t\t\tlines: this.props.pitch.lineAdd(l)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\te.preventDefault();\n\t\t\t\tlet sq = this.props.pitch.squareCreate(pos.X, pos.Y);\n\t\t\t\tthis._dragNode = sq.id;\n\t\t\t\tthis.setState({\n\t\t\t\t\tsquares: this.props.pitch.squareAdd(sq)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\te.preventDefault();\n\t\t\t\tlet el = this.props.pitch.ellipseCreate(pos.X, pos.Y);\n\t\t\t\tthis._dragNode = el.id;\n\t\t\t\tthis.setState({\n\t\t\t\t\tellipses: this.props.pitch.ellipseAdd(el)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tif (this.isDragStarted(e)) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thMouseUp(e) {\n\t\te.preventDefault();\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.pitch.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tthis.setState({\n\t\t\t\t\tlines: this.props.pitch.lineCleanup()\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tthis.setState({\n\t\t\t\t\tsquares: this.props.pitch.squareCleanup()\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tthis.setState({\n\t\t\t\t\tellipses: this.props.pitch.ellipseCleanup()\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tlet scale = this.getScale();\n\t\t\t\tlet deltaX = (e.clientX - this._mouseX) * scale.X;\n\t\t\t\tlet deltaY = (e.clientY - this._mouseY) * scale.Y;\n\t\t\t\tthis.resetMouseDrag(e);\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, deltaX, deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t\t// Reset editing\n\t\t// TODO: Make better handling\n\t\tif (0 === e.button && this._dragObjectType === DragObject.None) {\n\t\t\tthis.setState({\n\t\t\t\tlines: this.props.pitch.lineEditEnd(),\n\t\t\t\tsquares: this.props.pitch.squareEditEnd(),\n\t\t\t\tellipses: this.props.pitch.ellipsesEditEnd()\n\t\t\t});\n\t\t}\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t}\n\n\thMouseMove(e) {\n\t\tif (null == this._dragNode) {\n\t\t\treturn;\n\t\t}\n\t\te.preventDefault();\n\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.pitch.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tthis.setState({\n\t\t\t\t\tlines: this.props.pitch.lineResize(\n\t\t\t\t\t\tthis._dragNode, pos.X, pos.Y\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tthis.setState({\n\t\t\t\t\tsquares: this.props.pitch.squareResize(\n\t\t\t\t\t\tthis._dragNode, pos.X, pos.Y, isShift\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tthis.setState({\n\t\t\t\t\tellipses: this.props.pitch.ellipseResize(\n\t\t\t\t\t\tthis._dragNode, pos.X, pos.Y, isShift\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tlet scale = this.getScale();\n\t\t\t\tlet deltaX = (e.clientX - this._mouseX) * scale.X;\n\t\t\t\tlet deltaY = (e.clientY - this._mouseY) * scale.Y;\n\t\t\t\tthis.resetMouseDrag(e);\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, deltaX, deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// return current SVG in editor\n\t// TODO: Cleanup unused players and balls\n\tgetSVG() {\n\t\treturn {\n\t\t\twidth: this._orgWidth,\n\t\t\theight: this._orgHeight,\n\t\t\tsvgText: this._editRef.current.children[0].outerHTML\n\t\t}\n\t}\n\n\trenderPlayers() {\n\t\treturn this.state.players.map((pl, index) => {\n\t\t\treturn (\n\t\t\t\t<PlayerEdit key={index.toString()} id={pl.id} x={pl.x} y={pl.y} no={pl.no} name={pl.name} color={pl.color} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderBalls(){\n\t\treturn this.state.balls.map((b, index) => {\n\t\t\treturn (\n\t\t\t\t<BallEdit key={index.toString()} id={b.id} x={b.x} y={b.y} color={b.color} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderSquares(){\n\t\treturn this.state.squares.map((s, index) => {\n\t\t\treturn (\n\t\t\t\t<SquareEdit key={index.toString()} square={s} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderEllipses(){\n\t\treturn this.state.ellipses.map((el, index) => {\n\t\t\treturn (\n\t\t\t\t<EllipseEdit key={index.toString()} ellipse={el} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderLines(){\n\t\treturn this.state.lines.map((l, index) => {\n\t\t\treturn (\n\t\t\t\t<LineEdit key={index.toString()} line={l} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderPitchOverlay(){\n\t\tconst o = this._pitch.overlaySize();\n\t\tif (null === o) {\n\t\t\treturn null;\n\t\t}\n\t\tconst posX = (this._orgWidth - o.width) / 2;\n\t\tconst posY = (this._orgHeight - o.height) / 2;\n\t\tconst transform = 'translate(' + posX + ' ' + posY + ')';\n\t\treturn (<rect width={o.width} height={o.height} transform={transform} fill=\"none\" />);\n\t}\n\n\trender() {\n\t\tconst viewBox = this.props.viewBoxLeft.toString() + ' ' + this.props.viewBoxTop.toString() + ' ' + this.props.viewBoxRight.toString() + ' ' + this.props.viewBoxBottom.toString()\n\n\t\tconst playersShow = this.renderPlayers();\n\t\tconst ballsShow = this.renderBalls();\n\t\tconst squaresShow = this.renderSquares();\n\t\tconst ellipsesShow = this.renderEllipses();\n\t\tconst linesShow = this.renderLines();\n\t\tconst pitchOverlayShow = this.renderPitchOverlay();\n\n\t\t// default class is full screen width and height with padding for menu height\n\t\tconst pitchClasses = \"pitch \" + this.props.classes.offset;\n\n\t\t// Calculate pitch position in viewBox\n\t\tconst pitchLeft = (this._orgWidth - 4000) / 2; // Goals are relative to pitch no need to take them in calc\n\t\tconst pitchTop = (this._orgHeight - 2000) / 2;\n\t\tconst pitchTransform = 'translate(' + pitchLeft + ' ' + pitchTop + ')';\n\n\t\t// calculate players position in viewbox\n\t\tconst playersLeft = pitchLeft;\n\t\tconst playersTop = pitchTop + 2000 + 50;\n\t\tconst playersTransform = 'translate(' + playersLeft + ' ' + playersTop + ')';\n\n\t\t// calculate balls position in viewBox\n\t\tconst ballsLeft = pitchLeft + 1050\n\t\tconst ballsTop = pitchTop + 2000 + 100;\n\t\tconst ballsTransform = 'translate(' + ballsLeft + ' ' + ballsTop + ')'; // \"translate(1200 2210)\"\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t<div ref={this._editRef} className={pitchClasses}>\n\t\t\t\t<svg xmlns='http://www.w3.org/2000/svg' viewBox={viewBox} onContextMenu={this.hContextMenu} onMouseDown={this.hMouseDown} onMouseUp={this.hMouseUp} onMouseMove={this.hMouseMove}>\n\t\t\t\t\t<style>\n\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t'.pc0 {\tfill: #8b2323; stroke: #8b2323; }',\n\t\t\t\t\t\t\t'.pc1 {\tfill: #e7e739; stroke: #e7e739; }',\n\t\t\t\t\t\t\t'.pc2 {\tfill: #912cee; stroke: #912cee; }',\n\t\t\t\t\t\t\t'.pc3 {\tfill: #04b804; stroke: #04b804; }',\n\t\t\t\t\t\t\t'.pc4 {\tfill: #1d4ba0; stroke: #1d4ba0; }',\n\t\t\t\t\t\t\t'.pc5 {\tfill: #ee2c2c; stroke: #ee2c2c; }',\n\t\t\t\t\t\t\t'.pc6 {\tfill: #ff7f50; stroke: #ff7f50; }',\n\t\t\t\t\t\t\t'.pc7 {\tfill: #56c6eb; stroke: #56c6eb; }',\n\t\t\t\t\t\t\t'.bc0 { fill: #ffa500; }',\n\t\t\t\t\t\t\t'.bc1 { fill: #cc3333; }',\n\t\t\t\t\t\t\t'.bc2 { fill: #222333; }',\n\t\t\t\t\t\t\t'.bc3 { fill: #0000ff; }',\n\t\t\t\t\t\t\t'.bc4 { fill: #ffffff; }',\n\t\t\t\t\t\t\t'.bc4 svg { fill: #000000; }',\n\t\t\t\t\t\t\t'.player { pointer-events: none; }',\n\t\t\t\t\t\t\t'.player text { fill: black;\t}',\n\t\t\t\t\t\t\t'.player text.number { fill: white; }',\n\t\t\t\t\t\t\t'.dashed { stroke-dasharray: 20; }',\n\t\t\t\t\t\t\t'.square { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t\t\t\t\t'.ellipse { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t\t\t\t\t'.line { stroke-width: 12; }',\n\t\t\t\t\t\t\t'.line path { fill: none; stroke-width: 12; }',\n\t\t\t\t\t\t\t'.draggable { cursor: move; pointer-events: all;}',\n\t\t\t\t\t\t\t'.editBox { fill: none; stroke-width: 8; stroke-opacity: 1; }',\n\t\t\t\t\t\t\t'.editTransparent { fill: none; stroke-width: 0; }',\n\t\t\t\t\t\t\t'.editCorner { fill: red; stroke-width: 0; stroke-opacity: 1; }'\n\t\t\t\t\t\t]}\n\t\t\t\t\t</style>\n\t\t\t\t\t<pattern id=\"goal-net\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" stroke=\"black\" patternUnits=\"userSpaceOnUse\">\n\t\t\t\t\t\t<line x1=\"0\" x2=\"20\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t\t<line x1=\"20\" x2=\"00\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t</pattern>\n\t\t\t\t\t<marker id=\"arrowEnd\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M0,0 L0,6 L9,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<marker id=\"arrowStart\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M9,0 L9,6 L0,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<g id=\"background\" ref={this._bgRef}>\n\t\t\t\t\t\t<rect width={this._orgWidth} height={this._orgHeight} fill=\"#b7b7b7\" fillOpacity=\"0.5\" />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitch\" transform={pitchTransform} fill=\"#0280c6\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t<rect width=\"4000\" height=\"2000\" />\n\t\t\t\t\t\t<line x1=\"2000\" x2=\"2000\" y1=\"0\" y2=\"2000\" />\n\t\t\t\t\t\t<circle r=\"300\" cx=\"2000\" cy=\"1000\" fill=\"none\" />\n\t\t\t\t\t\t<circle r=\"12\" cx=\"2000\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t<g id=\"corner_marks\">\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M25,0 a25,25 0 0,1 -25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M4000,25 a25,25 0 0,1 -25,-25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,1975 a25,25 0 0,1 25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3975,2000 a25,25 0 0,1 25,-25\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"substitition-zones\">\n\t\t\t\t\t\t\t<line x1=\"1000\" x2=\"1000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"1500\" x2=\"1500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"2500\" x2=\"2500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"3000\" x2=\"3000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left\">\n\t\t\t\t\t\t\t<line x1=\"500\" x2=\"500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"600\" x2=\"600\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"600\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,242 a600,600 0 0,1 600,600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M600,1158 a600,600 0 0,1 -600,600\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t\t<g id=\"goal-left\">\n\t\t\t\t\t\t\t\t<rect width=\"100\" height=\"300\" x=\"-100\" y=\"850\" fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" />\n\t\t\t\t\t\t\t\t<line x1=\"0\" x2=\"0\" y1=\"850\" y2=\"1150\" />\n\t\t\t\t\t\t\t\t<line x1=\"0\" x2=\"0\" y1=\"850\" y2=\"1150\" stroke=\"red\" strokeDasharray=\"20\" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"1000\" cy=\"1000\"/>\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right\">\n\t\t\t\t\t\t\t<line x1=\"3500\" x2=\"3500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"3400\" x2=\"3400\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3400\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,842 a600,600 0 0,1 600,-600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,1158 a600,600 0 0,0 600,600\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t\t<g id=\"goal-right\">\n\t\t\t\t\t\t\t\t<rect width=\"100\" height=\"300\" x=\"4000\" y=\"850\" fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" />\n\t\t\t\t\t\t\t\t<line x1=\"4000\" x2=\"4000\" y1=\"850\" y2=\"1150\" />\n\t\t\t\t\t\t\t\t<line x1=\"4000\" x2=\"4000\" y1=\"850\" y2=\"1150\" stroke=\"red\" strokeDasharray=\"20\" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3000\" cy=\"1000\" />\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitchOverlay\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t{pitchOverlayShow}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"ellipses\">{ellipsesShow}</g>\n\t\t\t\t\t<g id=\"squares\">{squaresShow}</g>\n\t\t\t\t\t<g id=\"players\" transform={playersTransform} fontSize=\"50\">\n\t\t\t\t\t\t{playersShow}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"balls\" transform={ballsTransform}>\n\t\t\t\t\t\t{ballsShow}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"lines\">{linesShow}</g>\n\t\t\t\t\t<g id=\"texts\"></g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<PlayerDialog ref={this._playerDialogRef} onEditDone={this.playerEditDone} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nPitchEdit.defaultProps = {\n\tpitch: null,\n\tviewBoxLeft: 0,\n\tviewBoxTop: 0,\n\tviewBoxRight: 4500,\n\tviewBoxBottom: 2500\n}\n\nPitchEdit.propTypes = {\n\tpitch: PropTypes.instanceOf(PitchFutsal),\n\tviewBoxLeft: PropTypes.number,\n\tviewBoxTop: PropTypes.number,\n\tviewBoxRight: PropTypes.number,\n\tviewBoxBottom: PropTypes.number\n}\n\nexport default withStyles(styles, { withTheme: true })(PitchEdit);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Divider from '@material-ui/core/Divider';\nimport Collapse from '@material-ui/core/Collapse';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Switch from '@material-ui/core/Switch';\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { CursorDefault, VectorLine, ShapeSquarePlus, ShapeOvalPlus, ArrowLeft, ArrowRight, ArrowLeftRight, Minus, DotsHorizontal } from 'mdi-material-ui'\n\nclass DrawMenu extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tlineArrows: false,\n\t\t\tlinePattern: false,\n\t\t\tlineDashed: this.props.drawMode.lineDashed,\n\t\t\tlineArrowStart: this.props.drawMode.lineArrowStart,\n\t\t\tlineArrowEnd: this.props.drawMode.lineArrowEnd,\n\t\t\tpitchOverlays: false,\n\t\t\tpitchOverlay: this.props.drawMode.pitchOverlay\n\t\t}\n\t\tthis.open = this.open.bind(this);\n\t\tthis.close = this.close.bind(this);\n\n\t\tthis.lineArrowsToggle = this.lineArrowsToggle.bind(this);\n\t\tthis.lineArrowEndToggle = this.lineArrowEndToggle.bind(this);\n\t\tthis.lineArrowStartToggle = this.lineArrowStartToggle.bind(this);\n\n\t\tthis.linePatternToggle = this.linePatternToggle.bind(this);\n\t\tthis.lineDashedOn = this.lineDashedOn.bind(this);\n\t\tthis.lineDashedOff = this.lineDashedOff.bind(this);\n\n\t\tthis.pitchOverlaysToggle = this.pitchOverlaysToggle.bind(this); \n\t\tthis.pitchOverlayOnChange = this.pitchOverlayOnChange.bind(this);\n\t}\n\n\topen() {\n\t\tthis.setState({open:true});\n\t}\n\n\tclose(e) {\n\t\t// read from \"data-value\" attribute\n\t\tlet mode = e.currentTarget.dataset.value;\n\t\tif (mode) {\n\t\t\tthis.props.drawMode.mode = mode;\n\t\t\t// trigger callback\n\t\t\tif (null !== this.props.onClose) {\n\t\t\t\tthis.props.onClose();\n\t\t\t}\n\t\t}\n\t\t// close\n\t\tthis.setState({\n\t\t\topen:false,\n\t\t\tlineArrows: false,\n\t\t\tlinePattern: false,\n\t\t\tpitchOverlays: false\n\t\t});\n\t}\n\n\tlineArrowsToggle() {\n\t\tthis.setState({\n\t\t\tlineArrows: !this.state.lineArrows\n\t\t});\n\t}\n\n\tlineArrowStartToggle() {\n\t\tthis.props.drawMode.lineArrowStart = !this.props.drawMode.lineArrowStart\n\t\tthis.setState({\n\t\t\tlineArrowStart: this.props.drawMode.lineArrowStart\n\t\t});\n\t}\n\n\tlineArrowEndToggle() {\n\t\tthis.props.drawMode.lineArrowEnd = !this.props.drawMode.lineArrowEnd\n\t\tthis.setState({\n\t\t\tlineArrowEnd: this.props.drawMode.lineArrowEnd\n\t\t});\n\t}\n\n\tlineArrowsIcon() {\n\t\tif (this.state.lineArrowStart && this.state.lineArrowEnd) {\n\t\t\treturn (<ArrowLeftRight />);\n\t\t}\n\t\tif (!this.state.lineArrowStart && this.state.lineArrowEnd) {\n\t\t\treturn (<ArrowRight />);\n\t\t}\n\t\tif (this.state.lineArrowStart && !this.state.lineArrowEnd) {\n\t\t\treturn (<ArrowLeft />);\n\t\t}\n\t\treturn (<Minus />);\n\t}\n\n\tlinePatternToggle() {\n\t\tthis.setState({\n\t\t\tlinePattern: !this.state.linePattern\n\t\t});\n\t}\n\n\tlineDashedOn() {\n\t\tthis.props.drawMode.lineDashed = true;\n\t\tthis.setState({\n\t\t\tlineDashed: this.props.drawMode.lineDashed,\n\t\t\tlinePattern: false\n\t\t});\n\t}\n\n\tlineDashedOff() {\n\t\tthis.props.drawMode.lineDashed = false;\n\t\tthis.setState({\n\t\t\tlineDashed: this.props.drawMode.lineDashed,\n\t\t\tlinePattern: false\n\t\t});\n\t}\n\n\tlinePatternIcon() {\n\t\tif (this.state.lineDashed) {\n\t\t\treturn (<DotsHorizontal />);\n\t\t}\n\t\treturn (<Minus />);\n\t}\n\n\tpitchOverlaysRender() {\n\t\treturn this.props.drawMode.pitchOverlayOptions.map((txt, index) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel control={<Radio />} label={txt} value={txt} />\n\t\t\t);\n\t\t});\n\t}\n\n\tpitchOverlaysToggle() {\n\t\tthis.setState({\n\t\t\tpitchOverlays: !this.state.pitchOverlays\n\t\t});\n\t}\n\n\tpitchOverlayOnChange(event) {\n\t\tthis.props.drawMode.pitchOverlay = event.target.value;\n\t\tthis.setState({\n\t\t\tpitchOverlay: event.target.value,\n\t\t\tpitchOverlays: false,\n\t\t\topen: false\n\t\t});\n\t}\n\n\trender() {\n\t\tconst arrowsIcon = this.lineArrowsIcon();\n\t\tconst patternIcon = this.linePatternIcon();\n\t\tconst overlaySelect = this.pitchOverlaysRender();\n\t\treturn (\n\t\t<Menu id=\"drawingMenu\" anchorEl={this.props.anchorEl} keepMounted open={this.state.open} onClose={this.close}>\n\t\t\t<MenuItem data-value=\"select\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<CursorDefault />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Select / Move\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem onClick={this.pitchOverlaysToggle}>\n\t\t\t\t<ListItemText primary=\"Pitch overlay\" />\n\t\t\t\t{this.state.pitchOverlays ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.pitchOverlays} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<RadioGroup name=\"radio-pitch-overlays\" value={this.state.pitchOverlay} onChange={this.pitchOverlayOnChange}>\n\t\t\t\t\t{overlaySelect}\n\t\t\t\t</RadioGroup>\n\t\t\t</Collapse>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"line\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<VectorLine />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw line\" />\n\t\t\t</MenuItem>\n\t\t\t<MenuItem onClick={this.lineArrowsToggle}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t{arrowsIcon}\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Line arrows\" />\n\t\t\t\t{this.state.lineArrows ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.lineArrows} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<List component=\"div\" disablePadding>\n\t\t\t\t\t<MenuItem onClick={this.lineArrowEndToggle}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<ArrowRight />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"End\" />\n\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t<Switch edge=\"end\" onChange={this.lineArrowEndToggle} checked={this.state.lineArrowEnd} />\n\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem onClick={this.lineArrowStartToggle}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<ArrowLeft />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Start\" />\n\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t<Switch edge=\"end\" onChange={this.lineArrowStartToggle} checked={this.state.lineArrowStart} />\n\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</List>\n\t\t\t</Collapse>\n\t\t\t<MenuItem onClick={this.linePatternToggle}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t{patternIcon}\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Line pattern\" />\n\t\t\t\t{this.state.linePattern ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.linePattern} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<List component=\"div\" disablePadding>\n\t\t\t\t\t<MenuItem onClick={this.lineDashedOff}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<Minus />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Solid\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem onClick={this.lineDashedOn}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<DotsHorizontal />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Dashed\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</List>\n\t\t\t</Collapse>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"square\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<ShapeSquarePlus />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw square\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"ellipse\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<ShapeOvalPlus />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw ellipse\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"text\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<TextFieldsIcon />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Write text\" />\n\t\t\t</MenuItem>\n\t\t</Menu>\n\t\t);\n\t}\n}\n\nDrawMenu.defaultProps = {\n\tanchorEl: null,\n\tonClose: null,\n\tdrawMode: null\n}\n\nDrawMenu.propTypes = {\n\tanchorEl: PropTypes.func,\n\tonClose: PropTypes.func,\n\tdrawMode: PropTypes.instanceOf(DrawMode)\n};\n\nexport default DrawMenu;","import React, { Component } from 'react';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\n\n// TODO: Fix fullscreen exit on esc key\nclass FullscreenToggle extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tfullScreen: false\n\t\t}\n\n\t\tthis.toggleFullScreen = this.toggleFullScreen.bind(this);\n\t}\n\n\tdomFullScreenToggle(toFullScreen) {\n\t\tif (toFullScreen) {\n\t\t\tvar elem = document.documentElement;\n\t\t\tif (elem.requestFullscreen) {\n\t\t\t\telem.requestFullscreen();\n\t\t\t\t} else if (elem.mozRequestFullScreen) { /* Firefox */\n\t\t\t\telem.mozRequestFullScreen();\n\t\t\t\t} else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */\n\t\t\t\telem.webkitRequestFullscreen();\n\t\t\t\t} else if (elem.msRequestFullscreen) { /* IE/Edge */\n\t\t\t\telem.msRequestFullscreen();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.exitFullscreen) {\n\t\t\tdocument.exitFullscreen();\n\t\t} else if (document.mozCancelFullScreen) {\n\t\t\tdocument.mozCancelFullScreen();\n\t\t} else if (document.webkitExitFullscreen) {\n\t\t\tdocument.webkitExitFullscreen();\n\t\t} else if (document.msExitFullscreen) {\n\t\t\tdocument.msExitFullscreen();\n\t\t}\n\t}\n\n\ttoggleFullScreen() {\n\t\tconst isFullScreen = !this.state.fullScreen;\n\t\t// dom toogle\n\t\tthis.domFullScreenToggle(isFullScreen);\n\t\t// change state to update buttons\n\t\tthis.setState({\n\t\t\tfullScreen:isFullScreen\n\t\t});\n\t}\n\n\tfsIconGet(){\n\t\tif (this.state.fullScreen) {\n\t\t\treturn(<FullscreenExitIcon />);\n\t\t} else {\n\t\t\treturn(<FullscreenIcon />);\n\t\t};\n\t}\n\n\trender() {\n\t\tconst fsIcon = this.fsIconGet();\n\t\tconst fsLabel = this.state.fullScreen ? \"Exit full screen\" : \"Enter full screen\";\n\n\t\treturn (\n\t\t\t<Tooltip title={fsLabel}>\n\t\t\t\t<IconButton aria-label={fsLabel} color=\"inherit\" onClick={this.toggleFullScreen}>\n\t\t\t\t\t{fsIcon}\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t);\n\t}\n}\n\nexport default FullscreenToggle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PitchFutsal from '../pitch/PitchFutsal';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport Box from '@material-ui/core/Box';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport MovieCreationIcon from '@material-ui/icons/MovieCreation';\nimport LinkIcon from '@material-ui/icons/Link';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\nimport { CursorDefault, VectorLine, ShapeSquarePlus, ShapeOvalPlus } from 'mdi-material-ui'\nimport DrawMenu from './DrawMenu';\nimport FullscreenToggle from './FullscreenToggle'\n\n// this is for custom position classes\nconst styles = theme => ({\n\tgrow: {\n\t\tflexGrow: 1,\n\t},\n});\n\nclass AppTools extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdrawerOpen: false,\n\t\t\tdrawingMode: this.props.pitchFutsal.drawMode.mode,\n\t\t}\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\t\tthis.saveImage = this.saveImage.bind(this);\n\n\t\t// Drawing menu\n\t\tthis._refDrawMenu = React.createRef();\n\t\tthis._refOpenDrawMenu = React.createRef();\n\t\tthis.drawingModeIcon = this.drawingModeIcon.bind(this);\n\t\tthis.drawMenuAnchorEl = this.drawMenuAnchorEl.bind(this);\n\t\tthis.drawMenuOpen = this.drawMenuOpen.bind(this);\n\t\tthis.drawMenuClose = this.drawMenuClose.bind(this);\n\t}\n\n\ttoggleDrawer(e) {\n\t\tif (e.type === 'keydown' && (e.key === 'Tab' || e.key === 'Shift')) {\n\t\t\treturn;\n\t\t}\n\t\tconst isOpen = !this.state.drawerOpen;\n\t\tthis.setState({\n\t\t\tdrawerOpen:isOpen\n\t\t});\n\t}\n\n\tsaveImage() {\n\t\tthis.props.pitchEditSaveImage();\n\t}\n\n\tdrawMenuAnchorEl() {\n\t\treturn this._refOpenDrawMenu.current;\n\t}\n\n\tdrawMenuOpen() {\n\t\tthis._refDrawMenu.current.open();\n\t}\n\n\tdrawMenuClose() {\n\t\tthis.setState({\n\t\t\tdrawingMode: this.props.pitchFutsal.drawMode.mode\n\t\t});\n\t}\n\n\tdrawingModeIcon() {\n\t\tswitch (this.state.drawingMode) {\n\t\t\tcase 'line':\n\t\t\t\treturn (<VectorLine />);\n\t\t\tcase 'square':\n\t\t\t\treturn (<ShapeSquarePlus />);\n\t\t\tcase 'ellipse':\n\t\t\t\treturn (<ShapeOvalPlus />);\n\t\t\tcase 'text':\n\t\t\t\treturn (<TextFieldsIcon />);\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\treturn (<CursorDefault />);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst drawingModeIcon = this.drawingModeIcon();\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<AppBar position=\"fixed\">\n\t\t\t\t\t<Toolbar variant=\"regular\">\n\t\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={this.toggleDrawer}>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">Futsal tactics board</Typography>\n\t\t\t\t\t\t<div className={this.props.classes.grow} />\n\t\t\t\t\t\t<Tooltip title=\"Selected draw mode\">\n\t\t\t\t\t\t\t<IconButton  ref={this._refOpenDrawMenu} aria-label=\"Selected draw mode\" color=\"inherit\" onClick={this.drawMenuOpen}>\n\t\t\t\t\t\t\t\t{drawingModeIcon}\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Save picture\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Save picture\" color=\"inherit\" onClick={this.saveImage}>\n\t\t\t\t\t\t\t\t<GetAppIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Share link\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Share link\" color=\"inherit\">\n\t\t\t\t\t\t\t\t<LinkIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<FullscreenToggle />\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</AppBar>\n\t\t\t\t<Drawer anchor=\"left\" open={this.state.drawerOpen} onClose={this.toggleDrawer}>\n\t\t\t\t\t<Box p={2}>\n\t\t\t\t\t\t<Typography variant=\"h4\" component=\"h2\">Tactics board</Typography>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<List component=\"nav\" aria-label=\"main mailbox folders\">\n\t\t\t\t\t\t\t<ListItem button>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<OpenInNewIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Create new scheme\" />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem button>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<MovieCreationIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Create new animation\" />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Box>\n\t\t\t\t</Drawer>\n\t\t\t\t<DrawMenu ref={this._refDrawMenu} anchorEl={this.drawMenuAnchorEl} onClose={this.drawMenuClose} drawMode={this.props.pitchFutsal.drawMode} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nAppTools.defaultProps = {\n\tpitchFutsal: null,\n\tpitchEditSaveImage: null\n}\n\nAppTools.propTypes = {\n\tpitchFutsal: PropTypes.instanceOf(PitchFutsal),\n\tpitchEditSaveImage: PropTypes.func,\n}\n\nexport default withStyles(styles, { withTheme: true })(AppTools);","import React from 'react';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport PitchEdit from './editors/PitchEdit'\nimport SvgToImg from './editors/SvgToImg'\nimport AppTools from './ui/AppTools'\nimport PitchFutsal from './pitch/PitchFutsal'\nimport './App.css';\n\n// application Material-UI theme\nconst appTheme = createMuiTheme();\n\nconst refPitchEdit = React.createRef();\nconst refSvgToImg = React.createRef();\n\n// init default pitch\nconst pitchFutsal = new PitchFutsal(\n\t200, 8, 120, \n\t100, 5, 80\n);\n\nfunction SaveImage() {\n\tconsole.log(\"App save image\");\n\tlet svg = refPitchEdit.current.getSVG();\n\trefSvgToImg.current.toImg(\n\t\tsvg.svgText, \n\t\tsvg.width, svg.height, \n\t\tsvg.width/2, svg.height/2\n\t);\n}\n\nfunction App() {\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<ThemeProvider theme={appTheme}>\n\t\t\t\t<AppTools pitchFutsal={pitchFutsal} pitchEditSaveImage={SaveImage} />\n\t\t\t\t<PitchEdit ref={refPitchEdit} pitch={pitchFutsal} viewBoxLeft={0} viewBoxTop={0} viewBoxRight={4500} viewBoxBottom={2500} />\n\t\t\t\t<SvgToImg ref={refSvgToImg} />\n\t\t\t</ThemeProvider>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\t\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t.register(swUrl)\n\t.then(registration => {\n\t\tregistration.onupdatefound = () => {\n\t\t\tconst installingWorker = registration.installing;\n\t\t\tif (installingWorker == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t})\n\t.catch(error => {\n\t\tconsole.error('Error during service worker registration:', error);\n\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { 'Service-Worker': 'script' },\n\t})\n\t.then(response => {\n\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\tconst contentType = response.headers.get('content-type');\n\t\tif (\n\t\t\tresponse.status === 404 ||\n\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t) {\n\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\t// Service worker found. Proceed as normal.\n\t\t\tregisterValidSW(swUrl, config);\n\t\t}\n\t})\n\t.catch(() => {\n\t\tconsole.log('No internet connection found. App is running in offline mode.');\n\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t.then(registration => {\n\t\t\tregistration.unregister();\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error(error.message);\n\t\t});\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport './index.css';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t{/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n\t\t<CssBaseline />\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { Component } from 'react';\nimport FileSaver from 'browser-filesaver';\n\nclass SvgToImg extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._refRenderer = React.createRef();\n\t}\n\t\n\t// create image from svg text\n\ttoImg(svgText, orgWidth, orgHeight, imgWidth, imgHeight) {\n\t\t// Create Canvas\n\t\tlet canvas = document.createElement('canvas');\n\t\tcanvas.width = imgWidth;\n\t\tcanvas.height = imgHeight;\n\t\tlet ctx = canvas.getContext(\"2d\");\n\n\t\t// show canvas\n\t\t//this._refRenderer.current.appendChild(canvas);\n\n\t\t// Create image\n\t\tlet img = document.createElement('img');\n\t\t// when loaded draw and save\n\t\timg.addEventListener('load', e=> {\n\t\t\t// draw image\n\t\t\tctx.drawImage(img,\n\t\t\t\t0, 0, orgWidth, orgHeight,\n\t\t\t\t//0, 0, imgWidth, imgHeight\n\t\t\t\t0, 0, orgWidth, orgHeight\n\t\t\t);\n\t\t\t// save image\n\t\t\tcanvas.toBlob(function(blob) {\n\t\t\t\tFileSaver.saveAs(blob, \"tactics-board.png\");\n\t\t\t});\n\t\t\t// clear everything\n\t\t\tthis._refRenderer.current.innerHTML = '';\n\t\t});\n\n\t\t// prepare svg to load image\n\t\tconst encodedString = 'data:image/svg+xml;base64,' + new Buffer(svgText).toString('base64');\n\t\timg.src = encodedString;\t// start loading image\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div ref={this._refRenderer} style={{display:\"none\"}}></div>\n\t\t);\n\t}\n}\n\nexport default SvgToImg;"],"sourceRoot":""}