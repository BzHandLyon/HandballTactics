(this["webpackJsonptactics-board"]=this["webpackJsonptactics-board"]||[]).push([[0],{179:function(e,t,i){"use strict";(function(e){var n=i(1),a=i.n(n),r=i(7),s=i(4),o=i(6),l=i(11),c=i(12),h=i(2),u=i(180),d=i.n(u),p=i(0),b=function(t){Object(l.a)(n,t);var i=Object(c.a)(n);function n(){return Object(s.a)(this,n),i.apply(this,arguments)}return Object(o.a)(n,[{key:"toBlob",value:function(){var t=Object(r.a)(a.a.mark((function t(i,n,r,s,o){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){var l=document.createElement("img");l.addEventListener("load",(function(e){try{var i=document.createElement("canvas");i.width=s,i.height=o,i.getContext("2d").drawImage(l,0,0,n,r,0,0,n,r),i.toBlob((function(e){t(e)}))}catch(c){a(c)}}));var c="data:image/svg+xml;base64,"+new e(i).toString("base64");l.onerror=a,l.src=c})));case 1:case"end":return t.stop()}}),t)})));return function(e,i,n,a,r){return t.apply(this,arguments)}}()},{key:"toImg",value:function(){var e=Object(r.a)(a.a.mark((function e(t,i,n,r,s){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.toBlob(t,i,n,r,s);case 3:o=e.sent,d.a.saveAs(o,"tactics-board.png"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error saving image",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,i,n,a,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(p.jsx)("div",{style:{display:"block"}})}}]),n}(h.Component);t.a=b}).call(this,i(249).Buffer)},262:function(e,t,i){},263:function(e,t,i){},264:function(e,t,i){},265:function(e,t,i){"use strict";i.r(t);var n=i(2),a=i.n(n),r=i(70),s=i.n(r),o=i(1),l=i.n(o),c=i(7),h=i(4),u=i(6),d=i(13),p=i(11),b=i(12),j=i(210),f=i(356),m=i(401),y=i(20),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(h.a)(this,e),this.x=t,this.y=i}return Object(u.a)(e,[{key:"equalTo",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"move",value:function(e,t){this.x+=e,this.y+=t}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"save",value:function(){return{x:this.x,y:this.y}}}]),e}(),v=x,g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new v(0,0),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new v(0,0);Object(h.a)(this,e),this.id=t,this.color=i,this.pos=n,this.posDefault=a}return Object(u.a)(e,[{key:"save",value:function(){return{id:this.id,color:this.color,pos:this.pos.save(),posDefault:this.posDefault.save()}}},{key:"reset",value:function(){this.pos=this.posDefault.clone()}},{key:"clone",value:function(){return new e(this.id,this.color,this.pos.clone(),this.posDefault.clone())}},{key:"equalTo",value:function(e){return this.id===e.id&&this.color===e.color&&this.pos.equalTo(e.pos)&&this.posDefault.equalTo(e.posDefault)}},{key:"isPlaced",get:function(){return!this.pos.equalTo(this.posDefault)}}]),e}(),O=g,k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new v(0,0),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new v(0,0),l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"0";Object(h.a)(this,e),this.id=t,this.no=i,this.name=n,this.color=a,this.pos=r,this.rotation=s,this.posDefault=o,this.noDefault=l}return Object(u.a)(e,[{key:"save",value:function(){return{id:this.id,no:this.no,name:this.name,color:this.color,pos:this.pos.save(),rotation:this.rotation,posDefault:this.posDefault.save(),noDefault:this.noDefault}}},{key:"reset",value:function(){this.pos=this.posDefault.clone(),this.rotation=0,this.name="",this.no=this.noDefault}},{key:"clone",value:function(){return new e(this.id,this.no,this.name,this.color,this.pos.clone(),this.rotation,this.posDefault.clone(),this.noDefault)}},{key:"equalTo",value:function(e){return this.id===e.id&&this.no===e.no&&this.name===e.name&&this.color===e.color&&this.pos.equalTo(e.pos)&&this.rotation===e.rotation&&this.posDefault.equalTo(e.posDefault)&&this.noDefault===e.noDefault}},{key:"isPlaced",get:function(){return!this.pos.equalTo(this.posDefault)}}]),e}(),w=k,S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Object(h.a)(this,e),this.id=t,this.x=i,this.y=n,this.width=a,this.height=r},C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(h.a)(this,e),this.id=t,this.color=i,this.x1=n,this.y1=a,this.x2=n+r,this.y2=a+s,this.rotation=o,this.dashed=l,this.isEdit=c}return Object(u.a)(e,[{key:"save",value:function(){return{id:this.id,color:this.color,x1:this.x1,y1:this.y1,width:this.width,height:this.height,rotation:this.rotation,dashed:this.dashed}}},{key:"box",get:function(){return new S(this.id,this.x,this.y,this.width,this.height)}},{key:"x",get:function(){return this.x1<this.x2?this.x1:this.x2}},{key:"width",get:function(){return this.x1<this.x2?this.x2-this.x1:this.x1-this.x2}},{key:"y",get:function(){return this.y1<this.y2?this.y1:this.y2}},{key:"height",get:function(){return this.y1<this.y2?this.y2-this.y1:this.y1-this.y2}},{key:"cx",get:function(){return this.x+this.width/2}},{key:"cy",get:function(){return this.y+this.height/2}},{key:"resize",value:function(e,t,i){if(this.x2=e,i){var n=this.width*(this.y1<t?1:-1);this.y2=this.y1+n}else this.y2=t}},{key:"edit",value:function(e,t,i){switch(e){case"tl":this.x1+=t,this.y1+=i;break;case"tr":this.x2+=t,this.y1+=i;break;case"bl":this.x1+=t,this.y2+=i;break;case"br":this.x2+=t,this.y2+=i;break;case"mv":this.x1+=t,this.y1+=i,this.x2+=t,this.y2+=i}}},{key:"rotate",value:function(e,t,i){var n=e-this.cx,a=t-this.cy,r=180*Math.atan2(a,n)/Math.PI;(r+=90)<0&&(r+=360),i&&(r=45*Math.floor(r/45)),this.rotation=r}}]),e}(),P=C,D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(h.a)(this,e),this.id=t,this.color=i,this.x1=n,this.y1=a,this.x2=n+2*r,this.y2=a+2*s,this.rotation=o,this.dashed=l,this.isEdit=c}return Object(u.a)(e,[{key:"save",value:function(){return{id:this.id,color:this.color,x1:this.x1,y1:this.y1,rx:this.rx,ry:this.ry,rotation:this.rotation,dashed:this.dashed}}},{key:"cx",get:function(){return(this.x1<this.x2?this.x1:this.x2)+this.rx}},{key:"cy",get:function(){return(this.y1<this.y2?this.y1:this.y2)+this.ry}},{key:"rx",get:function(){return(this.x1<this.x2?this.x2-this.x1:this.x1-this.x2)/2}},{key:"ry",get:function(){return(this.y1<this.y2?this.y2-this.y1:this.y1-this.y2)/2}},{key:"box",get:function(){return new S(this.id,this.cx-this.rx,this.cy-this.ry,2*this.rx,2*this.ry)}},{key:"resize",value:function(e,t,i){if(this.x2=e,i){var n=this.rx*(this.y1<t?2:-2);this.y2=this.y1+n}else this.y2=t}},{key:"edit",value:function(e,t,i){switch(e){case"tl":this.x1+=t,this.y1+=i;break;case"tr":this.x2+=t,this.y1+=i;break;case"bl":this.x1+=t,this.y2+=i;break;case"br":this.x2+=t,this.y2+=i;break;case"mv":this.x1+=t,this.y1+=i,this.x2+=t,this.y2+=i}}},{key:"rotate",value:function(e,t,i){var n=e-this.cx,a=t-this.cy,r=180*Math.atan2(a,n)/Math.PI;(r+=90)<0&&(r+=360),i&&(r=45*Math.floor(r/45)),this.rotation=r}}]),e}(),A=D,F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v(0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new v(0,0),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new v(0,0),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new v(0,0),s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(h.a)(this,e),this.id=t,this.p1=i,this.p2=n,this.c1=a,this.c2=r,this.arrowStart=s,this.arrowEnd=o}return Object(u.a)(e,[{key:"CubicBezierP0",value:function(e,t){return e*e*e*t}},{key:"CubicBezierP1",value:function(e,t,i){return 3*t*t*e*i}},{key:"CubicBezierP2",value:function(e,t,i){return 3*t*e*e*i}},{key:"CubicBezierP3",value:function(e,t){return e*e*e*t}},{key:"CubicBezier",value:function(e,t,i,n,a){var r=1-e;return this.CubicBezierP0(r,t)+this.CubicBezierP1(e,r,i)+this.CubicBezierP2(e,r,n)+this.CubicBezierP3(e,a)}},{key:"rotation",value:function(e){var t=1-e,i=this.c1.x-this.p1.x,n=this.c1.y-this.p1.y,a=this.c2.x-this.c1.x,r=this.c2.y-this.c1.y,s=this.p2.x-this.c2.x,o=this.p2.y-this.c2.y,l=new v(i*t,n*t),c=new v(a*t,r*t),h=new v(s*t,o*t),u=new v((c.x-l.x)*t,(c.y-l.y)*t),d=new v((h.x-c.x)*t,(h.y-c.y)*t),p=d.x-u.x,b=d.y-u.y,j=180*Math.atan2(b,p)/Math.PI;return(j+=90)<0&&(j+=360),j}},{key:"position",value:function(e){return new v(this.CubicBezier(e,this.p1.x,this.c1.x,this.c2.x,this.p2.x),this.CubicBezier(e,this.p1.y,this.c1.y,this.c2.y,this.p2.y))}}]),e}(),E=F,_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new v(0,0),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new v(0,0),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new v(0,0),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new v(0,0),o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9&&void 0!==arguments[9]&&arguments[9];Object(h.a)(this,e),this.id=t,this.color=i,this.p1=n,this.p2=a,this.c1=r,this.c2=s,this.arrowStart=o,this.arrowEnd=l,this.dashed=c,this.isEdit=u}return Object(u.a)(e,[{key:"save",value:function(){return{id:this.id,color:this.color,p1:this.p1.save(),p2:this.p2.save(),c1:this.c1.save(),c2:this.c2.save(),arrowStart:this.arrowStart,arrowEnd:this.arrowEnd,dashed:this.dashed}}},{key:"empty",value:function(){return this.p1.equalTo(this.p2)&&this.p1.equalTo(this.c1)&&this.p1.equalTo(this.c2)}},{key:"resizeP1",value:function(e,t){this.p1=new v(this.p1.x+e,this.p1.y+t),this.linearControlPoints()}},{key:"resizeP2",value:function(e,t){this.p2=new v(this.p2.x+e,this.p2.y+t),this.linearControlPoints()}},{key:"linearControlPoints",value:function(){var e=this.p2.x-this.p1.x,t=this.p2.y-this.p1.y;this.c1=new v(this.p1.x+e/3,this.p1.y+t/3),this.c2=new v(this.p1.x+e/3*2,this.p1.y+t/3*2)}},{key:"edit",value:function(e,t,i){switch(e){case"p1":this.p1.move(t,i);break;case"c1":this.c1.move(t,i);break;case"c2":this.c2.move(t,i);break;case"p2":this.p2.move(t,i)}}},{key:"paths",value:function(){var e=this.computeControlPoints([this.p1.x,this.c1.x,this.c2.x,this.p2.x]),t=this.computeControlPoints([this.p1.y,this.c1.y,this.c2.y,this.p2.y]),i=[];return i[0]=new E(this.id,this.p1,this.c1,new v(e.p1[0],t.p1[0]),new v(e.p2[0],t.p2[0]),this.arrowStart,!1),i[1]=new E(this.id,this.c1,this.c2,new v(e.p1[1],t.p1[1]),new v(e.p2[1],t.p2[1]),!1,!1),i[2]=new E(this.id,this.c2,this.p2,new v(e.p1[2],t.p1[2]),new v(e.p2[2],t.p2[2]),!1,this.arrowEnd),i}},{key:"computeControlPoints",value:function(e){var t=[],i=[],n=e.length-1,a=[],r=[],s=[],o=[];a[0]=0,r[0]=2,s[0]=1,o[0]=e[0]+2*e[1];for(var l=1;l<n-1;l++)a[l]=1,r[l]=4,s[l]=1,o[l]=4*e[l]+2*e[l+1];a[n-1]=2,r[n-1]=7,s[n-1]=0,o[n-1]=8*e[n-1]+e[n];for(var c=1;c<n;c++){var h=a[c]/r[c-1];r[c]=r[c]-h*s[c-1],o[c]=o[c]-h*o[c-1]}t[n-1]=o[n-1]/r[n-1];for(var u=n-2;u>=0;--u)t[u]=(o[u]-s[u]*t[u+1])/r[u];for(var d=0;d<n-1;d++)i[d]=2*e[d+1]-t[d+1];return i[n-1]=.5*(e[n]+t[n-1]),{p1:t,p2:i}}}]),e}(),M=_,T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(h.a)(this,e),this.id=t,this.color=i,this.size=n,this.text=a,this.x=r,this.y=s,this.rotation=o,this.bx=r,this.by=s,this.bwidth=0,this.bheight=0,this.isEdit=l,this.isTextEdit=c}return Object(u.a)(e,[{key:"save",value:function(){return{id:this.id,color:this.color,size:this.size,text:this.text,x:this.x,y:this.y,rotation:this.rotation,bx:this.bx,by:this.by,bwidth:this.bwidth,bheight:this.bheight}}},{key:"box",get:function(){return new S(this.id,this.bx,this.by,this.bwidth,this.bheight)}},{key:"move",value:function(e,t){this.x+=e,this.y+=t}},{key:"rotate",value:function(e,t,i){var n=e-(this.x+this.bwidth/2),a=t-(this.y+this.bheight/2),r=180*Math.atan2(a,n)/Math.PI;(r+=90)<0&&(r+=360),i&&(r=45*Math.floor(r/45)),this.rotation=r}}]),e}(),I=T,K="bl",R="pl",B="sq",z="el",N="ln",q="txt",L="pp",W="bp",U="ex",Y=0,X=1,H=2,V=3,G=4,J=[{name:"Goal",width:100,height:300,viewBoxScale:1},{name:"Small Goal",width:50,height:150,viewBoxScale:2},{name:"Ladder",width:100,height:350,viewBoxScale:1},{name:"Cone",width:70,height:85,viewBoxScale:3},{name:"Flag",width:130,height:280,viewBoxScale:2}];function Q(e){return null===e||""===e?e:e.replace(/(<([^>]+)>)/gi,"")}var Z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(h.a)(this,e),this.id=t,this.color=i,this.t=n,this.x=a,this.y=r,this.width=s,this.height=o,this.rotation=l,this.isEdit=c}return Object(u.a)(e,[{key:"save",value:function(){return{id:this.id,color:this.color,t:this.t,x:this.x,y:this.y,width:this.width,height:this.height,rotation:this.rotation}}},{key:"isBoxVisible",get:function(){switch(this.t){case V:case G:return!0;default:return!1}}},{key:"isResizable",get:function(){return this.t===H}},{key:"isRotatable",get:function(){switch(this.t){case Y:case X:case H:return!0;default:return!1}}},{key:"box",get:function(){return new S(this.id,this.x-this.width/2,this.y-this.height/2,this.width,this.height)}},{key:"edit",value:function(e,t,i){switch(e){case"tl":case"tr":case"bl":case"br":this.x+=t,this.y+=i,this.width+=t,this.height+=i;break;case"mv":this.x+=t,this.y+=i}}},{key:"rotate",value:function(e,t,i){var n=e-this.x,a=t-this.y,r=180*Math.atan2(a,n)/Math.PI;(r+=90)<0&&(r+=360),i&&(r=45*Math.floor(r/45)),this.rotation=r}}]),e}(),$=Z,ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(h.a)(this,e),this.players=t,this.playerPaths=i,this.balls=n,this.ballPaths=a,this.playerPathSplines=[],this.ballPathSplines=[]}return Object(u.a)(e,[{key:"save",value:function(){return{players:this.players.map((function(e){return e.save()})),playerPaths:null===this.playerPaths?null:this.playerPaths.map((function(e){return e.save()})),balls:this.balls.map((function(e){return e.save()})),ballPaths:null==this.ballPaths?null:this.ballPaths.map((function(e){return e.save()}))}}},{key:"load",value:function(e){this.players=e.players.map((function(e){return new w(e.id,e.no,Q(e.name),e.color,new v(e.pos.x,e.pos.y),e.rotation,new v(e.posDefault.x,e.posDefault.y),e.noDefault)})),null!==e.playerPaths&&(this.playerPaths=e.playerPaths.map((function(e){return new M(e.id,e.color,new v(e.p1.x,e.p1.y),new v(e.p2.x,e.p2.y),new v(e.c1.x,e.c1.y),new v(e.c2.x,e.c2.y),e.arrowStart,e.arrowEnd,e.dashed,!0)}))),this.balls=e.balls.map((function(e){return new O(e.id,e.color,new v(e.pos.x,e.pos.y),new v(e.posDefault.x,e.posDefault.y))})),null!==e.ballPaths&&(this.ballPaths=e.ballPaths.map((function(e){return new M(e.id,e.color,new v(e.p1.x,e.p1.y),new v(e.p2.x,e.p2.y),new v(e.c1.x,e.c1.y),new v(e.c2.x,e.c2.y),e.arrowStart,e.arrowEnd,e.dashed,!0)})))}},{key:"playerPathID",value:function(e){return L+e}},{key:"ballPathID",value:function(e){return W+e}},{key:"animPreCalcSplines",value:function(){null!==this.playerPaths&&(this.playerPathSplines=this.playerPaths.map((function(e){return e.paths()}))),null!=this.ballPaths&&(this.ballPathSplines=this.ballPaths.map((function(e){return e.paths()})))}},{key:"splinePathPos",value:function(e){var t=3*e,i=Math.floor(t);return i>=3&&(i=2),{idx:i,t:t-i}}},{key:"animatePlayersOnPaths",value:function(e){var t=this,i=this.splinePathPos(e);return this.players.map((function(e,n){if(!e.isPlaced)return e;var a=e.clone(),r=t.playerPathSplines[n];return a.pos=r[i.idx].position(i.t),a}))}},{key:"animateBallsOnPaths",value:function(e){var t=this,i=this.splinePathPos(e);return this.balls.map((function(e,n){if(!e.isPlaced)return e;var a=e.clone(),r=t.ballPathSplines[n];return a.pos=r[i.idx].position(i.t),a}))}},{key:"clone",value:function(){var t=this;return new e(this.players.map((function(e){return e.clone()})),this.players.map((function(e,i){return new M(t.playerPathID(i),99,e.pos.clone(),e.pos.clone(),e.pos.clone(),e.pos.clone(),!1,!1,!0,!0)})),this.balls.map((function(e){return e.clone()})),this.balls.map((function(e,i){return new M(t.ballPathID(i),99,e.pos.clone(),e.pos.clone(),e.pos.clone(),e.pos.clone(),!1,!1,!0,!0)})))}},{key:"equalTo",value:function(e){if(this.players.length!==e.players.length)return!1;for(var t=0;t<this.players.length;t++)if(!this.players[t].equalTo(e.players[t]))return!1;if(this.balls.length!==e.balls.length)return!1;for(var i=0;i<this.balls.length;i++)if(!this.balls[i].equalTo(e.balls[i]))return!1;return!0}}]),e}(),te=ee,ie=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(h.a)(this,e),this.id=t,this.name="",this.description="",this.created=new Date,this.updated=new Date,this.width=4500,this.height=2500,this.widthPitch=4e3,this.heightPitch=2e3,this.AnimExists=!1,this.AnimKeyFrameCurrent=0,this.AnimKeyFrameDuration=5,this.AnimKeyFrames=[],this.AnimPlaying=!1,this.AnimPlayers=null,this.AnimBalls=null,this.squareID=-1,this.squares=[],this.ellipseID=-1,this.ellipses=[],this.lineID=-1,this.lines=[],this.textID=-1,this.texts=[],this.extrasID=-1,this.extras=[],this._overlay="none",this.isModified=!1,this.onModified=null}return Object(u.a)(e,[{key:"initDefault",value:function(e,t,i,n,a,r){var s=new te(this._initPlayers(e,t,i),null,this._initBalls(n,a,r),null);this.AnimKeyFrames.push(s);var o=J[Y],l=(this.width-this.widthPitch)/2,c=(this.height-this.heightPitch)/2;this.extras.push(new $(U+"goal-left",0,Y,l-o.width/2,c+this.heightPitch/2,o.width,o.height,0,!1)),this.extras.push(new $(U+"goal-right",0,Y,l+this.widthPitch+o.width/2,c+this.heightPitch/2,o.width,o.height,180,!1))}},{key:"_initPlayers",value:function(e,t,i){for(var n=[],a=Math.floor(e/t),r=0;r<e;r++){var s=Math.floor(r/a),o=a-r%a,l=s*i,c=new w(R+r,o,"",s,new v(l,0),0,new v(l,0),o);n.push(c)}return n}},{key:"_initBalls",value:function(e,t,i){for(var n=[],a=Math.floor(e/t),r=0;r<e;r++){var s=Math.floor(r/a),o=s*i,l=new O(K+r,s,new v(o,0),new v(o,0));n.push(l)}return n}},{key:"_modified",value:function(){var t=new e;t.isModified=!0,t.id=this.id,t.name=this.name,t.description=this.description,t.created=this.created,t.updated=new Date,t.width=this.width,t.height=this.height,t.AnimExists=this.AnimExists,t.AnimKeyFrameCurrent=this.AnimKeyFrameCurrent,t.AnimKeyFrameDuration=this.AnimKeyFrameDuration,t.AnimKeyFrames=this.AnimKeyFrames,t.AnimPlaying=this.AnimPlaying,t.AnimPlayers=this.AnimPlayers,t.AnimBalls=this.AnimBalls,t.squareID=this.squareID,t.squares=this.squares,t.ellipseID=this.ellipseID,t.ellipses=this.ellipses,t.lineID=this.lineID,t.lines=this.lines,t.textID=this.textID,t.texts=this.texts,t.extrasID=this.extrasID,t.extras=this.extras,t._overlay=this.overlay,null!==this.onModified&&this.onModified(t)}},{key:"save",value:function(){return{id:this.id,name:this.name,description:this.description,created:this.created,updated:this.updated,width:this.width,height:this.height,AnimExists:this.AnimExists,AnimKeyFrameCurrent:this.AnimKeyFrameCurrent,AnimKeyFrameDuration:this.AnimKeyFrameDuration,AnimKeyFrames:this.AnimKeyFrames.map((function(e){return e.save()})),squareID:this.squareID,squares:this.squares.map((function(e){return e.save()})),ellipseID:this.ellipseID,ellipses:this.ellipses.map((function(e){return e.save()})),lineID:this.lineID,lines:this.lines.map((function(e){return e.save()})),textID:this.textID,texts:this.texts.map((function(e){return e.save()})),extrasID:this.extrasID,extras:this.extras.map((function(e){return e.save()})),overlay:this.overlay}}},{key:"load",value:function(e){this.id=e.id,this.name=Q(e.name),this.description=Q(e.description),this.created=new Date(e.created),this.updated=new Date(e.updated),this.width=e.width,this.height=e.height,this.AnimExists=e.AnimExists,this.AnimKeyFrameCurrent=e.AnimKeyFrameCurrent,this.AnimKeyFrameDuration=e.AnimKeyFrameDuration,this.AnimKeyFrames=e.AnimKeyFrames.map((function(e){var t=new te(null,null,null,null);return t.load(e),t})),this.squareID=e.squareID,this.squares=e.squares.map((function(e){return new P(e.id,e.color,e.x1,e.y1,e.width,e.height,e.rotation,e.dashed,!1)})),this.ellipseID=e.ellipseID,this.ellipses=e.ellipses.map((function(e){return new A(e.id,e.color,e.x1,e.y1,e.rx,e.ry,e.rotation,e.dashed,!1)})),this.lineID=e.lineID,this.lines=e.lines.map((function(e){return new M(e.id,e.color,new v(e.p1.x,e.p1.y),new v(e.p2.x,e.p2.y),new v(e.c1.x,e.c1.y),new v(e.c2.x,e.c2.y),e.arrowStart,e.arrowEnd,e.dashed,!1)})),this.textID=e.textID,this.texts=e.texts.map((function(e){var t=new I(e.id,e.color,e.size,e.text,e.x,e.y,e.rotation,!1,!1);return t.bx=e.bx,t.by=e.by,t.bwidth=e.bwidth,t.bheight=e.bheight,t})),this.extrasID=e.extrasID,this.extras=e.extras.map((function(e){return new $(e.id,e.color,e.t,e.x,e.y,e.width,e.height,e.rotation,!1)})),this.overlay=e.overlay,this._modified()}},{key:"shareEnabled",value:function(){return this.name.trim().length+this.description.trim().length>0}},{key:"setNameAndDescription",value:function(e,t){this.name=e,this.description=t,this._modified()}},{key:"playersCurrentKeyFrame",value:function(){return this.AnimPlaying?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent].players}},{key:"playerPathsCurrentKeyFrame",value:function(){return this.AnimPlaying?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths}},{key:"playersPreviousKeyFrame",value:function(){return this.AnimPlaying||0===this.AnimKeyFrameCurrent?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent-1].players}},{key:"animCreate",value:function(){this.AnimExists=!0,this._modified()}},{key:"animDelete",value:function(){this.AnimExists=!1,this.AnimKeyFrameCurrent=0,this.AnimKeyFrameDuration=5,this.AnimKeyFrames=[this.AnimKeyFrames[0]],this._modified()}},{key:"animKeyFrameDurationSet",value:function(e){var t=parseInt(e);this.AnimKeyFrameDuration=isNaN(t)?1:t,0>=this.AnimKeyFrameDuration&&(this.AnimKeyFrameDuration=1),this._modified()}},{key:"animKeyFrameAdd",value:function(){var e=this.AnimKeyFrames.length-1,t=e-1;if(t>=0&&this.AnimKeyFrames[e].equalTo(this.AnimKeyFrames[t]))return console.log("No change in data new add frame forbidden"),!1;var i=this.AnimKeyFrames[e].clone();return this.AnimKeyFrames=this.AnimKeyFrames.map((function(e){return e})),this.AnimKeyFrames.push(i),this.AnimKeyFrameCurrent=this.AnimKeyFrames.length-1,this._modified(),!0}},{key:"animKeyFrameDelete",value:function(){var e=this.AnimKeyFrames.length-1;if(0===e)return!1;if(e!==this.AnimKeyFrameCurrent)return!1;for(var t=[],i=0;i<e;i++)t.push(this.AnimKeyFrames[i]);return this.AnimKeyFrames=t,this.AnimKeyFrameCurrent=this.AnimKeyFrames.length-1,this._modified(),!0}},{key:"animKeyFrameNext",value:function(){var e=this.AnimKeyFrameCurrent+1;return!(e>=this.AnimKeyFrames.length)&&(this.AnimKeyFrameCurrent=e,this._modified(),!0)}},{key:"animKeyFramePrevious",value:function(){return 0!==this.AnimKeyFrameCurrent&&(this.AnimKeyFrameCurrent--,this._modified(),!0)}},{key:"animStart",value:function(){this.AnimPlaying=!0,this.AnimKeyFrames.map((function(e){return e.animPreCalcSplines()})),this.animFrame(0),this._modified()}},{key:"animStop",value:function(){this.AnimPlaying=!1,this.AnimPlayers=null,this.AnimBalls=null,this._modified()}},{key:"animFrame",value:function(e){var t=1e3*this.AnimKeyFrameDuration,i=Math.floor(e/t),n=(e-i*t)/t,a=i+1;a>=this.AnimKeyFrames.length&&(a=this.AnimKeyFrames.length-1,n=1),this.AnimPlayers=this.AnimKeyFrames[a].animatePlayersOnPaths(n),this.AnimBalls=this.AnimKeyFrames[a].animateBallsOnPaths(n),this._modified()}},{key:"playerMove",value:function(e,t,i){var n=this.playersCurrentKeyFrame().map((function(n){return e===n.id&&n.pos.move(t,i),n}));this.AnimKeyFrames[this.AnimKeyFrameCurrent].players=n,this.playerAdjustAnimPaths(e.replace(R,L),t,i),this._modified()}},{key:"playerAdjustAnimPaths",value:function(e,t,i){this.AnimKeyFrameCurrent>0&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths=this.lineResizeP2(this.playerPathsCurrentKeyFrame(),e,t,i)),this.AnimKeyFrameCurrent<this.AnimKeyFrames.length-1&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent+1].playerPaths=this.lineResizeP1(this.AnimKeyFrames[this.AnimKeyFrameCurrent+1].playerPaths,e,t,i))}},{key:"playerEditStart",value:function(e){if(!e.startsWith(R))return null;var t=this.playersCurrentKeyFrame().find((function(t){return e===t.id}));return t.isPlaced?{id:t.id,name:t.name,no:t.no}:null}},{key:"playerEditDone",value:function(e){this.AnimKeyFrames=this.AnimKeyFrames.map((function(t){return t.players=t.players.map((function(t){return e.id!==t.id||(e.remove?t.reset():(t.name=e.name,t.no=e.no)),t})),t})),this._modified()}},{key:"ballsCurrentKeyFrame",value:function(){return this.AnimPlaying?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent].balls}},{key:"ballPathsCurrentKeyFrame",value:function(){return this.AnimPlaying?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths}},{key:"ballsPreviousKeyFrame",value:function(){return this.AnimPlaying||0===this.AnimKeyFrameCurrent?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent-1].balls}},{key:"ballMove",value:function(e,t,i){var n=this.ballsCurrentKeyFrame().map((function(n){return e===n.id&&n.pos.move(t,i),n}));this.AnimKeyFrames[this.AnimKeyFrameCurrent].balls=n,this.ballAdjustAnimPaths(e.replace(K,W),t,i),this._modified()}},{key:"ballAdjustAnimPaths",value:function(e,t,i){this.AnimKeyFrameCurrent>0&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths=this.lineResizeP2(this.ballPathsCurrentKeyFrame(),e,t,i)),this.AnimKeyFrameCurrent<this.AnimKeyFrames.length-1&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent+1].ballPaths=this.lineResizeP1(this.AnimKeyFrames[this.AnimKeyFrameCurrent+1].ballPaths,e,t,i))}},{key:"lineNewID",value:function(){return this.lineID+=1,N+this.lineID}},{key:"lineCreate",value:function(e,t,i,n,a,r){var s=new M(this.lineNewID(),i,new v(e,t),new v(e,t),new v(e,t),new v(e,t),n,a,r);return this.lines=this.lines.map((function(e){return e})),this.lines.push(s),this._modified(),s.id}},{key:"lineResizeP1",value:function(e,t,i,n){return e.map((function(e){return t===e.id&&e.resizeP1(i,n),e}))}},{key:"lineResizeP2",value:function(e,t,i,n){return e.map((function(e){return t===e.id&&e.resizeP2(i,n),e}))}},{key:"lineResize",value:function(e,t,i){this.lines=this.lineResizeP2(this.lines,e,t,i),this._modified()}},{key:"lineOrPathEdit",value:function(e,t,i,n,a){return e.map((function(e){return i===e.id&&e.edit(t,n,a),e}))}},{key:"lineEdit",value:function(e,t,i,n){t.startsWith(N)&&(this.lines=this.lineOrPathEdit(this.lines,e,t,i,n)),t.startsWith(L)&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths=this.lineOrPathEdit(this.playerPathsCurrentKeyFrame(),e,t,i,n)),t.startsWith(W)&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths=this.lineOrPathEdit(this.ballPathsCurrentKeyFrame(),e,t,i,n)),this._modified()}},{key:"lineCleanup",value:function(){this.lines=this.lines.filter((function(e){return!e.empty()})),this._modified()}},{key:"lineEditStart",value:function(e){return!!e.startsWith(N)&&(this.lines=this.lines.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this._modified(),!0)}},{key:"lineEditEnd",value:function(){this.lines=this.lines.map((function(e){return e.isEdit=!1,e})),this._modified()}},{key:"ellipseNewID",value:function(){return this.ellipseID+=1,z+this.ellipseID}},{key:"ellipseCreate",value:function(e,t,i,n){var a=new A(this.ellipseNewID(),i,e,t,0,0,0,n);return this.ellipses=this.ellipses.map((function(e){return e})),this.ellipses.push(a),this._modified(),a.id}},{key:"ellipseResize",value:function(e,t,i,n){this.ellipses=this.ellipses.map((function(a){return e===a.id&&a.resize(t,i,n),a})),this._modified()}},{key:"ellipseEdit",value:function(e,t,i,n){t.startsWith(z)&&(this.ellipses=this.ellipses.map((function(a){return t===a.id&&a.edit(e,i,n),a})),this._modified())}},{key:"ellipseRotate",value:function(e,t,i,n){e.startsWith(z)&&(this.ellipses=this.ellipses.map((function(a){return e===a.id&&a.rotate(t,i,n),a})),this._modified())}},{key:"ellipseCleanup",value:function(){this.ellipses=this.ellipses.filter((function(e){return e.rx>0&&e.ry>0})),this._modified()}},{key:"ellipseEditStart",value:function(e){return!!e.startsWith(z)&&(this.ellipses=this.ellipses.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this._modified(),!0)}},{key:"ellipsesEditEnd",value:function(){this.ellipses=this.ellipses.map((function(e){return e.isEdit=!1,e}))}},{key:"squareNewID",value:function(){return this.squareID+=1,B+this.squareID}},{key:"squareCreate",value:function(e,t,i,n){var a=new P(this.squareNewID(),i,e,t,0,0,0,n);return this.squares=this.squares.map((function(e){return e})),this.squares.push(a),this._modified(),a.id}},{key:"squareResize",value:function(e,t,i,n){this.squares=this.squares.map((function(a){return e===a.id&&a.resize(t,i,n),a})),this._modified()}},{key:"squareEdit",value:function(e,t,i,n){t.startsWith(B)&&(this.squares=this.squares.map((function(a){return t===a.id&&a.edit(e,i,n),a})),this._modified())}},{key:"squareRotate",value:function(e,t,i,n){e.startsWith(B)&&(this.squares=this.squares.map((function(a){return e===a.id&&a.rotate(t,i,n),a})),this._modified())}},{key:"squareCleanup",value:function(){this.squares=this.squares.filter((function(e){return e.width>0&&e.height>0})),this._modified()}},{key:"squareEditStart",value:function(e){return!!e.startsWith(B)&&(this.squares=this.squares.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this._modified(),!0)}},{key:"squareEditEnd",value:function(){this.squares=this.squares.map((function(e){return e.isEdit=!1,e}))}},{key:"textNewID",value:function(){return this.textID+=1,q+this.textID}},{key:"textCreate",value:function(e,t,i,n){var a=new I(this.textNewID(),i,n,"",e,t,0,!1,!0);return this.texts=this.texts.map((function(e){return e})),this.texts.push(a),this._modified(),a.id}},{key:"textEditDone",value:function(e,t,i,n,a,r){this.texts=this.texts.map((function(s){return e===s.id&&(s.isEdit=!1,s.isTextEdit=!1,s.text=t,s.bx=i,s.by=n,s.bwidth=a,s.bheight=r),s})),this._modified()}},{key:"textEditStart",value:function(e){return!!e.startsWith(q)&&(this.texts=this.texts.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this._modified(),!0)}},{key:"textMove",value:function(e,t,i){e.startsWith(q)&&(this.texts=this.texts.map((function(n){return e===n.id&&n.move(t,i),n})),this._modified())}},{key:"textRotate",value:function(e,t,i,n){e.startsWith(q)&&(this.texts=this.texts.map((function(a){return e===a.id&&a.rotate(t,i,n),a})),this._modified())}},{key:"textEditEnd",value:function(){this.texts=this.texts.map((function(e){return e.isEdit=!1,e}))}},{key:"extrasNewID",value:function(){return this.extrasID+=1,U+this.extrasID}},{key:"extrasCreate",value:function(e,t,i,n){var a=new $(this.extrasNewID(),t,e,this.width/2,this.height/2,i,n,0,!0);return this.extras=this.extras.map((function(e){return e})),this.extras.push(a),this._modified(),a.id}},{key:"extrasEditStart",value:function(e){return!!e.startsWith(U)&&(this.extras=this.extras.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this._modified(),!0)}},{key:"extrasMove",value:function(e,t,i){if(!e.startsWith(U))return!1;this.extras=this.extras.map((function(n){return e===n.id&&n.move(t,i),n})),this._modified()}},{key:"extrasRotate",value:function(e,t,i,n){e.startsWith(U)&&(this.extras=this.extras.map((function(a){return e===a.id&&a.isRotatable&&a.rotate(t,i,n),a})),this._modified())}},{key:"extrasEdit",value:function(e,t,i,n){if(t.startsWith(U))return this.extras=this.extras.map((function(a){return t===a.id&&a.edit(e,i,n),a})),this._modified(),this.extras}},{key:"extrasEditEnd",value:function(){this.extras=this.extras.map((function(e){return e.isEdit=!1,e}))}},{key:"editTopLeft",value:function(e,t,i){this.squareEdit("tl",e,t,i),this.ellipseEdit("tl",e,t,i),this.extrasEdit("tl",e,t,i)}},{key:"editTopRight",value:function(e,t,i){this.squareEdit("tr",e,t,i),this.ellipseEdit("tr",e,t,i),this.extrasEdit("tr",e,t,i)}},{key:"editBottomLeft",value:function(e,t,i){this.squareEdit("bl",e,t,i),this.ellipseEdit("bl",e,t,i),this.extrasEdit("bl",e,t,i)}},{key:"editBottomRight",value:function(e,t,i){this.squareEdit("br",e,t,i),this.ellipseEdit("br",e,t,i),this.extrasEdit("br",e,t,i)}},{key:"editMove",value:function(e,t,i){this.squareEdit("mv",e,t,i),this.ellipseEdit("mv",e,t,i),this.extrasEdit("mv",e,t,i),this.textMove(e,t,i)}},{key:"editRotate",value:function(e,t,i,n){this.squareRotate(e,t,i,n),this.ellipseRotate(e,t,i,n),this.extrasRotate(e,t,i,n),this.textRotate(e,t,i,n)}},{key:"endAllEdits",value:function(){this.lineEditEnd(),this.squareEditEnd(),this.ellipsesEditEnd(),this.extrasEditEnd(),this.textEditEnd(),this._modified()}},{key:"overlay",get:function(){return this._overlay},set:function(e){this._overlay!==e&&(this._overlay=e,this._modified())}},{key:"overlaySize",value:function(){switch(this.overlay){case"exercise":return{width:2800,height:2e3};case"basketball":return{width:2800,height:1500};case"volleyball":return{width:1800,height:900};default:return null}}}]),e}(),ne=ie,ae=function(){function e(){Object(h.a)(this,e),this._mode="select",this._lineArrowStart=!1,this._lineArrowEnd=!1,this._lineDashed=!1,this._color=0,this._textSize=2,this._pitchOverlay="none",this._objectColors=["#8b2323","#e7e739","#912cee","#04b804","#1d4ba0","#ee2c2c","#ff7f50","#56c6eb"],this._playerColors=["#8b2323","#e7e739","#912cee","#04b804","#1d4ba0","#ee2c2c","#ff7f50","#56c6eb"],this._ballColors=["#ffa500","#cc3333","#222333","#0000ff","#ffffff"],this.onModified=null}return Object(u.a)(e,[{key:"_modified",value:function(){var t=new e;t._mode=this.mode,t._lineArrowStart=this.lineArrowStart,t._lineArrowEnd=this.lineArrowEnd,t._lineDashed=this.lineDashed,t._color=this.color,t._textSize=this.textSize,t._pitchOverlay=this.pitchOverlay,t._objectColors=this._objectColors,t._playerColors=this._playerColors,t._ballColors=this._ballColors,null!==this.onModified&&this.onModified(t)}},{key:"modeOptions",get:function(){return["select","line","square","ellipse","text","extras"]}},{key:"mode",get:function(){return this._mode},set:function(e){this._mode=e,this._modified()}},{key:"lineArrowStart",get:function(){return this._lineArrowStart},set:function(e){this._lineArrowStart=e,this._modified()}},{key:"lineArrowEnd",get:function(){return this._lineArrowEnd},set:function(e){this._lineArrowEnd=e,this._modified()}},{key:"lineDashed",get:function(){return this._lineDashed},set:function(e){this._lineDashed=e,this._modified()}},{key:"colorOptions",get:function(){return this._objectColors}},{key:"colorOptionsPlayer",get:function(){return this._playerColors}},{key:"colorOptionsBall",get:function(){return this._ballColors}},{key:"editColor",get:function(){return"#666666"}},{key:"editColorIndex",get:function(){return 99}},{key:"updateColors",value:function(e,t,i){this._objectColors=e,this._playerColors=t,this._ballColors=i,this._modified()}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this._modified()}},{key:"colorSelected",get:function(){return this._objectColors[this._color]}},{key:"colorSelectedName",get:function(){return"Color "+this._color}},{key:"textSizeOptions",get:function(){return["Extra small","Small","Normal","Large","Extra large"]}},{key:"textSize",get:function(){return this._textSize},set:function(e){this._textSize=e,this._modified()}},{key:"textSizeName",get:function(){return"Size: "+this.textSizeOptions[this._textSize]}},{key:"pitchOverlayOptions",get:function(){return["none","exercise","basketball","volleyball"]}},{key:"pitchOverlay",get:function(){return this._pitchOverlay},set:function(e){this._pitchOverlay=e,this._modified()}}]),e}(),re=i(359),se=i(0),oe=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"renderPlayerName",value:function(e){return 0===e.length?null:Object(se.jsx)("text",{y:"-70",children:e})}},{key:"render",value:function(){var e=this.props.player,t=this.props.isEdit?e.id:null,i=this.props.isEdit?"draggable":null,n="player pc"+e.color+(this.props.isPrevFrame?" transparent":""),a="translate("+e.pos.x+" "+e.pos.y+") rotate("+e.rotation+")";return Object(se.jsxs)("g",{className:n,textAnchor:"middle",transform:a,children:[Object(se.jsx)("circle",{r:"50",className:i,"data-ref":t}),Object(se.jsx)("text",{className:"number",dominantBaseline:"central",children:e.no}),this.renderPlayerName(e.name)]})}}]),i}(n.Component);oe.defaultProps={player:null,isEdit:!0,isPrevFrame:!1};var le=oe,ce=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"ballImage",value:function(){return Object(se.jsx)("g",{transform:"translate(-30 -30)",children:Object(se.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 952 952",children:Object(se.jsx)("path",{d:"M813 139A475 475 0 000 476a474 474 0 00476 476 474 474 0 00476-476 474 474 0 00-139-337zm-600-31l12-10a457 457 0 01370-60c-14 6-33 18-65 45a393 393 0 00-182 22c-31 11-55 23-71 33l-74-25c3 1 8-4 10-5zm433 119l-81 222-196 37-161-166c11-76 63-143 63-143s34-25 88-44a403 403 0 01174-20l113 114zM39 460c-5 32-6 66-3 100l-9-20a451 451 0 0136-252c-3 30-2 61 0 85-11 28-19 57-24 87zm40 173a418 418 0 018-239c33-28 77-44 101-52l158 164-16 179-155 52c-39-29-72-68-96-104zm470 260c-34 22-121 28-157 29a451 451 0 01-200-92c0-1-4-49-4-66l156-52 181 78 25 103h-1zm300-158c-27 38-59 75-98 102-36 25-85 34-128 41-3 1-44 8-45 6l-25-103 128-132 168-15 8 89-8 12zm3-135l-2 3-168 16-90-158 82-223 115 7a366 366 0 01118 169 434 434 0 01-55 186zm60-250a396 396 0 00-108-131c-5-25-19-65-57-107l2 2 7 5a459 459 0 01156 230v1z"})})})}},{key:"render",value:function(){var e=this.props.ball,t=this.props.isEdit?e.id:null,i=this.props.isEdit?"draggable":null,n="ball bc"+e.color+(this.props.isPrevFrame?" transparent":""),a="translate("+e.pos.x+" "+e.pos.y+")",r=4===e.color?this.ballImage():null;return Object(se.jsxs)("g",{className:n,transform:a,children:[Object(se.jsx)("circle",{r:"30",className:i,"data-ref":t}),r]})}}]),i}(n.Component);ce.defaultProps={ball:null,isEdit:!0,isPrevFrame:!1};var he=ce,ue=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var e=this.props.size/2,t=this.props.position.x-e,i=this.props.position.y-e;return Object(se.jsx)("rect",{className:"editCorner draggable",x:t,y:i,width:this.props.size,height:this.props.size,"data-ref":this.props.id})}}]),i}(n.Component);ue.defaultProps={id:"",size:40,position:null};var de=ue,pe=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var e=this.props.box,t=e.width/2,i=e.x+t,n=e.y,r=i,s=n-2*this.props.size;return Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)("line",{x1:i,y1:n,x2:r,y2:s}),Object(se.jsx)("circle",{className:"editCorner draggable",cx:r,cy:s,r:this.props.size/2,"data-ref":"edit-rt-"+e.id})]})}}]),i}(n.Component);pe.defaultProps={size:50,box:null};var be=pe,je=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"renderHandles",value:function(e){if(!this.props.showResize)return null;var t=new v(e.x,e.y),i=new v(e.x+e.width,e.y),n=new v(e.x,e.y+e.height),r=new v(e.x+e.width,e.y+e.height);return Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)(de,{id:"edit-tl-"+e.id,position:t}),Object(se.jsx)(de,{id:"edit-tr-"+e.id,position:i}),Object(se.jsx)(de,{id:"edit-bl-"+e.id,position:n}),Object(se.jsx)(de,{id:"edit-br-"+e.id,position:r})]})}},{key:"renderRotateHandle",value:function(e){return this.props.showRotate?Object(se.jsx)(be,{box:e}):null}},{key:"render",value:function(){var e=this.props.box,t=this.props.showBox?"editBox draggable":"editTransparent draggable";return Object(se.jsxs)("g",{children:[Object(se.jsx)("rect",{className:t,x:e.x,y:e.y,width:e.width,height:e.height,"data-ref":"edit-mv-"+e.id}),this.renderHandles(e),this.renderRotateHandle(e)]})}}]),i}(n.Component);je.defaultProps={box:null,showBox:!1,showResize:!0,showRotate:!0};var fe=je,me=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"editBox",value:function(e,t){return e?Object(se.jsx)(fe,{box:t,showBox:!1}):null}},{key:"render",value:function(){var e=this.props.square,t=(e.dashed?"square dashed ec":"square ec")+e.color,i="rotate("+e.rotation+","+e.cx+","+e.cy+")";return Object(se.jsxs)("g",{className:t,transform:i,children:[Object(se.jsx)("rect",{x:e.x,y:e.y,width:e.width,height:e.height,"data-ref":e.id}),this.editBox(e.isEdit,e.box)]})}}]),i}(n.Component);me.defaultProps={square:null};var ye=me,xe=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"editBox",value:function(e,t){return e?Object(se.jsx)(fe,{box:t,showBox:!0}):null}},{key:"render",value:function(){var e=this.props.ellipse,t=(e.dashed?"ellipse dashed ec":"ellipse ec")+e.color,i="rotate("+e.rotation+","+e.cx+","+e.cy+")";return Object(se.jsxs)("g",{className:t,transform:i,children:[Object(se.jsx)("ellipse",{cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry,"data-ref":e.id}),this.editBox(e.isEdit,e.box)]})}}]),i}(n.Component);xe.defaultProps={ellipse:null};var ve=xe,ge=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"editHandles",value:function(e,t){return e.isEdit?t?Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)(de,{id:"edit-l2-"+e.id,position:e.c1}),Object(se.jsx)(de,{id:"edit-l3-"+e.id,position:e.c2})]}):Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)(de,{id:"edit-l1-"+e.id,position:e.p1}),Object(se.jsx)(de,{id:"edit-l2-"+e.id,position:e.c1}),Object(se.jsx)(de,{id:"edit-l3-"+e.id,position:e.c2}),Object(se.jsx)(de,{id:"edit-l4-"+e.id,position:e.p2})]}):null}},{key:"renderPath",value:function(e,t){var i="M "+e.p1.x+" "+e.p1.y+" C "+e.c1.x+" "+e.c1.y+" "+e.c2.x+" "+e.c2.y+" "+e.p2.x+" "+e.p2.y,n=e.arrowStart?"url(#arrowStart)":null,a=e.arrowEnd?"url(#arrowEnd)":null;return Object(se.jsx)("path",{d:i,"data-ref":e.id,markerStart:n,markerEnd:a},t)}},{key:"render",value:function(){var e=this,t=this.props.line,i=(this.props.isPath?"path":"line")+(t.dashed?" dashed ec":" ec")+t.color,n=t.paths().map((function(t,i){return e.renderPath(t,i.toString())}));return Object(se.jsxs)("g",{className:i,children:[n,this.editHandles(t,this.props.isPath)]})}}]),i}(n.Component);ge.defaultProps={line:null,isPath:!1};var Oe=ge,ke=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e))._selectionStart=0,n._selectionEnd=0,n._boxPadding=10,n._editRef=a.a.createRef(),n._textRef=a.a.createRef(),n._cursorRef=a.a.createRef(),n._boxRef=a.a.createRef(),n.editStart=n.editStart.bind(Object(d.a)(n)),n.editChange=n.editChange.bind(Object(d.a)(n)),n.editKeyUp=n.editKeyUp.bind(Object(d.a)(n)),n.editEnd=n.editEnd.bind(Object(d.a)(n)),n}return Object(u.a)(i,[{key:"componentDidUpdate",value:function(e,t){this.props.text.isTextEdit&&this._editRef.current.focus()}},{key:"removeText",value:function(){for(;this._textRef.current.firstChild;)this._textRef.current.removeChild(this._textRef.current.firstChild)}},{key:"addTextLine",value:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","tspan");t.setAttribute("x","0"),t.setAttribute("dy","1.2em"),t.textContent=e,this._textRef.current.appendChild(t)}},{key:"drawCursor",value:function(e,t,i){var n=this._cursorRef.current;n.setAttribute("x1",e),n.setAttribute("y1",t),n.setAttribute("x2",e),n.setAttribute("y2",t+i)}},{key:"drawTextBoundingBox",value:function(e){var t=e.x-this._boxPadding,i=e.y-this._boxPadding,n=e.width+2*this._boxPadding,a=e.height+2*this._boxPadding,r=this._boxRef.current;r.setAttribute("x",t),r.setAttribute("y",i),r.setAttribute("width",n),r.setAttribute("height",a)}},{key:"editStart",value:function(e){this._editRef.current.value=this.props.text.text}},{key:"editChange",value:function(e){this.removeText();for(var t=this._editRef.current.value,i="",n=0;n<t.length;n++)i+=t[n],"\n"===t[n]&&(this.addTextLine(i),i="");i.length>0&&this.addTextLine(i)}},{key:"editShowCursor",value:function(){if(0!==this._selectionEnd)try{var e=this._textRef.current.getExtentOfChar(this._selectionEnd-1);this.drawCursor(e.x+e.width,e.y,e.height);var t=this._textRef.current.getBBox();this.drawTextBoundingBox(t)}catch(i){console.log(i)}}},{key:"editKeyUp",value:function(e){this._selectionStart=this._editRef.current.selectionStart,this._selectionEnd=this._editRef.current.selectionEnd,this.editShowCursor()}},{key:"editEnd",value:function(e){if(null!==this.props.onEditDone){var t=this._editRef.current.value.trim(),i=this._textRef.current.getBBox();console.log(i),this.removeText(),this.props.onEditDone(this.props.text.id,t,i.x,i.y,i.width,i.height)}}},{key:"editBox",value:function(e,t){return e?Object(se.jsx)(fe,{box:t,showBox:!0,showResize:!1}):null}},{key:"editor",value:function(e){return e.isTextEdit?Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)("line",{ref:this._cursorRef,strokeWidth:"8"}),Object(se.jsx)("rect",{ref:this._boxRef,className:"editBox",x:"0",y:"0",width:e.width,height:e.height}),Object(se.jsx)("foreignObject",{children:Object(se.jsx)("textarea",{ref:this._editRef,onFocus:this.editStart,onInput:this.editChange,onKeyUp:this.editKeyUp,onBlur:this.editEnd})})]}):null}},{key:"renderLines",value:function(e){return e.isTextEdit?null:e.text.split("\n").map((function(t,i){return Object(se.jsx)("tspan",{"data-ref":e.id,x:"0",dy:"1.2em",children:t},i)}))}},{key:"render",value:function(){var e=this.props.text,t="txt"+e.size+" ec"+e.color,i="translate("+e.x+","+e.y+")";if(0!==e.rotation){var n=e.bx+e.bwidth/2,a=e.by+e.bheight/2;i+=" rotate("+e.rotation+","+n+","+a+")"}return Object(se.jsxs)("g",{className:t,transform:i,children:[Object(se.jsx)("text",{ref:this._textRef,"data-ref":e.id,xmlSpace:"preserve",children:this.renderLines(e)}),this.editor(e),this.editBox(e.isEdit,e.box)]})}}]),i}(n.Component);ke.defaultProps={text:null,onEditDone:null};var we=ke,Se=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var e=this.props.width,t=this.props.height,i=e/2,n=t/2,a=this.props.x-i,r=this.props.y-n,s=this.props.x+i,o=this.props.y-n,l=this.props.x+i,c=this.props.y+n;return Object(se.jsxs)("g",{children:[Object(se.jsx)("rect",{x:a,y:r,width:e,height:t,fill:"url(#goal-net)",stroke:"#777777",strokeWidth:"4","data-ref":this.props.id}),Object(se.jsx)("line",{x1:s,y1:o,x2:l,y2:c,strokeWidth:"5",stroke:"white"}),Object(se.jsx)("line",{x1:s,y1:o,x2:l,y2:c,stroke:"red",strokeDasharray:"20",strokeWidth:"6"})]})}}]),i}(n.Component);Se.defaultProps={id:null,x:0,y:0,width:100,height:300};var Ce=Se,Pe=i(25),De=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"steps",value:function(e,t,i,n,a){var r=this,s=n/(a+1);return Object(Pe.a)(Array(a)).map((function(n,a){var o=i+(a+1)*s;return Object(se.jsx)("line",{x1:e,y1:o,x2:t,y2:o,strokeWidth:"5",stroke:"black","data-ref":r.props.id},a)}))}},{key:"render",value:function(){var e=this.props.width,t=this.props.height,i=e/2,n=t/2,a=this.props.x-i,r=this.props.x+i,s=this.props.y-n,o=this.props.y+n;return Object(se.jsxs)("g",{children:[Object(se.jsx)("line",{x1:a,y1:s,x2:a,y2:o,strokeWidth:"5",stroke:"black","data-ref":this.props.id}),this.steps(a,r,s,t,5),Object(se.jsx)("line",{x1:r,y1:s,x2:r,y2:o,strokeWidth:"5",stroke:"black","data-ref":this.props.id})]})}}]),i}(n.Component);De.defaultProps={id:null,x:0,y:0,width:150,height:350};var Ae=De,Fe=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var e=this,t="";return i.shape.forEach((function(i){var n=i[0]+e.props.x,a=i[1]+e.props.y;t+="".concat(n,",").concat(a," ")})),Object(se.jsx)("g",{children:Object(se.jsx)("polygon",{points:t,stroke:"black"})})}}]),i}(n.Component);Fe.shape=[[5,-42],[-5,-42],[-20,23],[-35,28],[0,43],[35,28],[20,23]],Fe.defaultProps={id:null,x:0,y:0,width:70,height:85};var Ee=Fe,_e=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var e=this.props.width,t=this.props.height,i=e/2,n=t/2,a=this.props.x-i,r=this.props.y-n,s=this.props.y+n;return Object(se.jsxs)("g",{children:[Object(se.jsx)("rect",{x:a,y:r,width:e,height:t/3,fill:"red",stroke:"black",strokeWidth:"3","data-ref":this.props.id}),Object(se.jsx)("line",{x1:a,y1:r,x2:a,y2:s,stroke:"black",strokeWidth:"6","data-ref":this.props.id})]})}}]),i}(n.Component);_e.defaultProps={id:null,x:0,y:0,width:130,height:280};var Me=_e,Te=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"editBox",value:function(e,t,i,n,a){return e?Object(se.jsx)(fe,{box:t,showBox:i,showResize:n,showRotate:a}):null}},{key:"renderGfx",value:function(e){switch(e.t){case Y:case X:return Object(se.jsx)(Ce,{id:e.id,x:e.x,y:e.y,width:e.width,height:e.height});case H:return Object(se.jsx)(Ae,{id:e.id,x:e.x,y:e.y,width:e.width,height:e.height});case V:return Object(se.jsx)(Ee,{id:e.id,x:e.x,y:e.y,width:e.width,height:e.height});case G:return Object(se.jsx)(Me,{id:e.id,x:e.x,y:e.y,width:e.width,height:e.height});default:return Object(se.jsx)("rect",{x:e.x,y:e.y,width:e.width,height:e.height,"data-ref":e.id})}}},{key:"render",value:function(){var e=this.props.extras,t="rotate("+e.rotation+","+e.x+","+e.y+")";return Object(se.jsxs)("g",{transform:t,children:[this.renderGfx(e),this.editBox(e.isEdit,e.box,e.isBoxVisible,e.isResizable,e.isRotatable)]})}}]),i}(n.Component);Te.defaultProps={extras:null};var Ie=Te,Ke=i(378),Re=i(382),Be=i(379),ze=i(345),Ne=i(377),qe=i(177),Le=i.n(qe);function We(e){return Object(se.jsxs)(ze.a,{id:e.id,children:[e.children,Object(se.jsx)(Ne.a,{"aria-label":"close",onClick:e.onClick,sx:{position:"absolute",right:8,top:8},children:Object(se.jsx)(Le.a,{})})]})}We.defaultProps={id:null,onClick:null};var Ue=We,Ye=i(369),Xe=i(360),He=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).state={open:!1,player:{id:"",name:"",no:0}},n._refName=a.a.createRef(),n._refNumber=a.a.createRef(),n.openDialog=n.openDialog.bind(Object(d.a)(n)),n.close=n.close.bind(Object(d.a)(n)),n.save=n.save.bind(Object(d.a)(n)),n.remove=n.remove.bind(Object(d.a)(n)),n}return Object(u.a)(i,[{key:"openDialog",value:function(e){this.setState({open:!0,player:e})}},{key:"close",value:function(){this.setState({open:!1})}},{key:"save",value:function(){this.close(),null!==this.props.onEditDone&&this.props.onEditDone({id:this.state.player.id,remove:!1,name:this._refName.current.value,no:Number.parseInt(this._refNumber.current.value)})}},{key:"remove",value:function(){this.close(),null!==this.props.onEditDone&&this.props.onEditDone({id:this.state.player.id,remove:!0})}},{key:"render",value:function(){return Object(se.jsxs)(Ke.a,{open:this.state.open,onClose:this.close,"aria-labelledby":"form-dialog-title",children:[Object(se.jsx)(Ue,{id:"form-dialog-title",onClick:this.close,children:"Edit player"}),Object(se.jsxs)(Be.a,{dividers:!0,children:[Object(se.jsx)(Xe.a,{inputRef:this._refNumber,margin:"dense",id:"playerNumber",defaultValue:this.state.player.no,label:"Number",type:"number",fullWidth:!0,autoFocus:!0}),Object(se.jsx)(Xe.a,{inputRef:this._refName,margin:"dense",id:"playerName",defaultValue:this.state.player.name,label:"Name",type:"text",fullWidth:!0})]}),Object(se.jsxs)(Re.a,{children:[Object(se.jsx)(Ye.a,{onClick:this.remove,variant:"contained",color:"secondary",children:"Remove"}),Object(se.jsx)(Ye.a,{onClick:this.save,variant:"contained",color:"primary",children:"Save"})]})]})}}]),i}(n.Component);He.defaultProps={onEditDone:null};var Ve=He,Ge=-1,Je=0,Qe=1,Ze=4,$e=5,et=6,tt=7,it=8,nt=9,at=10,rt=11,st=12,ot=13,lt=[{prefix:"pl",removePrefix:!1,typ:Je},{prefix:"bl",removePrefix:!1,typ:Qe},{prefix:"edit-tl-",removePrefix:!0,typ:Ze},{prefix:"edit-tr-",removePrefix:!0,typ:$e},{prefix:"edit-bl-",removePrefix:!0,typ:et},{prefix:"edit-br-",removePrefix:!0,typ:tt},{prefix:"edit-mv-",removePrefix:!0,typ:it},{prefix:"edit-rt-",removePrefix:!0,typ:nt},{prefix:"edit-l1-",removePrefix:!0,typ:at},{prefix:"edit-l2-",removePrefix:!0,typ:rt},{prefix:"edit-l3-",removePrefix:!0,typ:st},{prefix:"edit-l4-",removePrefix:!0,typ:ot}],ct=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e))._editRef=a.a.createRef(),n._bgRef=a.a.createRef(),n._playerDialogRef=a.a.createRef(),n._orgWidth=n.props.viewBoxRight-n.props.viewBoxLeft,n._orgHeight=n.props.viewBoxBottom-n.props.viewBoxTop,n._pitch=n.props.pitch,n._dragNode=null,n._dragObjectType=Ge,n._mouseX=0,n._mouseY=0,n.hContextMenu=n.hContextMenu.bind(Object(d.a)(n)),n.hMouseDown=n.hMouseDown.bind(Object(d.a)(n)),n.hMouseUp=n.hMouseUp.bind(Object(d.a)(n)),n.hMouseMove=n.hMouseMove.bind(Object(d.a)(n)),n.textEditDone=n.textEditDone.bind(Object(d.a)(n)),n.playerEditDone=n.playerEditDone.bind(Object(d.a)(n)),n}return Object(u.a)(i,[{key:"getScale",value:function(){var e=this._bgRef.current.getBoundingClientRect();return{X:this._orgWidth/e.width,Y:this._orgHeight/e.height}}},{key:"getRealPosition",value:function(e){var t=this.getScale(),i=this._bgRef.current.getBoundingClientRect(),n=e.clientX-i.left,a=e.clientY-i.top,r=e.clientX-this._mouseX,s=e.clientY-this._mouseY;return this.resetMouseDrag(e),{scaleX:t.X,scaleY:t.Y,X:n*t.X,Y:a*t.Y,deltaX:r*t.X,deltaY:s*t.Y}}},{key:"resetMouseDrag",value:function(e){this._mouseX=e.clientX,this._mouseY=e.clientY}},{key:"isDragStarted",value:function(e){if(0!==e.button)return!1;if(!e.target.classList.contains("draggable"))return!1;if(this._dragNode=e.target.getAttribute("data-ref"),null===this._dragNode)return!1;this.resetMouseDrag(e),this._dragObjectType=Ge;var t,i=Object(y.a)(lt);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(this._dragNode.startsWith(n.prefix))return this._dragObjectType=n.typ,n.removePrefix&&(this._dragNode=this._dragNode.replace(n.prefix,"")),!0}}catch(a){i.e(a)}finally{i.f()}return!1}},{key:"playerEditStarted",value:function(e){var t=this.props.pitch.playerEditStart(e);return null!==t&&(this._playerDialogRef.current.openDialog(t),!0)}},{key:"playerEditDone",value:function(e){this.props.pitch.playerEditDone(e)}},{key:"objectDrag",value:function(e,t,i,n,a){var r=this.props.pitch;switch(this._dragObjectType){case Je:r.playerMove(this._dragNode,i,n);break;case Qe:r.ballMove(this._dragNode,i,n);break;case Ze:r.editTopLeft(this._dragNode,i,n);break;case $e:r.editTopRight(this._dragNode,i,n);break;case et:r.editBottomLeft(this._dragNode,i,n);break;case tt:r.editBottomRight(this._dragNode,i,n);break;case it:r.editMove(this._dragNode,i,n);break;case nt:r.editRotate(this._dragNode,e,t,a);break;case at:r.lineEdit("p1",this._dragNode,i,n);break;case rt:r.lineEdit("c1",this._dragNode,i,n);break;case st:r.lineEdit("c2",this._dragNode,i,n);break;case ot:r.lineEdit("p2",this._dragNode,i,n);break;default:console.log("Invalid drag object type",this._dragObjectType,this._dragNode)}}},{key:"hContextMenu",value:function(e){if("select"===this.props.drawMode.mode){var t=e.target.getAttribute("data-ref");if(null!==t){var i=this.props.pitch;(this.playerEditStarted(t)||i.squareEditStart(t)||i.ellipseEditStart(t)||i.lineEditStart(t)||i.textEditStart(t)||i.extrasEditStart(t))&&e.preventDefault()}}}},{key:"hMouseDown",value:function(e){var t=this.getRealPosition(e),i=this.props.drawMode,n=this.props.pitch;switch(i.mode){case"line":e.preventDefault(),this._dragNode=n.lineCreate(t.X,t.Y,i.color,i.lineArrowStart,i.lineArrowEnd,i.lineDashed);break;case"square":e.preventDefault(),this._dragNode=n.squareCreate(t.X,t.Y,i.color,i.lineDashed);break;case"ellipse":e.preventDefault(),this._dragNode=n.ellipseCreate(t.X,t.Y,i.color,i.lineDashed);break;case"text":e.preventDefault(),this._dragNode=n.textCreate(t.X,t.Y,i.color,i.textSize);break;default:if(this.isDragStarted(e))return void e.preventDefault()}}},{key:"hMouseUp",value:function(e){e.preventDefault();var t=this.props.pitch,i=this.getRealPosition(e),n=e.getModifierState("Shift");switch(this.props.drawMode.mode){case"line":t.lineCleanup();break;case"square":t.squareCleanup();break;case"ellipse":t.ellipseCleanup();break;case"text":break;default:this.objectDrag(i.X,i.Y,i.deltaX,i.deltaY,n)}0===e.button&&this._dragObjectType===Ge&&t.endAllEdits(),this._dragNode=null,this._dragObjectType=Ge}},{key:"hMouseMove",value:function(e){if(null!=this._dragNode){var t=this.props.pitch;e.preventDefault();var i=this.getRealPosition(e),n=e.getModifierState("Shift");switch(this.props.drawMode.mode){case"line":t.lineResize(this._dragNode,i.deltaX,i.deltaY);break;case"square":t.squareResize(this._dragNode,i.X,i.Y,n);break;case"ellipse":t.ellipseResize(this._dragNode,i.X,i.Y,n);break;case"text":break;default:this.objectDrag(i.X,i.Y,i.deltaX,i.deltaY,n)}}}},{key:"textEditDone",value:function(e,t,i,n,a,r){this.props.pitch.textEditDone(e,t,i,n,a,r)}},{key:"getSVG",value:function(){return{width:this._orgWidth,height:this._orgHeight,svgText:this._editRef.current.children[0].outerHTML}}},{key:"renderPlayers",value:function(e,t,i){if(null===e)return null;var n=t?"ed":"";return e.map((function(e,a){return Object(se.jsx)(le,{player:e,isEdit:t,isPrevFrame:i},n+a.toString())}))}},{key:"renderBalls",value:function(e,t,i){if(null===e)return null;var n=t?"ed":"";return e.map((function(e,a){return Object(se.jsx)(he,{ball:e,isEdit:t,isPrevFrame:i},n+a.toString())}))}},{key:"renderSquares",value:function(e){return e.map((function(e,t){return Object(se.jsx)(ye,{square:e},t.toString())}))}},{key:"renderEllipses",value:function(e){return e.map((function(e,t){return Object(se.jsx)(ve,{ellipse:e},t.toString())}))}},{key:"renderLines",value:function(e,t){if(null===e)return null;var i=t?"ph":"";return e.map((function(e,n){return e.empty()?null:Object(se.jsx)(Oe,{line:e,isPath:t},i+n.toString())}))}},{key:"renderTexts",value:function(e){var t=this;return e.map((function(e,i){return Object(se.jsx)(we,{text:e,onEditDone:t.textEditDone},i.toString())}))}},{key:"renderExtras",value:function(e){return e.map((function(e,t){return Object(se.jsx)(Ie,{extras:e},t.toString())}))}},{key:"renderPitchOverlay",value:function(){var e=this.props.pitch.overlaySize();if(null===e)return null;var t="translate("+(this._orgWidth-e.width)/2+" "+(this._orgHeight-e.height)/2+")";return Object(se.jsx)("rect",{width:e.width,height:e.height,transform:t,fill:"none"})}},{key:"generatePicthStyles",value:function(){var e=this.props.drawMode;return e.colorOptions.map((function(e,t){return".ec"+t+" { fill: "+e+"; stroke: "+e+"; }"})).concat([".ec"+e.editColorIndex+" { fill: "+e.editColor+"; stroke: "+e.editColor+"; }"]).concat(e.colorOptionsPlayer.map((function(e,t){return".pc"+t+" { fill: "+e+"; stroke: "+e+"; }"}))).concat(e.colorOptionsBall.map((function(e,t){return".bc"+t+" { fill: "+e+"; }"}))).concat([".bc4 svg { fill: #000000; }","#texts { font-family: sans-serif; font-size: 10em; cursor: default; user-select: none; }",".txt0 text { font-size: 0.5em; }",".txt1 text { font-size: 0.8em; }",".txt2 text { font-size: 1em; }",".txt3 text { font-size: 1.5em; }",".txt4 text { font-size: 2em; }",".player { pointer-events: none; }",".player text { font-family: sans-serif; fill: black; }",".player text.number { fill: white; }",".dashed { stroke-dasharray: 20; }",".square { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }",".ellipse { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }",".line { stroke-width: 12; }",".line path { fill: none; stroke-width: 12; }",".path { stroke-width: 6; }",".path path { fill: none; stroke-width: 6; }",".draggable { cursor: move; pointer-events: all;}",".editBox { fill: none; stroke-width: 8; stroke-opacity: 1; }",".editTransparent { fill: none; stroke-width: 0; }",".editCorner { fill: red; stroke-width: 0; stroke-opacity: 1; }",".transparent { fill-opacity: 50%; stroke-opacity: 50%; }"])}},{key:"render",value:function(){var e=this.props.viewBoxLeft.toString()+" "+this.props.viewBoxTop.toString()+" "+this.props.viewBoxRight.toString()+" "+this.props.viewBoxBottom.toString(),t="pitch "+this.props.classes.offset,i=(this._orgWidth-this.props.pitch.widthPitch)/2,n=(this._orgHeight-this.props.pitch.heightPitch)/2,r="translate("+i+" "+n+")",s="translate("+(i+50)+" "+(n+this.props.pitch.heightPitch+50+25)+")",o="translate("+(i+1050)+" "+(n+this.props.pitch.heightPitch+90)+")";return Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)("div",{ref:this._editRef,className:t,children:Object(se.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:e,onContextMenu:this.hContextMenu,onMouseDown:this.hMouseDown,onMouseUp:this.hMouseUp,onMouseMove:this.hMouseMove,children:[Object(se.jsx)("style",{children:this.generatePicthStyles()}),Object(se.jsxs)("pattern",{id:"goal-net",x:"0",y:"0",width:"20",height:"20",stroke:"black",patternUnits:"userSpaceOnUse",children:[Object(se.jsx)("line",{x1:"0",x2:"20",y1:"0",y2:"20"}),Object(se.jsx)("line",{x1:"20",x2:"00",y1:"0",y2:"20"})]}),Object(se.jsx)("marker",{id:"arrowEnd",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:Object(se.jsx)("path",{d:"M0,0 L0,6 L9,3 z",fill:"#f00"})}),Object(se.jsx)("marker",{id:"arrowStart",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:Object(se.jsx)("path",{d:"M9,0 L9,6 L0,3 z",fill:"#f00"})}),Object(se.jsx)("g",{id:"background",ref:this._bgRef,children:Object(se.jsx)("rect",{width:this._orgWidth,height:this._orgHeight,fill:"#b7b7b7",fillOpacity:"0.5"})}),Object(se.jsxs)("g",{id:"pitch",transform:r,fill:"#0280c6",stroke:"white",strokeWidth:"8",children:[Object(se.jsx)("rect",{width:"4000",height:"2000"}),Object(se.jsx)("line",{x1:"2000",x2:"2000",y1:"0",y2:"2000"}),Object(se.jsx)("circle",{r:"300",cx:"2000",cy:"1000",fill:"none"}),Object(se.jsx)("circle",{r:"12",cx:"2000",cy:"1000",fill:"white",strokeWidth:"0"}),Object(se.jsxs)("g",{id:"corner_marks",children:[Object(se.jsx)("path",{fill:"none",d:"M25,0 a25,25 0 0,1 -25,25"}),Object(se.jsx)("path",{fill:"none",d:"M4000,25 a25,25 0 0,1 -25,-25"}),Object(se.jsx)("path",{fill:"none",d:"M0,1975 a25,25 0 0,1 25,25"}),Object(se.jsx)("path",{fill:"none",d:"M3975,2000 a25,25 0 0,1 25,-25"})]}),Object(se.jsxs)("g",{id:"substitition-zones",children:[Object(se.jsx)("line",{x1:"1000",x2:"1000",y1:"-48",y2:"32"}),Object(se.jsx)("line",{x1:"1500",x2:"1500",y1:"-48",y2:"32"}),Object(se.jsx)("line",{x1:"2500",x2:"2500",y1:"-48",y2:"32"}),Object(se.jsx)("line",{x1:"3000",x2:"3000",y1:"-48",y2:"32"})]}),Object(se.jsxs)("g",{id:"left",children:[Object(se.jsx)("line",{x1:"500",x2:"500",y1:"980",y2:"1020"}),Object(se.jsx)("line",{x1:"600",x2:"600",y1:"842",y2:"1158"}),Object(se.jsx)("circle",{r:"12",cx:"600",cy:"1000",fill:"white",strokeWidth:"0"}),Object(se.jsx)("path",{fill:"none",d:"M0,242 a600,600 0 0,1 600,600"}),Object(se.jsx)("path",{fill:"none",d:"M600,1158 a600,600 0 0,1 -600,600"}),Object(se.jsx)("line",{x1:"-20",x2:"-60",y1:"500",y2:"500"}),Object(se.jsx)("line",{x1:"-20",x2:"-60",y1:"1500",y2:"1500"})]}),Object(se.jsxs)("g",{id:"left-penalty",fill:"white",strokeWidth:"0",children:[Object(se.jsx)("rect",{width:"16",height:"16",x:"992",y:"492"}),Object(se.jsx)("circle",{r:"12",cx:"1000",cy:"1000"}),Object(se.jsx)("rect",{width:"16",height:"16",x:"992",y:"1492"})]}),Object(se.jsxs)("g",{id:"right",children:[Object(se.jsx)("line",{x1:"3500",x2:"3500",y1:"980",y2:"1020"}),Object(se.jsx)("line",{x1:"3400",x2:"3400",y1:"842",y2:"1158"}),Object(se.jsx)("circle",{r:"12",cx:"3400",cy:"1000",fill:"white",strokeWidth:"0"}),Object(se.jsx)("path",{fill:"none",d:"M3400,842 a600,600 0 0,1 600,-600"}),Object(se.jsx)("path",{fill:"none",d:"M3400,1158 a600,600 0 0,0 600,600"}),Object(se.jsx)("line",{x1:"4020",x2:"4060",y1:"500",y2:"500"}),Object(se.jsx)("line",{x1:"4020",x2:"4060",y1:"1500",y2:"1500"})]}),Object(se.jsxs)("g",{id:"right-penalty",fill:"white",strokeWidth:"0",children:[Object(se.jsx)("rect",{width:"16",height:"16",x:"2992",y:"492"}),Object(se.jsx)("circle",{r:"12",cx:"3000",cy:"1000"}),Object(se.jsx)("rect",{width:"16",height:"16",x:"2992",y:"1492"})]})]}),Object(se.jsx)("g",{id:"pitchOverlay",stroke:"white",strokeWidth:"8",children:this.renderPitchOverlay()}),Object(se.jsx)("g",{id:"ellipses",children:this.renderEllipses(this.props.pitch.ellipses)}),Object(se.jsx)("g",{id:"squares",children:this.renderSquares(this.props.pitch.squares)}),Object(se.jsx)("g",{id:"extras",children:this.renderExtras(this.props.pitch.extras)}),Object(se.jsxs)("g",{id:"players",transform:s,fontSize:"50",children:[this.renderLines(this.props.pitch.playerPathsCurrentKeyFrame(),!0),this.renderPlayers(this.props.pitch.playersPreviousKeyFrame(),!1,!0),this.renderPlayers(this.props.pitch.playersCurrentKeyFrame(),!0,!1),this.renderPlayers(this.props.pitch.AnimPlayers,!1,!1)]}),Object(se.jsxs)("g",{id:"balls",transform:o,children:[this.renderLines(this.props.pitch.ballPathsCurrentKeyFrame(),!0),this.renderBalls(this.props.pitch.ballsPreviousKeyFrame(),!1,!0),this.renderBalls(this.props.pitch.ballsCurrentKeyFrame(),!0,!1),this.renderBalls(this.props.pitch.AnimBalls,!1,!1)]}),Object(se.jsx)("g",{id:"lines",children:this.renderLines(this.props.pitch.lines,!1)}),Object(se.jsx)("g",{id:"texts",children:this.renderTexts(this.props.pitch.texts)})]})}),Object(se.jsx)(Ve,{ref:this._playerDialogRef,onEditDone:this.playerEditDone})]})}}]),i}(n.Component);ct.defaultProps={pitch:null,drawMode:null,viewBoxLeft:0,viewBoxTop:0,viewBoxRight:4500,viewBoxBottom:2500};var ht=Object(re.a)((function(e){return{offset:{paddingTop:e.mixins.toolbar.minHeight}}}),{withTheme:!0})(ct),ut=i(179),dt=i(385),pt=i(386),bt=i(110),jt=i(358),ft=i(195),mt=i.n(ft),yt=i(196),xt=i.n(yt),vt=i(211),gt=i(384),Ot=i(353),kt=i(398),wt=i(381),St=i(351),Ct=i(352),Pt=i(399),Dt=i(400),At=i(363),Ft=i(373),Et=i(397),_t=i(383),Mt=i(395),Tt=i(181),It=i.n(Tt),Kt=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var a;return Object(h.a)(this,i),(a=t.call(this,e,n)).selected=a.selected.bind(Object(d.a)(a)),a}return Object(u.a)(i,[{key:"selected",value:function(e){var t=parseInt(e.target.value);null!==this.props.onSelected&&this.props.onSelected(t,this.props.palette[t])}},{key:"radioIcon",value:function(e,t){return e?Object(se.jsx)(_t.a,{sx:{width:this.props.colorWidth,height:this.props.colorHeight,border:1,borderColor:"white",color:"common.white",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:t},children:Object(se.jsx)(It.a,{style:{fontSize:this.props.checkIconFontSize}})}):Object(se.jsx)(_t.a,{sx:{width:this.props.colorWidth,height:this.props.colorHeight,backgroundColor:t}})}},{key:"colors",value:function(){var e=this;return this.props.palette.map((function(t,i){var n=e.radioIcon(!1,t),a=e.radioIcon(!0,t),r="".concat(e.props.toolTipPrefix," ").concat(i),s=e.props.colorSelected===i;return Object(se.jsx)(jt.a,{placement:"bottom",title:r,children:Object(se.jsx)(Mt.a,{sx:{m:.4},children:Object(se.jsx)(At.a,{sx:{p:0},color:"default",name:"color-select",value:i,checked:s,icon:n,checkedIcon:a,onChange:e.selected})})},i)}))}},{key:"render",value:function(){return Object(se.jsx)(_t.a,{sx:{display:"flex",flexWrap:"wrap"},children:this.colors()})}}]),i}(n.Component);Kt.defaultProps={palette:null,toolTipPrefix:"",colorSelected:-1,onSelected:null,colorWidth:32,colorHeight:32,checkIconFontSize:30};var Rt=Kt,Bt=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var a;return Object(h.a)(this,i),(a=t.call(this,e,n)).state={open:!1},a.Show=a.Show.bind(Object(d.a)(a)),a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.colorSelected=a.colorSelected.bind(Object(d.a)(a)),a}return Object(u.a)(i,[{key:"Show",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"colorSelected",value:function(e,t){this.props.drawMode.color=e,this.handleClose()}},{key:"render",value:function(){return Object(se.jsxs)(Ke.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",children:[Object(se.jsx)(Ue,{id:"responsive-dialog-title",onClick:this.handleClose,children:"Draw color palette"}),Object(se.jsx)(Be.a,{dividers:!0,children:Object(se.jsx)(Rt,{toolTipPrefix:"Color",colorWidth:48,colorHeight:48,palette:this.props.drawMode.colorOptions,colorSelected:this.props.drawMode.color,onSelected:this.colorSelected})})]})}}]),i}(n.Component);Bt.defaultProps={drawMode:null};var zt=Bt,Nt=i(214),qt=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var a;return Object(h.a)(this,i),(a=t.call(this,e,n)).state={open:!1},a.Show=a.Show.bind(Object(d.a)(a)),a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.extrasChange=a.extrasChange.bind(Object(d.a)(a)),a}return Object(u.a)(i,[{key:"Show",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"extrasChange",value:function(e){if(this.props.extrasCreate){var t=parseInt(e.target.value),i=J[t];this.props.extrasCreate(t,i.width,i.height)}this.handleClose()}},{key:"getExtrasGfx",value:function(e){var t=J[e],i=t.width/2*t.viewBoxScale,n=t.height/2*t.viewBoxScale;switch(e){case Y:case X:return Object(se.jsx)(Ce,{x:i,y:n,width:t.width,height:t.height});case H:return Object(se.jsx)(Ae,{x:i,y:n,width:t.width,height:t.height});case V:return Object(se.jsx)(Ee,{x:i,y:n,width:t.width,height:t.height});case G:return Object(se.jsx)(Me,{x:i,y:n,width:t.width,height:t.height});default:throw new Error("Unknown extras type")}}},{key:"radioIcon",value:function(e){var t=J[e],i="0 0 ".concat(t.width*t.viewBoxScale," ").concat(t.height*t.viewBoxScale);return Object(se.jsx)(Nt.a,{viewBox:i,className:this.props.classes.radioIcon,children:this.getExtrasGfx(e)})}},{key:"renderRadios",value:function(){var e=this;return[Y,X,H,V,G].map((function(t,i){var n=e.radioIcon(t),a=J[t];return Object(se.jsxs)("div",{style:{display:"inline-block"},children:[Object(se.jsx)("label",{style:{display:"block",textAlign:"center"},children:a.name}),Object(se.jsx)(At.a,{name:"extras-select",value:t,className:e.props.classes.radio,icon:n,onChange:e.extrasChange})]},i)}))}},{key:"render",value:function(){return Object(se.jsxs)(Ke.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",children:[Object(se.jsx)(Ue,{id:"responsive-dialog-title",onClick:this.handleClose,children:"Select element to place on pitch"}),Object(se.jsx)(Be.a,{dividers:!0,children:this.renderRadios()})]})}}]),i}(n.Component);qt.defaultProps={extrasCreate:null};var Lt=Object(re.a)((function(e){return{radio:{padding:0},radioIcon:{width:100,height:100}}}),{withTheme:!0})(qt),Wt=i(159),Ut=i.n(Wt),Yt=i(129),Xt=i.n(Yt),Ht=i(160),Vt=i.n(Ht),Gt=i(105),Jt=i.n(Gt),Qt=i(106),Zt=i.n(Qt),$t=i(161),ei=i.n($t),ti=i(156),ii=i.n(ti),ni=i(157),ai=i.n(ni),ri=i(158),si=i.n(ri),oi=i(154),li=i.n(oi),ci=i(153),hi=i.n(ci),ui=i(182),di=i.n(ui),pi=i(138),bi=i.n(pi),ji=i(155),fi=i.n(ji),mi=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).state={open:!1,anchorEl:null,lineArrows:!1,linePattern:!1,pitchOverlays:!1,textSizes:!1},n.refPaletteDialog=a.a.createRef(),n.refExtrasDialog=a.a.createRef(),n.open=n.open.bind(Object(d.a)(n)),n.close=n.close.bind(Object(d.a)(n)),n.lineArrowsToggle=n.lineArrowsToggle.bind(Object(d.a)(n)),n.lineArrowEndToggle=n.lineArrowEndToggle.bind(Object(d.a)(n)),n.lineArrowStartToggle=n.lineArrowStartToggle.bind(Object(d.a)(n)),n.linePatternToggle=n.linePatternToggle.bind(Object(d.a)(n)),n.lineDashedOn=n.lineDashedOn.bind(Object(d.a)(n)),n.lineDashedOff=n.lineDashedOff.bind(Object(d.a)(n)),n.pitchOverlaysToggle=n.pitchOverlaysToggle.bind(Object(d.a)(n)),n.pitchOverlayOnChange=n.pitchOverlayOnChange.bind(Object(d.a)(n)),n.colorSelect=n.colorSelect.bind(Object(d.a)(n)),n.extrasSelect=n.extrasSelect.bind(Object(d.a)(n)),n.textSizesToggle=n.textSizesToggle.bind(Object(d.a)(n)),n.textSizeSelected=n.textSizeSelected.bind(Object(d.a)(n)),n}return Object(u.a)(i,[{key:"open",value:function(e){this.setState({open:!0,anchorEl:e.currentTarget})}},{key:"close",value:function(e){var t=e.currentTarget.dataset.value;t&&(this.props.drawMode.mode=t),this.setState({open:!1,anchorEl:null,lineArrows:!1,linePattern:!1,pitchOverlays:!1,textSizes:!1})}},{key:"lineArrowsToggle",value:function(){this.setState({lineArrows:!this.state.lineArrows})}},{key:"lineArrowStartToggle",value:function(){this.props.drawMode.lineArrowStart=!this.props.drawMode.lineArrowStart}},{key:"lineArrowEndToggle",value:function(){this.props.drawMode.lineArrowEnd=!this.props.drawMode.lineArrowEnd}},{key:"lineArrowsIcon",value:function(){var e=this.props.drawMode;return e.lineArrowStart&&e.lineArrowEnd?Object(se.jsx)(di.a,{}):!e.lineArrowStart&&e.lineArrowEnd?Object(se.jsx)(hi.a,{}):e.lineArrowStart&&!e.lineArrowEnd?Object(se.jsx)(li.a,{}):Object(se.jsx)(bi.a,{})}},{key:"linePatternToggle",value:function(){this.setState({linePattern:!this.state.linePattern})}},{key:"lineDashedOn",value:function(){this.props.drawMode.lineDashed=!0,this.setState({linePattern:!1})}},{key:"lineDashedOff",value:function(){this.props.drawMode.lineDashed=!1,this.setState({linePattern:!1})}},{key:"linePatternIcon",value:function(){return this.props.drawMode.lineDashed?Object(se.jsx)(fi.a,{}):Object(se.jsx)(bi.a,{})}},{key:"pitchOverlaysRender",value:function(){return this.props.drawMode.pitchOverlayOptions.map((function(e,t){return Object(se.jsx)(Et.a,{control:Object(se.jsx)(At.a,{}),label:e,value:e,style:{marginLeft:0}},t)}))}},{key:"pitchOverlaysToggle",value:function(){this.setState({pitchOverlays:!this.state.pitchOverlays})}},{key:"pitchOverlayOnChange",value:function(e){this.props.drawMode.pitchOverlay=e.target.value,this.setState({open:!1,anchorEl:null,pitchOverlays:!1})}},{key:"colorSelect",value:function(e){this.close(e),this.refPaletteDialog.current.Show()}},{key:"extrasSelect",value:function(e){this.close(e),this.refExtrasDialog.current.Show()}},{key:"textSizesToggle",value:function(){this.setState({textSizes:!this.state.textSizes})}},{key:"textSizeSelected",value:function(e){var t=e.target.value;t&&(this.props.drawMode.textSize=parseInt(t)),this.textSizesToggle()}},{key:"textSizeItemsRender",value:function(){return this.props.drawMode.textSizeOptions.map((function(e,t){return Object(se.jsx)(Et.a,{control:Object(se.jsx)(At.a,{}),label:e,value:t,style:{marginLeft:0}},t)}))}},{key:"drawingModeIcon",value:function(){switch(this.props.drawMode.mode){case"line":return Object(se.jsx)(ii.a,{});case"square":return Object(se.jsx)(ai.a,{});case"ellipse":return Object(se.jsx)(si.a,{});case"text":return Object(se.jsx)(Ut.a,{});case"extras":return Object(se.jsx)(Vt.a,{});default:return Object(se.jsx)(ei.a,{})}}},{key:"render",value:function(){var e=this.props.drawMode;return Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)(jt.a,{title:"Selected draw mode",children:Object(se.jsx)(Ne.a,{"aria-label":"Selected draw mode",color:"inherit",onClick:this.open,children:this.drawingModeIcon()})}),Object(se.jsxs)(vt.a,{id:"drawingMenu",anchorEl:this.state.anchorEl,keepMounted:!0,open:this.state.open,onClose:this.close,children:[Object(se.jsxs)(gt.a,{"data-value":"select",onClick:this.close,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(ei.a,{})}),Object(se.jsx)(Ct.a,{primary:"Select / Move"})]}),Object(se.jsx)(Ot.a,{}),Object(se.jsxs)(gt.a,{onClick:this.pitchOverlaysToggle,children:[Object(se.jsx)(Ct.a,{primary:"Pitch overlay",secondary:e.pitchOverlay}),this.state.pitchOverlays?Object(se.jsx)(Jt.a,{}):Object(se.jsx)(Zt.a,{})]}),Object(se.jsx)(kt.a,{in:this.state.pitchOverlays,timeout:"auto",unmountOnExit:!0,children:Object(se.jsx)(Ft.a,{name:"radio-pitch-overlays",value:e.pitchOverlay,onChange:this.pitchOverlayOnChange,children:this.pitchOverlaysRender()})}),Object(se.jsx)(Ot.a,{}),Object(se.jsxs)(gt.a,{onClick:this.colorSelect,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(Xt.a,{style:{color:e.colorSelected}})}),Object(se.jsx)(Ct.a,{primary:"Drawing color",secondary:e.colorSelectedName})]}),Object(se.jsx)(Ot.a,{}),Object(se.jsxs)(gt.a,{"data-value":"select",onClick:this.extrasSelect,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(Vt.a,{})}),Object(se.jsx)(Ct.a,{primary:"Extras"})]}),Object(se.jsx)(Ot.a,{}),Object(se.jsxs)(gt.a,{"data-value":"line",onClick:this.close,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(ii.a,{})}),Object(se.jsx)(Ct.a,{primary:"Draw line"})]}),Object(se.jsxs)(gt.a,{onClick:this.lineArrowsToggle,children:[Object(se.jsx)(St.a,{children:this.lineArrowsIcon()}),Object(se.jsx)(Ct.a,{primary:"Line arrows"}),this.state.lineArrows?Object(se.jsx)(Jt.a,{}):Object(se.jsx)(Zt.a,{})]}),Object(se.jsx)(kt.a,{in:this.state.lineArrows,timeout:"auto",unmountOnExit:!0,children:Object(se.jsxs)(wt.a,{component:"div",disablePadding:!0,children:[Object(se.jsxs)(gt.a,{onClick:this.lineArrowEndToggle,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(hi.a,{})}),Object(se.jsx)(Ct.a,{primary:"End"}),Object(se.jsx)(Pt.a,{children:Object(se.jsx)(Dt.a,{edge:"end",onChange:this.lineArrowEndToggle,checked:e.lineArrowEnd})})]}),Object(se.jsxs)(gt.a,{onClick:this.lineArrowStartToggle,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(li.a,{})}),Object(se.jsx)(Ct.a,{primary:"Start"}),Object(se.jsx)(Pt.a,{children:Object(se.jsx)(Dt.a,{edge:"end",onChange:this.lineArrowStartToggle,checked:e.lineArrowStart})})]})]})}),Object(se.jsxs)(gt.a,{onClick:this.linePatternToggle,children:[Object(se.jsx)(St.a,{children:this.linePatternIcon()}),Object(se.jsx)(Ct.a,{primary:"Line pattern"}),this.state.linePattern?Object(se.jsx)(Jt.a,{}):Object(se.jsx)(Zt.a,{})]}),Object(se.jsx)(kt.a,{in:this.state.linePattern,timeout:"auto",unmountOnExit:!0,children:Object(se.jsxs)(wt.a,{component:"div",disablePadding:!0,children:[Object(se.jsxs)(gt.a,{onClick:this.lineDashedOff,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(bi.a,{})}),Object(se.jsx)(Ct.a,{primary:"Solid"})]}),Object(se.jsxs)(gt.a,{onClick:this.lineDashedOn,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(fi.a,{})}),Object(se.jsx)(Ct.a,{primary:"Dashed"})]})]})}),Object(se.jsx)(Ot.a,{}),Object(se.jsxs)(gt.a,{"data-value":"square",onClick:this.close,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(ai.a,{})}),Object(se.jsx)(Ct.a,{primary:"Draw square"})]}),Object(se.jsx)(Ot.a,{}),Object(se.jsxs)(gt.a,{"data-value":"ellipse",onClick:this.close,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(si.a,{})}),Object(se.jsx)(Ct.a,{primary:"Draw ellipse"})]}),Object(se.jsx)(Ot.a,{}),Object(se.jsxs)(gt.a,{"data-value":"text",onClick:this.close,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(Ut.a,{})}),Object(se.jsx)(Ct.a,{primary:"Write text",secondary:e.textSizeName})]}),Object(se.jsxs)(gt.a,{onClick:this.textSizesToggle,children:[Object(se.jsx)(Ct.a,{primary:"Text sizes"}),this.state.textSizes?Object(se.jsx)(Jt.a,{}):Object(se.jsx)(Zt.a,{})]}),Object(se.jsx)(kt.a,{in:this.state.textSizes,timeout:"auto",unmountOnExit:!0,children:Object(se.jsx)(Ft.a,{name:"radio-pitch-textSize",value:e.textSize,onChange:this.textSizeSelected,children:this.textSizeItemsRender()})})]}),Object(se.jsx)(zt,{ref:this.refPaletteDialog,drawMode:e}),Object(se.jsx)(Lt,{ref:this.refExtrasDialog,extrasCreate:this.props.extrasCreate})]})}}]),i}(n.Component);mi.defaultProps={drawMode:null,extrasCreate:null};var yi=mi,xi=i(186),vi=i.n(xi),gi=i(185),Oi=i.n(gi),ki=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).state={fullScreen:!1},n.toggleFullScreen=n.toggleFullScreen.bind(Object(d.a)(n)),n}return Object(u.a)(i,[{key:"domFullScreenToggle",value:function(e){if(e){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"toggleFullScreen",value:function(){var e=!this.state.fullScreen;this.domFullScreenToggle(e),this.setState({fullScreen:e})}},{key:"fsIconGet",value:function(){return this.state.fullScreen?Object(se.jsx)(Oi.a,{}):Object(se.jsx)(vi.a,{})}},{key:"render",value:function(){var e=this.fsIconGet(),t=this.state.fullScreen?"Exit full screen":"Enter full screen";return Object(se.jsx)(jt.a,{title:t,children:Object(se.jsx)(Ne.a,{"aria-label":t,color:"inherit",onClick:this.toggleFullScreen,children:e})})}}]),i}(n.Component),wi=i(187),Si=i.n(wi),Ci=i(188),Pi=i.n(Ci),Di=i(190),Ai=i.n(Di),Fi=i(189),Ei=i.n(Fi),_i=i(86),Mi=i.n(_i),Ti=i(396),Ii=i(362),Ki=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(u.a)(i,[{key:"handleChange",value:function(e){this.props.keyFrameDurationSet(e.target.value)}},{key:"playDisabled",value:function(){return this.props.keyFrameTotal<2}},{key:"addDisabled",value:function(){var e=this.props.keyFrameTotal-1;return this.props.keyFrameCurrent!==e}},{key:"deleteDisabled",value:function(){var e=this.props.keyFrameTotal-1;return this.props.keyFrameCurrent!==e||0===e}},{key:"previousDisabled",value:function(){return 0===this.props.keyFrameCurrent}},{key:"nextDisabled",value:function(){var e=this.props.keyFrameTotal-1;return this.props.keyFrameCurrent===e}},{key:"render",value:function(){return Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)(jt.a,{title:"Previous Key Frame",children:Object(se.jsx)("span",{children:Object(se.jsx)(Ne.a,{edge:"end",color:"inherit","aria-label":"Previous Key Frame",onClick:this.props.keyFramePrevious,disabled:this.previousDisabled(),children:Object(se.jsx)(Si.a,{})})})}),Object(se.jsx)(jt.a,{title:"Current Key Frame",children:Object(se.jsx)(Ne.a,{color:"inherit","aria-label":"Current Key Frame",children:this.props.keyFrameCurrent})}),Object(se.jsx)(jt.a,{title:"Next Key Frame",children:Object(se.jsx)("span",{children:Object(se.jsx)(Ne.a,{edge:"start",color:"inherit","aria-label":"Next Key Frame",onClick:this.props.keyFrameNext,disabled:this.nextDisabled(),children:Object(se.jsx)(Pi.a,{})})})}),Object(se.jsx)(jt.a,{title:"Add Key Frame",children:Object(se.jsx)("span",{children:Object(se.jsx)(Ne.a,{color:"inherit","aria-label":"Add Key Frame",onClick:this.props.keyFrameAdd,disabled:this.addDisabled(),children:Object(se.jsx)(Ei.a,{})})})}),Object(se.jsx)(jt.a,{title:"Delete Key Frame",children:Object(se.jsx)("span",{children:Object(se.jsx)(Ne.a,{color:"inherit","aria-label":"Add Key Frame",onClick:this.props.keyFrameDelete,disabled:this.deleteDisabled(),children:Object(se.jsx)(Mi.a,{})})})}),Object(se.jsx)(jt.a,{"data-delay-hide":"1000",title:"Select key frame duration",placement:"right",children:Object(se.jsx)(Ti.a,{variant:"standard",children:Object(se.jsxs)(Ii.a,{id:"frameDurationSelect",onChange:this.handleChange,defaultValue:5,children:[Object(se.jsx)(gt.a,{value:1,children:"1"}),Object(se.jsx)(gt.a,{value:3,children:"3"}),Object(se.jsx)(gt.a,{value:5,children:"5"}),Object(se.jsx)(gt.a,{value:7,children:"7"}),Object(se.jsx)(gt.a,{value:10,children:"10"})]})})}),Object(se.jsx)(jt.a,{title:"Play Animation",children:Object(se.jsx)("span",{children:Object(se.jsx)(Ne.a,{"aria-label":"Play Animation",color:"inherit",onClick:this.props.animPlayerShow,disabled:this.playDisabled(),children:Object(se.jsx)(Ai.a,{})})})})]})}}]),i}(n.Component);Ki.defaultProps={keyFrameCurrent:0,keyFrameTotal:0,keyFrameAdd:null,keyFrameDelete:null,keyFrameNext:null,keyFramePrevious:null,keyFrameDurationSet:null,animPlayerShow:null};var Ri=Ki,Bi=i(374),zi=i(193),Ni=i.n(zi),qi=i(194),Li=i.n(qi),Wi=i(24),Ui=i(191),Yi=i.n(Ui),Xi=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var a;return Object(h.a)(this,i),(a=t.call(this,e,n)).Show=a.Show.bind(Object(d.a)(a)),a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.signInSuccessWithAuthResult=a.signInSuccessWithAuthResult.bind(Object(d.a)(a)),a.uiConfig={signInFlow:"popup",signInOptions:[Wi.a.auth.GoogleAuthProvider.PROVIDER_ID,Wi.a.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:a.signInSuccessWithAuthResult}},a.state={open:!1},a}return Object(u.a)(i,[{key:"Show",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"signInSuccessWithAuthResult",value:function(e,t){return console.log("SignIn success",e,t),this.handleClose(),!1}},{key:"render",value:function(){return Object(se.jsxs)(Ke.a,{fullWidth:!0,maxWidth:"sm",open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",children:[Object(se.jsx)(Ue,{id:"responsive-dialog-title",onClick:this.handleClose,children:"Please select sign in method"}),Object(se.jsx)(Be.a,{dividers:!0,children:Object(se.jsx)(Yi.a,{uiConfig:this.uiConfig,firebaseAuth:this.props.firebaseApp.auth()})})]})}}]),i}(n.Component);Xi.defaultProps={firebaseApp:null};var Hi=Xi,Vi=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var r;return Object(h.a)(this,i),(r=t.call(this,e,n))._refSignInDialog=a.a.createRef(),r.userOnClick=r.userOnClick.bind(Object(d.a)(r)),r.menuOnClose=r.menuOnClose.bind(Object(d.a)(r)),r.state={menuOpen:!1,anchorEl:null},r}return Object(u.a)(i,[{key:"userOnClick",value:function(e){this.props.isSignedIn?this.setState({menuOpen:!0,anchorEl:e.currentTarget}):this._refSignInDialog.current.Show()}},{key:"menuOnClose",value:function(e){switch(e.currentTarget.dataset.value){case"user-info":default:break;case"logout":this.props.firebaseApp.auth().signOut()}this.setState({menuOpen:!1,anchorEl:null})}},{key:"render",value:function(){var e="Please sign in",t=Object(se.jsx)(Ni.a,{}),i=null;if(this.props.isSignedIn){var n=this.props.firebaseApp.auth().currentUser;e=n.displayName,n.photoURL&&(i=n.photoURL,t=null)}return Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)(jt.a,{title:e,children:Object(se.jsx)(Ne.a,{ref:this._refMenu,"aria-label":"User",color:"inherit",onClick:this.userOnClick,children:Object(se.jsx)(Bi.a,{src:i,children:t})})}),Object(se.jsxs)(vt.a,{open:this.state.menuOpen,anchorEl:this.state.anchorEl,onClose:this.menuOnClose,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(se.jsxs)(gt.a,{"data-value":"user-info",onClick:this.menuOnClose,children:[Object(se.jsx)(Bi.a,{src:i,children:t}),e]}),Object(se.jsx)(Ot.a,{}),Object(se.jsxs)(gt.a,{"data-value":"logout",onClick:this.menuOnClose,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(Li.a,{fontSize:"small"})}),"Logout"]})]}),Object(se.jsx)(Hi,{ref:this._refSignInDialog,firebaseApp:this.props.firebaseApp})]})}}]),i}(n.Component);Vi.defaultProps={firebaseApp:null,isSignedIn:!1};var Gi=Vi,Ji=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(u.a)(i,[{key:"renderAnimControls",value:function(){return this.props.animExists?Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)("div",{className:this.props.classes.grow}),Object(se.jsx)(Ri,{keyFrameCurrent:this.props.animKeyFrameCurrent,keyFrameTotal:this.props.animKeyFrameTotal,keyFrameAdd:this.props.animKeyFrameAdd,keyFrameDelete:this.props.animKeyFrameDelete,keyFrameNext:this.props.animKeyFrameNext,keyFramePrevious:this.props.animKeyFramePrevious,keyFrameDurationSet:this.props.animKeyFrameDurationSet,animPlayerShow:this.props.animPlayerShow})]}):null}},{key:"render",value:function(){return Object(se.jsx)(dt.a,{position:"fixed",children:Object(se.jsxs)(pt.a,{variant:"regular",children:[Object(se.jsx)(Ne.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:this.props.toggleDrawer,children:Object(se.jsx)(mt.a,{})}),Object(se.jsx)(bt.a,{variant:"h6",color:"inherit",children:"Futsal tactics board"}),this.renderAnimControls(),Object(se.jsx)("div",{className:this.props.classes.grow}),Object(se.jsx)(yi,{drawMode:this.props.drawMode,extrasCreate:this.props.extrasCreate}),Object(se.jsx)(jt.a,{title:"Share link",children:Object(se.jsx)(Ne.a,{"aria-label":"Share link",color:"inherit",disabled:!this.props.shareEnabled,onClick:this.props.shareTactics,children:Object(se.jsx)(xt.a,{})})}),Object(se.jsx)(ki,{}),Object(se.jsx)(Gi,{firebaseApp:this.props.firebaseApp,isSignedIn:this.props.isSignedIn})]})})}}]),i}(n.Component);Ji.defaultProps={drawMode:null,animExists:!1,animKeyFrameCurrent:0,animKeyFrameTotal:0,animKeyFrameAdd:null,animKeyFrameDelete:null,animKeyFrameNext:null,animKeyFramePrevious:null,keyFrameDurationSet:null,animPlayerShow:null,extrasCreate:null,isSignedIn:!1,firebaseApp:null,toggleDrawer:null,shareTactics:null,shareEnabled:!1};var Qi=Object(re.a)((function(e){return{grow:{flexGrow:1}}}),{withTheme:!0})(Ji),Zi=i(380),$i=i(370),en=i(387),tn=i(200),nn=i.n(tn),an=i(203),rn=i.n(an),sn=i(199),on=i.n(sn),ln=i(202),cn=i.n(ln),hn=i(201),un=i.n(hn),dn=i(198),pn=i.n(dn),bn=i(197),jn=i.n(bn),fn=Object(re.a)((function(e){return{root:{height:10,borderRadius:5,width:250},bar:{borderRadius:5,transition:"none"}}}))(en.a),mn=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).state={isOpen:!1,isPlaying:!1,isRepeat:!1,animTime:0},n.currentTime=0,n.show=n.show.bind(Object(d.a)(n)),n.handleClose=n.handleClose.bind(Object(d.a)(n)),n.playPause=n.playPause.bind(Object(d.a)(n)),n.stop=n.stop.bind(Object(d.a)(n)),n.animStep=n.animStep.bind(Object(d.a)(n)),n.repeatToggle=n.repeatToggle.bind(Object(d.a)(n)),n.keyFrameNext=n.keyFrameNext.bind(Object(d.a)(n)),n.keyFramePrevious=n.keyFramePrevious.bind(Object(d.a)(n)),n}return Object(u.a)(i,[{key:"show",value:function(){this.setState({isOpen:!0,isPlaying:!1,isRepeat:!1,animTime:0}),null!=this.props.animStart&&this.props.animStart(),this.currentTime=0,window.requestAnimationFrame(this.animStep)}},{key:"handleClose",value:function(){this.setState({isOpen:!1,isPlaying:!1,isRepeat:!1,animTime:0}),null!=this.props.animStop&&this.props.animStop()}},{key:"repeatToggle",value:function(){this.setState({isRepeat:!this.state.isRepeat})}},{key:"playPause",value:function(){this.setState({isPlaying:!this.state.isPlaying})}},{key:"stop",value:function(){this.setState({isPlaying:!1,animTime:0})}},{key:"keyFrameDurationMs",value:function(){return 1e3*this.props.keyFrameDuration}},{key:"keyFrameLast",value:function(){return this.props.keyFramesNo-1}},{key:"keyFramePreviousDisabled",value:function(){return 0===this.state.animTime}},{key:"keyFramePrevious",value:function(){var e=this.keyFrameDurationMs(),t=this.state.animTime-e;t<0&&(t=0),t=Math.floor(t/e)*e,this.setState({animTime:t})}},{key:"keyFrameNextDisabled",value:function(){return this.state.animTime>=this.animTotalTime()}},{key:"keyFrameNext",value:function(){var e=this.keyFrameDurationMs(),t=this.animTotalTime(),i=this.state.animTime+e;i>t&&(i=t),i=Math.floor(i/e)*e,this.setState({animTime:i})}},{key:"animTotalTime",value:function(){return this.keyFrameLast()*this.keyFrameDurationMs()}},{key:"animProgress",value:function(){var e=100*this.state.animTime/this.animTotalTime();return Math.round(e)}},{key:"animTime",value:function(){var e=this.state.animTime/1e3,t=Math.floor(e).toString(),i=Math.floor(1e3*(e-t)).toString();return(t="000".substring(0,3-t.length)+t)+":"+(i="000".substring(0,3-i.length)+i)}},{key:"animStep",value:function(e){var t=e-this.currentTime;this.currentTime=e;var i=this.animTotalTime(),n=this.state.animTime;this.state.isPlaying&&((n+=t)>i&&(n=this.state.isRepeat?0:i),this.setState({animTime:n})),this.state.isOpen&&(null!=this.props.animFrame&&this.props.animFrame(n),window.requestAnimationFrame(this.animStep))}},{key:"renderRepeat",value:function(){return this.state.isRepeat?Object(se.jsx)(jn.a,{}):Object(se.jsx)(pn.a,{})}},{key:"renderPlayPause",value:function(){return this.state.isPlaying?Object(se.jsx)(on.a,{}):Object(se.jsx)(nn.a,{})}},{key:"stopDisabled",value:function(){return 0===this.state.animTime}},{key:"render",value:function(){return Object(se.jsx)(Zi.a,{open:this.state.isOpen,onClose:this.handleClose,anchorEl:this.props.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{horizontal:"center",vertical:"top"},children:Object(se.jsxs)($i.a,{container:!0,alignItems:"center",children:[Object(se.jsxs)($i.a,{item:!0,children:[Object(se.jsx)(jt.a,{title:"Repeat Animation",children:Object(se.jsx)(Ne.a,{"aria-label":"Repeat Animation",color:"inherit",onClick:this.repeatToggle,children:this.renderRepeat()})}),Object(se.jsx)(jt.a,{title:"Previous key frame",children:Object(se.jsx)("span",{children:Object(se.jsx)(Ne.a,{"aria-label":"Previous key frame",color:"inherit",onClick:this.keyFramePrevious,disabled:this.keyFramePreviousDisabled(),children:Object(se.jsx)(un.a,{})})})}),Object(se.jsx)(jt.a,{title:"Play/Pause Animation",children:Object(se.jsx)(Ne.a,{"aria-label":"Play/Pause Animation",color:"inherit",onClick:this.playPause,children:this.renderPlayPause()})}),Object(se.jsx)(jt.a,{title:"Next key frame",children:Object(se.jsx)("span",{children:Object(se.jsx)(Ne.a,{"aria-label":"Previous key frame",color:"inherit",onClick:this.keyFrameNext,disabled:this.keyFrameNextDisabled(),children:Object(se.jsx)(cn.a,{})})})}),Object(se.jsx)(jt.a,{title:"Stop Animation",children:Object(se.jsx)("span",{children:Object(se.jsx)(Ne.a,{"aria-label":"Stop Animation",color:"inherit",onClick:this.stop,disabled:this.stopDisabled(),children:Object(se.jsx)(rn.a,{})})})})]}),Object(se.jsx)($i.a,{item:!0,children:Object(se.jsxs)(_t.a,{display:"flex",alignItems:"center",children:[Object(se.jsx)(_t.a,{mr:1,minWidth:55,children:Object(se.jsx)(bt.a,{variant:"body2",color:"textSecondary",children:this.animTime()})}),Object(se.jsx)(_t.a,{mr:1,children:Object(se.jsx)(fn,{variant:"determinate",value:this.animProgress()})})]})})]})})}}]),i}(n.Component);mn.defaultProps={anchorEl:null,keyFramesNo:0,keyFrameDuration:0,animStart:null,animStop:null,animFrame:null};var yn=mn,xn=i(388),vn=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var a;return Object(h.a)(this,i),(a=t.call(this,e,n)).okCallback=null,a.state={open:!1,title:"",text:""},a.Show=a.Show.bind(Object(d.a)(a)),a.handleOk=a.handleOk.bind(Object(d.a)(a)),a.handleClose=a.handleClose.bind(Object(d.a)(a)),a}return Object(u.a)(i,[{key:"Show",value:function(e,t,i){this.okCallback=i,this.setState({open:!0,title:e,text:t})}},{key:"handleClose",value:function(){this.okCallback=null,this.setState({open:!1})}},{key:"handleOk",value:function(){null!==this.okCallback&&this.okCallback(),this.handleClose()}},{key:"render",value:function(){return Object(se.jsxs)(Ke.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",children:[Object(se.jsx)(Ue,{id:"responsive-dialog-title",onClick:this.handleClose,children:this.state.title}),Object(se.jsx)(Be.a,{dividers:!0,children:Object(se.jsx)(xn.a,{children:this.state.text})}),Object(se.jsxs)(Re.a,{children:[Object(se.jsx)(Ye.a,{onClick:this.handleClose,variant:"contained",color:"primary",autoFocus:!0,children:"Cancel"}),Object(se.jsx)(Ye.a,{onClick:this.handleOk,variant:"contained",color:"secondary",children:"Ok"})]})]})}}]),i}(n.Component),gn=i(367),On=i(402),kn=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var a;return Object(h.a)(this,i),(a=t.call(this,e,n)).state={value:e.value},a.sliderChange=a.sliderChange.bind(Object(d.a)(a)),a.inputChange=a.inputChange.bind(Object(d.a)(a)),a.inputBlur=a.inputBlur.bind(Object(d.a)(a)),a.changed=a.changed.bind(Object(d.a)(a)),a}return Object(u.a)(i,[{key:"componentDidUpdate",value:function(){this.props.value!==this.state.value&&this.setState({value:this.props.value})}},{key:"changed",value:function(e){this.setState({value:e}),null!==this.props.onChange&&"number"===typeof this.state.value&&this.props.onChange(e)}},{key:"sliderChange",value:function(e,t){this.changed(t)}},{key:"inputChange",value:function(e){console.log("Input change",e.target.value);var t=""===e.target.value?"":Number(e.target.value);this.changed(t)}},{key:"numberValue",value:function(){return"number"===typeof this.state.value?this.state.value:0}},{key:"inputBlur",value:function(){var e=this.numberValue();e<0?e=0:e>255&&(e=255),this.changed(e)}},{key:"render",value:function(){var e="input-slider-"+this.props.label;return Object(se.jsxs)(_t.a,{sx:{display:"flex",alignItems:"center",mt:2},children:[Object(se.jsx)(bt.a,{id:e,sx:{width:55},component:"div",children:this.props.label}),Object(se.jsx)(gn.a,{sx:{width:"calc(100% - 110px)",ml:2,mr:2},min:0,max:255,step:1,valueLabelDisplay:"auto",value:this.numberValue(),onChange:this.sliderChange,"aria-labelledby":e}),Object(se.jsx)(On.a,{sx:{width:55},value:this.state.value,size:"small",onChange:this.inputChange,onBlur:this.inputBlur,inputProps:{min:0,max:255,step:1,type:"number","aria-labelledby":e}})]})}}]),i}(n.Component);kn.defaultProps={value:0,label:"",onChange:null};var wn=kn,Sn=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var a;return Object(h.a)(this,i),(a=t.call(this,e,n)).changed=a.changed.bind(Object(d.a)(a)),a.redChanged=a.redChanged.bind(Object(d.a)(a)),a.blueChanged=a.blueChanged.bind(Object(d.a)(a)),a.greenChanged=a.greenChanged.bind(Object(d.a)(a)),a}return Object(u.a)(i,[{key:"changed",value:function(e,t){var i=(parseInt(this.props.color.replace("#","0x"))&~(255<<t)|e<<t).toString(16),n="#000000".substr(0,7-i.length)+i;null!==this.props.onChange&&this.props.onChange(n)}},{key:"redChanged",value:function(e){this.changed(e,16)}},{key:"greenChanged",value:function(e){this.changed(e,8)}},{key:"blueChanged",value:function(e){this.changed(e,0)}},{key:"getComponents",value:function(){var e=parseInt(this.props.color.replace("#","0x"));return{red:e>>16&255,green:e>>8&255,blue:255&e}}},{key:"render",value:function(){var e=this.getComponents();return Object(se.jsxs)(_t.a,{sx:{width:300},children:[Object(se.jsx)(Mt.a,{sx:{height:90,backgroundColor:this.props.color}}),Object(se.jsx)(wn,{label:"red",value:e.red,onChange:this.redChanged}),Object(se.jsx)(wn,{label:"green",value:e.green,onChange:this.greenChanged}),Object(se.jsx)(wn,{label:"blue",value:e.blue,onChange:this.blueChanged})]})}}]),i}(n.Component);Sn.defaultProps={color:null,onChange:null};var Cn=Sn,Pn=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var a;return Object(h.a)(this,i),(a=t.call(this,e,n)).state={open:!1},a.Show=a.Show.bind(Object(d.a)(a)),a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.handleOk=a.handleOk.bind(Object(d.a)(a)),a.drawColorSelected=a.drawColorSelected.bind(Object(d.a)(a)),a.playerColorSelected=a.playerColorSelected.bind(Object(d.a)(a)),a.ballColorSelected=a.ballColorSelected.bind(Object(d.a)(a)),a.colorChanged=a.colorChanged.bind(Object(d.a)(a)),a}return Object(u.a)(i,[{key:"Show",value:function(){this.setState({open:!0,selPaletteType:"draw",selPaletteIndex:0,drawPalette:this.props.drawMode.colorOptions,playersPalette:this.props.drawMode.colorOptionsPlayer,ballsPalette:this.props.drawMode.colorOptionsBall})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"handleOk",value:function(){this.handleClose(),this.props.drawMode.updateColors(this.state.drawPalette,this.state.playersPalette,this.state.ballsPalette)}},{key:"drawColorSelected",value:function(e){this.setState({selPaletteType:"draw",selPaletteIndex:e})}},{key:"playerColorSelected",value:function(e){this.setState({selPaletteType:"player",selPaletteIndex:e})}},{key:"ballColorSelected",value:function(e){this.setState({selPaletteType:"ball",selPaletteIndex:e})}},{key:"selectedInPalette",value:function(e){return this.state.selPaletteType===e?this.state.selPaletteIndex:-1}},{key:"colorForEdit",value:function(){switch(this.state.selPaletteType){case"draw":return this.state.drawPalette[this.state.selPaletteIndex];case"player":return this.state.playersPalette[this.state.selPaletteIndex];case"ball":return this.state.ballsPalette[this.state.selPaletteIndex];default:return"#000000"}}},{key:"updatePalette",value:function(e,t){var i=this;return e.map((function(e,n){return n===i.state.selPaletteIndex?t:e}))}},{key:"colorChanged",value:function(e){switch(this.state.selPaletteType){case"draw":this.setState({drawPalette:this.updatePalette(this.state.drawPalette,e)});break;case"player":this.setState({playersPalette:this.updatePalette(this.state.playersPalette,e)});break;case"ball":this.setState({ballsPalette:this.updatePalette(this.state.ballsPalette,e)});break;default:console.error("Invalid palette type",this.state.selPaletteType)}}},{key:"render",value:function(){return Object(se.jsxs)(Ke.a,{maxWidth:"lg",fullWidth:!1,open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",children:[Object(se.jsx)(Ue,{id:"responsive-dialog-title",onClick:this.handleClose,children:"Color palette editor"}),Object(se.jsx)(Be.a,{dividers:!0,children:Object(se.jsxs)(_t.a,{sx:{display:"flex",flexWrap:"nowrap"},children:[Object(se.jsxs)(_t.a,{sx:{mr:2},children:[Object(se.jsx)(bt.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Drawings"}),Object(se.jsx)(Rt,{toolTipPrefix:"Color",palette:this.state.drawPalette,colorSelected:this.selectedInPalette("draw"),onSelected:this.drawColorSelected}),Object(se.jsx)(bt.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Teams"}),Object(se.jsx)(Rt,{toolTipPrefix:"Team",palette:this.state.playersPalette,colorSelected:this.selectedInPalette("player"),onSelected:this.playerColorSelected}),Object(se.jsx)(bt.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Balls"}),Object(se.jsx)(Rt,{toolTipPrefix:"Ball",palette:this.state.ballsPalette,colorSelected:this.selectedInPalette("ball"),onSelected:this.ballColorSelected})]}),Object(se.jsx)(Cn,{color:this.colorForEdit(),onChange:this.colorChanged})]})}),Object(se.jsxs)(Re.a,{children:[Object(se.jsx)(Ye.a,{onClick:this.handleClose,variant:"contained",color:"primary",autoFocus:!0,children:"Cancel"}),Object(se.jsx)(Ye.a,{onClick:this.handleOk,variant:"contained",color:"secondary",children:"Ok"})]})]})}}]),i}(n.Component);Pn.defaultProps={drawMode:null};var Dn=Pn,An=i(371),Fn=i(389),En=i(354),_n=i(204),Mn=i.n(_n),Tn=i(205),In=i.n(Tn),Kn=i(206),Rn=i.n(Kn),Bn=i(207),zn=i.n(Bn),Nn=i(131),qn=i.n(Nn),Ln=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).ToggleDrawer=n.ToggleDrawer.bind(Object(d.a)(n)),n.newScheme=n.newScheme.bind(Object(d.a)(n)),n.newAnimation=n.newAnimation.bind(Object(d.a)(n)),n.deleteAnimation=n.deleteAnimation.bind(Object(d.a)(n)),n.load=n.load.bind(Object(d.a)(n)),n.save=n.save.bind(Object(d.a)(n)),n.saveImage=n.saveImage.bind(Object(d.a)(n)),n.colorPaletteEdit=n.colorPaletteEdit.bind(Object(d.a)(n)),n.state={drawerOpen:!1},n}return Object(u.a)(i,[{key:"setDrawer",value:function(e){this.setState({drawerOpen:e})}},{key:"ToggleDrawer",value:function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&this.setDrawer(!this.state.drawerOpen)}},{key:"newScheme",value:function(){this.setDrawer(!1),this.props.newScheme()}},{key:"newAnimation",value:function(){this.setDrawer(!1),this.props.newAnimation()}},{key:"deleteAnimation",value:function(){this.setDrawer(!1),this.props.deleteAnimation()}},{key:"load",value:function(){this.setDrawer(!1),this.props.load()}},{key:"save",value:function(){this.setDrawer(!1),this.props.save()}},{key:"saveImage",value:function(){this.setDrawer(!1),this.props.saveImage()}},{key:"colorPaletteEdit",value:function(){this.setDrawer(!1),this.props.colorPaletteEdit()}},{key:"render",value:function(){return Object(se.jsx)(An.a,{anchor:"left",open:this.state.drawerOpen,onClose:this.ToggleDrawer,children:Object(se.jsxs)(_t.a,{p:2,children:[Object(se.jsx)(bt.a,{variant:"h4",component:"h2",children:"Tactics board"}),Object(se.jsx)(Ot.a,{}),Object(se.jsxs)(wt.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(se.jsx)(Fn.a,{children:Object(se.jsxs)(En.a,{onClick:this.newScheme,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(Mn.a,{})}),Object(se.jsx)(Ct.a,{primary:"New scheme"})]})}),Object(se.jsx)(Ot.a,{}),Object(se.jsx)(Fn.a,{children:Object(se.jsxs)(En.a,{onClick:this.newAnimation,disabled:this.props.animExists,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(In.a,{})}),Object(se.jsx)(Ct.a,{primary:"New animation"})]})}),Object(se.jsx)(Fn.a,{children:Object(se.jsxs)(En.a,{onClick:this.deleteAnimation,disabled:!this.props.animExists,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(Mi.a,{})}),Object(se.jsx)(Ct.a,{primary:"Delete animation"})]})}),Object(se.jsx)(Ot.a,{}),Object(se.jsx)(Fn.a,{children:Object(se.jsxs)(En.a,{onClick:this.load,disabled:!this.props.isSignedIn,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(qn.a,{})}),Object(se.jsx)(Ct.a,{primary:"Browse my tactics"})]})}),Object(se.jsx)(Fn.a,{children:Object(se.jsxs)(En.a,{onClick:this.save,disabled:!this.props.isSignedIn,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(Rn.a,{})}),Object(se.jsx)(Ct.a,{primary:"Save tactics board"})]})}),Object(se.jsx)(Ot.a,{}),Object(se.jsx)(Fn.a,{children:Object(se.jsxs)(En.a,{onClick:this.saveImage,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(zn.a,{})}),Object(se.jsx)(Ct.a,{primary:"Save picture"})]})}),Object(se.jsx)(Ot.a,{}),Object(se.jsx)(Fn.a,{children:Object(se.jsxs)(En.a,{onClick:this.colorPaletteEdit,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(Xt.a,{})}),Object(se.jsx)(Ct.a,{primary:"Color palette edit"})]})})]})]})})}}]),i}(n.Component);Ln.defaultProps={load:null,save:null,saveImage:null,newScheme:null,newAnimation:null,deleteAnimation:null,colorPaletteEdit:null,animExists:!1,isSignedIn:!1};var Wn=Ln,Un=i(365),Yn=i(361),Xn=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var r;return Object(h.a)(this,i),(r=t.call(this,e,n)).refName=a.a.createRef(),r.Show=r.Show.bind(Object(d.a)(r)),r.handleClose=r.handleClose.bind(Object(d.a)(r)),r.handleOk=r.handleOk.bind(Object(d.a)(r)),r.nameChange=r.nameChange.bind(Object(d.a)(r)),r.nameBlur=r.nameBlur.bind(Object(d.a)(r)),r.descriptionChange=r.descriptionChange.bind(Object(d.a)(r)),r.state={open:!1,name:"",description:"",errors:{}},r}return Object(u.a)(i,[{key:"Show",value:function(e,t){this.setState({open:!0,name:e,description:t,errors:{}})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"handleOk",value:function(){this.isValid()?(this.handleClose(),this.props.onSave(this.state.name.trim(),this.state.description.trim())):console.log("Invalid save data",this.state.errors)}},{key:"isValid",value:function(){var e=this.state.errors;for(var t in e)if(Object.hasOwnProperty.call(e,t)&&e[t].trim().length>0)return!1;return!0}},{key:"isValidRequired",value:function(e,t){var i=this.state.errors,n=!0;return i[e.id]="",0===e.value.trim().length&&(i[e.id]=t,n=!1),this.setState({errors:i}),n}},{key:"nameChange",value:function(e){this.setState({name:e.target.value})}},{key:"nameBlur",value:function(e){this.isValidRequired(e.target,"Name is required")}},{key:"descriptionChange",value:function(e){this.setState({description:e.target.value})}},{key:"render",value:function(){return Object(se.jsxs)(Ke.a,{fullWidth:!0,maxWidth:"sm",open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",children:[Object(se.jsx)(Ue,{id:"responsive-dialog-title",onClick:this.handleClose,children:"Save tactics board"}),Object(se.jsxs)(Be.a,{dividers:!0,children:[Object(se.jsx)(Xe.a,{ref:this.refName,id:"name-required",label:"Name",placeholder:"Please enter tactics name",value:this.state.name,onChange:this.nameChange,onBlur:this.nameBlur,error:""!==this.state.errors["name-required"],helperText:this.state.errors["name-required"],margin:"dense",required:!0,fullWidth:!0,autoFocus:!0}),Object(se.jsx)(Xe.a,{id:"description-optional",label:"Description (optional)",placeholder:"Short tactics description",value:this.state.description,onChange:this.descriptionChange,margin:"dense",multiline:!0,rows:4,fullWidth:!0})]}),Object(se.jsxs)(Re.a,{children:[Object(se.jsx)(Ye.a,{onClick:this.handleClose,variant:"contained",color:"primary",autoFocus:!0,children:"Cancel"}),Object(se.jsx)(Ye.a,{onClick:this.handleOk,variant:"contained",color:"secondary",children:"Ok"})]})]})}}]),i}(n.Component);Xn.defaultProps={onSave:null};var Hn=Xn,Vn=i(393),Gn=i(394),Jn=i(391),Qn=i(390),Zn=i(392),$n=i(372),ea=i(355),ta=i(368),ia=i(208),na=i.n(ia),aa=(i(173),i(28)),ra=i(71),sa=Wi.a.initializeApp({apiKey:"AIzaSyDAb0oHSQCeihL0Op9agehWqYQh1-7E4xE",authDomain:"tactics-board-1c644.firebaseapp.com",projectId:"tactics-board-1c644",storageBucket:"tactics-board-1c644.appspot.com",messagingSenderId:"704589627362",appId:"1:704589627362:web:b110cc834a5f5c19c543bb",measurementId:"G-PDXB2VPRL8"}),oa=Object(aa.h)(),la=Object(ra.c)();function ca(e,t){return ha.apply(this,arguments)}function ha(){return(ha=Object(c.a)(l.a.mark((function e(t,i){var n,a,r,s,o,c,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=sa.auth().currentUser){e.next=4;break}return console.error("User is not signed in"),e.abrupt("return");case 4:return console.log("Firebase save",t.name,t.description),a="user-tactics",e.prev=6,r={name:n.displayName},e.next=10,Object(aa.l)(Object(aa.e)(oa,a,n.uid),r,{merge:!0});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.error("Creating / updating user collection",e.t0);case 15:return s=a+"/"+n.uid,e.prev=16,o=s+"/tactics-thumbs/"+t.id+".png",c=Object(ra.d)(la,o),e.next=21,Object(ra.e)(c,i);case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),console.error("Saving user tactics thumbnail",e.t1);case 26:return e.prev=26,t.created=aa.a.fromDate(t.created),t.updated=aa.a.fromDate(t.updated),h=s+"/tactics",e.next=32,Object(aa.l)(Object(aa.e)(oa,h,t.id),t);case 32:e.next=37;break;case 34:e.prev=34,e.t2=e.catch(26),console.error("Saving user tactics",e.t2);case 37:case"end":return e.stop()}}),e,null,[[6,12],[16,23],[26,34]])})))).apply(this,arguments)}function ua(e){return da.apply(this,arguments)}function da(){return(da=Object(c.a)(l.a.mark((function e(t){var i,n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=sa.auth().currentUser){e.next=4;break}return console.error("User is not signed in"),e.abrupt("return");case 4:return e.prev=4,console.log("Loading user tactics",t),n="user-tactics/"+i.uid+"/tactics/"+t,a=Object(aa.e)(oa,n),e.next=10,Object(aa.f)(a);case 10:if((r=e.sent).exists()){e.next=14;break}return console.log("User tactics not found",t),e.abrupt("return",null);case 14:return(s=r.data()).created=new aa.a(s.created.seconds,s.created.nanoseconds).toDate(),s.updated=new aa.a(s.updated.seconds,s.updated.nanoseconds).toDate(),e.abrupt("return",s);case 20:return e.prev=20,e.t0=e.catch(4),console.error("Loading user tactics",e.t0),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[4,20]])})))).apply(this,arguments)}function pa(e){return ba.apply(this,arguments)}function ba(){return(ba=Object(c.a)(l.a.mark((function e(t){var i,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sa.auth().currentUser){e.next=4;break}return console.error("User is not signed in"),e.abrupt("return");case 4:return console.log("Loading shared tactics",t),i=null,e.prev=6,n=Object(aa.k)(Object(aa.c)(oa,"tactics"),Object(aa.n)("id","==",t)),e.next=10,Object(aa.g)(n);case 10:e.sent.forEach((function(e){(i=e.data()).created=new aa.a(i.created.seconds,i.created.nanoseconds).toDate(),i.updated=new aa.a(i.updated.seconds,i.updated.nanoseconds).toDate()})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.error("Loading shared tactics",e.t0);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}function ja(e,t){return fa.apply(this,arguments)}function fa(){return(fa=Object(c.a)(l.a.mark((function e(t,i){var n,a,r,s,o,c,h,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],a=sa.auth().currentUser){e.next=5;break}return console.error("User is not signed in"),e.abrupt("return",[null]);case 5:return r="user-tactics/"+a.uid,e.prev=6,s=r+"/tactics",o=i?Object(aa.k)(Object(aa.b)(oa,s),Object(aa.j)("updated","desc"),Object(aa.m)(i),Object(aa.i)(t)):Object(aa.k)(Object(aa.b)(oa,s),Object(aa.j)("updated","desc"),Object(aa.i)(t)),e.next=11,Object(aa.g)(o);case 11:e.sent.forEach((function(e){var t=e.data();n.push({id:t.id,name:Q(t.name),description:Q(t.description),created:new aa.a(t.created.seconds,t.created.nanoseconds).toDate(),updated:new aa.a(t.updated.seconds,t.updated.nanoseconds).toDate(),docRef:e})})),e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(6),console.log("Error fetching documents",e.t0),e.abrupt("return",[null]);case 19:e.prev=19,c=0;case 21:if(!(c<n.length)){e.next=30;break}return h=r+"/tactics-thumbs/"+n[c].id+".png",u=Object(ra.d)(la,h),e.next=26,Object(ra.b)(u);case 26:n[c].thumbnail=e.sent;case 27:c++,e.next=21;break;case 30:e.next=36;break;case 32:return e.prev=32,e.t1=e.catch(19),console.log("Error fetching thumbnails",e.t1),e.abrupt("return",[null]);case 36:return e.abrupt("return",n);case 37:case"end":return e.stop()}}),e,null,[[6,15],[19,32]])})))).apply(this,arguments)}function ma(e){return ya.apply(this,arguments)}function ya(){return(ya=Object(c.a)(l.a.mark((function e(t){var i,n,a,r,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=sa.auth().currentUser){e.next=4;break}return console.error("User is not signed in"),e.abrupt("return");case 4:return console.log("Deleting user tactics",t),n="user-tactics/"+i.uid,e.prev=6,a=n+"/tactics/"+t,r=Object(aa.e)(oa,a),e.next=11,Object(aa.d)(r);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error("Deleting user tactics",e.t0);case 16:return e.prev=16,s=n+"/tactics-thumbs/"+t+".png",o=Object(ra.d)(la,s),e.next=21,Object(ra.a)(o);case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),console.error("Deleting user tactics thumbnail",e.t1);case 26:case"end":return e.stop()}}),e,null,[[6,13],[16,23]])})))).apply(this,arguments)}var xa=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var a;return Object(h.a)(this,i),(a=t.call(this,e,n)).Show=a.Show.bind(Object(d.a)(a)),a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.loadTactics=a.loadTactics.bind(Object(d.a)(a)),a.nextPage=a.nextPage.bind(Object(d.a)(a)),a.menuOpen=a.menuOpen.bind(Object(d.a)(a)),a.menuClose=a.menuClose.bind(Object(d.a)(a)),a.state={open:!1,tactics:[null],loading:!1,loadMore:!1,menuOpen:!1,menuAnchorEl:null,menuTacticsID:null},a}return Object(u.a)(i,[{key:"Show",value:function(){this.setState({open:!0,tactics:[null],loading:!0,loadMore:!1,menuOpen:!1,menuAnchorEl:null,menuTacticsID:null}),this.firebaseList()}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"firebaseList",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja(this.props.perPage,null);case 2:t=e.sent,this.setState({tactics:t,loading:!1,loadMore:t.length===this.props.perPage});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nextPage",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,i,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),t=this.state.tactics[this.state.tactics.length-1].docRef,e.next=4,ja(this.props.perPage,t);case 4:if(0!==(i=e.sent).length){e.next=8;break}return this.setState({loading:!1,loadMore:!1}),e.abrupt("return");case 8:n=i.length===this.props.perPage,this.setState({tactics:this.state.tactics.concat(i),loading:!1,loadMore:n});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTactics",value:function(e){var t=e.currentTarget.dataset.value;t&&(this.handleClose(),this.props.onLoad(t))}},{key:"menuOpen",value:function(e){var t=e.currentTarget.dataset.value;this.setState({menuOpen:!0,menuAnchorEl:e.currentTarget,menuTacticsID:t})}},{key:"menuClose",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.currentTarget.dataset.value,e.t0=i,e.next="delete"===e.t0?4:8;break;case 4:return e.next=6,ma(this.state.menuTacticsID);case 6:return this.firebaseList(),e.abrupt("break",9);case 8:return e.abrupt("break",9);case 9:this.setState({menuOpen:!1,menuAnchorEl:null,menuTacticsID:null});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderThumbnail",value:function(e){return e?Object(se.jsx)(Qn.a,{component:"img",height:177,image:e.thumbnail,alt:e.name}):Object(se.jsx)($n.a,{variant:"rectangular",height:177})}},{key:"renderTitle",value:function(e){var t=Object(se.jsx)($n.a,{}),i=Object(se.jsx)($n.a,{}),n=e?e.id:null;return e&&(t=e.name,i=e.updated.toLocaleString()),Object(se.jsx)(Jn.a,{sx:{padding:1,display:"flex",overflow:"hidden","& .MuiCardHeader-content":{overflow:"hidden"}},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},title:t,subheader:i,action:Object(se.jsx)(Ne.a,{"aria-label":"settings","data-value":n,onClick:this.menuOpen,children:Object(se.jsx)(na.a,{})})})}},{key:"renderDescription",value:function(e){var t=Object(se.jsx)($n.a,{}),i=Object(se.jsxs)(a.a.Fragment,{children:[Object(se.jsx)($n.a,{}),Object(se.jsx)($n.a,{}),Object(se.jsx)($n.a,{width:"60%"})]});return e&&(t="created: ".concat(e.created.toLocaleString()),i=e.description),Object(se.jsxs)(Zn.a,{sx:{p:1,pt:.5,height:71},children:[Object(se.jsx)(bt.a,{component:"div",variant:"caption",color:"text.secondary",children:t}),i]})}},{key:"renderItems",value:function(){var e=this;return this.state.tactics.map((function(t,i){var n=t?t.id:null;return Object(se.jsx)($i.a,{item:!0,xs:1,children:Object(se.jsxs)(Vn.a,{sx:{width:320,marginRight:.5,my:1},children:[e.renderTitle(t),Object(se.jsxs)(Gn.a,{"data-value":n,onClick:e.loadTactics,children:[e.renderThumbnail(t),e.renderDescription(t)]})]})},i)}))}},{key:"render",value:function(){return Object(se.jsxs)(Ke.a,{fullWidth:!0,maxWidth:"lg",open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",children:[Object(se.jsx)(Ue,{id:"responsive-dialog-title",onClick:this.handleClose,children:"Browse my tactics - click on tactic to open in editor"}),Object(se.jsxs)(Be.a,{dividers:!0,children:[Object(se.jsx)($i.a,{container:!0,columns:3,children:this.renderItems()}),Object(se.jsx)(ea.a,{direction:"row",justifyContent:"center",children:Object(se.jsx)(ta.a,{onClick:this.nextPage,loading:this.state.loading,disabled:!this.state.loadMore,loadingPosition:"start",startIcon:Object(se.jsx)(qn.a,{}),variant:"contained",children:"More"})})]}),Object(se.jsx)(Re.a,{children:Object(se.jsx)(Ye.a,{onClick:this.handleClose,variant:"contained",color:"primary",autoFocus:!0,children:"Cancel"})}),Object(se.jsx)(vt.a,{open:this.state.menuOpen,anchorEl:this.state.menuAnchorEl,onClose:this.menuClose,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:Object(se.jsxs)(gt.a,{"data-value":"delete",onClick:this.menuClose,children:[Object(se.jsx)(St.a,{children:Object(se.jsx)(Mi.a,{fontSize:"small"})}),"Delete"]})})]})}}]),i}(n.Component);xa.defaultProps={onLoad:null,perPage:6};var va=xa,ga=i(209),Oa=i.n(ga),ka=function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e,n){var a;return Object(h.a)(this,i),(a=t.call(this,e,n)).Show=a.Show.bind(Object(d.a)(a)),a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.copyLink=a.copyLink.bind(Object(d.a)(a)),a.toolTipExited=a.toolTipExited.bind(Object(d.a)(a)),a.state={open:!1,id:"",name:"",description:"",copied:!1},a}return Object(u.a)(i,[{key:"Show",value:function(e,t,i){this.setState({open:!0,id:e,name:t,description:i,copied:!1})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"copyLink",value:function(){var e=document.location+"?t="+this.state.id;navigator.clipboard.writeText(e),this.setState({copied:!0})}},{key:"toolTipExited",value:function(){this.setState({copied:!1})}},{key:"render",value:function(){var e=document.location+"?t="+this.state.id,t=this.state.copied?"copied":"click to copy";return Object(se.jsxs)(Ke.a,{fullWidth:!1,maxWidth:"md",open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title",children:[Object(se.jsx)(Ue,{id:"responsive-dialog-title",onClick:this.handleClose,children:"Share tactics"}),Object(se.jsx)(Be.a,{dividers:!0,children:Object(se.jsxs)(ea.a,{spacing:2,children:[Object(se.jsx)(jt.a,{placement:"top",title:t,TransitionProps:{onExited:this.toolTipExited},children:Object(se.jsx)(Ye.a,{variant:"outlined",endIcon:Object(se.jsx)(Oa.a,{}),onClick:this.copyLink,sx:{textTransform:"none"},children:e})}),Object(se.jsx)(bt.a,{component:"div",variant:"h6",children:this.state.name}),Object(se.jsx)(bt.a,{component:"div",variant:"body2",children:this.state.description})]})}),Object(se.jsx)(Re.a,{children:Object(se.jsx)(Ye.a,{onClick:this.handleClose,variant:"contained",color:"primary",autoFocus:!0,children:"Cancel"})})]})}}]),i}(n.Component),wa=i(364),Sa=(i(262),i(263),function(e){Object(p.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).appTheme=Object(j.a)(),n.refPitchEdit=a.a.createRef(),n.refSvgToImg=a.a.createRef(),n.refConfirmDialog=a.a.createRef(),n.refAnimPlayer=a.a.createRef(),n.refDrawerMenu=a.a.createRef(),n.refPaletteEditorDialog=a.a.createRef(),n.refSaveDialog=a.a.createRef(),n.refLoadDialog=a.a.createRef(),n.refShareDialog=a.a.createRef(),n.ToggleDrawer=n.ToggleDrawer.bind(Object(d.a)(n)),n.SaveImage=n.SaveImage.bind(Object(d.a)(n)),n.NewScheme=n.NewScheme.bind(Object(d.a)(n)),n.NewAnimation=n.NewAnimation.bind(Object(d.a)(n)),n.AnimCreate=n.AnimCreate.bind(Object(d.a)(n)),n.DeleteAnimation=n.DeleteAnimation.bind(Object(d.a)(n)),n.AnimDelete=n.AnimDelete.bind(Object(d.a)(n)),n.PitchReset=n.PitchReset.bind(Object(d.a)(n)),n.ExtrasCreate=n.ExtrasCreate.bind(Object(d.a)(n)),n.OnPitchModified=n.OnPitchModified.bind(Object(d.a)(n)),n.OnDrawModeModified=n.OnDrawModeModified.bind(Object(d.a)(n)),n.SnackbarOpen=n.SnackbarOpen.bind(Object(d.a)(n)),n.SnackbarOnClose=n.SnackbarOnClose.bind(Object(d.a)(n)),n.AnimKeyFrameAdd=n.AnimKeyFrameAdd.bind(Object(d.a)(n)),n.AnimKeyFrameDelete=n.AnimKeyFrameDelete.bind(Object(d.a)(n)),n.AnimKeyFrameNext=n.AnimKeyFrameNext.bind(Object(d.a)(n)),n.AnimKeyFramePrevious=n.AnimKeyFramePrevious.bind(Object(d.a)(n)),n.AnimKeyFrameDurationSet=n.AnimKeyFrameDurationSet.bind(Object(d.a)(n)),n.AnimStart=n.AnimStart.bind(Object(d.a)(n)),n.AnimStop=n.AnimStop.bind(Object(d.a)(n)),n.AnimFrame=n.AnimFrame.bind(Object(d.a)(n)),n.animPlayerAnchorEl=n.animPlayerAnchorEl.bind(Object(d.a)(n)),n.animPlayerShow=n.animPlayerShow.bind(Object(d.a)(n)),n.LocalStorageLoad=n.LocalStorageLoad.bind(Object(d.a)(n)),n.LocalStorageSave=n.LocalStorageSave.bind(Object(d.a)(n)),n.LocalStorageDelete=n.LocalStorageDelete.bind(Object(d.a)(n)),n.ColorPaletteEdit=n.ColorPaletteEdit.bind(Object(d.a)(n)),n.showSaveDialog=n.showSaveDialog.bind(Object(d.a)(n)),n.firebaseSave=n.firebaseSave.bind(Object(d.a)(n)),n.firebaseBrowse=n.firebaseBrowse.bind(Object(d.a)(n)),n.firebaseLoad=n.firebaseLoad.bind(Object(d.a)(n)),n.ShareTactics=n.ShareTactics.bind(Object(d.a)(n)),n.pitch=n.DefaultPitch(),n.pitch.onModified=n.OnPitchModified,n.drawMode=new ae,n.drawMode.onModified=n.OnDrawModeModified,n.state={isSignedIn:!1,pitch:n.pitch,drawMode:n.drawMode,snackBar:{Show:!1,Severity:"info",Message:""}},n}return Object(u.a)(i,[{key:"componentDidMount",value:function(){var e=this;this.unregisterAuthObserver=sa.auth().onAuthStateChanged((function(t){console.log("Current user",t),e.setState({isSignedIn:!!t})})),this.LocalStorageLoad()}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver()}},{key:"DefaultPitch",value:function(){var e=Object(wa.a)(),t=new ne(e);return t.initDefault(200,8,120,100,5,80),t}},{key:"PitchReset",value:function(){console.log("Pitch reset"),this.pitch.onModified=null,this.pitch=this.DefaultPitch(),this.pitch.onModified=this.OnPitchModified,this.drawMode.onModified=null,this.drawMode=new ae,this.drawMode.onModified=this.OnDrawModeModified,this.setState({pitch:this.pitch,drawMode:this.drawMode}),this.LocalStorageDelete()}},{key:"OnPitchModified",value:function(e){this.pitch.onModified=null,this.pitch=e,this.pitch.onModified=this.OnPitchModified,this.setState({pitch:this.pitch})}},{key:"OnDrawModeModified",value:function(e){this.drawMode.onModified=null,this.drawMode=e,this.drawMode.onModified=this.OnDrawModeModified,this.setState({drawMode:this.drawMode}),this.pitch.overlay=this.drawMode.pitchOverlay}},{key:"ToggleDrawer",value:function(e){this.refDrawerMenu.current.ToggleDrawer(e)}},{key:"NewScheme",value:function(){this.state.pitch.isModified&&this.refConfirmDialog.current.Show("Create new scheme","Pitch is modified, are you sure you want to discard changes?",this.PitchReset)}},{key:"NewAnimation",value:function(){this.refConfirmDialog.current.Show("Create new animation","Are you sure you want to create new animation?",this.AnimCreate)}},{key:"DeleteAnimation",value:function(){this.refConfirmDialog.current.Show("Delete animation","Are you sure you want to delete animation, only first key frame will be kept?",this.AnimDelete)}},{key:"SaveImage",value:function(){console.log("App save image");var e=this.refPitchEdit.current.getSVG();this.refSvgToImg.current.toImg(e.svgText,e.width,e.height,e.width/2,e.height/2)}},{key:"ColorPaletteEdit",value:function(){this.refPaletteEditorDialog.current.Show()}},{key:"showSaveDialog",value:function(){this.refSaveDialog.current.Show(this.state.pitch.name,this.state.pitch.description)}},{key:"firebaseSave",value:function(){var e=Object(c.a)(l.a.mark((function e(t,i){var n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.isSignedIn){e.next=3;break}return console.error("User is not signed in"),e.abrupt("return");case 3:return this.state.pitch.setNameAndDescription(t,i),n=this.LocalStorageSave(),a=this.refPitchEdit.current.getSVG(),320,r=320*a.height/a.width,e.next=10,this.refSvgToImg.current.toBlob(a.svgText,a.width,a.height,320,r);case 10:return s=e.sent,e.next=13,ca(n,s);case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"firebaseBrowse",value:function(){this.refLoadDialog.current.Show()}},{key:"firebaseLoad",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.isSignedIn){e.next=3;break}return console.error("User is not signed in"),e.abrupt("return");case 3:return e.next=5,ua(t);case 5:i=e.sent,this.editTactics(i,!0,!1);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"firebaseLoadShared",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.isSignedIn){e.next=3;break}return console.error("User is not signed in"),e.abrupt("return");case 3:return e.next=5,pa(t);case 5:i=e.sent,this.editTactics(i,!0,!0);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editTactics",value:function(e,t,i){null!==e&&(i&&(e.id=Object(wa.a)()),this.state.pitch.load(e),e.settings&&this.state.drawMode.updateColors(e.settings.objectColors,e.settings.playerColors,e.settings.ballColors),t&&this.LocalStorageSave())}},{key:"LocalStorageSave",value:function(){console.log("Saving to localStorage.");var e=this.state.pitch.save();return e.settings={objectColors:this.state.drawMode.colorOptions,playerColors:this.state.drawMode.colorOptionsPlayer,ballColors:this.state.drawMode.colorOptionsBall},localStorage.setItem("tactics-board-current",JSON.stringify(e)),e}},{key:"LocalStorageLoad",value:function(){var e=localStorage.getItem("tactics-board-current");if(null!==e){console.log("Loading from localStorage.");var t=JSON.parse(e);this.state.pitch.load(t),t.settings&&this.state.drawMode.updateColors(t.settings.objectColors,t.settings.playerColors,t.settings.ballColors)}}},{key:"LocalStorageDelete",value:function(){console.log("Deleting from localStorage."),localStorage.removeItem("tactics-board-current")}},{key:"SnackbarOpen",value:function(e,t){this.setState({snackBar:{Show:!0,Severity:e,Message:t}})}},{key:"SnackbarOnClose",value:function(){var e=this.state.snackBar.Severity,t=this.state.snackBar.Message;this.setState({snackBar:{Show:!1,Severity:e,Message:t}})}},{key:"ExtrasCreate",value:function(e,t,i){this.pitch.extrasCreate(e,this.state.drawMode.color,t,i)}},{key:"AnimCreate",value:function(){this.pitch.animCreate()}},{key:"AnimDelete",value:function(){this.pitch.animDelete()}},{key:"AnimKeyFrameAdd",value:function(){this.pitch.animKeyFrameAdd()?this.SnackbarOpen("success","New key frame added to animation"):this.SnackbarOpen("error","Can't add new key frame no change is done to current key frame")}},{key:"AnimKeyFrameDelete",value:function(){this.pitch.animKeyFrameDelete()?this.SnackbarOpen("success","Key frame deleted from animation"):this.SnackbarOpen("error","Can't delete key frame, only last can be deleted.")}},{key:"AnimKeyFrameNext",value:function(){this.pitch.animKeyFrameNext()||this.SnackbarOpen("warning","No more key frames to navigate")}},{key:"AnimKeyFramePrevious",value:function(){this.pitch.animKeyFramePrevious()||this.SnackbarOpen("warning","You are on first key frame")}},{key:"AnimKeyFrameDurationSet",value:function(e){this.pitch.animKeyFrameDurationSet(e)||this.SnackbarOpen("info","You set the frame duration to ".concat(e,"s"))}},{key:"AnimStart",value:function(){this.state.pitch.animStart()}},{key:"AnimStop",value:function(){this.state.pitch.animStop()}},{key:"AnimFrame",value:function(e){this.state.pitch.animFrame(e)}},{key:"animPlayerAnchorEl",value:function(){return this.refPitchEdit.current}},{key:"animPlayerShow",value:function(){this.state.pitch.AnimKeyFrames.length<2?this.SnackbarOpen("warning","No animation is created"):this.refAnimPlayer.current.show()}},{key:"ShareTactics",value:function(){this.refShareDialog.current.Show(this.state.pitch.id,this.state.pitch.name,this.state.pitch.description)}},{key:"render",value:function(){return Object(se.jsx)(f.a,{injectFirst:!0,children:Object(se.jsxs)(m.a,{theme:this.appTheme,children:[Object(se.jsx)(Qi,{drawMode:this.state.drawMode,saveImage:this.SaveImage,animExists:this.state.pitch.AnimExists,animKeyFrameCurrent:this.state.pitch.AnimKeyFrameCurrent,animKeyFrameTotal:this.state.pitch.AnimKeyFrames.length,animKeyFrameAdd:this.AnimKeyFrameAdd,animKeyFrameDelete:this.AnimKeyFrameDelete,animKeyFrameNext:this.AnimKeyFrameNext,animKeyFramePrevious:this.AnimKeyFramePrevious,animKeyFrameDurationSet:this.AnimKeyFrameDurationSet,animPlayerShow:this.animPlayerShow,extrasCreate:this.ExtrasCreate,isSignedIn:this.state.isSignedIn,firebaseApp:sa,toggleDrawer:this.ToggleDrawer,shareTactics:this.ShareTactics,shareEnabled:this.state.pitch.shareEnabled()}),Object(se.jsx)(Wn,{ref:this.refDrawerMenu,load:this.firebaseBrowse,save:this.showSaveDialog,saveImage:this.SaveImage,newScheme:this.NewScheme,newAnimation:this.NewAnimation,deleteAnimation:this.DeleteAnimation,colorPaletteEdit:this.ColorPaletteEdit,animExists:this.state.pitch.AnimExists,isSignedIn:this.state.isSignedIn}),Object(se.jsx)(ht,{ref:this.refPitchEdit,pitch:this.state.pitch,drawMode:this.state.drawMode,viewBoxLeft:0,viewBoxTop:0,viewBoxRight:4500,viewBoxBottom:2500}),Object(se.jsx)(yn,{ref:this.refAnimPlayer,anchorEl:this.animPlayerAnchorEl,keyFramesNo:this.state.pitch.AnimKeyFrames.length,keyFrameDuration:this.state.pitch.AnimKeyFrameDuration,animStart:this.AnimStart,animStop:this.AnimStop,animFrame:this.AnimFrame}),Object(se.jsx)(vn,{ref:this.refConfirmDialog}),Object(se.jsx)(Dn,{ref:this.refPaletteEditorDialog,drawMode:this.state.drawMode}),Object(se.jsx)(Hn,{ref:this.refSaveDialog,onSave:this.firebaseSave}),Object(se.jsx)(va,{ref:this.refLoadDialog,onLoad:this.firebaseLoad}),Object(se.jsx)(ka,{ref:this.refShareDialog}),Object(se.jsx)(Un.a,{open:this.state.snackBar.Show,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:2e3,onClose:this.SnackbarOnClose,children:Object(se.jsx)(Yn.a,{elevation:6,variant:"filled",onClose:this.SnackbarOnClose,severity:this.state.snackBar.Severity,children:this.state.snackBar.Message})}),Object(se.jsx)(ut.a,{ref:this.refSvgToImg})]})})}}]),i}(n.Component)),Ca=Sa,Pa=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,404)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;i(e),n(e),a(e),r(e),s(e)}))},Da=i(357);i(264);s.a.render(Object(se.jsxs)(a.a.StrictMode,{children:[Object(se.jsx)(Da.a,{}),Object(se.jsx)(Ca,{})]}),document.getElementById("root")),Pa()}},[[265,1,2]]]);
//# sourceMappingURL=main.25e013b9.chunk.js.map