{"version":3,"sources":["editors/SvgToImg.js","pitch/Point.js","pitch/Ball.js","pitch/Player.js","pitch/Box.js","pitch/Square.js","pitch/Ellipse.js","pitch/Path.js","pitch/Line.js","pitch/Text.js","pitch/Constants.js","pitch/Extras.js","pitch/AnimKeyFrame.js","pitch/PitchFutsal.js","pitch/DrawMode.js","editors/RotateHandle.js","editors/PlayerEdit.js","editors/BallEdit.js","editors/DragHandle.js","editors/EditBox.js","editors/SquareEdit.js","editors/EllipseEdit.js","editors/LineEdit.js","editors/TextEdit.js","editors/Goal.js","editors/Ladder.js","editors/Cone.js","editors/Flag.js","editors/ExtrasEdit.js","ui/elements/DialogTitleClose.js","editors/PlayerDialog.js","editors/PitchEdit.js","ui/elements/ColorPalette.js","ui/PaletteDialog.js","ui/ExtrasDialog.js","ui/DrawMenu.js","ui/FullscreenToggle.js","ui/AnimControls.js","ui/SignInDialog.js","ui/UserAccount.js","ui/AppTools.js","ui/AnimPlayer.js","ui/ConfirmDialog.js","ui/elements/ColorComponent.js","ui/elements/ColorEditor.js","ui/PaletteEditorDialog.js","ui/DrawerMenu.js","ui/SaveDialog.js","firebaseSDK.js","ui/BrowseDialog.js","ui/ShareDialog.js","App.js","reportWebVitals.js","index.js"],"names":["SvgToImg","svgText","orgWidth","orgHeight","imgWidth","imgHeight","a","Promise","resolve","reject","img","document","createElement","addEventListener","e","canvas","width","height","getContext","drawImage","toBlob","blob","error","encodedString","Buffer","toString","onerror","src","this","FileSaver","saveAs","console","style","display","Component","Point","x","y","p","deltaX","deltaY","Ball","id","color","pos","posDefault","save","clone","b","equalTo","Player","no","name","rotation","noDefault","isEdit","posX","posY","snap","log","vx","vy","angle","Math","atan2","PI","floor","Box","Square","x1","y1","dashed","x2","y2","proportional","szy","corner","cx","cy","Ellipse","rx","ry","Path","p1","p2","c1","c2","arrowStart","arrowEnd","k","t","p0","p3","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","l1x","l1y","l2x","l2y","l3x","l3y","t1","t2","t3","t4","t5","CubicBezier","Line","linearControlPoints","lx","ly","pid","move","computeControlPoints","paths","K","n","length","c","r","i","m","Text","size","text","isTextEdit","bx","by","bwidth","bheight","ElementIDPrefix","ExtrasType","ExtrasDefaults","viewBoxScale","RemoveTags","str","replace","Extras","AnimKeyFrame","players","playerPaths","balls","ballPaths","playerPathSplines","ballPathSplines","map","pp","bp","data","l","index","keyFramePos","scale","idx","splinePos","splinePathPos","isPlaced","pc","splines","position","bc","playerPathID","ballPathID","kf","PitchFutsal","uuid","description","created","Date","updated","widthPitch","heightPitch","AnimExists","AnimKeyFrameCurrent","AnimKeyFrameDuration","AnimKeyFrames","AnimPlaying","AnimPlayers","AnimBalls","squareID","squares","ellipseID","ellipses","lineID","lines","textID","texts","extrasID","extras","_overlay","isModified","onModified","top","left","pPos","pitchPos","noPlayers","noPlayerColors","playerSize","noBalls","noBallColors","ballSize","_initPlayers","_initBalls","push","goalExtras","playersPos","groupSize","number","player","bPos","ballsPos","ball","cp","overlay","sq","el","ex","load","tx","_modified","trim","duration","newDuration","parseInt","isNaN","last","beforeLast","newKeyFrame","next","animPreCalcSplines","animFrame","time","kfDuration","keyFrame","kfPos","keyFrameShow","animatePlayersOnPaths","animateBallsOnPaths","playersCurrentKeyFrame","playerAdjustAnimPaths","startsWith","rotate","lineResizeP2","playerPathsCurrentKeyFrame","lineResizeP1","find","remove","reset","ballsCurrentKeyFrame","ballAdjustAnimPaths","ballPathsCurrentKeyFrame","lineDelete","ellipseDelete","squareDelete","textDelete","extrasDelete","isDashed","lineNewID","resizeP1","resizeP2","edit","lineOrPathEdit","filter","empty","ellipseNewID","resize","squareNewID","s","textNewID","extrasNewID","isRotatable","squareEdit","ellipseEdit","extrasEdit","textMove","playerRotate","squareRotate","ellipseRotate","extrasRotate","textRotate","lineEditEnd","squareEditEnd","ellipsesEditEnd","extrasEditEnd","textEditEnd","playerEditEnd","value","DrawMode","_mode","_lineArrowStart","_lineArrowEnd","_lineDashed","_color","_textSize","_pitchOverlay","_objectColors","_playerColors","_ballColors","dm","mode","lineArrowStart","lineArrowEnd","lineDashed","textSize","pitchOverlay","objectColors","playerColors","ballColors","textSizeOptions","RotateHandle","box","props","half","Fragment","className","defaultProps","PlayerEdit","pl","transform","strokeWidth","strokeLinecap","renderRotateHandle","editID","editClassName","isPrevFrame","textAnchor","strokeOpacity","renderPlayerName","renderHands","dominantBaseline","BallEdit","xmlns","viewBox","d","ballImage","DragHandle","EditBox","showResize","tl","tr","bl","br","showRotate","boxClass","showBox","renderHandles","SquareEdit","square","editBox","EllipseEdit","ellipse","LineEdit","isPath","key","markerStart","markerEnd","line","allPaths","renderPath","editHandles","TextEdit","_selectionStart","_selectionEnd","_boxPadding","_editRef","React","createRef","_textRef","_cursorRef","_boxRef","editStart","bind","editChange","editKeyUp","editEnd","prevProps","prevState","current","focus","firstChild","removeChild","ln","tspan","createElementNS","setAttribute","textContent","appendChild","cln","bBox","selectionStart","selectionEnd","editShowCursor","removeText","txt","addTextLine","cr","getExtentOfChar","drawCursor","bb","getBBox","drawTextBoundingBox","onEditDone","ref","onFocus","onInput","onKeyUp","onBlur","split","dy","xmlSpace","renderLines","editor","Goal","w","h","hW","hH","tlX","tlY","trX","trY","brX","brY","fill","stroke","strokeDasharray","Ladder","xL","xR","yT","noSteps","yStep","Array","yB","steps","Cone","points","shape","forEach","Flag","lX","tY","bY","ExtrasEdit","isBoxVisible","isResizable","renderGfx","DialogTitleClose","DialogTitle","children","IconButton","onClick","sx","right","PlayerDialog","state","open","_refName","_refNumber","openDialog","close","setState","Number","Dialog","onClose","DialogContent","dividers","TextField","inputRef","margin","defaultValue","label","type","fullWidth","autoFocus","DialogActions","Button","variant","DragObject","DragObjectCheck","prefix","removePrefix","typ","PitchEdit","_bgRef","_playerDialogRef","_pitch","pitch","_dragNode","_dragObjectType","_mouseX","_mouseY","hContextMenu","hMouseDown","hMouseUp","hMouseMove","textEditDone","playerEditDone","getBoundingClientRect","X","Y","getScale","clientX","clientY","resetMouseDrag","scaleX","scaleY","button","target","classList","contains","getAttribute","chk","editNode","editPlayer","playerEditStart","playerMove","ballMove","editTopLeft","editTopRight","editBottomLeft","editBottomRight","editMove","editRotate","lineEdit","drawMode","playerEditStarted","squareEditStart","ellipseEditStart","lineEditStart","textEditStart","extrasEditStart","preventDefault","getRealPosition","lineCreate","squareCreate","ellipseCreate","textCreate","elementDelete","isDragStarted","isShift","getModifierState","lineCleanup","squareCleanup","ellipseCleanup","objectDrag","endAllEdits","lineResize","squareResize","ellipseResize","outerHTML","keyPrefix","o","overlaySize","colorOptions","col","concat","editColorIndex","editColor","colorOptionsPlayer","colorOptionsBall","editorWidth","editorHeight","pitchClasses","classes","offset","pitchTransform","onContextMenu","onMouseDown","onMouseUp","onMouseMove","generatePicthStyles","patternUnits","markerWidth","markerHeight","refX","refY","orient","markerUnits","fillOpacity","renderPitchOverlay","renderEllipses","renderSquares","renderExtras","fontSize","renderPlayers","playersPreviousKeyFrame","renderBalls","ballsPreviousKeyFrame","renderTexts","withStyles","theme","paddingTop","mixins","toolbar","minHeight","withTheme","ColorPalette","context","selected","onSelected","palette","isChecked","colorWidth","colorHeight","border","borderColor","justifyContent","alignItems","backgroundColor","checkIconFontSize","icon","radioIcon","checked","title","toolTipPrefix","colorSelected","Tooltip","placement","Paper","Radio","checkedIcon","onChange","flexWrap","colors","PaletteDialog","Show","handleClose","ExtrasDialog","extrasChange","extrasCreate","def","extrasType","Error","SvgIcon","getExtrasGfx","val","ico","textAlign","radio","renderRadios","padding","DrawMenu","anchorEl","lineArrows","linePattern","pitchOverlays","textSizes","refPaletteDialog","refExtrasDialog","lineArrowsToggle","lineArrowEndToggle","lineArrowStartToggle","linePatternToggle","lineDashedOn","lineDashedOff","pitchOverlaysToggle","pitchOverlayOnChange","colorSelect","extrasSelect","textSizesToggle","textSizeSelected","currentTarget","dataset","pitchOverlayOptions","FormControlLabel","control","marginLeft","sz","drawingModeIcon","keepMounted","MenuItem","ListItemIcon","ListItemText","primary","Divider","secondary","Collapse","in","timeout","unmountOnExit","RadioGroup","pitchOverlaysRender","colorSelectedName","lineArrowsIcon","List","component","disablePadding","ListItemSecondaryAction","Switch","edge","linePatternIcon","textSizeName","textSizeItemsRender","FullscreenToggle","fullScreen","toggleFullScreen","toFullScreen","elem","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","isFullScreen","domFullScreenToggle","fsIcon","fsIconGet","fsLabel","AnimControls","handleChange","event","keyFrameDurationSet","keyFrameTotal","lastKeyFrame","keyFrameCurrent","keyFramePrevious","disabled","previousDisabled","keyFrameNext","nextDisabled","keyFrameAdd","addDisabled","keyFrameDelete","deleteDisabled","FormControl","Select","animPlayerShow","playDisabled","SignInDialog","signInSuccessWithAuthResult","uiConfig","signInFlow","signInOptions","firebase","auth","GoogleAuthProvider","PROVIDER_ID","EmailAuthProvider","callbacks","authResult","redirectUrl","maxWidth","firebaseAuth","firebaseApp","UserAccount","_refSignInDialog","userOnClick","menuOnClose","menuOpen","isSignedIn","signOut","userName","avatarIcon","avatarSrc","user","currentUser","displayName","photoURL","_refMenu","Avatar","PaperProps","elevation","overflow","mt","ml","mr","content","bgcolor","zIndex","transformOrigin","horizontal","vertical","anchorOrigin","AppTools","animExists","grow","animKeyFrameCurrent","animKeyFrameTotal","animKeyFrameAdd","animKeyFrameDelete","animKeyFrameNext","animKeyFramePrevious","animKeyFrameDurationSet","AppBar","Toolbar","toggleDrawer","Typography","renderAnimControls","shareEnabled","shareTactics","flexGrow","BorderLinearProgress","root","borderRadius","bar","transition","LinearProgress","AnimPlayer","isOpen","isPlaying","isRepeat","animTime","currentTime","show","playPause","stop","animStep","repeatToggle","animStart","window","requestAnimationFrame","animStop","keyFrameDuration","keyFramesNo","keyFrameDurationMs","animTotalTime","totalTime","keyFrameLast","pct","round","timeSec","sec","msec","substring","elapsedTime","Popover","Grid","container","item","renderRepeat","keyFramePreviousDisabled","renderPlayPause","keyFrameNextDisabled","stopDisabled","minWidth","animProgress","ConfirmDialog","okCallback","handleOk","fnCallback","DialogContentText","ColorComponent","sliderChange","inputChange","inputBlur","changed","newValue","numberValue","Slider","min","max","step","valueLabelDisplay","Input","inputProps","ColorEditor","redChanged","blueChanged","greenChanged","shift","strNewColor","substr","red","green","blue","getComponents","PaletteEditorDialog","drawColorSelected","playerColorSelected","ballColorSelected","colorChanged","selPaletteType","selPaletteIndex","drawPalette","playersPalette","ballsPalette","updateColors","paletteType","newColor","updatePalette","gutterBottom","selectedInPalette","colorForEdit","DrawerMenu","ToggleDrawer","newScheme","newAnimation","deleteAnimation","saveImage","colorPaletteEdit","drawerOpen","setDrawer","Drawer","anchor","ListItem","ListItemButton","SaveDialog","refName","nameChange","nameBlur","descriptionChange","errors","isValid","onSave","err","Object","hasOwnProperty","call","errorText","isValidRequired","placeholder","helperText","required","multiline","rows","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","getFirestore","storage","getStorage","fbSave","tactics","thumbnailBlob","tacticsCollection","userCollection","setDoc","doc","uid","merge","userTacticsRoot","userTacticsThumbs","thumbRef","refFile","uploadBytes","Timestamp","fromDate","userTacticsCollection","fbLoad","tacticsID","userTacticsPath","tacticsRef","getDoc","res","exists","seconds","nanoseconds","toDate","fbLoadShared","tacticsQuery","query","collectionGroup","where","getDocs","fbList","tacticsPerPage","afterDoc","tacticsList","q","collection","orderBy","startAfter","limit","dta","docRef","refTmb","getDownloadURL","thumbnail","fbDelete","deleteDoc","userTacticsThumb","deleteObject","BrowseDialog","loadTactics","nextPage","menuClose","loading","loadMore","menuAnchorEl","menuTacticsID","firebaseList","perPage","onLoad","selectedValue","CardMedia","image","alt","Skeleton","subheader","toLocaleString","CardHeader","titleTypographyProps","noWrap","subheaderTypographyProps","action","CardContent","pt","xs","Card","marginRight","my","renderTitle","CardActionArea","renderThumbnail","renderDescription","columns","renderItems","Stack","direction","LoadingButton","loadingPosition","startIcon","ShareDialog","copyLink","toolTipExited","copied","lnk","location","navigator","clipboard","writeText","tooltipTitle","spacing","TransitionProps","onExited","endIcon","textTransform","App","appTheme","createTheme","refPitchEdit","refSvgToImg","refConfirmDialog","refAnimPlayer","refDrawerMenu","refPaletteEditorDialog","refSaveDialog","refLoadDialog","refShareDialog","SaveImage","NewScheme","NewAnimation","AnimCreate","DeleteAnimation","AnimDelete","PitchReset","ExtrasCreate","OnPitchModified","OnDrawModeModified","SnackbarOpen","SnackbarOnClose","AnimKeyFrameAdd","AnimKeyFrameDelete","AnimKeyFrameNext","AnimKeyFramePrevious","AnimKeyFrameDurationSet","AnimStart","AnimStop","AnimFrame","animPlayerAnchorEl","LocalStorageLoad","LocalStorageSave","LocalStorageDelete","ColorPaletteEdit","showSaveDialog","firebaseSave","firebaseBrowse","firebaseLoad","ShareTactics","DefaultPitch","snackBar","Severity","Message","unregisterAuthObserver","onAuthStateChanged","uuidv4","initDefault","newPitch","newDrawMode","svg","getSVG","toImg","setNameAndDescription","tmbHeight","editTactics","toLocalStorage","changeID","settings","localStorage","setItem","JSON","stringify","json","getItem","parse","removeItem","severity","message","animCreate","animDelete","StyledEngineProvider","injectFirst","ThemeProvider","Snackbar","autoHideDuration","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","CssBaseline","getElementById"],"mappings":"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","file":"static/js/main.9ba7c372.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport FileSaver from 'browser-filesaver';\n\nclass SvgToImg extends Component {\n\t//constructor(props) {\n\t//\tsuper(props);\n\t//}\n\t\n\tasync toBlob(svgText, orgWidth, orgHeight, imgWidth, imgHeight) {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\t// Create image\n\t\t\tconst img = document.createElement('img');\n\t\t\t// when loaded draw and save\n\t\t\timg.addEventListener('load', e=> {\n\t\t\t\ttry {\n\t\t\t\t\tconst canvas = document.createElement('canvas');\n\t\t\t\t\tcanvas.width = imgWidth;\n\t\t\t\t\tcanvas.height = imgHeight;\n\t\n\t\t\t\t\t// draw image\n\t\t\t\t\tconst ctx = canvas.getContext(\"2d\");\n\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\timg,\t//e.target,\n\t\t\t\t\t\t0, 0, orgWidth, orgHeight,\n\t\t\t\t\t\t0, 0, orgWidth, orgHeight\n\t\t\t\t\t);\n\t\t\t\t\t// resolve save image\n\t\t\t\t\tcanvas.toBlob((blob) => {\n\t\t\t\t\t\tresolve(blob)\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// prepare svg to load image\n\t\t\tconst encodedString = 'data:image/svg+xml;base64,' + new Buffer(svgText).toString('base64');\n\t\t\timg.onerror = reject;\t\t// setup rejection\n\t\t\timg.src = encodedString;\t// start loading image\n\t\t});\n\t}\n\n\t// save image from svg text to file\n\tasync toImg(svgText, orgWidth, orgHeight, imgWidth, imgHeight) {\n\t\ttry {\n\t\t\tconst blob = await this.toBlob(svgText, orgWidth, orgHeight, imgWidth, imgHeight);\n\t\t\tFileSaver.saveAs(blob, \"tactics-board.png\");\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error saving image\",error);\t\t\t\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (<div style={{display:\"block\"}}></div>);\n\t}\n}\n\nexport default SvgToImg;","class Point {\n\tconstructor(x=0, y=0){\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tequalTo(p) {\n\t\treturn p.x === this.x && p.y === this.y\n\t}\n\n\tmove(deltaX, deltaY) {\n\t\tthis.x += deltaX;\n\t\tthis.y += deltaY;\n\t}\n\n\tclone() {\n\t\treturn new Point(this.x, this.y);\n\t}\n\n\tsave() {\n\t\treturn {\n\t\t\tx: this.x,\n\t\t\ty: this.y\n\t\t}\n\t}\n}\n\nexport default Point;\n","import Point from \"./Point\";\n\nclass Ball {\n\tconstructor(id=\"\", color=0, pos=new Point(0,0), posDefault=new Point(0,0)){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.pos = pos;\n\t\tthis.posDefault = posDefault;\n\t}\n\n\tsave() {\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tcolor: this.color,\n\t\t\tpos: this.pos.save(),\n\t\t\tposDefault: this.posDefault.save()\n\t\t};\n\t}\n\n\treset() {\n\t\tthis.pos = this.posDefault.clone();\n\t}\n\n\tclone() {\n\t\treturn new Ball(\n\t\t\tthis.id, \n\t\t\tthis.color, \n\t\t\tthis.pos.clone(),\n\t\t\tthis.posDefault.clone()\n\t\t);\n\t}\n\n\tequalTo(b) {\n\t\treturn this.id === b.id\n\t\t\t&& this.color === b.color\n\t\t\t&& this.pos.equalTo(b.pos)\n\t\t\t&& this.posDefault.equalTo(b.posDefault)\n\t}\n\n\tget isPlaced() {\n\t\treturn !this.pos.equalTo(this.posDefault);\n\t}\n}\n\nexport default Ball;\n","import Point from \"./Point\";\n\nclass Player {\n\tconstructor(id=\"\", no=\"0\", name=\"\", color=0, pos=new Point(0,0), rotation=0, posDefault=new Point(0,0), noDefault=\"0\"){\n\t\tthis.id = id;\n\t\tthis.no = no;\n\t\tthis.name = name;\n\t\tthis.color = color;\n\t\tthis.pos = pos;\n\t\tthis.rotation = rotation;\n\t\tthis.posDefault = posDefault;\n\t\tthis.noDefault = noDefault;\n\t\tthis.isEdit = false;\n\t}\n\n\tsave() {\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tno: this.no,\n\t\t\tname: this.name,\n\t\t\tcolor: this.color,\n\t\t\tpos: this.pos.save(),\n\t\t\trotation: this.rotation,\n\t\t\tposDefault: this.posDefault.save(),\n\t\t\tnoDefault: this.noDefault\n\t\t};\n\t}\n\n\treset() {\n\t\tthis.pos = this.posDefault.clone();\n\t\tthis.rotation = 0;\n\t\tthis.name = \"\";\n\t\tthis.no = this.noDefault;\n\t\tthis.isEdit = false;\n\t}\n\n\tclone() {\n\t\treturn new Player(\n\t\t\tthis.id, \n\t\t\tthis.no, \n\t\t\tthis.name, \n\t\t\tthis.color, \n\t\t\tthis.pos.clone(),\n\t\t\tthis.rotation,\n\t\t\tthis.posDefault.clone(),\n\t\t\tthis.noDefault\n\t\t);\n\t}\n\n\tequalTo(p) {\n\t\treturn this.id === p.id\n\t\t\t&& this.no === p.no\n\t\t\t&& this.name === p.name\n\t\t\t&& this.color === p.color\n\t\t\t&& this.pos.equalTo(p.pos)\n\t\t\t&& this.rotation === p.rotation\n\t\t\t&& this.posDefault.equalTo(p.posDefault)\n\t\t\t&& this.noDefault === p.noDefault\n\t}\n\n\tget isPlaced() {\n\t\treturn !this.pos.equalTo(this.posDefault);\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tconsole.log(this.pos);\n\t\t//console.log(posX, posY, this.pos.x, this.pos.y);\n\t\tlet vx = posX - this.pos.x;\n\t\tlet vy = posY - this.pos.y;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Player;\n","class Box {\n\tconstructor(id=\"\", x=0, y=0, width=0, height=0){\n\t\tthis.id = id;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n}\n\nexport default Box;\n","import Box from './Box';\n\nclass Square {\n\tconstructor(id=\"\", color=0, x1=0, y1=0, width=0, height=0, rotation=0, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x1 + width;\n\t\tthis.y2 = y1 + height;\n\t\tthis.rotation = rotation;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tsave() {\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tcolor: this.color,\n\t\t\tx1: this.x1,\n\t\t\ty1: this.y1,\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\trotation: this.rotation,\n\t\t\tdashed: this.dashed\n\t\t};\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.width,\n\t\t\tthis.height\n\t\t);\n\t}\n\n\tget x() {\n\t\treturn this.x1 < this.x2 ? this.x1 : this.x2;\n\t}\n\n\tget width() {\n\t\treturn this.x1 < this.x2 ? this.x2 - this.x1 : this.x1 - this.x2;\n\t}\n\n\tget y() {\n\t\treturn this.y1 < this.y2 ? this.y1 : this.y2;\n\t}\n\n\tget height() {\n\t\treturn this.y1 < this.y2 ? this.y2 - this.y1 : this.y1 - this.y2;\n\t}\n\n\tget cx() {\n\t\treturn this.x + this.width / 2;\n\t}\n\n\tget cy() {\n\t\treturn this.y + this.height / 2;\n\t}\n\n\tresize(x2, y2, proportional) {\n\t\tthis.x2 = x2;\n\t\tif (!proportional) {\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tlet szy = this.width * (this.y1 < y2 ? 1 : -1);\n\t\t\tthis.y2 = this.y1 + szy;\n\t\t}\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.cx;\n\t\tlet vy = posY - this.cy;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Square;\n","import Box from './Box';\n\nclass Ellipse {\n\tconstructor(id=\"\", color=0, x1=0, y1=0, rx=0, ry=0, rotation=0, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x1 + rx * 2;\n\t\tthis.y2 = y1 + ry * 2;\n\t\tthis.rotation = rotation;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tsave() {\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tcolor: this.color,\n\t\t\tx1: this.x1,\n\t\t\ty1: this.y1,\n\t\t\trx: this.rx,\n\t\t\try: this.ry,\n\t\t\trotation: this.rotation,\n\t\t\tdashed: this.dashed\n\t\t};\n\t}\n\n\tget cx() {\n\t\treturn (this.x1 < this.x2 ? this.x1 : this.x2) + this.rx;\n\t}\n\n\tget cy() {\n\t\treturn (this.y1 < this.y2 ? this.y1 : this.y2) + this.ry;\n\t}\n\n\tget rx() {\n\t\treturn (this.x1 < this.x2 ? this.x2 - this.x1 : this.x1 - this.x2) / 2;\n\t}\n\n\tget ry() {\n\t\treturn (this.y1 < this.y2 ? this.y2 - this.y1 : this.y1 - this.y2) / 2;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.cx - this.rx,\n\t\t\tthis.cy - this.ry,\n\t\t\tthis.rx * 2,\n\t\t\tthis.ry * 2\n\t\t);\n\t}\n\n\tresize(x2, y2, proportional) {\n\t\tthis.x2 = x2;\n\t\tif (!proportional) {\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tlet szy = this.rx * (this.y1 < y2 ? 2 : -2);\n\t\t\tthis.y2 = this.y1 + szy;\n\t\t}\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.cx;\n\t\tlet vy = posY - this.cy;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Ellipse;\n","import Point from \"./Point\";\n\n// path is cubic bezier spline with 2 control points\nclass Path {\n\tconstructor(id=\"\", p1=new Point(0,0), p2=new Point(0,0), c1=new Point(0,0), c2=new Point(0,0), arrowStart=false, arrowEnd=false){\n\t\tthis.id = id;\n\t\tthis.p1 = p1;\n\t\tthis.p2 = p2;\n\t\tthis.c1 = c1;\n\t\tthis.c2 = c2;\n\t\tthis.arrowStart = arrowStart;\n\t\tthis.arrowEnd = arrowEnd;\n\t}\n\n\t// ref: https://github.com/mrdoob/three.js/blob/master/src/extras/core/Interpolations.js\n\tCubicBezierP0(k, p) {\n\t\treturn k * k * k * p;\n\t}\n\t\n\tCubicBezierP1(t, k, p) {\n\t\treturn 3 * k * k * t * p;\n\t}\n\t\n\tCubicBezierP2(t, k, p) {\n\t\treturn 3 * k * t * t * p;\n\t}\n\t\n\tCubicBezierP3(t, p) {\n\t\treturn t * t * t * p;\n\t}\n\t\n\tCubicBezier(t, p0, p1, p2, p3) {\n\t\tconst k = 1 - t;\n\t\treturn this.CubicBezierP0(k, p0)\n\t\t\t+ this.CubicBezierP1(t, k, p1)\n\t\t\t+ this.CubicBezierP2(t, k, p2)\n\t\t\t+ this.CubicBezierP3(t, p3);\n\t}\n\n\t// rotation aligned to bezier spline\n\t// TODO: Not working fix it\n\trotation(t) {\n\t\tconst k = 1 - t;\n\t\t// all lengths of enclosing lines\n\t\tconst l1x = this.c1.x - this.p1.x;\n\t\tconst l1y = this.c1.y - this.p1.y;\n\n\t\tconst l2x = this.c2.x - this.c1.x;\n\t\tconst l2y = this.c2.y - this.c1.y;\n\n\t\tconst l3x = this.p2.x - this.c2.x;\n\t\tconst l3y = this.p2.y - this.c2.y;\n\n\t\t// spline tangent points at t\n\t\tconst t1 = new Point(\n\t\t\tl1x * k,\n\t\t\tl1y * k\n\t\t);\n\n\t\tconst t2 = new Point(\n\t\t\tl2x * k,\n\t\t\tl2y * k\n\t\t);\n\t\t\n\t\tconst t3 = new Point(\n\t\t\tl3x * k,\n\t\t\tl3y * k\n\t\t);\n\n\t\tconst t4 = new Point(\n\t\t\t(t2.x - t1.x) * k,\n\t\t\t(t2.y - t1.y) * k\n\t\t)\n\n\t\tconst t5 = new Point(\n\t\t\t(t3.x - t2.x) * k,\n\t\t\t(t3.y - t2.y) * k,\n\t\t)\n\n\t\tconst vx = t5.x - t4.x;\n\t\tconst vy = t5.y - t4.y;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\t//console.log(angle);\n\t\treturn angle;\n\t}\n\n\t// point position on cubic bezier spline for distance 0-1 from start to end\n\tposition(t) {\n\t\treturn new Point(\n\t\t\tthis.CubicBezier(t, this.p1.x, this.c1.x, this.c2.x, this.p2.x),\n\t\t\tthis.CubicBezier(t, this.p1.y, this.c1.y, this.c2.y, this.p2.y)\n\t\t)\n\t}\n}\n\nexport default Path;\n","import Point from \"./Point\";\nimport Path from \"./Path\";\n\nclass Line {\n\t// For line spline with control points see https://www.particleincell.com/2012/bezier-splines/\n\t// Line is created as straight line with 3 cubic bezier spline segments\n\tconstructor(id=\"\", color=0, p1=new Point(0,0), p2=new Point(0,0), c1=new Point(0,0), c2=new Point(0,0), arrowStart=false, arrowEnd=false, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.p1 = p1;\n\t\tthis.p2 = p2;\n\t\tthis.c1 = c1;\n\t\tthis.c2 = c2;\n\t\tthis.arrowStart = arrowStart;\n\t\tthis.arrowEnd = arrowEnd;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tsave() {\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tcolor: this.color,\n\t\t\tp1: this.p1.save(),\n\t\t\tp2: this.p2.save(),\n\t\t\tc1: this.c1.save(),\n\t\t\tc2: this.c2.save(),\n\t\t\tarrowStart: this.arrowStart,\n\t\t\tarrowEnd: this.arrowEnd,\n\t\t\tdashed: this.dashed\n\t\t};\n\t}\n\n\tempty() {\n\t\treturn this.p1.equalTo(this.p2) \n\t\t\t&& this.p1.equalTo(this.c1)\n\t\t\t&& this.p1.equalTo(this.c2);\n\t}\n\n\tresizeP1(deltaX, deltaY) {\n\t\tthis.p1 = new Point(this.p1.x + deltaX, this.p1.y + deltaY);\n\t\tthis.linearControlPoints();\n\t}\n\n\tresizeP2(deltaX, deltaY) {\n\t\tthis.p2 = new Point(this.p2.x + deltaX, this.p2.y + deltaY);\n\t\tthis.linearControlPoints();\n\t}\n\n\t// calculate linear control points position\n\tlinearControlPoints() {\n\t\tlet lx = this.p2.x - this.p1.x;\n\t\tlet ly = this.p2.y - this.p1.y;\n\t\tthis.c1 = new Point(\n\t\t\tthis.p1.x + lx / 3,\n\t\t\tthis.p1.y + ly / 3,\n\t\t); \n\t\tthis.c2 = new Point(\n\t\t\tthis.p1.x + lx / 3 * 2,\n\t\t\tthis.p1.y + ly / 3 * 2,\n\t\t); \n\t}\n\n\tedit(pid, deltaX, deltaY) {\n\t\tswitch (pid) {\n\t\t\tcase \"p1\":\n\t\t\t\tthis.p1.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"c1\":\n\t\t\t\tthis.c1.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"c2\":\n\t\t\t\tthis.c2.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"p2\":\n\t\t\t\tthis.p2.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaths() {\n\t\tlet cx = this.computeControlPoints([this.p1.x, this.c1.x, this.c2.x, this.p2.x]);\n\t\tlet cy = this.computeControlPoints([this.p1.y, this.c1.y, this.c2.y, this.p2.y]);\n\t\tlet paths = [];\n\t\tpaths[0] = new Path(\n\t\t\tthis.id, this.p1, this.c1,\n\t\t\tnew Point(cx.p1[0], cy.p1[0]),\n\t\t\tnew Point(cx.p2[0], cy.p2[0]),\n\t\t\tthis.arrowStart, false\n\t\t);\n\t\tpaths[1] = new Path(\n\t\t\tthis.id, this.c1, this.c2,\n\t\t\tnew Point(cx.p1[1], cy.p1[1]),\n\t\t\tnew Point(cx.p2[1], cy.p2[1]),\n\t\t\tfalse, false\n\t\t);\n\t\tpaths[2] = new Path(\n\t\t\tthis.id, this.c2, this.p2,\n\t\t\tnew Point(cx.p1[2], cy.p1[2]),\n\t\t\tnew Point(cx.p2[2], cy.p2[2]),\n\t\t\tfalse, this.arrowEnd\n\t\t);\n\t\treturn paths;\n\t}\n\n\t// computes control points given knots K, this is the brain of the operation\n\tcomputeControlPoints(K) {\n\t\tlet p1 = [];\n\t\tlet p2 = [];\n\t\tlet n = K.length-1;\n\t\t\n\t\t// rhs vector\n\t\tlet a = [];\n\t\tlet b = [];\n\t\tlet c = [];\n\t\tlet r = [];\n\t\t\n\t\t// left most segment\n\t\ta[0]=0;\n\t\tb[0]=2;\n\t\tc[0]=1;\n\t\tr[0] = K[0] + 2*K[1];\n\t\t\n\t\t// internal segments\n\t\tfor (let i = 1; i < n - 1; i++) {\n\t\t\ta[i]=1;\n\t\t\tb[i]=4;\n\t\t\tc[i]=1;\n\t\t\tr[i] = 4 * K[i] + 2 * K[i+1];\n\t\t}\n\n\t\t// right segment\n\t\ta[n-1]=2;\n\t\tb[n-1]=7;\n\t\tc[n-1]=0;\n\t\tr[n-1] = 8*K[n-1] + K[n];\n\t\t\n\t\t// solves Ax=b with the Thomas algorithm (from Wikipedia)\n\t\tfor (let i = 1; i < n; i++) {\n\t\t\tlet m = a[i] / b[i - 1];\n\t\t\tb[i] = b[i] - m * c[i - 1];\n\t\t\tr[i] = r[i] - m * r[i - 1];\n\t\t}\n\t\n\t\tp1[n-1] = r[n-1] / b[n-1];\n\t\tfor (let i = n - 2; i >= 0; --i) {\n\t\t\tp1[i] = (r[i] - c[i] * p1[i+1]) / b[i];\n\t\t}\n\t\t\t\n\t\t// we have p1, now compute p2\n\t\tfor (let i = 0; i < n-1; i++) {\n\t\t\tp2[i] = 2 * K[i+1] - p1[i+1];\n\t\t}\n\t\tp2[n-1] = 0.5 * (K[n]+p1[n-1]);\n\t\t\n\t\treturn { p1:p1, p2:p2 };\n\t}\n}\n\nexport default Line;\n","import Box from './Box';\n\nclass Text {\n\tconstructor(id=\"\", color=0, size=0, text=\"\", x=0, y=0, rotation=0, isEdit=false, isTextEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.size = size;\n\t\tthis.text = text;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.rotation = rotation;\n\t\tthis.bx = x;\t\t// bounding box X\n\t\tthis.by = y;\t\t// bounding box Y\n\t\tthis.bwidth = 0;\t// bounding box Width\n\t\tthis.bheight = 0;\t// bounding box Height\n\t\tthis.isEdit = isEdit;\n\t\tthis.isTextEdit = isTextEdit;\n\t}\n\n\tsave() {\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tcolor: this.color,\n\t\t\tsize: this.size,\n\t\t\ttext: this.text,\n\t\t\tx: this.x,\n\t\t\ty: this.y,\n\t\t\trotation: this.rotation,\n\t\t\tbx: this.bx,\n\t\t\tby: this.by,\n\t\t\tbwidth: this.bwidth,\n\t\t\tbheight: this.bheight\n\t\t};\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.bx,\n\t\t\tthis.by,\n\t\t\tthis.bwidth,\n\t\t\tthis.bheight\n\t\t);\n\t}\n\n\tmove(deltaX, deltaY) {\n\t\tthis.x += deltaX;\n\t\tthis.y += deltaY;\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - (this.x + this.bwidth / 2);\n\t\tlet vy = posY - (this.y + this.bheight / 2);\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Text;\n","const ElementIDPrefix = {\n\tBall: 'bl',\n\tPlayer: 'pl',\n\tSquare: 'sq',\n\tEllipse: 'el',\n\tLine: 'ln',\n\tText: 'txt',\n\tPathPlayer: 'pp',\n\tPathBall: 'bp',\n\tExtras: 'ex'\n};\n\nconst ExtrasType = {\n\tGoal: 0,\n\tGoalSmall: 1,\n\tLadder: 2,\n\tCone: 3,\n\tFlag: 4\n};\n\nconst ExtrasDefaults = [\n\t{ name:'Goal', width: 100, height: 300, viewBoxScale: 1 },\n\t{ name:'Small Goal', width: 50, height: 150, viewBoxScale: 2 },\n\t{ name:'Ladder', width: 100, height: 350, viewBoxScale: 1 },\n\t{ name:'Cone', width: 70, height: 85, viewBoxScale: 3 },\n\t{ name:'Flag', width: 130, height: 280, viewBoxScale: 2 }\n];\n\nfunction RemoveTags(str) {\n\tif ((str===null) || (str===''))\n\t{\t return str;\t}\n\t// Regular expression to identify HTML tags in \n\t// the input string. Replacing the identified \n\t// HTML tag with a null string.\n\treturn str.replace( /(<([^>]+)>)/ig, '');\n}\n\nexport { ElementIDPrefix, ExtrasType, ExtrasDefaults, RemoveTags }","import Box from './Box';\nimport { ExtrasType } from './Constants';\n\nclass Extras {\n\tconstructor(id=\"\", color=0, t=ExtrasType.Goal, x=0, y=0, width=0, height=0, rotation=0, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.t = t;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.rotation = rotation;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tsave() {\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tcolor: this.color,\n\t\t\tt: this.t,\n\t\t\tx: this.x,\n\t\t\ty: this.y,\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\trotation: this.rotation\n\t\t};\n\t}\n\n\tget isBoxVisible() {\n\t\tswitch (this.t) {\n\t\t\tcase ExtrasType.Cone:\n\t\t\tcase ExtrasType.Flag:\n\t\t\t\treturn true;\n\t\t\tcase ExtrasType.Goal:\n\t\t\tcase ExtrasType.GoalSmall:\n\t\t\tcase ExtrasType.Ladder:\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tget isResizable() {\n\t\tswitch (this.t) {\n\t\t\tcase ExtrasType.Ladder:\n\t\t\t\treturn true;\n\t\t\tcase ExtrasType.Goal:\n\t\t\tcase ExtrasType.GoalSmall:\n\t\t\tcase ExtrasType.Cone:\n\t\t\tcase ExtrasType.Flag:\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tget isRotatable() {\n\t\tswitch (this.t) {\n\t\t\tcase ExtrasType.Goal:\n\t\t\tcase ExtrasType.GoalSmall:\n\t\t\tcase ExtrasType.Ladder:\n\t\t\t\treturn true;\n\t\t\tcase ExtrasType.Cone:\n\t\t\tcase ExtrasType.Flag:\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.x - this.width / 2,\n\t\t\tthis.y - this.height / 2,\n\t\t\tthis.width,\n\t\t\tthis.height\n\t\t);\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x += deltaX;\n\t\t\t\tthis.y += deltaY;\n\t\t\t\tthis.width += deltaX;\n\t\t\t\tthis.height += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x += deltaX;\n\t\t\t\tthis.y += deltaY;\n\t\t\t\tthis.width += deltaX;\n\t\t\t\tthis.height += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x += deltaX;\n\t\t\t\tthis.y += deltaY;\n\t\t\t\tthis.width += deltaX;\n\t\t\t\tthis.height += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x += deltaX;\n\t\t\t\tthis.y += deltaY;\n\t\t\t\tthis.width += deltaX;\n\t\t\t\tthis.height += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x += deltaX;\n\t\t\t\tthis.y += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.x;\n\t\tlet vy = posY - this.y;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Extras;","import Line from \"./Line\";\nimport { ElementIDPrefix, RemoveTags } from \"./Constants\";\nimport Player from \"./Player\";\nimport Point from \"./Point\";\nimport Ball from \"./Ball\";\n\nclass AnimKeyFrame {\n\tconstructor(players=null, playerPaths=null, balls=null, ballPaths=null){\n\t\tthis.players = players;\n\t\tthis.playerPaths = playerPaths;\n\t\tthis.balls = balls;\n\t\tthis.ballPaths = ballPaths;\n\n\t\tthis.playerPathSplines = [];\n\t\tthis.ballPathSplines = [];\n\t}\n\n\tsave() {\n\t\treturn {\n\t\t\tplayers: this.players.map(p => p.save()),\n\t\t\tplayerPaths: null === this.playerPaths ? null : this.playerPaths.map(pp => pp.save()),\n\t\t\tballs: this.balls.map(b => b.save()),\n\t\t\tballPaths: null == this.ballPaths ? null : this.ballPaths.map(bp => bp.save())\n\t\t}\n\t}\n\n\tload(data) {\n\t\tthis.players = data.players.map(p => {\n\t\t\treturn new Player(\n\t\t\t\tp.id, p.no,\n\t\t\t\tRemoveTags(p.name),\n\t\t\t\tp.color,\n\t\t\t\tnew Point(p.pos.x, p.pos.y), p.rotation,\n\t\t\t\tnew Point(p.posDefault.x, p.posDefault.y),\n\t\t\t\tp.noDefault\n\t\t\t);\n\t\t});\n\n\t\tif (null !== data.playerPaths) {\n\t\t\tthis.playerPaths = data.playerPaths.map(l => {\n\t\t\t\treturn new Line(\n\t\t\t\t\tl.id, l.color, \n\t\t\t\t\tnew Point(l.p1.x, l.p1.y),\n\t\t\t\t\tnew Point(l.p2.x, l.p2.y),\n\t\t\t\t\tnew Point(l.c1.x, l.c1.y),\n\t\t\t\t\tnew Point(l.c2.x, l.c2.y),\n\t\t\t\t\tl.arrowStart, l.arrowEnd, l.dashed,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\n\t\tthis.balls = data.balls.map(b => {\n\t\t\treturn new Ball(\n\t\t\t\tb.id, b.color,\n\t\t\t\tnew Point(b.pos.x, b.pos.y),\n\t\t\t\tnew Point(b.posDefault.x, b.posDefault.y)\n\t\t\t);\n\t\t});\n\n\t\tif (null !== data.ballPaths) {\n\t\t\tthis.ballPaths = data.ballPaths.map(l => {\n\t\t\t\treturn new Line(\n\t\t\t\t\tl.id, l.color, \n\t\t\t\t\tnew Point(l.p1.x, l.p1.y),\n\t\t\t\t\tnew Point(l.p2.x, l.p2.y),\n\t\t\t\t\tnew Point(l.c1.x, l.c1.y),\n\t\t\t\t\tnew Point(l.c2.x, l.c2.y),\n\t\t\t\t\tl.arrowStart, l.arrowEnd, l.dashed,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\n\tplayerPathID(index) {\n\t\treturn ElementIDPrefix.PathPlayer + index;\n\t}\n\n\tballPathID(index) {\n\t\treturn ElementIDPrefix.PathBall + index;\n\t}\n\n\t// this is to pre calc bezier splines from lines instead doing it every anim frame\n\tanimPreCalcSplines() {\n\t\tif (null !== this.playerPaths) {\n\t\t\tthis.playerPathSplines = this.playerPaths.map(l => l.paths());\n\t\t}\n\t\tif (null != this.ballPaths) {\n\t\t\tthis.ballPathSplines = this.ballPaths.map(l => l.paths());\n\t\t}\n\t}\n\n\t// there are 3 cubic bezier splines forming a path\n\tsplinePathPos(keyFramePos) {\n\t\tconst scale = keyFramePos * 3;\n\t\tlet idx = Math.floor(scale);\n\t\t// clip to last bezier spline\n\t\t// Note: this happens when keyFramePos is 1 = max last position \n\t\tif (idx >= 3) {\n\t\t\tidx = 2;\n\t\t}\n\t\treturn {\n\t\t\tidx: idx,\t\t// bezier spline index\n\t\t\tt: scale - idx\t// bezier spline position\n\t\t};\n\t}\n\n\tanimatePlayersOnPaths(keyFramePos) {\n\t\tconst splinePos = this.splinePathPos(keyFramePos);\n\t\treturn this.players.map((p, index)=> {\n\t\t\tif (!p.isPlaced) {\n\t\t\t\treturn p;\n\t\t\t}\n\t\t\tlet pc = p.clone();\n\t\t\tlet splines = this.playerPathSplines[index];\n\t\t\tpc.pos = splines[splinePos.idx].position(splinePos.t);\n\t\t\t//pc.rotation = splines[splinePos.idx].rotation(splinePos.t);\n\t\t\treturn pc;\n\t\t});\n\t}\n\n\tanimateBallsOnPaths(keyFramePos) {\n\t\tconst splinePos = this.splinePathPos(keyFramePos);\n\t\treturn this.balls.map((b, index) => {\n\t\t\tif (!b.isPlaced) {\n\t\t\t\treturn b;\n\t\t\t}\n\t\t\tlet bc = b.clone();\n\t\t\tlet splines = this.ballPathSplines[index];\n\t\t\tbc.pos = splines[splinePos.idx].position(splinePos.t);\n\t\t\treturn bc;\n\t\t});\n\t}\n\n\tclone() {\n\t\treturn new AnimKeyFrame(\n\t\t\tthis.players.map(p => p.clone()),\n\t\t\tthis.players.map((p, index) => {\n\t\t\t\t// new key frame has line with all points at same position\n\t\t\t\treturn new Line(\n\t\t\t\t\tthis.playerPathID(index), 99,\t// using 99 as edit color \n\t\t\t\t\tp.pos.clone(), \n\t\t\t\t\tp.pos.clone(),\n\t\t\t\t\tp.pos.clone(), \n\t\t\t\t\tp.pos.clone(),\n\t\t\t\t\tfalse, false, true, true\n\t\t\t\t);\n\t\t\t}),\n\t\t\tthis.balls.map(b => b.clone()),\n\t\t\tthis.balls.map((b, index) => {\n\t\t\t\t// new key frame has line with all points at same position\n\t\t\t\treturn new Line(\n\t\t\t\t\tthis.ballPathID(index), 99,\t// using 99 as edit color \n\t\t\t\t\tb.pos.clone(),\n\t\t\t\t\tb.pos.clone(),\n\t\t\t\t\tb.pos.clone(), \n\t\t\t\t\tb.pos.clone(),\n\t\t\t\t\tfalse, false, true, true\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t}\n\n\tequalTo(kf) {\n\t\tif (this.players.length !== kf.players.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let i = 0; i < this.players.length; i++) {\n\t\t\tif (!this.players[i].equalTo(kf.players[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.balls.length !== kf.balls.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let i = 0; i < this.balls.length; i++) {\n\t\t\tif (!this.balls[i].equalTo(kf.balls[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nexport default AnimKeyFrame;\n","import Ball from \"./Ball\";\nimport Player from \"./Player\";\nimport Square from \"./Square\";\nimport Ellipse from \"./Ellipse\";\nimport Line from \"./Line\";\nimport Point from \"./Point\";\nimport Text from \"./Text\";\nimport Extras from \"./Extras\";\nimport AnimKeyFrame from \"./AnimKeyFrame\";\nimport { ElementIDPrefix, RemoveTags, ExtrasType, ExtrasDefaults } from \"./Constants\";\n\nclass PitchFutsal {\n\n\tconstructor(uuid=\"\") {\n\t\tthis.id = uuid;\n\t\tthis.name = \"\";\n\t\tthis.description = \"\";\n\t\tthis.created = new Date();\n\t\tthis.updated = new Date();\n\n\t\tthis.width = 4500;\t\t\t// editor total width in cm\n\t\tthis.height = 2500;\t\t\t// editor total height in cm\n\t\tthis.widthPitch = 4000; \t// pitch width in cm\n\t\tthis.heightPitch = 2000;\t// pitch height in cm\n\n\t\tthis.AnimExists = false;\n\t\tthis.AnimKeyFrameCurrent = 0;\n\t\tthis.AnimKeyFrameDuration = 5;\t// duration of each key frame in seconds\n\t\tthis.AnimKeyFrames = [];\n\t\tthis.AnimPlaying = false;\n\t\tthis.AnimPlayers = null;\n\t\tthis.AnimBalls = null;\n\n\t\tthis.squareID = -1;\n\t\tthis.squares = [];\n\t\tthis.ellipseID = -1;\n\t\tthis.ellipses = [];\n\t\tthis.lineID = -1;\n\t\tthis.lines = [];\n\t\tthis.textID = -1;\n\t\tthis.texts = [];\n\t\tthis.extrasID = -1;\n\t\tthis.extras = [];\n\n\t\tthis._overlay = \"none\";\n\n\t\tthis.isModified = false;\n\t\tthis.onModified = null;\n\t}\n\n\t// Pitch top left corner position within editor\n\tpitchPos() {\n\t\treturn {\n\t\t\ttop: (this.height - this.heightPitch) / 2,\n\t\t\tleft: (this.width - this.widthPitch) / 2\n\t\t}\n\t}\n\n\t// Players top left corner within editor\n\tplayersPos() {\n\t\tconst pPos = this.pitchPos();\n\t\treturn {\n\t\t\ttop: pPos.top + this.heightPitch + 50 + 25,\n\t\t\tleft: pPos.left + 50\n\t\t}\n\t}\n\n\t// Balls top left corner within editor\n\tballsPos() {\n\t\tconst pPos = this.pitchPos();\n\t\treturn {\n\t\t\ttop: pPos.top + this.heightPitch + 90,\n\t\t\tleft: pPos.left + 1050\n\t\t}\n\t}\n\t\n\tinitDefault(noPlayers, noPlayerColors, playerSize, noBalls, noBallColors, ballSize) {\n\t\tlet kf = new AnimKeyFrame(\n\t\t\tthis._initPlayers(noPlayers, noPlayerColors, playerSize),\n\t\t\tnull,\n\t\t\tthis._initBalls(noBalls, noBallColors, ballSize),\n\t\t\tnull\n\t\t);\n\t\tthis.AnimKeyFrames.push(kf);\n\n\t\t// add default extras\n\t\tconst goalExtras = ExtrasDefaults[ExtrasType.Goal];\n\t\tconst pPos = this.pitchPos();\n\t\t// Left goal\n\t\tthis.extras.push(new Extras(\n\t\t\tElementIDPrefix.Extras + \"goal-left\", 0, ExtrasType.Goal,\n\t\t\tpPos.left - (goalExtras.width / 2),\n\t\t\tpPos.top + (this.heightPitch / 2),\n\t\t\tgoalExtras.width, goalExtras.height,\n\t\t\t0, false\n\t\t));\n\t\t// Right Goal\n\t\tthis.extras.push(new Extras(\n\t\t\tElementIDPrefix.Extras + \"goal-right\", 0, ExtrasType.Goal,\n\t\t\tpPos.left + this.widthPitch + (goalExtras.width / 2),\n\t\t\tpPos.top + (this.heightPitch / 2),\n\t\t\tgoalExtras.width, goalExtras.height,\n\t\t\t180, false\n\t\t));\n\t}\n\n\t_initPlayers(noPlayers, noPlayerColors, playerSize) {\n\t\tconst pPos = this.playersPos();\n\t\tlet players = [];\n\t\tlet groupSize = Math.floor(noPlayers / noPlayerColors);\n\t\tfor (var i = 0; i < noPlayers; i++) {\n\t\t\tlet color = Math.floor(i / groupSize);\n\t\t\tlet number = groupSize - (i % groupSize);\n\t\t\tlet posX = color * playerSize;\n\t\t\tlet player = new Player(\n\t\t\t\tElementIDPrefix.Player + i, number, \"\", color,\n\t\t\t\tnew Point(pPos.left + posX, pPos.top),\n\t\t\t\t0,\n\t\t\t\tnew Point(pPos.left + posX, pPos.top),\n\t\t\t\tnumber\n\t\t\t);\n\t\t\tplayers.push(player);\n\t\t}\n\t\treturn players;\n\t}\n\n\t_initBalls(noBalls, noBallColors, ballSize) {\n\t\tconst bPos = this.ballsPos()\n\t\tlet balls = [];\n\t\tlet groupSize = Math.floor(noBalls / noBallColors);\n\t\tfor (var i = 0; i < noBalls; i++) {\n\t\t\tlet color = Math.floor(i / groupSize);\n\t\t\tlet posX = color * ballSize;\n\t\t\tlet ball = new Ball(\n\t\t\t\tElementIDPrefix.Ball + i, color,\n\t\t\t\tnew Point(bPos.left + posX, bPos.top),\n\t\t\t\tnew Point(bPos.left + posX, bPos.top)\n\t\t\t);\n\t\t\tballs.push(ball);\n\t\t}\n\t\treturn balls;\n\t}\n\n\t_modified() {\n\t\tlet cp = new PitchFutsal();\n\t\tcp.isModified = true;\n\n\t\tcp.id = this.id;\n\t\tcp.name = this.name;\n\t\tcp.description = this.description;\n\t\tcp.created = this.created;\n\t\tcp.updated = new Date();\n\n\t\tcp.width = this.width;\n\t\tcp.height = this.height;\n\t\tcp.widthPitch = this.widthPitch;\n\t\tcp.heightPitch = this.heightPitch;\n\n\t\tcp.AnimExists = this.AnimExists;\n\t\tcp.AnimKeyFrameCurrent = this.AnimKeyFrameCurrent;\n\t\tcp.AnimKeyFrameDuration = this.AnimKeyFrameDuration;\n\t\tcp.AnimKeyFrames = this.AnimKeyFrames;\n\t\tcp.AnimPlaying = this.AnimPlaying;\n\t\tcp.AnimPlayers = this.AnimPlayers;\n\t\tcp.AnimBalls = this.AnimBalls;\n\n\t\tcp.squareID = this.squareID;\n\t\tcp.squares = this.squares;\n\t\tcp.ellipseID = this.ellipseID;\n\t\tcp.ellipses = this.ellipses;\n\t\tcp.lineID = this.lineID;\n\t\tcp.lines = this.lines;\n\t\tcp.textID = this.textID;\n\t\tcp.texts = this.texts;\n\t\tcp.extrasID = this.extrasID;\n\t\tcp.extras = this.extras;\n\t\tcp._overlay = this.overlay;\n\t\t// trigger event modified\n\t\tif (null !== this.onModified) {\n\t\t\tthis.onModified(cp);\n\t\t}\n\t}\n\n\t// saving only parameters\n\tsave() {\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tname: this.name,\n\t\t\tdescription: this.description,\n\t\t\tcreated: this.created,\n\t\t\tupdated: this.updated,\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\twidthPitch: this.widthPitch,\n\t\t\theightPitch: this.heightPitch,\n\t\t\tAnimExists: this.AnimExists,\n\t\t\tAnimKeyFrameCurrent: this.AnimKeyFrameCurrent,\n\t\t\tAnimKeyFrameDuration:this.AnimKeyFrameDuration,\n\t\t\tAnimKeyFrames: this.AnimKeyFrames.map(kf => kf.save()),\n\t\t\tsquareID: this.squareID,\n\t\t\tsquares: this.squares.map(sq => sq.save()),\n\t\t\tellipseID: this.ellipseID,\n\t\t\tellipses: this.ellipses.map(el => el.save()),\n\t\t\tlineID: this.lineID,\n\t\t\tlines: this.lines.map(l => l.save()),\n\t\t\ttextID: this.textID,\n\t\t\ttexts: this.texts.map(t => t.save()),\n\t\t\textrasID: this.extrasID,\n\t\t\textras: this.extras.map(ex => ex.save()),\n\t\t\toverlay: this.overlay\n\t\t};\n\t}\n\n\tload(data) {\n\t\tthis.id = data.id;\n\t\tthis.name = RemoveTags(data.name);\n\t\tthis.description = RemoveTags(data.description);\n\t\tthis.created = new Date(data.created);\n\t\tthis.updated = new Date(data.updated);\n\n\t\tthis.width = data.width;\n\t\tthis.height = data.height;\n\t\tthis.widthPitch = data.widthPitch;\n\t\tthis.heightPitch = data.heightPitch;\n\n\t\tthis.AnimExists = data.AnimExists;\n\t\tthis.AnimKeyFrameCurrent = data.AnimKeyFrameCurrent;\n\t\tthis.AnimKeyFrameDuration = data.AnimKeyFrameDuration;\n\t\tthis.AnimKeyFrames = data.AnimKeyFrames.map(kf => {\n\t\t\tlet k = new AnimKeyFrame(null, null, null, null);\n\t\t\tk.load(kf);\n\t\t\treturn k;\n\t\t});\n\t\t\n\t\tthis.squareID = data.squareID;\n\t\tthis.squares = data.squares.map(sq => {\n\t\t\treturn new Square(\n\t\t\t\tsq.id, sq.color, \n\t\t\t\tsq.x1, sq.y1, \n\t\t\t\tsq.width, sq.height, \n\t\t\t\tsq.rotation, sq.dashed, \n\t\t\t\tfalse\n\t\t\t);\n\t\t});\n\t\t\n\t\tthis.ellipseID = data.ellipseID;\n\t\tthis.ellipses = data.ellipses.map(el => {\n\t\t\treturn new Ellipse(\n\t\t\t\tel.id, el.color, \n\t\t\t\tel.x1, el.y1, \n\t\t\t\tel.rx, el.ry, \n\t\t\t\tel.rotation, el.dashed, \n\t\t\t\tfalse\n\t\t\t);\n\t\t});\n\n\t\tthis.lineID = data.lineID;\n\t\tthis.lines = data.lines.map(l => {\n\t\t\treturn new Line(\n\t\t\t\tl.id, l.color, \n\t\t\t\tnew Point(l.p1.x, l.p1.y),\n\t\t\t\tnew Point(l.p2.x, l.p2.y),\n\t\t\t\tnew Point(l.c1.x, l.c1.y),\n\t\t\t\tnew Point(l.c2.x, l.c2.y),\n\t\t\t\tl.arrowStart, l.arrowEnd, l.dashed,\n\t\t\t\tfalse\n\t\t\t);\n\t\t});\n\n\t\tthis.textID = data.textID;\n\t\tthis.texts = data.texts.map(t => {\n\t\t\tlet tx = new Text(\n\t\t\t\tt.id, t.color, \n\t\t\t\tt.size, t.text, \n\t\t\t\tt.x, t.y, t.rotation, \n\t\t\t\tfalse, false\n\t\t\t);\n\t\t\ttx.bx = t.bx;\n\t\t\ttx.by = t.by;\n\t\t\ttx.bwidth = t.bwidth;\n\t\t\ttx.bheight = t.bheight;\n\t\t\treturn tx;\n\t\t});\n\n\t\tthis.extrasID = data.extrasID;\n\t\tthis.extras = data.extras.map(ex => {\n\t\t\treturn new Extras(\n\t\t\t\tex.id, ex.color, ex.t, \n\t\t\t\tex.x, ex.y, \n\t\t\t\tex.width, ex.height, ex.rotation, \n\t\t\t\tfalse\n\t\t\t);\n\t\t});\n\n\t\tthis.overlay = data.overlay;\n\n\t\t// trigger event modified\n\t\tthis._modified();\n\t}\n\n\tshareEnabled() {\n\t\treturn (this.name.trim().length + this.description.trim().length) > 0;\n\t}\n\n\tsetNameAndDescription(name, description) {\n\t\tthis.name = name;\n\t\tthis.description = description;\n\t\tthis._modified();\n\t}\n\n\tplayersCurrentKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].players;\n\t}\n\n\tplayerPathsCurrentKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths;\n\t}\n\n\tplayersPreviousKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\tif (0 === this.AnimKeyFrameCurrent) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent-1].players;\n\t}\n\n\tanimCreate() {\n\t\tthis.AnimExists = true;\n\t\tthis._modified();\n\t}\n\n\tanimDelete() {\n\t\tthis.AnimExists = false;\n\t\tthis.AnimKeyFrameCurrent = 0;\n\t\tthis.AnimKeyFrameDuration = 5;\n\t\t// keep only 1 key frame\n\t\tthis.AnimKeyFrames = [\n\t\t\tthis.AnimKeyFrames[0]\n\t\t]\n\t\tthis._modified();\n\t}\n\n\tanimKeyFrameDurationSet(duration) {\n\t\tlet newDuration = parseInt(duration);\n\t\tthis.AnimKeyFrameDuration = isNaN(newDuration) ? 1 : newDuration;\n\t\tif (0 >= this.AnimKeyFrameDuration) {\n\t\t\tthis.AnimKeyFrameDuration = 1;\n\t\t}\n\t\tthis._modified();\n\t}\n\n\tanimKeyFrameAdd() {\n\t\tlet last = this.AnimKeyFrames.length - 1;\n\t\tlet beforeLast = last-1;\n\t\tif (beforeLast >= 0) {\n\t\t\t// Add check if there is diff between previous and last key frame, \n\t\t\t// forbid adding if no changes between last two frames\n\t\t\tif (this.AnimKeyFrames[last].equalTo(this.AnimKeyFrames[beforeLast])) {\n\t\t\t\tconsole.log(\"No change in data new add frame forbidden\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t// clone last\n\t\tlet newKeyFrame = this.AnimKeyFrames[last].clone();\n\t\t// copy and add new\n\t\tthis.AnimKeyFrames = this.AnimKeyFrames.map(kf => kf);\n\t\tthis.AnimKeyFrames.push(newKeyFrame);\n\t\t// position to last key frame\n\t\tthis.AnimKeyFrameCurrent = this.AnimKeyFrames.length - 1;\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tanimKeyFrameDelete() {\n\t\tlet last = this.AnimKeyFrames.length - 1;\n\t\tif (0 === last) {\n\t\t\treturn false;\n\t\t}\n\t\tif (last !== this.AnimKeyFrameCurrent) {\n\t\t\treturn false;\n\t\t}\n\t\t// remove last key frame\n\t\tlet kf = [];\n\t\tfor (let i = 0; i < last; i++) {\n\t\t\tkf.push(this.AnimKeyFrames[i])\n\t\t}\n\t\tthis.AnimKeyFrames = kf;\n\t\t// position to last key frame\n\t\tthis.AnimKeyFrameCurrent = this.AnimKeyFrames.length - 1;\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tanimKeyFrameNext() {\n\t\tlet next = this.AnimKeyFrameCurrent + 1;\n\t\tif (next >= this.AnimKeyFrames.length) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.AnimKeyFrameCurrent = next;\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tanimKeyFramePrevious() {\n\t\tif (0 === this.AnimKeyFrameCurrent) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.AnimKeyFrameCurrent--;\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tanimStart() {\n\t\tthis.AnimPlaying = true;\n\t\tthis.AnimKeyFrames.map(kf => kf.animPreCalcSplines());\n\t\tthis.animFrame(0);\t// prepare first frame\n\t\tthis._modified();\n\t}\n\n\tanimStop() {\n\t\tthis.AnimPlaying = false;\n\t\tthis.AnimPlayers = null;\n\t\tthis.AnimBalls = null;\n\t\tthis._modified();\n\t}\n\n\tanimFrame(time) {\n\t\tconst kfDuration = this.AnimKeyFrameDuration * 1000;\n\t\tconst keyFrame = Math.floor(time / kfDuration);\n\t\tconst kfTime = time - (keyFrame * kfDuration);\n\t\tlet kfPos = kfTime / kfDuration;\n\t\t// keyFrame+1 is because paths are stored on next key frame\n\t\tlet keyFrameShow = keyFrame + 1;\n\t\t// clip to last key frame end\n\t\tif (keyFrameShow >= this.AnimKeyFrames.length) {\n\t\t\tkeyFrameShow = this.AnimKeyFrames.length - 1;\n\t\t\tkfPos = 1.0;\n\t\t}\n\t\tthis.AnimPlayers = this.AnimKeyFrames[keyFrameShow].animatePlayersOnPaths(kfPos);\n\t\tthis.AnimBalls = this.AnimKeyFrames[keyFrameShow].animateBallsOnPaths(kfPos);\n\t\tthis._modified();\n\t}\n\n\t// note: only move current key frame player\n\tplayerMove(id, deltaX, deltaY) {\n\t\tlet players = this.playersCurrentKeyFrame().map(p => {\n\t\t\tif (id === p.id) {\n\t\t\t\tp.isEdit = true;\n\t\t\t\tp.pos.move(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn p;\n\t\t});\n\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].players = players;\n\t\t// Adjust player anim paths when player is moved\n\t\tthis.playerAdjustAnimPaths(\n\t\t\tid.replace(ElementIDPrefix.Player, ElementIDPrefix.PathPlayer), \n\t\t\tdeltaX, deltaY\n\t\t);\n\t\tthis._modified();\n\t}\n\n\tplayerRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Player)) {\n\t\t\treturn;\n\t\t}\n\t\tlet players = this.playersCurrentKeyFrame().map(p => {\n\t\t\tif (id === p.id) {\n\t\t\t\tp.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn p;\n\t\t});\n\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].players = players;\n\t\tthis._modified();\n\t}\n\n\t// NOTE: adjustment always makes path straight line\n\t// this same on original tactics-board\n\tplayerAdjustAnimPaths(playerPathID, deltaX, deltaY) {\n\t\t// Adjust path end position\n\t\tif (this.AnimKeyFrameCurrent > 0) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths = this.lineResizeP2(\n\t\t\t\tthis.playerPathsCurrentKeyFrame(),\n\t\t\t\tplayerPathID, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\t// Adjust path start position on next frame\n\t\tif (this.AnimKeyFrameCurrent < (this.AnimKeyFrames.length - 1)) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent+1].playerPaths = this.lineResizeP1(\n\t\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent+1].playerPaths,\n\t\t\t\tplayerPathID, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t}\n\n\tplayerEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Player)) {\n\t\t\treturn null;\n\t\t}\n\t\t// Edit player data\n\t\tconst p = this.playersCurrentKeyFrame().find(p => id === p.id);\n\t\t// disable editing non placed players\n\t\tif (!p.isPlaced) {\n\t\t\treturn null;\n\t\t}\n\t\tconst editPlayer = {\n\t\t\tid: p.id,\n\t\t\tname: p.name,\n\t\t\tno: p.no\n\t\t}\n\t\treturn editPlayer;\n\t}\n\n\t// note: edit player attributes changes player on all key frames\n\tplayerEditDone(player) {\n\t\tthis.AnimKeyFrames = this.AnimKeyFrames.map(kf => {\n\t\t\tkf.players = kf.players.map(p => {\n\t\t\t\tif (player.id !== p.id) {\n\t\t\t\t\treturn p;\n\t\t\t\t}\n\t\t\t\tif (player.remove) {\n\t\t\t\t\tp.reset();\n\t\t\t\t} else {\n\t\t\t\t\tp.name = player.name;\n\t\t\t\t\tp.no = player.no;\n\t\t\t\t}\n\t\t\t\treturn p;\n\t\t\t});\n\t\t\treturn kf;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tplayerEditEnd() {\n\t\tthis.AnimKeyFrames = this.AnimKeyFrames.map(kf => {\n\t\t\tkf.players = kf.players.map(p => {\n\t\t\t\tp.isEdit = false;\n\t\t\t\treturn p;\n\t\t\t});\n\t\t\treturn kf;\n\t\t});\n\t}\n\n\tballsCurrentKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].balls;\n\t}\n\n\tballPathsCurrentKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths;\n\t}\n\n\tballsPreviousKeyFrame() {\n\t\tif (this.AnimPlaying) {\n\t\t\treturn null;\n\t\t}\n\t\tif (0 === this.AnimKeyFrameCurrent) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent-1].balls;\n\t}\n\n\t// note: only move current key frame ball\n\tballMove(id, deltaX, deltaY) {\n\t\tlet balls = this.ballsCurrentKeyFrame().map(b => {\n\t\t\tif (id === b.id) {\n\t\t\t\tb.pos.move(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn b;\n\t\t});\n\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].balls = balls;\n\t\t// Adjust ball paths when ball is moved\n\t\tthis.ballAdjustAnimPaths(\n\t\t\tid.replace(ElementIDPrefix.Ball, ElementIDPrefix.PathBall), \n\t\t\tdeltaX, deltaY\n\t\t);\n\t\tthis._modified();\n\t}\n\n\t// NOTE: adjustment always makes path straight line\n\t// this same on original tactics-board\n\tballAdjustAnimPaths(ballPathID, deltaX, deltaY) {\n\t\t// Adjust path end position\n\t\tif (this.AnimKeyFrameCurrent > 0) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths = this.lineResizeP2(\n\t\t\t\tthis.ballPathsCurrentKeyFrame(),\n\t\t\t\tballPathID, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\t// Adjust path start position on next frame\n\t\tif (this.AnimKeyFrameCurrent < (this.AnimKeyFrames.length - 1)) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent+1].ballPaths = this.lineResizeP1(\n\t\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent+1].ballPaths,\n\t\t\t\tballPathID, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t}\n\n\telementDelete(id) {\n\t\tif (this.lineDelete(id)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.ellipseDelete(id)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.squareDelete(id)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.textDelete(id)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.extrasDelete(id)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tlineNewID() {\n\t\tthis.lineID += 1;\n\t\treturn ElementIDPrefix.Line + this.lineID;\n\t}\n\n\tlineCreate(x,y, color, arrowStart, arrowEnd, isDashed) {\n\t\tlet l = new Line(\n\t\t\tthis.lineNewID(), color,\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tarrowStart,\n\t\t\tarrowEnd,\n\t\t\tisDashed\n\t\t);\n\t\tthis.lines = this.lines.map((lx) => lx);\n\t\tthis.lines.push(l);\n\t\tthis._modified();\n\t\treturn l.id;\n\t}\n\n\tlineResizeP1(lines, id, deltaX, deltaY) {\n\t\treturn lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.resizeP1(deltaX,deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t}\n\n\tlineResizeP2(lines, id, deltaX, deltaY) {\n\t\treturn lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.resizeP2(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t}\n\n\tlineResize(id, deltaX, deltaY) {\n\t\tthis.lines = this.lineResizeP2(this.lines, id, deltaX, deltaY);\n\t\tthis._modified();\n\t}\n\n\tlineOrPathEdit(lines, pid, id, deltaX, deltaY) {\n\t\treturn lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.edit(pid, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t}\n\n\tlineEdit(pid, id, deltaX, deltaY) {\n\t\tif (id.startsWith(ElementIDPrefix.Line)) {\n\t\t\tthis.lines = this.lineOrPathEdit(\n\t\t\t\tthis.lines,\n\t\t\t\tpid, id, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\tif (id.startsWith(ElementIDPrefix.PathPlayer)) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths = this.lineOrPathEdit(\n\t\t\t\tthis.playerPathsCurrentKeyFrame(),\n\t\t\t\tpid, id, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\tif (id.startsWith(ElementIDPrefix.PathBall)) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths = this.lineOrPathEdit(\n\t\t\t\tthis.ballPathsCurrentKeyFrame(),\n\t\t\t\tpid, id, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\tthis._modified();\n\t}\n\n\t// remove empty lines\n\tlineCleanup() {\n\t\tthis.lines = this.lines.filter(l => !l.empty());\n\t\tthis._modified();\n\t}\n\n\tlineEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Line)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.isEdit = true;\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tlineEditEnd() {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tl.isEdit = false;\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tlineDelete(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Line)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.lines = this.lines.filter(l => id !== l.id);\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tellipseNewID() {\n\t\tthis.ellipseID += 1;\n\t\treturn ElementIDPrefix.Ellipse + this.ellipseID;\n\t}\n\n\tellipseCreate(x, y, color, isDashed) {\n\t\tlet el = new Ellipse(\n\t\t\tthis.ellipseNewID(), color,\n\t\t\tx,y,0,0,0,\n\t\t\tisDashed\n\t\t);\n\t\tthis.ellipses = this.ellipses.map((e) => e);\n\t\tthis.ellipses.push(el);\n\t\tthis._modified();\n\t\treturn el.id;\n\t}\n\n\tellipseResize(id, x2, y2, proportional) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.resize(x2, y2, proportional);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipseEdit(corner, id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Ellipse)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipseRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Ellipse)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\t// remove empty ellipses\n\tellipseCleanup() {\n\t\tthis.ellipses = this.ellipses.filter(el => el.rx > 0 && el.ry > 0);\n\t\tthis._modified();\n\t}\n\n\tellipseEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Ellipse)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.isEdit = true;\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tellipsesEditEnd() {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tel.isEdit = false;\n\t\t\treturn el;\n\t\t});\n\t}\n\n\tellipseDelete(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Ellipse)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.ellipses = this.ellipses.filter(el => id !== el.id);\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tsquareNewID() {\n\t\tthis.squareID += 1;\n\t\treturn ElementIDPrefix.Square + this.squareID;\n\t}\n\n\tsquareCreate(x, y, color, isDashed) {\n\t\tlet sq = new Square(\n\t\t\tthis.squareNewID(), color,\n\t\t\tx,y,0,0,0,\n\t\t\tisDashed\n\t\t);\n\t\tthis.squares = this.squares.map((s) => s);\n\t\tthis.squares.push(sq);\n\t\tthis._modified();\n\t\treturn sq.id;\n\t}\n\n\tsquareResize(id, x2, y2, proportional) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.resize(x2, y2, proportional);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tsquareEdit(corner, id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Square)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tsquareRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Square)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\t// remove empty squares\n\tsquareCleanup() {\n\t\tthis.squares = this.squares.filter(sq => sq.width > 0 && sq.height > 0);\n\t\tthis._modified();\n\t}\n\n\tsquareEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Square)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.isEdit = true;\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tsquareEditEnd() {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tsq.isEdit = false;\n\t\t\treturn sq;\n\t\t});\n\t}\n\n\tsquareDelete(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Square)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.squares = this.squares.filter(sq => id !== sq.id);\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\ttextNewID() {\n\t\tthis.textID += 1;\n\t\treturn ElementIDPrefix.Text + this.textID;\n\t}\n\n\ttextCreate(x, y, color, size) {\n\t\tlet tx = new Text(\n\t\t\tthis.textNewID(), color, size, \"\",\n\t\t\tx,y,0,\n\t\t\tfalse, true\n\t\t);\n\t\tthis.texts = this.texts.map((t) => t);\n\t\tthis.texts.push(tx);\n\t\tthis._modified();\n\t\treturn tx.id;\n\t}\n\n\ttextEditDone(id, text, bx, by, bwidth, bheight) {\n\t\tthis.texts = this.texts.map(t => {\n\t\t\tif (id === t.id) {\n\t\t\t\tt.isEdit = false;\n\t\t\t\tt.isTextEdit = false;\n\t\t\t\tt.text = text;\n\t\t\t\tt.bx = bx;\n\t\t\t\tt.by = by;\n\t\t\t\tt.bwidth = bwidth;\n\t\t\t\tt.bheight = bheight;\n\t\t\t}\n\t\t\treturn t;\n\t\t});\n\t\t// cleanup empty texts\n\t\tthis.texts = this.texts.filter(tx => tx.text.length > 0);\n\t\tthis._modified();\n\t}\n\n\ttextEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Text)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.isEdit = true;\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\ttextMove(id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Text)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.move(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\ttextRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Text)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\ttextEditEnd() {\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\ttx.isEdit = false;\n\t\t\treturn tx;\n\t\t});\n\t}\n\n\ttextDelete(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Text)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.texts = this.texts.filter(tx => id !== tx.id);\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\textrasNewID() {\n\t\tthis.extrasID += 1;\n\t\treturn ElementIDPrefix.Extras + this.extrasID;\n\t}\n\n\textrasCreate(t, color, width, height) {\n\t\t// note: extras is always added to center of pitch with edit mode selected\n\t\tlet ex = new Extras(\n\t\t\tthis.extrasNewID(),color,t,\n\t\t\tthis.width / 2,\n\t\t\tthis.height / 2,\n\t\t\twidth,height,0,\n\t\t\ttrue\n\t\t);\n\t\tthis.extras = this.extras.map((e) => e);\n\t\tthis.extras.push(ex);\n\t\tthis._modified();\n\t\treturn ex.id;\n\t}\n\n\textrasEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Extras)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.extras = this.extras.map(ex => {\n\t\t\tif (id === ex.id) {\n\t\t\t\tex.isEdit = true;\n\t\t\t}\n\t\t\treturn ex;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\textrasMove(id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Extras)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.extras = this.extras.map(ex => {\n\t\t\tif (id === ex.id) {\n\t\t\t\tex.move(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn ex;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\textrasRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Extras)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.extras = this.extras.map(ex => {\n\t\t\tif (id === ex.id && ex.isRotatable) {\n\t\t\t\tex.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn ex;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\textrasEdit(corner, id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Extras)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.extras = this.extras.map(ex => {\n\t\t\tif (id === ex.id) {\n\t\t\t\tex.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn ex;\n\t\t});\n\t\tthis._modified();\n\t\treturn this.extras;\n\t}\n\n\textrasEditEnd() {\n\t\tthis.extras = this.extras.map(ex => {\n\t\t\tex.isEdit = false;\n\t\t\treturn ex;\n\t\t});\n\t}\n\n\textrasDelete(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Extras)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.extras = this.extras.filter(ex => id !== ex.id);\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\teditTopLeft(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"tl\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"tl\",id, deltaX, deltaY);\n\t\tthis.extrasEdit(\"tl\",id, deltaX, deltaY);\n\t}\n\t\n\teditTopRight(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"tr\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"tr\",id, deltaX, deltaY);\n\t\tthis.extrasEdit(\"tr\",id, deltaX, deltaY);\n\t}\n\n\teditBottomLeft(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"bl\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"bl\",id, deltaX, deltaY);\n\t\tthis.extrasEdit(\"bl\",id, deltaX, deltaY);\n\t}\n\n\teditBottomRight(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"br\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"br\",id, deltaX, deltaY);\n\t\tthis.extrasEdit(\"br\",id, deltaX, deltaY);\n\t}\n\n\teditMove(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"mv\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"mv\",id, deltaX, deltaY);\n\t\tthis.extrasEdit(\"mv\",id, deltaX, deltaY);\n\t\tthis.textMove(id, deltaX, deltaY);\n\t}\n\n\teditRotate(id, posX, posY, snap) {\n\t\tthis.playerRotate(id, posX, posY, snap);\n\t\tthis.squareRotate(id, posX, posY, snap);\n\t\tthis.ellipseRotate(id, posX, posY, snap);\n\t\tthis.extrasRotate(id, posX, posY, snap);\n\t\tthis.textRotate(id, posX, posY, snap);\n\t}\n\n\tendAllEdits() {\n\t\tthis.lineEditEnd();\n\t\tthis.squareEditEnd();\n\t\tthis.ellipsesEditEnd();\n\t\tthis.extrasEditEnd();\n\t\tthis.textEditEnd();\n\t\tthis.playerEditEnd();\n\t\tthis._modified();\n\t}\n\n\tget overlay() {\n\t\treturn this._overlay;\n\t}\n\n\tset overlay(value) {\n\t\tif (this._overlay === value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._overlay = value;\n\t\tthis._modified();\n\t}\n\n\toverlaySize() {\n\t\tswitch (this.overlay) {\n\t\t\tcase \"exercise\":\n\t\t\t\treturn {width:2800, height:2000};\n\t\t\tcase \"basketball\":\n\t\t\t\treturn {width:2800, height:1500}\n\t\t\tcase \"volleyball\":\n\t\t\t\treturn {width:1800, height:900}\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default PitchFutsal;","class DrawMode {\n\tconstructor() {\n\t\tthis._mode='select';\n\t\tthis._lineArrowStart = false;\n\t\tthis._lineArrowEnd = false;\n\t\tthis._lineDashed = false;\n\t\tthis._color = 0;\n\t\tthis._textSize = 2;\n\t\tthis._pitchOverlay = 'none';\n\t\tthis._objectColors = ['#8b2323','#e7e739','#912cee','#04b804','#1d4ba0','#ee2c2c','#ff7f50','#56c6eb'];\n\t\tthis._playerColors = ['#8b2323','#e7e739','#912cee','#04b804','#1d4ba0','#ee2c2c','#ff7f50','#56c6eb'];\n\t\tthis._ballColors = ['#ffa500','#cc3333','#222333','#0000ff','#ffffff'];\n\t\tthis.onModified = null;\n\t}\n\n\t_modified() {\n\t\tlet dm = new DrawMode();\n\t\tdm._mode = this.mode;\n\t\tdm._lineArrowStart = this.lineArrowStart;\n\t\tdm._lineArrowEnd = this.lineArrowEnd;\n\t\tdm._lineDashed = this.lineDashed;\n\t\tdm._color = this.color;\n\t\tdm._textSize = this.textSize;\n\t\tdm._pitchOverlay = this.pitchOverlay;\n\t\tdm._objectColors = this._objectColors;\n\t\tdm._playerColors = this._playerColors;\n\t\tdm._ballColors = this._ballColors;\n\t\t// trigger event modified\n\t\tif (null !== this.onModified) {\n\t\t\tthis.onModified(dm);\n\t\t}\n\t}\n\n\t// default modes\n\t// select\t- select / move\n\t// delete\t- delete element\n\t// line\t\t- draw lines\n\t// square\t- draw square\n\t// ellipse\t- draw ellipse\n\t// text\t\t- draw text\n\tget modeOptions(){\n\t\treturn ['select','delete','line','square','ellipse','text','extras'];\n\t}\n\n\tget mode() {\n\t\treturn this._mode;\n\t}\n\n\tset mode(value) {\n\t\tthis._mode = value;\n\t\tthis._modified();\n\t}\n\n\tget lineArrowStart() {\n\t\treturn this._lineArrowStart;\n\t}\n\n\tset lineArrowStart(value) {\n\t\tthis._lineArrowStart = value;\n\t\tthis._modified();\n\t}\n\n\tget lineArrowEnd() {\n\t\treturn this._lineArrowEnd;\n\t}\n\n\tset lineArrowEnd(value) {\n\t\tthis._lineArrowEnd = value;\n\t\tthis._modified();\n\t}\n\n\tget lineDashed() {\n\t\treturn this._lineDashed;\n\t}\n\n\tset lineDashed(value) {\n\t\tthis._lineDashed = value;\n\t\tthis._modified();\n\t}\n\n\tget colorOptions() {\n\t\treturn this._objectColors;\n\t}\n\n\tget colorOptionsPlayer() {\n\t\treturn this._playerColors;\n\t}\n\n\tget colorOptionsBall() {\n\t\treturn this._ballColors;\n\t}\n\n\t// hardcoded edit color\n\tget editColor() {\n\t\treturn '#666666';\n\t}\n\n\t// hardcoded edit color index\n\tget editColorIndex() {\n\t\treturn 99;\n\t}\n\n\tupdateColors(objectColors, playerColors, ballColors) {\n\t\tthis._objectColors = objectColors;\n\t\tthis._playerColors = playerColors;\n\t\tthis._ballColors = ballColors;\n\t\tthis._modified();\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tget colorSelected() {\n\t\treturn this._objectColors[this._color];\n\t}\n\n\tget colorSelectedName() {\n\t\treturn \"Color \" + this._color;\n\t}\n\n\tset color(value) {\n\t\tthis._color = value;\n\t\tthis._modified();\n\t}\n\n\tget textSizeOptions() {\n\t\treturn [\"Extra small\",\"Small\",\"Normal\",\"Large\",\"Extra large\"];\n\t}\n\n\tget textSize() {\n\t\treturn this._textSize;\n\t}\n\n\tget textSizeName() {\n\t\treturn \"Size: \" + this.textSizeOptions[this._textSize];\n\t}\n\n\tset textSize(value) {\n\t\tthis._textSize = value;\n\t\tthis._modified();\n\t}\n\n\t// default pitch overlay options\n\t// 28x20, exercises pitch\n\t// 28x15, basketball court\n\t// 18x9, volleyball court\n\tget pitchOverlayOptions(){\n\t\treturn ['none','exercise','basketball','volleyball'];\n\t}\n\n\tget pitchOverlay() {\n\t\treturn this._pitchOverlay;\n\t}\n\n\tset pitchOverlay(value) {\n\t\tthis._pitchOverlay = value;\n\t\tthis._modified();\n\t}\n}\n\nexport default DrawMode;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '../pitch/Box';\n\nclass RotateHandle extends Component {\n\trender() {\n\t\tconst box = this.props.box;\n\t\tconst half = box.width / 2;\n\t\tconst x1 = box.x + half;\n\t\tconst y1 = box.y;\n\t\tconst x2 = x1;\n\t\tconst y2 = y1 - 2 * this.props.size;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<line x1={x1} y1={y1} x2={x2} y2={y2} />\n\t\t\t\t<circle className=\"editCorner draggable\" cx={x2} cy={y2} r={this.props.size/2} data-ref={\"edit-rt-\" + box.id} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nRotateHandle.defaultProps = {\n\tsize: 50,\n\tbox: null\n}\n\nRotateHandle.propTypes = {\n\tsize: PropTypes.number,\n\tbox: PropTypes.instanceOf(Box),\n}\n\nexport default RotateHandle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Player from '../pitch/Player';\nimport Box from '../pitch/Box';\nimport RotateHandle from './RotateHandle';\n\nclass PlayerEdit extends Component {\n\n\trenderRotateHandle(isEdit, pl) {\n\t\tif (!(isEdit && pl.isEdit)) {\n\t\t\treturn null;\n\t\t}\n\t\tconst box = new Box(pl.id, -25, 0, 50, 50);\n\t\treturn (\n\t\t\t<RotateHandle box={box} />\n\t\t)\n\t}\n\n\trenderPlayerName(name) {\n\t\tif (0 === name.length) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<text y=\"-70\">{name}</text>\n\t\t);\n\t}\n\n\trenderHands(pl) {\n\t\tif (!pl.isPlaced) {\n\t\t\treturn null;\n\t\t}\n\t\tconst rotation = `rotate(${pl.rotation})`;\n\t\treturn (\n\t\t\t<g transform={rotation}>\n\t\t\t\t<line x1={-40} y1={-20} x2={0} y2={20} strokeWidth=\"20\" strokeLinecap=\"round\" />\n\t\t\t\t<line x1={40} y1={-20} x2={0} y2={20} strokeWidth=\"20\" strokeLinecap=\"round\" />\n\t\t\t\t{this.renderRotateHandle(this.props.isEdit, pl)}\n\t\t\t</g>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst pl = this.props.player;\n\t\tconst editID = this.props.isEdit ? pl.id : null;\n\t\tconst editClassName = this.props.isEdit ? 'draggable' : null;\n\t\tconst className = 'player pc' + pl.color + (this.props.isPrevFrame ? ' transparent': '');\n\t\tconst transform = `translate(${pl.pos.x} ${pl.pos.y})`;\n\t\treturn (\n\t\t\t<g className={className} textAnchor=\"middle\" transform={transform}>\n\t\t\t\t<circle r=\"35\" className={editClassName} strokeWidth=\"30\" strokeOpacity=\"0.6\" data-ref={editID} />\n\t\t\t\t{this.renderPlayerName(pl.name)}\n\t\t\t\t{this.renderHands(pl)}\n\t\t\t\t<text className=\"number\" dominantBaseline=\"central\">{pl.no}</text>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nPlayerEdit.defaultProps = {\n\tplayer: null,\n\tisEdit: true, \n\tisPrevFrame: false\n}\n\nPlayerEdit.propTypes = {\n\tplayer: PropTypes.instanceOf(Player),\n\tisEdit: PropTypes.bool,\n\tisPrevFrame: PropTypes.bool\n}\n\nexport default PlayerEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Ball from '../pitch/Ball';\n\nclass BallEdit extends Component {\n\n\tballImage() {\n\t\treturn (\n\t\t\t<g transform=\"translate(-30 -30)\">\n\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"60\" height=\"60\" viewBox=\"0 0 952 952\">\n\t\t\t\t\t<path d=\"M813 139A475 475 0 000 476a474 474 0 00476 476 474 474 0 00476-476 474 474 0 00-139-337zm-600-31l12-10a457 457 0 01370-60c-14 6-33 18-65 45a393 393 0 00-182 22c-31 11-55 23-71 33l-74-25c3 1 8-4 10-5zm433 119l-81 222-196 37-161-166c11-76 63-143 63-143s34-25 88-44a403 403 0 01174-20l113 114zM39 460c-5 32-6 66-3 100l-9-20a451 451 0 0136-252c-3 30-2 61 0 85-11 28-19 57-24 87zm40 173a418 418 0 018-239c33-28 77-44 101-52l158 164-16 179-155 52c-39-29-72-68-96-104zm470 260c-34 22-121 28-157 29a451 451 0 01-200-92c0-1-4-49-4-66l156-52 181 78 25 103h-1zm300-158c-27 38-59 75-98 102-36 25-85 34-128 41-3 1-44 8-45 6l-25-103 128-132 168-15 8 89-8 12zm3-135l-2 3-168 16-90-158 82-223 115 7a366 366 0 01118 169 434 434 0 01-55 186zm60-250a396 396 0 00-108-131c-5-25-19-65-57-107l2 2 7 5a459 459 0 01156 230v1z\"/>\n\t\t\t\t</svg>\n\t\t\t</g>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst b = this.props.ball;\n\t\tconst editID = this.props.isEdit ? b.id : null;\n\t\tconst editClassName = this.props.isEdit ? 'draggable' : null;\n\t\tconst className = 'ball bc' + b.color + (this.props.isPrevFrame ? ' transparent': '');\n\t\tconst transform = 'translate(' + b.pos.x + ' ' + b.pos.y + ')';\n\t\tconst ball = b.color === 4 ? this.ballImage() : null;\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<circle r=\"30\" className={editClassName} data-ref={editID} />\n\t\t\t\t{ball}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nBallEdit.defaultProps = {\n\tball: null,\n\tisEdit: true,\n\tisPrevFrame: false\n}\n\nBallEdit.propTypes = {\n\tball: PropTypes.instanceOf(Ball),\n\tisEdit: PropTypes.bool,\n\tisPrevFrame: PropTypes.bool\n}\n\nexport default BallEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Point from '../pitch/Point';\n\nclass DragHandle extends Component {\n\trender() {\n\t\tconst half = this.props.size / 2;\n\t\tconst x = this.props.position.x - half;\n\t\tconst y = this.props.position.y - half;\n\t\treturn (\n\t\t\t<rect className=\"editCorner draggable\" x={x} y={y} width={this.props.size} height={this.props.size} data-ref={this.props.id} />\n\t\t);\n\t}\n}\n\nDragHandle.defaultProps = {\n\tid: \"\",\n\tsize: 40,\n\tposition: null\n}\n\nDragHandle.propTypes = {\n\tid: PropTypes.string,\n\tsize: PropTypes.number,\n\tposition: PropTypes.instanceOf(Point)\n}\n\nexport default DragHandle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '../pitch/Box';\nimport Point from '../pitch/Point';\nimport DragHandle from './DragHandle';\nimport RotateHandle from './RotateHandle';\n\nclass EditBox extends Component {\n\n\trenderHandles(box) {\n\t\tif (!this.props.showResize) {\n\t\t\treturn null;\n\t\t}\n\t\tconst tl = new Point(box.x, box.y);\n\t\tconst tr = new Point(box.x + box.width, box.y);\n\t\tconst bl = new Point(box.x, box.y + box.height);\n\t\tconst br = new Point(box.x + box.width, box.y + box.height);\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<DragHandle id={\"edit-tl-\" + box.id} position={tl} />\n\t\t\t\t<DragHandle id={\"edit-tr-\" + box.id} position={tr} />\n\t\t\t\t<DragHandle id={\"edit-bl-\" + box.id} position={bl} />\n\t\t\t\t<DragHandle id={\"edit-br-\" + box.id} position={br} />\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\trenderRotateHandle(box) {\n\t\tif (!this.props.showRotate) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<RotateHandle box={box} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst box = this.props.box;\n\t\tconst boxClass = this.props.showBox ? \"editBox draggable\" : \"editTransparent draggable\";\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect className={boxClass} x={box.x} y={box.y} width={box.width} height={box.height} data-ref={\"edit-mv-\" + box.id} />\n\t\t\t\t{this.renderHandles(box)}\n\t\t\t\t{this.renderRotateHandle(box)}\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nEditBox.defaultProps = {\n\tbox: null,\n\tshowBox:false,\n\tshowResize:true,\n\tshowRotate:true\n}\n\nEditBox.propTypes = {\n\tbox: PropTypes.instanceOf(Box),\n\tshowBox: PropTypes.bool,\n\tshowResize: PropTypes.bool,\n\tshowRotate: PropTypes.bool\n}\n\nexport default EditBox;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox'\nimport Square from '../pitch/Square';\n\nclass SquareEdit extends Component {\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={false} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst sq = this.props.square;\n\t\tconst className = (sq.dashed ? 'square dashed ec' : 'square ec') + sq.color;\n\t\tconst transform = 'rotate('+ sq.rotation + ',' + sq.cx + ',' + sq.cy + ')';\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<rect x={sq.x} y={sq.y} width={sq.width} height={sq.height} data-ref={sq.id} />\n\t\t\t\t{this.editBox(sq.isEdit, sq.box)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nSquareEdit.defaultProps = {\n\tsquare: null\n}\n\nSquareEdit.propTypes = {\n\tsquare: PropTypes.instanceOf(Square)\n}\n\nexport default SquareEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox'\nimport Ellipse from '../pitch/Ellipse';\n\nclass EllipseEdit extends Component {\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={true} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst el = this.props.ellipse;\n\t\tconst className = (el.dashed ? 'ellipse dashed ec' : 'ellipse ec') + el.color;\n\t\tconst transform = 'rotate('+ el.rotation + ',' + el.cx + ',' + el.cy + ')';\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<ellipse cx={el.cx} cy={el.cy} rx={el.rx} ry={el.ry} data-ref={el.id} />\n\t\t\t\t{this.editBox(el.isEdit, el.box)}\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nEllipseEdit.defaultProps = {\n\tellipse: null\n}\n\nEllipseEdit.propTypes = {\n\tellipse: PropTypes.instanceOf(Ellipse)\n}\n\nexport default EllipseEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Line from '../pitch/Line';\nimport DragHandle from './DragHandle';\n\nclass LineEdit extends Component {\n\n\teditHandles(l, isPath) {\n\t\tif (!l.isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\t// path editing only shows control points\n\t\tif (isPath) {\n\t\t\treturn (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<DragHandle id={\"edit-l2-\" + l.id} position={l.c1} />\n\t\t\t\t\t<DragHandle id={\"edit-l3-\" + l.id} position={l.c2} />\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t\t// line editing shows all control points\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<DragHandle id={\"edit-l1-\" + l.id} position={l.p1} />\n\t\t\t\t<DragHandle id={\"edit-l2-\" + l.id} position={l.c1} />\n\t\t\t\t<DragHandle id={\"edit-l3-\" + l.id} position={l.c2} />\n\t\t\t\t<DragHandle id={\"edit-l4-\" + l.id} position={l.p2} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\trenderPath(p, key) {\n\t\tconst d = \"M \" + p.p1.x + \" \" + p.p1.y + \" C \" + p.c1.x + \" \" + p.c1.y + \" \" + p.c2.x + \" \" + p.c2.y + \" \" + p.p2.x + \" \" + p.p2.y;\n\t\tconst markerStart = p.arrowStart ? \"url(#arrowStart)\" : null;\n\t\tconst markerEnd = p.arrowEnd ? \"url(#arrowEnd)\" : null;\n\t\treturn (\n\t\t\t<path key={key} d={d} data-ref={p.id} markerStart={markerStart} markerEnd={markerEnd} />\n\t\t);\n\t}\n\n\trender() {\n\t\tconst l = this.props.line;\n\t\tconst lineType = this.props.isPath ? 'path' : 'line';\n\t\tconst className = lineType + (l.dashed ? ' dashed ec' : ' ec') + l.color;\n\t\tconst allPaths = l.paths().map((p, index) => this.renderPath(p, index.toString()));\n\t\treturn (\n\t\t\t<g className={className}>\n\t\t\t\t{allPaths}\n\t\t\t\t{this.editHandles(l, this.props.isPath)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nLineEdit.defaultProps = {\n\tline: null,\n\tisPath: false\n}\n\nLineEdit.propTypes = {\n\tline: PropTypes.instanceOf(Line),\n\tisPath: PropTypes.bool\n}\n\nexport default LineEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Text from '../pitch/Text';\nimport EditBox from './EditBox'\n\nclass TextEdit extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._selectionStart = 0;\n\t\tthis._selectionEnd = 0;\n\t\tthis._boxPadding = 10;\t\t\t\t\t// padding for text bounding box\n\t\tthis._editRef = React.createRef();\t\t// reference to editor\n\t\tthis._textRef = React.createRef();\t\t// reference to text\n\t\tthis._cursorRef = React.createRef();\t// reference to cursor\n\t\tthis._boxRef = React.createRef();\t\t// reference to text box\n\t\tthis.editStart = this.editStart.bind(this);\n\t\tthis.editChange = this.editChange.bind(this);\n\t\tthis.editKeyUp = this.editKeyUp.bind(this);\n\t\tthis.editEnd = this.editEnd.bind(this);\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (this.props.text.isTextEdit) {\n\t\t\tthis._editRef.current.focus();\n\t\t}\n\t}\n\n\t// remove all previous text elements\n\tremoveText() {\n\t\twhile (this._textRef.current.firstChild) {\n\t\t\tthis._textRef.current.removeChild(this._textRef.current.firstChild);\n\t\t}\n\t}\n\n\t// add text element\n\taddTextLine(ln) {\n\t\tlet tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n\t\ttspan.setAttribute('x','0');\n\t\ttspan.setAttribute('dy','1.2em'); \n\t\ttspan.textContent = ln;\n\t\tthis._textRef.current.appendChild(tspan);\n\t}\n\n\t// draw cursor line for text\n\tdrawCursor(x, y, height) {\n\t\tconst cln = this._cursorRef.current;\n\t\tcln.setAttribute('x1', x);\n\t\tcln.setAttribute('y1', y);\n\t\tcln.setAttribute('x2', x);\n\t\tcln.setAttribute('y2', y + height);\n\t}\n\n\t// draw bounding box around text\n\tdrawTextBoundingBox(bBox) {\n\t\tconst x = bBox.x - this._boxPadding;\n\t\tconst y = bBox.y - this._boxPadding;\n\t\tconst width = bBox.width + this._boxPadding * 2;\n\t\tconst height = bBox.height + this._boxPadding * 2;\n\n\t\tconst box = this._boxRef.current;\n\t\tbox.setAttribute('x', x);\n\t\tbox.setAttribute('y', y);\n\t\tbox.setAttribute('width', width);\n\t\tbox.setAttribute('height', height);\n\t}\n\n\teditStart(e) {\n\t\t//console.log(\"Text editStart\", this.props.text.id);\n\t\tlet t = this.props.text.text;\n\t\t// no text, render with \"I\" to draw cursor and bounding box\n\t\tif (0 === t.length) {\n\t\t\tthis._editRef.current.value = 'I';\n\t\t\tthis._editRef.current.selectionStart = 1;\n\t\t\tthis._editRef.current.selectionEnd = 1;\n\t\t\tthis.editChange(e);\n\t\t\tthis.editShowCursor();\n\t\t\tthis._editRef.current.value = t;\n\t\t\tthis._editRef.current.selectionStart = 0;\n\t\t\tthis._editRef.current.selectionEnd = 0;\n\t\t\treturn;\n\t\t}\n\t\tthis._editRef.current.value = t;\n\t\tthis._editRef.current.selectionStart = t.length;\n\t\tthis._editRef.current.selectionEnd = t.length;\n\t\tthis.editChange(e);\n\t\tthis.editShowCursor();\n\t}\n\n\teditChange(e) {\n\t\t//console.log(\"Text editChange\", this.props.text.id);\n\t\tthis.removeText();\n\t\tlet txt = this._editRef.current.value;\n\t\tlet ln = '';\n\t\tfor (let i = 0; i < txt.length; i++) {\n\t\t\tln += txt[i];\n\t\t\tif ('\\n' === txt[i]) {\n\t\t\t\tthis.addTextLine(ln);\n\t\t\t\tln = '';\n\t\t\t}\n\t\t}\n\t\tif (ln.length > 0) {\n\t\t\tthis.addTextLine(ln);\n\t\t}\n\t}\n\n\teditShowCursor() {\n\t\t//console.log(\"Text editShowCursor\", this.props.text.id);\n\t\tif (0 === this._selectionEnd) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tconst cr = this._textRef.current.getExtentOfChar(this._selectionEnd-1);\n\t\t\t//console.log(\"Cursor\", cr);\n\t\t\tthis.drawCursor(cr.x + cr.width, cr.y, cr.height);\n\n\t\t\tconst bb = this._textRef.current.getBBox();\n\t\t\t//console.log(\"Boundig Box\", bb);\n\t\t\tthis.drawTextBoundingBox(bb);\n\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\t\t\t\n\t\t}\n\t}\n\n\teditKeyUp(e) {\n\t\t//console.log(\"Text editKeyUp\", this.props.text.id);\n\t\tthis._selectionStart = this._editRef.current.selectionStart;\n\t\tthis._selectionEnd = this._editRef.current.selectionEnd;\n\t\tthis.editShowCursor();\n\t}\n\n\teditEnd(e) {\n\t\t//console.log(\"Text editEnd\", this.props.text.id);\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n        let tx = this._editRef.current.value.trim();\n\t\tvar bb = this._textRef.current.getBBox();\n\t\t//console.log(\"Text Bounding box\", bb);\n        this.removeText();\n\t\tthis.props.onEditDone(\n\t\t\tthis.props.text.id, tx, \n\t\t\tbb.x, bb.y,\n\t\t\tbb.width, bb.height\n\t\t);\n\t}\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={true} showResize={false} />\n\t\t)\n\t}\n\n\teditor(tx) {\n\t\tif (!tx.isTextEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<line ref={this._cursorRef} strokeWidth=\"8\" />\n\t\t\t\t<rect ref={this._boxRef} className=\"editBox\" x=\"0\" y=\"0\" width={tx.width} height={tx.height} />\n\t\t\t\t<foreignObject>\n\t\t\t\t\t<textarea ref={this._editRef} onFocus={this.editStart} onInput={this.editChange} onKeyUp={this.editKeyUp} onBlur={this.editEnd}></textarea>\n\t\t\t\t</foreignObject>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\trenderLines(tx){\n\t\t// don't render lines in edit mode, created manually\n\t\tif (tx.isTextEdit) {\n\t\t\treturn null;\n\t\t}\n\t\tlet lines = tx.text.split(\"\\n\");\n\t\treturn lines.map((ln, index) => {\n\t\t\treturn (\n\t\t\t\t<tspan key={index} data-ref={tx.id} x=\"0\" dy=\"1.2em\">{ln}</tspan>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst tx = this.props.text;\n        const className = 'txt'+ tx.size + ' ec' + tx.color;\n        let transform = 'translate('+ tx.x + ',' + tx.y + ')';\n        if (0 !== tx.rotation) {\n\t\t\tlet cx = tx.bx + tx.bwidth / 2;\n\t\t\tlet cy = tx.by + tx.bheight / 2;\n            transform += ' rotate('+ tx.rotation + ',' + cx + ',' + cy + ')';\n        }\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<text ref={this._textRef} data-ref={tx.id} xmlSpace=\"preserve\">\n\t\t\t\t\t{this.renderLines(tx)}\n\t\t\t\t</text>\n\t\t\t\t{this.editor(tx)}\n\t\t\t\t{this.editBox(tx.isEdit, tx.box)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nTextEdit.defaultProps = {\n\ttext: null,\n\tonEditDone: null\n}\n\nTextEdit.propTypes = {\n\ttext: PropTypes.instanceOf(Text),\n\tonEditDone: PropTypes.func\n}\n\nexport default TextEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Goal extends Component {\n\n\trender() {\n\t\tconst w = this.props.width;\n\t\tconst h = this.props.height;\n\t\tconst hW = w / 2;\t// half width\n\t\tconst hH = h / 2;\t// half height\n\t\t// top left corner of rect regarding x,y center position\n\t\tconst tlX = this.props.x - hW;\n\t\tconst tlY = this.props.y - hH;\n\t\t// top right corner of rect regarding x,y center position\n\t\tconst trX = this.props.x + hW;\n\t\tconst trY = this.props.y - hH;\n\t\t// bottom right corner of rect regarding x,y center position\n\t\tconst brX = this.props.x + hW;\n\t\tconst brY = this.props.y + hH;\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect x={tlX} y={tlY} width={w} height={h} fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" data-ref={this.props.id} />\n\t\t\t\t<line x1={trX} y1={trY} x2={brX} y2={brY} strokeWidth=\"5\" stroke=\"white\" />\n\t\t\t\t<line x1={trX} y1={trY} x2={brX} y2={brY} stroke=\"red\" strokeDasharray=\"20\" strokeWidth=\"6\" />\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nGoal.defaultProps = {\n\tid: null,\n\tx: 0,\n\ty: 0,\n\twidth: 100,\n\theight: 300\n}\n\nGoal.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\twidth: PropTypes.number,\n\theight: PropTypes.number\n}\n\n\nexport default Goal;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n\nclass Ladder extends Component {\n\n\tsteps(xL, xR, yT, h, noSteps) {\n\t\tconst yStep = h / (noSteps + 1);\n\t\treturn [...Array(noSteps)].map((e, idx) => {\n\t\t\tconst y = yT + (idx + 1) * yStep;\n\t\t\treturn (\n\t\t\t\t<line key={idx} x1={xL} y1={y} x2={xR} y2={y} strokeWidth=\"5\" stroke=\"black\" data-ref={this.props.id} />\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst w = this.props.width;\n\t\tconst h = this.props.height;\n\t\tconst hW = w / 2;\t// half width\n\t\tconst hH = h / 2;\t// half height\n\t\tconst xL = this.props.x-hW;\t// left side\n\t\tconst xR = this.props.x+hW;\t// right side\n\t\tconst yT = this.props.y-hH;\t// top side\n\t\tconst yB = this.props.y+hH;\t// bottom side\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<line x1={xL} y1={yT} x2={xL} y2={yB} strokeWidth=\"5\" stroke=\"black\" data-ref={this.props.id} />\n\t\t\t\t{this.steps(xL, xR, yT, h, 5)}\n\t\t\t\t<line x1={xR} y1={yT} x2={xR} y2={yB} strokeWidth=\"5\" stroke=\"black\" data-ref={this.props.id} />\n\t\t\t</g>\n\t\t);\n\t}\n\n}\n\nLadder.defaultProps = {\n\tid: null,\n\tx: 0,\n\ty: 0,\n\twidth: 150,\n\theight: 350\n}\n\nLadder.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\twidth: PropTypes.number,\n\theight: PropTypes.number\n}\n\nexport default Ladder;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n\nclass Cone extends Component {\n\n\t// original shape points \"55,10 45,10 30,75 15,80 50,95 85,80 70,75\"\n\t// new is centered on cord 0,0\n\tstatic shape = [\n\t\t[5,-42],\n\t\t[-5,-42],\n\t\t[-20,23],\n\t\t[-35,28],\n\t\t[0,43],\n\t\t[35,28],\n\t\t[20,23]\n\t];\n\n\trender() {\n\t\tlet points = \"\";\n\t\tCone.shape.forEach(p => {\n\t\t\tconst x = p[0] + this.props.x;\n\t\t\tconst y = p[1] + this.props.y;\n\t\t\tpoints += `${x},${y} `;\n\t\t});\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<polygon points={points} stroke=\"black\"/>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nCone.defaultProps = {\n\tid: null,\n\tx: 0,\n\ty: 0,\n\twidth: 70,\n\theight: 85\n}\n\nCone.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\twidth: PropTypes.number,\n\theight: PropTypes.number\n}\n\nexport default Cone;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n\nclass Flag extends Component {\n\n\trender() {\n\t\tconst w = this.props.width;\n\t\tconst h = this.props.height;\n\t\tconst hW = w / 2;\t// half width\n\t\tconst hH = h / 2;\t// half height\n\t\tconst lX = this.props.x - hW;\t// left X\n\t\tconst tY = this.props.y - hH;\t// top Y\n\t\tconst bY = this.props.y + hH;\t// bottom Y\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect x={lX} y={tY} width={w} height={h/3} fill=\"red\" stroke=\"black\" strokeWidth=\"3\" data-ref={this.props.id} />\n\t\t\t\t<line x1={lX} y1={tY} x2={lX} y2={bY} stroke=\"black\" strokeWidth=\"6\" data-ref={this.props.id} />\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nFlag.defaultProps = {\n\tid: null,\n\tx: 0,\n\ty: 0,\n\twidth: 130,\n\theight: 280\n}\n\nFlag.propTypes = {\n\tid: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\twidth: PropTypes.number,\n\theight: PropTypes.number\n}\n\nexport default Flag;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox';\nimport Goal from './Goal';\nimport Ladder from './Ladder';\nimport Cone from './Cone';\nimport Flag from './Flag';\nimport Extras from '../pitch/Extras';\nimport { ExtrasType } from '../pitch/Constants';\n\nclass ExtrasEdit extends Component {\n\n\teditBox(isEdit, box, isBoxVisible, isResizable, isRotatable) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={isBoxVisible} showResize={isResizable} showRotate={isRotatable} />\n\t\t)\n\t}\n\n\trenderGfx(ex) {\n\t\tswitch (ex.t) {\n\t\t\tcase ExtrasType.Goal:\n\t\t\tcase ExtrasType.GoalSmall:\n\t\t\t\treturn (<Goal id={ex.id} x={ex.x} y={ex.y} width={ex.width} height={ex.height} />);\n\t\t\tcase ExtrasType.Ladder:\n\t\t\t\treturn (<Ladder id={ex.id} x={ex.x} y={ex.y} width={ex.width} height={ex.height} />);\n\t\t\tcase ExtrasType.Cone:\n\t\t\t\treturn (<Cone id={ex.id} x={ex.x} y={ex.y} width={ex.width} height={ex.height} />);\n\t\t\tcase ExtrasType.Flag:\n\t\t\t\treturn (<Flag id={ex.id} x={ex.x} y={ex.y} width={ex.width} height={ex.height} />);\n\t\t\tdefault:\n\t\t\t\treturn (<rect x={ex.x} y={ex.y} width={ex.width} height={ex.height} data-ref={ex.id} />);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst ex = this.props.extras;\n\t\tconst transform = 'rotate('+ ex.rotation + ',' + ex.x + ',' + ex.y + ')';\n\t\treturn (\n\t\t\t<g transform={transform}>\n\t\t\t\t{this.renderGfx(ex)}\n\t\t\t\t{this.editBox(ex.isEdit, ex.box, ex.isBoxVisible, ex.isResizable, ex.isRotatable)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nExtrasEdit.defaultProps = {\n\textras: null\n}\n\nExtrasEdit.propTypes = {\n\textras: PropTypes.instanceOf(Extras)\n}\n\nexport default ExtrasEdit;","import PropTypes from 'prop-types';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\n\nfunction DialogTitleClose(props) {\n\treturn (\n\t\t<DialogTitle id={props.id}>\n\t\t\t{props.children}\n\t\t\t<IconButton aria-label=\"close\" onClick={props.onClick} sx={{ position: 'absolute', right: 8, top: 8 }}>\n\t\t\t\t<CloseIcon />\n\t\t\t</IconButton>\n\t\t</DialogTitle>\n\t);\n}\n\nDialogTitleClose.defaultProps = {\n\tid: null,\n\tonClick: null\n}\n\nDialogTitleClose.propTypes = {\n\tid: PropTypes.string,\n\tonClick: PropTypes.func\n};\n\nexport default DialogTitleClose;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitleClose from '../ui/elements/DialogTitleClose';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\n\n\nclass PlayerDialog extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tplayer: {id:\"\", name:\"\", no: 0}\n\t\t};\n\n\t\t// input references\n\t\tthis._refName = React.createRef();\n\t\tthis._refNumber = React.createRef();\n\n\t\t// events\n\t\tthis.openDialog = this.openDialog.bind(this);\n\t\tthis.close = this.close.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.remove = this.remove.bind(this);\n\t}\n\t\n\topenDialog(player) {\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\tplayer: player\n\t\t});\n\t}\n\n\tclose() {\n\t\tthis.setState({open: false});\n\t}\n\n\tsave() {\n\t\tthis.close();\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onEditDone({\n\t\t\tid: this.state.player.id,\n\t\t\tremove: false,\n\t\t\tname: this._refName.current.value,\n\t\t\tno: Number.parseInt(this._refNumber.current.value)\n\t\t})\n\t}\n\n\tremove() {\n\t\tthis.close();\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onEditDone({\n\t\t\tid: this.state.player.id,\n\t\t\tremove: true\n\t\t})\n\t}\n\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog open={this.state.open} onClose={this.close} aria-labelledby=\"form-dialog-title\">\n\t\t\t\t<DialogTitleClose id=\"form-dialog-title\" onClick={this.close}>Edit player</DialogTitleClose>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<TextField inputRef={this._refNumber} margin=\"dense\" id=\"playerNumber\" defaultValue={this.state.player.no} label=\"Number\" type=\"number\" fullWidth autoFocus />\n\t\t\t\t\t<TextField inputRef={this._refName} margin=\"dense\" id=\"playerName\" defaultValue={this.state.player.name} label=\"Name\" type=\"text\" fullWidth />\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={this.remove} variant=\"contained\" color=\"secondary\">Remove</Button>\n\t\t\t\t\t<Button onClick={this.save} variant=\"contained\" color=\"primary\">Save</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nPlayerDialog.defaultProps = {\n\tonEditDone: null\n}\n\nPlayerDialog.propTypes = {\n\tonEditDone: PropTypes.func\n}\n\nexport default PlayerDialog;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PitchFutsal from '../pitch/PitchFutsal';\nimport DrawMode from '../pitch/DrawMode';\nimport withStyles from '@mui/styles/withStyles';\nimport PlayerEdit from './PlayerEdit'\nimport BallEdit from './BallEdit'\nimport SquareEdit from './SquareEdit'\nimport EllipseEdit from './EllipseEdit'\nimport LineEdit from './LineEdit'\nimport TextEdit from './TextEdit'\nimport ExtrasEdit from './ExtrasEdit'\nimport PlayerDialog from './PlayerDialog'\n\n// this is for offset from toolbar and default class\nconst styles = theme => ({\n\toffset: {\n\t\tpaddingTop: theme.mixins.toolbar.minHeight,\n\t}\n})\n\n// define object types for mouse dragging\nconst DragObject = {\n\tNone: -1,\n\tPlayer: 0,\n\tBall: 1,\n\tCone: 2,\n\tGoal: 3,\n\tEditTopLeft: 4,\n\tEditTopRight: 5,\n\tEditBottomLeft: 6,\n\tEditBottomRight: 7,\n\tEditMove: 8,\n\tEditRotate: 9,\n\tEditLineP1: 10,\n\tEditLineC1: 11,\n\tEditLineC2: 12,\n\tEditLineP2: 13\n};\n\n// defines way to check draggable object\nconst DragObjectCheck = [\n\t{prefix: \"pl\", removePrefix: false, typ:  DragObject.Player},\n\t{prefix: \"bl\", removePrefix: false, typ:  DragObject.Ball},\n\t{prefix: \"edit-tl-\", removePrefix: true, typ:  DragObject.EditTopLeft},\n\t{prefix: \"edit-tr-\", removePrefix: true, typ:  DragObject.EditTopRight},\n\t{prefix: \"edit-bl-\", removePrefix: true, typ:  DragObject.EditBottomLeft},\n\t{prefix: \"edit-br-\", removePrefix: true, typ:  DragObject.EditBottomRight},\n\t{prefix: \"edit-mv-\", removePrefix: true, typ:  DragObject.EditMove},\n\t{prefix: \"edit-rt-\", removePrefix: true, typ:  DragObject.EditRotate},\n\t{prefix: \"edit-l1-\", removePrefix: true, typ:  DragObject.EditLineP1},\n\t{prefix: \"edit-l2-\", removePrefix: true, typ:  DragObject.EditLineC1},\n\t{prefix: \"edit-l3-\", removePrefix: true, typ:  DragObject.EditLineC2},\n\t{prefix: \"edit-l4-\", removePrefix: true, typ:  DragObject.EditLineP2}\n];\n\n\nclass PitchEdit extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._editRef = React.createRef();\t// reference to editor container\n\t\tthis._bgRef = React.createRef();\t// background reference to get client size of pitch for editing\n\t\tthis._playerDialogRef = React.createRef(); // edit player dialog reference\n\t\tthis._pitch = this.props.pitch;\n\n\t\t// mouse drag init\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t\tthis._mouseX = 0;\n\t\tthis._mouseY = 0;\n\n\t\t// add events\n\t\tthis.hContextMenu = this.hContextMenu.bind(this);\n\t\tthis.hMouseDown = this.hMouseDown.bind(this);\n\t\tthis.hMouseUp = this.hMouseUp.bind(this);\n\t\tthis.hMouseMove = this.hMouseMove.bind(this);\n\t\tthis.textEditDone = this.textEditDone.bind(this);\n\t\t\n\t\t// callbacks\n\t\tthis.playerEditDone = this.playerEditDone.bind(this);\n\t}\n\n\tgetScale() {\n\t\tconst box = this._bgRef.current.getBoundingClientRect();\n\t\treturn {\n\t\t\tX: this.props.pitch.width / box.width,\n\t\t\tY: this.props.pitch.height / box.height\n\t\t}\n\t}\n\n\t// TODO: reconsider name since it returns all positions\n\tgetRealPosition(e) {\n\t\tlet scale = this.getScale();\t// TODO: reconsider scale\n\t\tlet box = this._bgRef.current.getBoundingClientRect();\n \t\tlet x = e.clientX - box.left;\t\t\t//x position within the element.\n  \t\tlet y = e.clientY - box.top; \t\t\t//y position within the element.\n\t\tlet deltaX = e.clientX - this._mouseX;\t// deltaX mouse move on screen\n\t\tlet deltaY = e.clientY - this._mouseY;\t// deltaY mouse move on screen\n\t\tthis.resetMouseDrag(e);\n\t\tlet realPosition = {\n\t\t\tscaleX: scale.X,\n\t\t\tscaleY: scale.Y,\n\t\t\tX: x * scale.X,\n\t\t\tY: y * scale.Y,\n\t\t\tdeltaX: deltaX * scale.X,\n\t\t\tdeltaY: deltaY * scale.Y\n\t\t}\n\t\treturn realPosition;\n\t}\n\n\tresetMouseDrag(e) {\n\t\tthis._mouseX = e.clientX;\n\t\tthis._mouseY = e.clientY;\n\t}\n\t\n\tisDragStarted(e) {\n\t\tif (0 !== e.button) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!e.target.classList.contains('draggable')) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._dragNode = e.target.getAttribute(\"data-ref\");\n\t\tif (null === this._dragNode) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.resetMouseDrag(e);\n\n\t\t// get drag object\n\t\tthis._dragObjectType = DragObject.None;\n\t\tfor (const chk of DragObjectCheck ) {\n\t\t\tif (!this._dragNode.startsWith(chk.prefix)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._dragObjectType = chk.typ;\n\t\t\tif (chk.removePrefix) {\n\t\t\t\tthis._dragNode = this._dragNode.replace(chk.prefix,\"\");\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t\n\tplayerEditStarted(editNode) {\n\t\tconst editPlayer = this.props.pitch.playerEditStart(editNode);\n\t\tif (null === editPlayer) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._playerDialogRef.current.openDialog(editPlayer);\n\t\treturn true;\n\t}\n\n\t// player edit dialog callback\n\tplayerEditDone(player) {\n\t\tthis.props.pitch.playerEditDone(player);\n\t}\n\n\tobjectDrag(posX, posY, deltaX, deltaY, snap) {\n\t\tconst p = this.props.pitch;\n\t\tswitch (this._dragObjectType) {\n\t\t\tcase DragObject.Player:\n\t\t\t\tp.playerMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.Ball:\n\t\t\t\tp.ballMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopLeft:\n\t\t\t\tp.editTopLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopRight:\n\t\t\t\tp.editTopRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomLeft:\n\t\t\t\tp.editBottomLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomRight:\n\t\t\t\tp.editBottomRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditMove:\n\t\t\t\tp.editMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditRotate:\n\t\t\t\tp.editRotate(this._dragNode, posX, posY, snap);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP1:\n\t\t\t\tp.lineEdit('p1', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC1:\n\t\t\t\tp.lineEdit('c1', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC2:\n\t\t\t\tp.lineEdit('c2', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP2:\n\t\t\t\tp.lineEdit('p2', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Invalid drag object type\", this._dragObjectType, this._dragNode);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thContextMenu(e) {\n\t\tif (this.props.drawMode.mode !== 'select') {\n\t\t\treturn;\n\t\t}\n\t\tlet id = e.target.getAttribute(\"data-ref\");\n\t\tif (null === id) {\n\t\t\treturn;\n\t\t}\n\t\tconst p = this.props.pitch;\n\t\tif (this.playerEditStarted(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.squareEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.ellipseEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.lineEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.textEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.extrasEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t}\n\n\thMouseDown(e) {\n\t\tlet pos = this.getRealPosition(e);\n\t\tconst dm = this.props.drawMode;\n\t\tconst p = this.props.pitch;\n\t\tswitch (dm.mode) {\n\t\t\tcase 'line':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.lineCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineArrowStart, dm.lineArrowEnd, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.squareCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.ellipseCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.textCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.textSize\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'delete':\n\t\t\t\te.preventDefault();\n\t\t\t\tlet id = e.target.getAttribute(\"data-ref\");\n\t\t\t\tif (null !== id && p.elementDelete(id)) {\n\t\t\t\t\tdm.mode = 'select';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tif (this.isDragStarted(e)) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thMouseUp(e) {\n\t\te.preventDefault();\n\t\tconst p = this.props.pitch;\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tp.lineCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tp.squareCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tp.ellipseCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, pos.deltaX, pos.deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t\t// Reset editing\n\t\tif (0 === e.button && this._dragObjectType === DragObject.None) {\n\t\t\tp.endAllEdits();\n\t\t}\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t}\n\n\thMouseMove(e) {\n\t\tif (null == this._dragNode) {\n\t\t\treturn;\n\t\t}\n\t\tconst p = this.props.pitch;\n\t\te.preventDefault();\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tp.lineResize(this._dragNode, pos.deltaX, pos.deltaY);\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tp.squareResize(this._dragNode, pos.X, pos.Y, isShift);\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tp.ellipseResize(this._dragNode, pos.X, pos.Y, isShift);\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, pos.deltaX, pos.deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\ttextEditDone(id, text, bx, by, bwidth, bheight) {\n\t\tthis.props.pitch.textEditDone(id, text, bx, by, bwidth, bheight);\n\t\tthis.props.drawMode.mode = 'select';\n\t}\n\n\t// return current SVG in editor\n\t// TODO: Cleanup unused players and balls\n\tgetSVG() {\n\t\treturn {\n\t\t\twidth: this.props.pitch.width,\n\t\t\theight: this.props.pitch.height,\n\t\t\tsvgText: this._editRef.current.children[0].outerHTML\n\t\t}\n\t}\n\n\trenderPlayers(players, isEdit, isPrevFrame) {\n\t\tif (null === players) {\n\t\t\treturn null;\n\t\t}\n\t\tconst keyPrefix = isEdit ? \"ed\" : \"\";\n\t\treturn players.map((pl, index) => {\n\t\t\treturn (\n\t\t\t\t<PlayerEdit key={keyPrefix + index.toString()} player={pl} isEdit={isEdit} isPrevFrame={isPrevFrame} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderBalls(balls, isEdit, isPrevFrame) {\n\t\tif (null === balls) {\n\t\t\treturn null;\n\t\t}\n\t\tconst keyPrefix = isEdit ? \"ed\" : \"\";\n\t\treturn balls.map((b, index) => {\n\t\t\treturn (\n\t\t\t\t<BallEdit key={keyPrefix + index.toString()} ball={b} isEdit={isEdit} isPrevFrame={isPrevFrame} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderSquares(squares){\n\t\treturn squares.map((s, index) => {\n\t\t\treturn (\n\t\t\t\t<SquareEdit key={index.toString()} square={s} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderEllipses(ellipses){\n\t\treturn ellipses.map((el, index) => {\n\t\t\treturn (\n\t\t\t\t<EllipseEdit key={index.toString()} ellipse={el} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderLines(lines, isPath){\n\t\tif (null === lines) {\n\t\t\treturn null;\n\t\t}\n\t\tconst keyPrefix = isPath ? \"ph\" : \"\";\n\t\treturn lines.map((l, index) => {\n\t\t\t// don't render lines that are single point\n\t\t\tif (l.empty()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<LineEdit key={keyPrefix + index.toString()} line={l} isPath={isPath} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderTexts(texts){\n\t\treturn texts.map((tx, index) => {\n\t\t\treturn (\n\t\t\t\t<TextEdit key={index.toString()} text={tx} onEditDone={this.textEditDone} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderExtras(extras){\n\t\treturn extras.map((ex, index) => {\n\t\t\treturn (\n\t\t\t\t<ExtrasEdit key={index.toString()} extras={ex} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderPitchOverlay(){\n\t\tconst o = this.props.pitch.overlaySize();\n\t\tif (null === o) {\n\t\t\treturn null;\n\t\t}\n\t\tconst posX = (this.props.pitch.width - o.width) / 2;\n\t\tconst posY = (this.props.pitch.height - o.height) / 2;\n\t\tconst transform = `translate(${posX} ${posY})`;\n\t\treturn (<rect width={o.width} height={o.height} transform={transform} fill=\"none\" />);\n\t}\n\n\tgeneratePicthStyles() {\n\t\tconst dm = this.props.drawMode;\n\n\t\t// object colors\n\t\tconst colorsEdit = dm.colorOptions.map((col, index) => {\n\t\t\treturn '.ec'+ index +' { fill: '+ col +'; stroke: '+ col +'; }';\n\t\t});\n\t\t// editors default color\n\t\tconst colorsEditAll = colorsEdit.concat([\n\t\t\t'.ec' + dm.editColorIndex  + ' { fill: '+ dm.editColor +'; stroke: '+ dm.editColor +'; }'\n\t\t]);\n\n\t\t// player colors\n\t\tconst colorsPlayer = colorsEditAll.concat(\n\t\t\tdm.colorOptionsPlayer.map((col, index) => {\n\t\t\t\treturn '.pc'+ index +' { fill: '+ col +'; stroke: '+ col +'; }';\n\t\t\t})\n\t\t);\n\n\t\t// ball colors\n\t\tconst ballColors = colorsPlayer.concat(\n\t\t\tdm.colorOptionsBall.map((col, index) => {\n\t\t\t\treturn '.bc'+ index + ' { fill: '+ col +'; }';\n\t\t\t})\n\t\t);\n\n\t\treturn ballColors.concat([\n\t\t\t'.bc4 svg { fill: #000000; }',\n\t\t\t'#texts { font-family: sans-serif; font-size: 10em; cursor: default; user-select: none; }',\n\t\t\t'.txt0 text { font-size: 0.5em; }',\n\t\t\t'.txt1 text { font-size: 0.8em; }',\n\t\t\t'.txt2 text { font-size: 1em; }',\n\t\t\t'.txt3 text { font-size: 1.5em; }',\n\t\t\t'.txt4 text { font-size: 2em; }',\n\t\t\t'.player { pointer-events: none; }',\n\t\t\t'.player text { font-family: sans-serif; fill: black; }',\n\t\t\t'.player text.number { fill: white; }',\n\t\t\t'.dashed { stroke-dasharray: 20; }',\n\t\t\t'.square { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t'.ellipse { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t'.line { stroke-width: 12; }',\n\t\t\t'.line path { fill: none; stroke-width: 12; }',\n\t\t\t'.path { stroke-width: 6; }',\n\t\t\t'.path path { fill: none; stroke-width: 6; }',\n\t\t\t'.draggable { cursor: move; pointer-events: all;}',\n\t\t\t'.editBox { fill: none; stroke-width: 8; stroke-opacity: 1; }',\n\t\t\t'.editTransparent { fill: none; stroke-width: 0; }',\n\t\t\t'.editCorner { fill: red; stroke-width: 0; stroke-opacity: 1; }',\n\t\t\t'.transparent { fill-opacity: 50%; stroke-opacity: 50%; }'\n\t\t]);\n\t}\n\n\trender() {\n\t\tconst editorWidth = this.props.pitch.width;\n\t\tconst editorHeight = this.props.pitch.height;\n\t\tconst viewBox = `0 0 ${editorWidth} ${editorHeight}`;\n\n\t\t// default class is full screen width and height with padding for menu height\n\t\tconst pitchClasses = \"pitch \" + this.props.classes.offset;\n\n\t\t// Get pitch position in viewBox\n\t\tconst pitchPos = this.props.pitch.pitchPos();\n\t\tconst pitchTransform = `translate(${pitchPos.left} ${pitchPos.top})`;\n\t\t\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t<div ref={this._editRef} className={pitchClasses}>\n\t\t\t\t<svg xmlns='http://www.w3.org/2000/svg' viewBox={viewBox} onContextMenu={this.hContextMenu} onMouseDown={this.hMouseDown} onMouseUp={this.hMouseUp} onMouseMove={this.hMouseMove}>\n\t\t\t\t\t<style>\n\t\t\t\t\t\t{this.generatePicthStyles()}\n\t\t\t\t\t</style>\n\t\t\t\t\t<pattern id=\"goal-net\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" stroke=\"black\" patternUnits=\"userSpaceOnUse\">\n\t\t\t\t\t\t<line x1=\"0\" x2=\"20\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t\t<line x1=\"20\" x2=\"00\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t</pattern>\n\t\t\t\t\t<marker id=\"arrowEnd\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M0,0 L0,6 L9,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<marker id=\"arrowStart\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M9,0 L9,6 L0,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<g id=\"background\" ref={this._bgRef}>\n\t\t\t\t\t\t<rect width={editorWidth} height={editorHeight} fill=\"#b7b7b7\" fillOpacity=\"0.5\" />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitch\" transform={pitchTransform} fill=\"#0280c6\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t<rect width=\"4000\" height=\"2000\" />\n\t\t\t\t\t\t<line x1=\"2000\" x2=\"2000\" y1=\"0\" y2=\"2000\" />\n\t\t\t\t\t\t<circle r=\"300\" cx=\"2000\" cy=\"1000\" fill=\"none\" />\n\t\t\t\t\t\t<circle r=\"12\" cx=\"2000\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t<g id=\"corner_marks\">\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M25,0 a25,25 0 0,1 -25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M4000,25 a25,25 0 0,1 -25,-25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,1975 a25,25 0 0,1 25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3975,2000 a25,25 0 0,1 25,-25\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"substitition-zones\">\n\t\t\t\t\t\t\t<line x1=\"1000\" x2=\"1000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"1500\" x2=\"1500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"2500\" x2=\"2500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"3000\" x2=\"3000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left\">\n\t\t\t\t\t\t\t<line x1=\"500\" x2=\"500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"600\" x2=\"600\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"600\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,242 a600,600 0 0,1 600,600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M600,1158 a600,600 0 0,1 -600,600\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"1000\" cy=\"1000\"/>\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right\">\n\t\t\t\t\t\t\t<line x1=\"3500\" x2=\"3500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"3400\" x2=\"3400\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3400\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,842 a600,600 0 0,1 600,-600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,1158 a600,600 0 0,0 600,600\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3000\" cy=\"1000\" />\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitchOverlay\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t{this.renderPitchOverlay()}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"ellipses\">{this.renderEllipses(this.props.pitch.ellipses)}</g>\n\t\t\t\t\t<g id=\"squares\">{this.renderSquares(this.props.pitch.squares)}</g>\n\t\t\t\t\t<g id=\"extras\">{this.renderExtras(this.props.pitch.extras)}</g>\n\t\t\t\t\t<g id=\"players\" fontSize=\"50\">\n\t\t\t\t\t\t{this.renderLines(this.props.pitch.playerPathsCurrentKeyFrame(), true)}\n\t\t\t\t\t\t{this.renderPlayers(this.props.pitch.playersPreviousKeyFrame(), false, true)}\n\t\t\t\t\t\t{this.renderPlayers(this.props.pitch.playersCurrentKeyFrame(), true, false)}\n\t\t\t\t\t\t{this.renderPlayers(this.props.pitch.AnimPlayers, false, false)}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"balls\">\n\t\t\t\t\t\t{this.renderLines(this.props.pitch.ballPathsCurrentKeyFrame(), true)}\n\t\t\t\t\t\t{this.renderBalls(this.props.pitch.ballsPreviousKeyFrame(), false, true)}\n\t\t\t\t\t\t{this.renderBalls(this.props.pitch.ballsCurrentKeyFrame(), true, false)}\n\t\t\t\t\t\t{this.renderBalls(this.props.pitch.AnimBalls, false, false)}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"lines\">{this.renderLines(this.props.pitch.lines, false)}</g>\n\t\t\t\t\t<g id=\"texts\">{this.renderTexts(this.props.pitch.texts)}</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<PlayerDialog ref={this._playerDialogRef} onEditDone={this.playerEditDone} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nPitchEdit.defaultProps = {\n\tpitch: null,\n\tdrawMode: null\n}\n\nPitchEdit.propTypes = {\n\tpitch: PropTypes.instanceOf(PitchFutsal),\n\tdrawMode: PropTypes.instanceOf(DrawMode)\n}\n\nexport default withStyles(styles, { withTheme: true })(PitchEdit);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '@mui/material/Box';\nimport Radio from '@mui/material/Radio';\nimport Tooltip from '@mui/material/Tooltip';\nimport Paper from '@mui/material/Paper';\nimport CheckIcon from '@mui/icons-material/Check';\n\nclass ColorPalette extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.selected = this.selected.bind(this);\n\t}\n\n\tselected(e) {\n\t\tconst index = parseInt(e.target.value);\n\t\tif (null !== this.props.onSelected) {\n\t\t\tthis.props.onSelected(index, this.props.palette[index]);\n\t\t}\n\t}\n\n\tradioIcon(isChecked, color) {\n\t\tif (!isChecked) {\n\t\t\treturn (\n\t\t\t\t<Box sx={{\n\t\t\t\t\twidth: this.props.colorWidth,\n\t\t\t\t\theight: this.props.colorHeight,\n\t\t\t\t\tbackgroundColor: color\n\t\t\t\t}} \n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Box sx={{\n\t\t\t\twidth: this.props.colorWidth, \n\t\t\t\theight: this.props.colorHeight,\n\t\t\t\tborder: 1,\n\t\t\t\tborderColor: 'white',\n\t\t\t\tcolor: 'common.white',\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tjustifyContent: 'center',\n\t\t\t\talignItems: 'center',\n\t\t\t\tbackgroundColor: color\n\t\t\t}}>\n\t\t\t\t<CheckIcon style={{ fontSize: this.props.checkIconFontSize }} />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tcolors(){\n\t\treturn this.props.palette.map((color, index)=>{\n\t\t\tconst icon = this.radioIcon(false, color);\n\t\t\tconst checked = this.radioIcon(true, color);\n\t\t\tconst title = `${this.props.toolTipPrefix} ${index}`;\n\t\t\tconst isChecked = this.props.colorSelected === index;\n\t\t\treturn (\n\t\t\t\t<Tooltip placement=\"bottom\" title={title} key={index}>\n\t\t\t\t\t<Paper sx={{m:0.4}}>\n\t\t\t\t\t\t<Radio sx={{ p: 0 }} color=\"default\" name=\"color-select\" value={index} checked={isChecked} icon={icon} checkedIcon={checked} onChange={this.selected} />\n\t\t\t\t\t</Paper>\n\t\t\t\t</Tooltip>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Box sx={{display: 'flex', flexWrap: 'wrap'}}>{this.colors()}</Box>\n\t\t);\n\t}\n}\n\nColorPalette.defaultProps = {\n\tpalette: null,\n\ttoolTipPrefix: \"\",\n\tcolorSelected: -1,\n\tonSelected: null,\n\tcolorWidth: 32,\n\tcolorHeight: 32,\n\tcheckIconFontSize: 30\n}\n\nColorPalette.propTypes = {\n\tpalette: PropTypes.arrayOf(PropTypes.string),\n\ttoolTipPrefix: PropTypes.string,\n\tcolorSelected: PropTypes.number,\n\tonSelected: PropTypes.func,\n\tcolorWidth: PropTypes.number,\n\tcolorHeight: PropTypes.number,\n\tcheckIconFontSize: PropTypes.number\n};\n\nexport default ColorPalette;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport ColorPalette from './elements/ColorPalette';\nimport DialogTitleClose from './elements/DialogTitleClose';\n\nclass PaletteDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\topen: false\n\t\t}\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.colorSelected = this.colorSelected.bind(this);\n\t}\n\n\tShow() {\n\t\tthis.setState({ open: true });\n\t}\n\n\thandleClose() {\n\t\tthis.setState({ open: false });\n\t}\n\n\tcolorSelected(index, color) {\n\t\tthis.props.drawMode.color = index;\n\t\tthis.handleClose();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitleClose id=\"responsive-dialog-title\" onClick={this.handleClose}>Draw color palette</DialogTitleClose>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<ColorPalette toolTipPrefix=\"Color\" colorWidth={48} colorHeight={48} palette={this.props.drawMode.colorOptions} colorSelected={this.props.drawMode.color} onSelected={this.colorSelected} />\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nPaletteDialog.defaultProps = {\n\tdrawMode: null\n}\n\nPaletteDialog.propTypes = {\n\tdrawMode: PropTypes.instanceOf(DrawMode)\n};\n\nexport default PaletteDialog;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Goal from '../editors/Goal';\nimport Ladder from '../editors/Ladder';\nimport Cone from '../editors/Cone';\nimport Flag from '../editors/Flag';\nimport { ExtrasDefaults, ExtrasType } from '../pitch/Constants';\nimport withStyles from '@mui/styles/withStyles';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitleClose from './elements/DialogTitleClose';\nimport DialogContent from '@mui/material/DialogContent';\nimport Radio from '@mui/material/Radio';\nimport SvgIcon from '@mui/material/SvgIcon';\n\nconst styles = theme => ({\n\tradio: {\n\t\tpadding: 0,\n\t},\n\tradioIcon: {\n\t\twidth: 100,\n\t\theight: 100,\n\t}\n})\n\nclass ExtrasDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\topen: false\n\t\t}\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.extrasChange = this.extrasChange.bind(this);\n\t}\n\n\tShow() {\n\t\tthis.setState({open: true});\n\t}\n\n\thandleClose() {\n\t\tthis.setState({open: false});\n\t}\n\n\textrasChange(e) {\n\t\tif (this.props.extrasCreate) {\n\t\t\tlet t = parseInt(e.target.value);\n\t\t\tconst def = ExtrasDefaults[t];\n\t\t\tthis.props.extrasCreate(t, def.width, def.height);\n\t\t}\n\t\tthis.handleClose();\n\t}\n\n\tgetExtrasGfx(extrasType) {\n\t\tconst def = ExtrasDefaults[extrasType];\n\t\tconst x = def.width / 2 * def.viewBoxScale;\n\t\tconst y = def.height / 2 * def.viewBoxScale;\n\t\tswitch (extrasType) {\n\t\t\tcase ExtrasType.Goal:\n\t\t\tcase ExtrasType.GoalSmall:\n\t\t\t\treturn (<Goal x={x} y={y} width={def.width} height={def.height} />);\n\t\t\tcase ExtrasType.Ladder:\n\t\t\t\treturn (<Ladder x={x} y={y} width={def.width} height={def.height} />);\n\t\t\tcase ExtrasType.Cone:\n\t\t\t\treturn (<Cone x={x} y={y} width={def.width} height={def.height} />);\n\t\t\tcase ExtrasType.Flag:\n\t\t\t\treturn (<Flag x={x} y={y} width={def.width} height={def.height} />);\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Unknown extras type\");\n\t\t}\n\t}\n\n\tradioIcon(extrasType) {\n\t\tconst def = ExtrasDefaults[extrasType];\n\t\tconst viewBox = `0 0 ${def.width * def.viewBoxScale} ${def.height * def.viewBoxScale}`;\n\t\treturn (\n\t\t\t<SvgIcon viewBox={viewBox} className={this.props.classes.radioIcon}>\n\t\t\t\t{this.getExtrasGfx(extrasType)}\n\t\t\t</SvgIcon>\n\t\t);\n\t}\n\n\trenderRadios() {\n\t\tconst allExtras = [ExtrasType.Goal, ExtrasType.GoalSmall, ExtrasType.Ladder, ExtrasType.Cone, ExtrasType.Flag];\n\t\treturn allExtras.map((val, index) => {\n\t\t\tconst ico = this.radioIcon(val);\n\t\t\tconst def = ExtrasDefaults[val];\n\t\t\treturn (\n\t\t\t\t<div key={index} style={{display: 'inline-block'}}>\n\t\t\t\t\t<label style={{display: 'block',  textAlign: \"center\"}}>{def.name}</label>\n\t\t\t\t\t<Radio name=\"extras-select\" value={val} className={this.props.classes.radio} icon={ico} onChange={this.extrasChange} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitleClose id=\"responsive-dialog-title\" onClick={this.handleClose}>Select element to place on pitch</DialogTitleClose>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t{this.renderRadios()}\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nExtrasDialog.defaultProps = {\n\textrasCreate: null,\n}\n\nExtrasDialog.propTypes = {\n\tclasses: PropTypes.object.isRequired,\n\textrasCreate: PropTypes.func\n};\n\nexport default withStyles(styles, { withTheme: true })(ExtrasDialog);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport Divider from '@mui/material/Divider';\nimport Collapse from '@mui/material/Collapse';\nimport List from '@mui/material/List';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport ListItemSecondaryAction from '@mui/material/ListItemSecondaryAction';\nimport Switch from '@mui/material/Switch';\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Tooltip from '@mui/material/Tooltip';\nimport IconButton from '@mui/material/IconButton';\nimport PaletteDialog from './PaletteDialog';\nimport ExtrasDialog from './ExtrasDialog';\nimport TextFields from '@mui/icons-material/TextFields';\nimport Palette from '@mui/icons-material/Palette';\nimport SportsSoccer from '@mui/icons-material/SportsSoccer';\nimport ExpandLess from '@mui/icons-material/ExpandLess';\nimport ExpandMore from '@mui/icons-material/ExpandMore';\nimport CursorDefault from 'mdi-material-ui/CursorDefault';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport VectorLine from 'mdi-material-ui/VectorLine';\nimport ShapeSquarePlus from 'mdi-material-ui/ShapeSquarePlus';\nimport ShapeOvalPlus from 'mdi-material-ui/ShapeOvalPlus';\nimport ArrowLeft from 'mdi-material-ui/ArrowLeft';\nimport ArrowRight from 'mdi-material-ui/ArrowRight';\nimport ArrowLeftRight from 'mdi-material-ui/ArrowLeftRight';\nimport Minus from 'mdi-material-ui/Minus';\nimport DotsHorizontal from 'mdi-material-ui/DotsHorizontal';\n\nclass DrawMenu extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tanchorEl: null,\n\t\t\tlineArrows: false,\n\t\t\tlinePattern: false,\n\t\t\tpitchOverlays: false,\n\t\t\ttextSizes: false\n\t\t}\n\n\t\t// dialog references\n\t\tthis.refPaletteDialog = React.createRef();\n\t\tthis.refExtrasDialog = React.createRef();\n\n\t\tthis.open = this.open.bind(this);\n\t\tthis.close = this.close.bind(this);\n\n\t\tthis.lineArrowsToggle = this.lineArrowsToggle.bind(this);\n\t\tthis.lineArrowEndToggle = this.lineArrowEndToggle.bind(this);\n\t\tthis.lineArrowStartToggle = this.lineArrowStartToggle.bind(this);\n\n\t\tthis.linePatternToggle = this.linePatternToggle.bind(this);\n\t\tthis.lineDashedOn = this.lineDashedOn.bind(this);\n\t\tthis.lineDashedOff = this.lineDashedOff.bind(this);\n\n\t\tthis.pitchOverlaysToggle = this.pitchOverlaysToggle.bind(this); \n\t\tthis.pitchOverlayOnChange = this.pitchOverlayOnChange.bind(this);\n\n\t\tthis.colorSelect = this.colorSelect.bind(this);\n\t\tthis.extrasSelect = this.extrasSelect.bind(this);\n\n\t\tthis.textSizesToggle = this.textSizesToggle.bind(this);\n\t\tthis.textSizeSelected = this.textSizeSelected.bind(this);\n\t}\n\n\topen(e) {\n\t\tthis.setState({ open:true, anchorEl: e.currentTarget });\n\t}\n\n\tclose(e) {\n\t\t// read from \"data-value\" attribute\n\t\tconst mode = e.currentTarget.dataset.value;\n\t\tif (mode) {\n\t\t\tthis.props.drawMode.mode = mode;\n\t\t}\n\t\t// close sub menus\n\t\tthis.setState({\n\t\t\topen:false,\n\t\t\tanchorEl: null,\n\t\t\tlineArrows: false,\n\t\t\tlinePattern: false,\n\t\t\tpitchOverlays: false,\n\t\t\ttextSizes: false\n\t\t});\n\t}\n\n\tlineArrowsToggle() {\n\t\tthis.setState({ lineArrows: !this.state.lineArrows });\n\t}\n\n\tlineArrowStartToggle() {\n\t\tthis.props.drawMode.lineArrowStart = !this.props.drawMode.lineArrowStart\n\t}\n\n\tlineArrowEndToggle() {\n\t\tthis.props.drawMode.lineArrowEnd = !this.props.drawMode.lineArrowEnd\n\t}\n\n\tlineArrowsIcon() {\n\t\tconst dm = this.props.drawMode;\n\t\tif (dm.lineArrowStart && dm.lineArrowEnd) {\n\t\t\treturn (<ArrowLeftRight />);\n\t\t}\n\t\tif (!dm.lineArrowStart && dm.lineArrowEnd) {\n\t\t\treturn (<ArrowRight />);\n\t\t}\n\t\tif (dm.lineArrowStart && !dm.lineArrowEnd) {\n\t\t\treturn (<ArrowLeft />);\n\t\t}\n\t\treturn (<Minus />);\n\t}\n\n\tlinePatternToggle() {\n\t\tthis.setState({ linePattern: !this.state.linePattern });\n\t}\n\n\tlineDashedOn() {\n\t\tthis.props.drawMode.lineDashed = true;\n\t\tthis.setState({ linePattern: false });\n\t}\n\n\tlineDashedOff() {\n\t\tthis.props.drawMode.lineDashed = false;\n\t\tthis.setState({ linePattern: false });\n\t}\n\n\tlinePatternIcon() {\n\t\tif (this.props.drawMode.lineDashed) {\n\t\t\treturn (<DotsHorizontal />);\n\t\t}\n\t\treturn (<Minus />);\n\t}\n\n\tpitchOverlaysRender() {\n\t\treturn this.props.drawMode.pitchOverlayOptions.map((txt, index) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={index} control={<Radio />} label={txt} value={txt} style={{marginLeft:0}} />\n\t\t\t);\n\t\t});\n\t}\n\n\tpitchOverlaysToggle() {\n\t\tthis.setState({\n\t\t\tpitchOverlays: !this.state.pitchOverlays\n\t\t});\n\t}\n\n\tpitchOverlayOnChange(e) {\n\t\tthis.props.drawMode.pitchOverlay = e.target.value;\n\t\tthis.setState({\n\t\t\topen: false,\n\t\t\tanchorEl: null,\n\t\t\tpitchOverlays: false\n\t\t});\n\t}\n\n\tcolorSelect(e) {\n\t\tthis.close(e);\n\t\tthis.refPaletteDialog.current.Show();\n\t}\n\n\textrasSelect(e) {\n\t\tthis.close(e);\n\t\tthis.refExtrasDialog.current.Show();\n\t}\n\n\ttextSizesToggle() {\n\t\tthis.setState({\n\t\t\ttextSizes: !this.state.textSizes\n\t\t});\n\t}\n\n\ttextSizeSelected(e) {\n\t\tlet sz = e.target.value;\n\t\tif (sz) {\n\t\t\tthis.props.drawMode.textSize = parseInt(sz);\n\t\t}\n\t\tthis.textSizesToggle();\n\t}\n\n\ttextSizeItemsRender() {\n\t\treturn this.props.drawMode.textSizeOptions.map((txt, index) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={index} control={<Radio />} label={txt} value={index} style={{marginLeft:0}} />\n\t\t\t);\n\t\t});\n\t}\n\n\tdrawingModeIcon() {\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\treturn (<VectorLine />);\n\t\t\tcase 'square':\n\t\t\t\treturn (<ShapeSquarePlus />);\n\t\t\tcase 'ellipse':\n\t\t\t\treturn (<ShapeOvalPlus />);\n\t\t\tcase 'text':\n\t\t\t\treturn (<TextFields />);\n\t\t\tcase 'extras':\n\t\t\t\treturn (<SportsSoccer />);\n\t\t\tcase 'delete':\n\t\t\t\treturn (<DeleteIcon />);\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\treturn (<CursorDefault />);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst dm = this.props.drawMode;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Tooltip title=\"Selected draw mode\">\n\t\t\t\t\t<IconButton aria-label=\"Selected draw mode\" color=\"inherit\" onClick={this.open}>\n\t\t\t\t\t\t{this.drawingModeIcon()}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Menu id=\"drawingMenu\" anchorEl={this.state.anchorEl} keepMounted open={this.state.open} onClose={this.close}>\n\t\t\t\t\t<MenuItem data-value=\"select\" onClick={this.close}>\n\t\t\t\t\t\t<ListItemIcon><CursorDefault /></ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Select / Move\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<MenuItem data-value=\"delete\" onClick={this.close}>\n\t\t\t\t\t\t<ListItemIcon><DeleteIcon /></ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Delete element\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<MenuItem onClick={this.pitchOverlaysToggle}>\n\t\t\t\t\t\t<ListItemText primary=\"Pitch overlay\" secondary={dm.pitchOverlay} />\n\t\t\t\t\t\t{this.state.pitchOverlays ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Collapse in={this.state.pitchOverlays} timeout=\"auto\" unmountOnExit>\n\t\t\t\t\t\t<RadioGroup name=\"radio-pitch-overlays\" value={dm.pitchOverlay} onChange={this.pitchOverlayOnChange}>\n\t\t\t\t\t\t\t{this.pitchOverlaysRender()}\n\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t</Collapse>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<MenuItem onClick={this.colorSelect}>\n\t\t\t\t\t\t<ListItemIcon><Palette style={{ color: dm.colorSelected }} /></ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Drawing color\" secondary={dm.colorSelectedName} />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<MenuItem data-value=\"select\" onClick={this.extrasSelect}>\n\t\t\t\t\t\t<ListItemIcon><SportsSoccer /></ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Extras\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<MenuItem data-value=\"line\" onClick={this.close}>\n\t\t\t\t\t\t<ListItemIcon><VectorLine /></ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Draw line\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem onClick={this.lineArrowsToggle}>\n\t\t\t\t\t\t<ListItemIcon>{this.lineArrowsIcon()}</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Line arrows\" />\n\t\t\t\t\t\t{this.state.lineArrows ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Collapse in={this.state.lineArrows} timeout=\"auto\" unmountOnExit>\n\t\t\t\t\t\t<List component=\"div\" disablePadding>\n\t\t\t\t\t\t\t<MenuItem onClick={this.lineArrowEndToggle}>\n\t\t\t\t\t\t\t\t<ListItemIcon><ArrowRight /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"End\" />\n\t\t\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t\t\t<Switch edge=\"end\" onChange={this.lineArrowEndToggle} checked={dm.lineArrowEnd} />\n\t\t\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem onClick={this.lineArrowStartToggle}>\n\t\t\t\t\t\t\t\t<ListItemIcon><ArrowLeft /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Start\" />\n\t\t\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t\t\t<Switch edge=\"end\" onChange={this.lineArrowStartToggle} checked={dm.lineArrowStart} />\n\t\t\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Collapse>\n\t\t\t\t\t<MenuItem onClick={this.linePatternToggle}>\n\t\t\t\t\t\t<ListItemIcon>{this.linePatternIcon()}</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Line pattern\" />\n\t\t\t\t\t\t{this.state.linePattern ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Collapse in={this.state.linePattern} timeout=\"auto\" unmountOnExit>\n\t\t\t\t\t\t<List component=\"div\" disablePadding>\n\t\t\t\t\t\t\t<MenuItem onClick={this.lineDashedOff}>\n\t\t\t\t\t\t\t\t<ListItemIcon><Minus /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Solid\" />\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<MenuItem onClick={this.lineDashedOn}>\n\t\t\t\t\t\t\t\t<ListItemIcon><DotsHorizontal /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Dashed\" />\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Collapse>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<MenuItem data-value=\"square\" onClick={this.close}>\n\t\t\t\t\t\t<ListItemIcon><ShapeSquarePlus /></ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Draw square\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<MenuItem data-value=\"ellipse\" onClick={this.close}>\n\t\t\t\t\t\t<ListItemIcon><ShapeOvalPlus /></ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Draw ellipse\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<MenuItem data-value=\"text\" onClick={this.close}>\n\t\t\t\t\t\t<ListItemIcon><TextFields /></ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Write text\" secondary={dm.textSizeName} />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem onClick={this.textSizesToggle}>\n\t\t\t\t\t\t<ListItemText primary=\"Text sizes\" />\n\t\t\t\t\t\t{this.state.textSizes ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Collapse in={this.state.textSizes} timeout=\"auto\" unmountOnExit>\n\t\t\t\t\t\t<RadioGroup name=\"radio-pitch-textSize\" value={dm.textSize} onChange={this.textSizeSelected}>\n\t\t\t\t\t\t\t{this.textSizeItemsRender()}\n\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</Menu>\n\t\t\t\t<PaletteDialog ref={this.refPaletteDialog} drawMode={dm} />\n\t\t\t\t<ExtrasDialog ref={this.refExtrasDialog} extrasCreate={this.props.extrasCreate} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nDrawMenu.defaultProps = {\n\tdrawMode: null,\n\textrasCreate: null\n}\n\nDrawMenu.propTypes = {\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\textrasCreate: PropTypes.func\n};\n\nexport default DrawMenu;","import React, { Component } from 'react';\nimport Tooltip from '@mui/material/Tooltip';\nimport IconButton from '@mui/material/IconButton';\nimport FullscreenIcon from '@mui/icons-material/Fullscreen';\nimport FullscreenExitIcon from '@mui/icons-material/FullscreenExit';\n\n// TODO: Fix fullscreen exit on esc key\nclass FullscreenToggle extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tfullScreen: false\n\t\t}\n\n\t\tthis.toggleFullScreen = this.toggleFullScreen.bind(this);\n\t}\n\n\tdomFullScreenToggle(toFullScreen) {\n\t\tif (toFullScreen) {\n\t\t\tvar elem = document.documentElement;\n\t\t\tif (elem.requestFullscreen) {\n\t\t\t\telem.requestFullscreen();\n\t\t\t\t} else if (elem.mozRequestFullScreen) { /* Firefox */\n\t\t\t\telem.mozRequestFullScreen();\n\t\t\t\t} else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */\n\t\t\t\telem.webkitRequestFullscreen();\n\t\t\t\t} else if (elem.msRequestFullscreen) { /* IE/Edge */\n\t\t\t\telem.msRequestFullscreen();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.exitFullscreen) {\n\t\t\tdocument.exitFullscreen();\n\t\t} else if (document.mozCancelFullScreen) {\n\t\t\tdocument.mozCancelFullScreen();\n\t\t} else if (document.webkitExitFullscreen) {\n\t\t\tdocument.webkitExitFullscreen();\n\t\t} else if (document.msExitFullscreen) {\n\t\t\tdocument.msExitFullscreen();\n\t\t}\n\t}\n\n\ttoggleFullScreen() {\n\t\tconst isFullScreen = !this.state.fullScreen;\n\t\t// dom toogle\n\t\tthis.domFullScreenToggle(isFullScreen);\n\t\t// change state to update buttons\n\t\tthis.setState({\n\t\t\tfullScreen:isFullScreen\n\t\t});\n\t}\n\n\tfsIconGet(){\n\t\tif (this.state.fullScreen) {\n\t\t\treturn(<FullscreenExitIcon />);\n\t\t} else {\n\t\t\treturn(<FullscreenIcon />);\n\t\t};\n\t}\n\n\trender() {\n\t\tconst fsIcon = this.fsIconGet();\n\t\tconst fsLabel = this.state.fullScreen ? \"Exit full screen\" : \"Enter full screen\";\n\n\t\treturn (\n\t\t\t<Tooltip title={fsLabel}>\n\t\t\t\t<IconButton aria-label={fsLabel} color=\"inherit\" onClick={this.toggleFullScreen}>\n\t\t\t\t\t{fsIcon}\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t);\n\t}\n}\n\nexport default FullscreenToggle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@mui/material/IconButton';\nimport ArrowBack from '@mui/icons-material/ArrowBack';\nimport ArrowForward from '@mui/icons-material/ArrowForward';\nimport Movie from '@mui/icons-material/Movie';\nimport Add from '@mui/icons-material/Add';\nimport Delete from '@mui/icons-material/Delete';\nimport Tooltip from '@mui/material/Tooltip';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\n\nclass AnimControls extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\t\n\thandleChange(event) {  \n\t\tthis.props.keyFrameDurationSet(event.target.value)\n\t}\n\n\tplayDisabled() {\n\t\treturn this.props.keyFrameTotal < 2;\n\t}\n\n\taddDisabled() {\n\t\tconst lastKeyFrame = this.props.keyFrameTotal-1;\n\t\treturn this.props.keyFrameCurrent !== lastKeyFrame;\n\t}\n\n\tdeleteDisabled() {\n\t\tconst lastKeyFrame = this.props.keyFrameTotal-1;\n\t\treturn this.props.keyFrameCurrent !== lastKeyFrame || 0 === lastKeyFrame;\n\t}\n\n\tpreviousDisabled() {\n\t\treturn 0 === this.props.keyFrameCurrent;\n\t}\n\n\tnextDisabled() {\n\t\tconst lastKeyFrame = this.props.keyFrameTotal-1;\n\t\treturn this.props.keyFrameCurrent === lastKeyFrame;\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Tooltip title=\"Previous Key Frame\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<IconButton edge=\"end\" color=\"inherit\" aria-label=\"Previous Key Frame\" onClick={this.props.keyFramePrevious} disabled={this.previousDisabled()}>\n\t\t\t\t\t\t\t<ArrowBack />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Tooltip title=\"Current Key Frame\">\n\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Current Key Frame\">\n\t\t\t\t\t\t{this.props.keyFrameCurrent}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Tooltip title=\"Next Key Frame\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"Next Key Frame\" onClick={this.props.keyFrameNext} disabled={this.nextDisabled()}>\n\t\t\t\t\t\t\t<ArrowForward />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<Tooltip title=\"Add Key Frame\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Add Key Frame\" onClick={this.props.keyFrameAdd} disabled={this.addDisabled()}>\n\t\t\t\t\t\t\t<Add />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Tooltip title=\"Delete Key Frame\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Add Key Frame\" onClick={this.props.keyFrameDelete} disabled={this.deleteDisabled()}>\n\t\t\t\t\t\t\t<Delete />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<Tooltip data-delay-hide=\"1000\" title=\"Select key frame duration\" placement=\"right\">\n\t\t\t\t\t<FormControl variant=\"standard\">\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tid=\"frameDurationSelect\"\n\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\tdefaultValue={5}>\n\t\t\t\t\t\t\t<MenuItem value={1}>1</MenuItem>\n\t\t\t\t\t\t\t<MenuItem value={3}>3</MenuItem>\n\t\t\t\t\t\t\t<MenuItem value={5}>5</MenuItem>\n\t\t\t\t\t\t\t<MenuItem value={7}>7</MenuItem>\n\t\t\t\t\t\t\t<MenuItem value={10}>10</MenuItem>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<Tooltip title=\"Play Animation\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<IconButton aria-label=\"Play Animation\" color=\"inherit\" onClick={this.props.animPlayerShow} disabled={this.playDisabled()}>\n\t\t\t\t\t\t\t<Movie />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nAnimControls.defaultProps = {\n\tkeyFrameCurrent: 0,\n\tkeyFrameTotal: 0,\n\tkeyFrameAdd: null,\n\tkeyFrameDelete: null,\n\tkeyFrameNext: null,\n\tkeyFramePrevious: null,\n\tkeyFrameDurationSet: null,\n\tanimPlayerShow: null\n}\n\nAnimControls.propTypes = {\n\tkeyFrameCurrent: PropTypes.number,\n\tkeyFrameTotal: PropTypes.number,\n\tkeyFrameAdd: PropTypes.func,\n\tkeyFrameDelete: PropTypes.func,\n\tkeyFrameNext: PropTypes.func,\n\tkeyFramePrevious: PropTypes.func,\n\tkeyFrameDurationSet: PropTypes.func,\n\tanimPlayerShow: PropTypes.func\n}\n\nexport default AnimControls;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitleClose from './elements/DialogTitleClose';\nimport firebase from 'firebase/compat/app';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\n\nclass SignInDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.signInSuccessWithAuthResult = this.signInSuccessWithAuthResult.bind(this);\n\t\tthis.uiConfig = {\n\t\t\tsignInFlow: 'popup',\n\t\t\tsignInOptions: [\n\t\t\t\tfirebase.auth.GoogleAuthProvider.PROVIDER_ID,\n\t\t\t\tfirebase.auth.EmailAuthProvider.PROVIDER_ID\n\t\t\t],\n\t\t\tcallbacks: {\n\t\t\t\tsignInSuccessWithAuthResult: this.signInSuccessWithAuthResult,\n\t\t\t},\n\t\t};\n\t\t\n\t\tthis.state = {\n\t\t\topen: false\n\t\t}\n\t}\n\n\tShow() {\n\t\tthis.setState({open: true});\n\t}\n\t\n\thandleClose() {\n\t\tthis.setState({open: false});\n\t}\n\n\tsignInSuccessWithAuthResult(authResult, redirectUrl) {\n\t\tconsole.log(\"SignIn success\",authResult, redirectUrl);\n\t\tthis.handleClose();\n\t\treturn false;\n\t}\t\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog fullWidth={true} maxWidth={\"sm\"} open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitleClose id=\"responsive-dialog-title\" onClick={this.handleClose}>Please select sign in method</DialogTitleClose>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<StyledFirebaseAuth uiConfig={this.uiConfig} firebaseAuth={this.props.firebaseApp.auth()}/>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nSignInDialog.defaultProps = {\n\tfirebaseApp: null\n}\n\nSignInDialog.propTypes = {\n\tfirebaseApp: PropTypes.object,\n}\n\nexport default SignInDialog;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from '@mui/material/Tooltip';\nimport IconButton from '@mui/material/IconButton';\nimport Avatar from '@mui/material/Avatar';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport Divider from '@mui/material/Divider';\nimport AccountCircle from '@mui/icons-material/AccountCircle';\nimport Logout from '@mui/icons-material/Logout';\nimport SignInDialog from './SignInDialog';\n\nclass UserAccount extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis._refSignInDialog = React.createRef();\n\t\tthis.userOnClick = this.userOnClick.bind(this);\n\t\tthis.menuOnClose = this.menuOnClose.bind(this);\n\t\tthis.state = {\n\t\t\tmenuOpen: false,\n\t\t\tanchorEl: null\n\t\t};\n\t}\n\n\tuserOnClick(event) {\n\t\tif (!this.props.isSignedIn) {\n\t\t\tthis._refSignInDialog.current.Show();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tmenuOpen: true,\n\t\t\tanchorEl: event.currentTarget\n\t\t});\n\t}\n\n\tmenuOnClose(event) {\n\t\t// read from \"data-value\" attribute\n\t\tconst selectedValue = event.currentTarget.dataset.value;\n\t\tswitch (selectedValue) {\n\t\t\tcase \"user-info\":\n\t\t\t\tbreak;\n\t\t\tcase \"logout\":\n\t\t\t\tthis.props.firebaseApp.auth().signOut();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.setState({\n\t\t\tmenuOpen: false,\n\t\t\tanchorEl: null\n\t\t});\n\t}\n\n\trender() {\n\t\tlet userName = \"Please sign in\";\n\t\tlet avatarIcon = (<AccountCircle />);\n\t\tlet avatarSrc = null;\n\n\t\tif (this.props.isSignedIn) {\n\t\t\tconst user = this.props.firebaseApp.auth().currentUser;\n\t\t\tuserName = user.displayName;\n\t\t\tif (user.photoURL) {\n\t\t\t\tavatarSrc = user.photoURL;\n\t\t\t\tavatarIcon = null;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Tooltip title={userName}>\n\t\t\t\t\t<IconButton ref={this._refMenu} aria-label=\"User\" color=\"inherit\" onClick={this.userOnClick}>\n\t\t\t\t\t\t<Avatar src={avatarSrc}>{avatarIcon}</Avatar>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Menu open={this.state.menuOpen} anchorEl={this.state.anchorEl} onClose={this.menuOnClose}\n\t\t\t\t\tPaperProps={{\n\t\t\t\t\t\televation: 0,\n\t\t\t\t\t\tsx: {\n\t\t\t\t\t\t\toverflow: 'visible',\n\t\t\t\t\t\t\tfilter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\n\t\t\t\t\t\t\tmt: 1.5,\n\t\t\t\t\t\t\t'& .MuiAvatar-root': {\n\t\t\t\t\t\t\t\twidth: 32,\n\t\t\t\t\t\t\t\theight: 32,\n\t\t\t\t\t\t\t\tml: -0.5,\n\t\t\t\t\t\t\t\tmr: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'&:before': {\n\t\t\t\t\t\t\t\tcontent: '\"\"',\n\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\tright: 14,\n\t\t\t\t\t\t\t\twidth: 10,\n\t\t\t\t\t\t\t\theight: 10,\n\t\t\t\t\t\t\t\tbgcolor: 'background.paper',\n\t\t\t\t\t\t\t\ttransform: 'translateY(-50%) rotate(45deg)',\n\t\t\t\t\t\t\t\tzIndex: 0,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\ttransformOrigin={{ horizontal: 'right', vertical: 'top' }}\n\t\t\t\t\tanchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}>\n\t\t\t\t\t<MenuItem data-value=\"user-info\" onClick={this.menuOnClose}>\n\t\t\t\t\t\t<Avatar src={avatarSrc}>{avatarIcon}</Avatar>{userName}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<MenuItem data-value=\"logout\" onClick={this.menuOnClose}>\n\t\t\t\t\t\t<ListItemIcon><Logout fontSize=\"small\" /></ListItemIcon>Logout\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</Menu>\n\t\t\t\t<SignInDialog ref={this._refSignInDialog} firebaseApp={this.props.firebaseApp} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nUserAccount.defaultProps = {\n\tfirebaseApp: null,\n\tisSignedIn: false\n}\n\nUserAccount.propTypes = {\n\tfirebaseApp: PropTypes.object,\n\tisSignedIn: PropTypes.bool\n}\n\nexport default UserAccount;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport withStyles from '@mui/styles/withStyles';\nimport AppBar from '@mui/material/AppBar';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport Tooltip from '@mui/material/Tooltip';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport LinkIcon from '@mui/icons-material/Link';\nimport DrawMenu from './DrawMenu';\nimport FullscreenToggle from './FullscreenToggle';\nimport AnimControls from './AnimControls';\nimport UserAccount from './UserAccount';\n\n// this is for custom position classes\nconst styles = theme => ({\n\tgrow: {\n\t\tflexGrow: 1,\n\t},\n});\n\nclass AppTools extends Component {\n\t//constructor(props) {\n\t//\tsuper(props);\n\t//}\n\n\trenderAnimControls() {\n\t\tif (!this.props.animExists) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className={this.props.classes.grow} />\n\t\t\t\t<AnimControls \n\t\t\t\t\tkeyFrameCurrent={this.props.animKeyFrameCurrent}\n\t\t\t\t\tkeyFrameTotal={this.props.animKeyFrameTotal}\n\t\t\t\t\tkeyFrameAdd={this.props.animKeyFrameAdd}\n\t\t\t\t\tkeyFrameDelete={this.props.animKeyFrameDelete}\n\t\t\t\t\tkeyFrameNext={this.props.animKeyFrameNext}\n\t\t\t\t\tkeyFramePrevious={this.props.animKeyFramePrevious}\n\t\t\t\t\tkeyFrameDurationSet={this.props.animKeyFrameDurationSet}\n\t\t\t\t\tanimPlayerShow={this.props.animPlayerShow}\n\t\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<AppBar position=\"fixed\">\n\t\t\t\t<Toolbar variant=\"regular\">\n\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={this.props.toggleDrawer}>\n\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">Futsal tactics board</Typography>\n\t\t\t\t\t{this.renderAnimControls()}\n\t\t\t\t\t<div className={this.props.classes.grow} />\n\t\t\t\t\t<DrawMenu drawMode={this.props.drawMode} extrasCreate={this.props.extrasCreate} />\n\t\t\t\t\t<Tooltip title=\"Share link\">\n\t\t\t\t\t\t<IconButton aria-label=\"Share link\" color=\"inherit\" disabled={!this.props.shareEnabled} onClick={this.props.shareTactics}>\n\t\t\t\t\t\t\t<LinkIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t<FullscreenToggle />\n\t\t\t\t\t<UserAccount firebaseApp={this.props.firebaseApp} isSignedIn={this.props.isSignedIn} />\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t);\n\t}\n}\n\nAppTools.defaultProps = {\n\tdrawMode: null,\n\tanimExists: false,\n\tanimKeyFrameCurrent: 0,\n\tanimKeyFrameTotal: 0,\n\tanimKeyFrameAdd: null,\n\tanimKeyFrameDelete: null,\n\tanimKeyFrameNext: null,\n\tanimKeyFramePrevious: null,\n\tkeyFrameDurationSet: null,\n\tanimPlayerShow: null,\n\textrasCreate: null,\n\tisSignedIn: false,\n\tfirebaseApp: null,\n\ttoggleDrawer: null,\n\tshareTactics: null,\n\tshareEnabled: false,\n}\n\nAppTools.propTypes = {\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\tanimExists: PropTypes.bool,\n\tanimKeyFrameCurrent: PropTypes.number,\n\tanimKeyFrameTotal: PropTypes.number,\n\tanimKeyFrameAdd: PropTypes.func,\n\tanimKeyFrameDelete: PropTypes.func,\n\tanimKeyFrameNext: PropTypes.func,\n\tanimKeyFramePrevious: PropTypes.func,\n\tkeyFrameDurationSet: PropTypes.func,\n\tanimPlayerShow: PropTypes.func,\n\textrasCreate: PropTypes.func,\n\tisSignedIn: PropTypes.bool,\n\tfirebaseApp: PropTypes.object,\n\ttoggleDrawer: PropTypes.func,\n\tshareTactics: PropTypes.func,\n\tshareEnabled: PropTypes.bool\n}\n\nexport default withStyles(styles, { withTheme: true })(AppTools);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Popover from '@mui/material/Popover';\nimport withStyles from '@mui/styles/withStyles';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport Grid from '@mui/material/Grid';\nimport Tooltip from '@mui/material/Tooltip';\nimport IconButton from '@mui/material/IconButton';\nimport LinearProgress from '@mui/material/LinearProgress';\nimport PlayArrow from '@mui/icons-material/PlayArrow';\nimport Stop from '@mui/icons-material/Stop';\nimport Pause from '@mui/icons-material/Pause';\nimport SkipNext from '@mui/icons-material/SkipNext';\nimport SkipPrevious from '@mui/icons-material/SkipPrevious';\nimport Repeat from '@mui/icons-material/Repeat';\nimport RepeatOn from '@mui/icons-material/RepeatOn';\n\nconst BorderLinearProgress = withStyles((theme) => ({\n\troot: {\n\t\theight: 10,\n\t\tborderRadius: 5,\n\t\twidth: 250\n\t},\n\tbar: {\n\t\tborderRadius: 5,\n\t\ttransition: 'none'\t// disable animation to have immediate feedback\n\t}\n}))(LinearProgress);\n  \n\nclass AnimPlayer extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisOpen: false,\n\t\t\tisPlaying: false,\n\t\t\tisRepeat: false,\n\t\t\tanimTime: 0\n\t\t}\n\t\tthis.currentTime = 0;\n\t\tthis.show = this.show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.playPause = this.playPause.bind(this);\n\t\tthis.stop = this.stop.bind(this);\n\t\tthis.animStep = this.animStep.bind(this);\n\t\tthis.repeatToggle = this.repeatToggle.bind(this);\n\t\tthis.keyFrameNext = this.keyFrameNext.bind(this);\n\t\tthis.keyFramePrevious = this.keyFramePrevious.bind(this);\n\t}\n\n\tshow() {\n\t\tthis.setState({ \n\t\t\tisOpen: true,\n\t\t\tisPlaying: false,\n\t\t\tisRepeat: false,\n\t\t\tanimTime: 0\n\t\t});\n\t\t// Prepare animation for playback\n\t\tif (null != this.props.animStart) {\n\t\t\tthis.props.animStart();\n\t\t}\n\t\t// reset current time so anim can start from beginning\n\t\tthis.currentTime = 0;\n\t\t// start animation frames\n\t\twindow.requestAnimationFrame(this.animStep);\n\t}\n\n\thandleClose() {\n\t\t// close player\n\t\tthis.setState({\n\t\t\tisOpen: false,\n\t\t\tisPlaying: false,\n\t\t\tisRepeat: false,\n\t\t\tanimTime: 0\n\t\t});\n\t\t// stop / cancel anim playback\n\t\tif (null != this.props.animStop) {\n\t\t\tthis.props.animStop();\n\t\t}\n\t}\n\n\trepeatToggle() {\n\t\tthis.setState({\n\t\t\tisRepeat: !this.state.isRepeat\n\t\t});\n\t}\n\n\tplayPause() {\n\t\tthis.setState({\n\t\t\tisPlaying: !this.state.isPlaying\n\t\t});\n\t}\n\n\tstop() {\n\t\tthis.setState({\n\t\t\tisPlaying: false,\n\t\t\tanimTime: 0\n\t\t});\n\t}\n\n\tkeyFrameDurationMs() {\n\t\treturn this.props.keyFrameDuration * 1000;\n\t}\n\n\tkeyFrameLast() {\n\t\treturn this.props.keyFramesNo - 1;\n\t}\n\n\tkeyFramePreviousDisabled() {\n\t\treturn 0 === this.state.animTime;\n\t}\n\n\tkeyFramePrevious() {\n\t\tconst kfDuration = this.keyFrameDurationMs();\n\t\tlet animTime = this.state.animTime - kfDuration;\n\t\tif (animTime < 0) {\n\t\t\tanimTime = 0;\n\t\t}\n\t\tanimTime = Math.floor(animTime / kfDuration) * kfDuration;\n\t\tthis.setState({\n\t\t\tanimTime: animTime\n\t\t});\n\t}\n\n\tkeyFrameNextDisabled() {\n\t\treturn this.state.animTime >= this.animTotalTime();\n\t}\n\n\tkeyFrameNext() {\n\t\tconst kfDuration = this.keyFrameDurationMs();\n\t\tconst totalTime = this.animTotalTime();\n\t\tlet animTime = this.state.animTime + kfDuration;\n\t\tif (animTime > totalTime) {\n\t\t\tanimTime = totalTime;\n\t\t}\n\t\tanimTime = Math.floor(animTime / kfDuration) * kfDuration;\n\t\tthis.setState({\n\t\t\tanimTime: animTime\n\t\t});\n\t}\n\n\tanimTotalTime() {\n\t\t// note: first keyframe is only initial position so it is skipped\n\t\t// total time is in milliseconds\n\t\treturn this.keyFrameLast() * this.keyFrameDurationMs();\n\t}\n\n\tanimProgress() {\n\t\tlet animTime = this.state.animTime;\n\t\tlet pct = 100 * animTime / this.animTotalTime();\n\t\treturn Math.round(pct);\n\t}\n\n\tanimTime() {\n\t\tlet timeSec = this.state.animTime / 1000;\n\t\tlet sec = Math.floor(timeSec).toString();\n\t\tlet msec = Math.floor((timeSec - sec) * 1000).toString();\n\t\t// correct formatting '000:000'\n\t\tsec = '000'.substring(0, 3 - sec.length) + sec;\n\t\tmsec = '000'.substring(0, 3 - msec.length) + msec;\n\t\treturn sec + ':' + msec;\n\t}\n\n\tanimStep(time) {\n\t\t// calc elapsed time from previous frame\n\t\tconst elapsedTime = time - this.currentTime;\n\t\tthis.currentTime = time;\n\n\t\tconst totalTime = this.animTotalTime();\n\t\tlet animTime = this.state.animTime;\n\n\t\tif (this.state.isPlaying) {\n\t\t\tanimTime += elapsedTime;\n\t\t\tif (animTime > totalTime) {\n\t\t\t\tif (this.state.isRepeat) {\n\t\t\t\t\tanimTime = 0;\n\t\t\t\t} else {\n\t\t\t\t\tanimTime = totalTime;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tanimTime: animTime\n\t\t\t})\n\t\t}\n\n\t\tif (this.state.isOpen) {\n\t\t\t// show current frame only when anim time changed\n\t\t\tif (null != this.props.animFrame) {\n\t\t\t\tthis.props.animFrame(animTime);\n\t\t\t}\n\t\t\t// request next frame\n\t\t\twindow.requestAnimationFrame(this.animStep);\n\t\t}\n\t}\n\n\trenderRepeat() {\n\t\tif (this.state.isRepeat) {\n\t\t\treturn (<RepeatOn />);\n\t\t}\n\t\treturn (<Repeat />);\n\t}\n\n\trenderPlayPause() {\n\t\tif (this.state.isPlaying) {\n\t\t\treturn (<Pause />);\n\t\t}\n\t\treturn (<PlayArrow />);\n\t}\n\n\tstopDisabled() {\n\t\treturn 0 === this.state.animTime;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Popover open={this.state.isOpen}\n\t\t\t\tonClose={this.handleClose}\n\t\t\t\tanchorEl={this.props.anchorEl}\n\t\t\t\tanchorOrigin={{vertical: 'bottom', horizontal: 'center'}}\n\t\t\t\ttransformOrigin={{horizontal: 'center', vertical: 'top'}}\n\t\t\t>\n\t\t\t\t<Grid container alignItems=\"center\">\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<Tooltip title=\"Repeat Animation\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Repeat Animation\" color=\"inherit\" onClick={this.repeatToggle}>\n\t\t\t\t\t\t\t\t{this.renderRepeat()}\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Previous key frame\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<IconButton aria-label=\"Previous key frame\" color=\"inherit\" onClick={this.keyFramePrevious} disabled={this.keyFramePreviousDisabled()}>\n\t\t\t\t\t\t\t\t\t<SkipPrevious />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Play/Pause Animation\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Play/Pause Animation\" color=\"inherit\" onClick={this.playPause}>\n\t\t\t\t\t\t\t\t{this.renderPlayPause()}\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Next key frame\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<IconButton aria-label=\"Previous key frame\" color=\"inherit\" onClick={this.keyFrameNext} disabled={this.keyFrameNextDisabled()}>\n\t\t\t\t\t\t\t\t\t<SkipNext />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Stop Animation\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<IconButton aria-label=\"Stop Animation\" color=\"inherit\" onClick={this.stop} disabled={this.stopDisabled()}>\n\t\t\t\t\t\t\t\t\t<Stop />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<Box display=\"flex\" alignItems=\"center\">\n\t\t\t\t\t\t\t<Box mr={1} minWidth={55}>\n\t\t\t\t\t\t\t\t<Typography variant=\"body2\" color=\"textSecondary\">{this.animTime()}</Typography>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box mr={1}>\n\t\t\t\t\t\t\t\t<BorderLinearProgress variant=\"determinate\" value={this.animProgress()} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Popover>\n\t\t);\n\t}\n}\n\nAnimPlayer.defaultProps = {\n\tanchorEl: null,\n\tkeyFramesNo: 0,\n\tkeyFrameDuration: 0,\n\tanimStart: null,\n\tanimStop: null,\n\tanimFrame: null,\n}\n\nAnimPlayer.propTypes = {\n\tanchorEl: PropTypes.func,\n\tkeyFramesNo: PropTypes.number,\n\tkeyFrameDuration: PropTypes.number,\n\tanimStart: PropTypes.func,\n\tanimStop: PropTypes.func,\n\tanimFrame: PropTypes.func\n}\n\nexport default AnimPlayer;","import React, { Component } from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitleClose from './elements/DialogTitleClose';\n\nclass ConfirmDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.okCallback = null;\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\ttitle: \"\",\n\t\t\ttext: \"\"\n\t\t}\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleOk = this.handleOk.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t}\n\n\tShow(title, text, fnCallback) {\n\t\tthis.okCallback = fnCallback;\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\ttitle: title,\n\t\t\ttext: text\n\t\t});\n\t}\n\t\n\thandleClose() {\n\t\tthis.okCallback = null;\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\thandleOk() {\n\t\tif (null !== this.okCallback) {\n\t\t\tthis.okCallback();\n\t\t}\n\t\tthis.handleClose();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitleClose id=\"responsive-dialog-title\" onClick={this.handleClose}>{this.state.title}</DialogTitleClose>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<DialogContentText>{this.state.text}</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={this.handleClose} variant=\"contained\" color=\"primary\" autoFocus>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.handleOk} variant=\"contained\" color=\"secondary\">Ok</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default ConfirmDialog;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport Slider from '@mui/material/Slider';\nimport Input from '@mui/material/Input';\n\nclass ColorComponent extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\tvalue: props.value\n\t\t}\n\t\tthis.sliderChange = this.sliderChange.bind(this);\n\t\tthis.inputChange = this.inputChange.bind(this);\n\t\tthis.inputBlur = this.inputBlur.bind(this);\n\t\tthis.changed = this.changed.bind(this);\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (this.props.value !== this.state.value) {\n\t\t\tthis.setState({value:this.props.value});\n\t\t}\n\t}\n\n\tchanged(newValue) {\n\t\tthis.setState({value:newValue});\n\t\tif (null === this.props.onChange) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof this.state.value === 'number') {\n\t\t\tthis.props.onChange(newValue);\n\t\t}\n\t}\n\n\tsliderChange(event, newValue) {\n\t\tthis.changed(newValue);\n\t}\n\n\tinputChange(event) {\n\t\tconsole.log(\"Input change\",event.target.value);\n\t\tlet newValue = event.target.value === '' ? '' : Number(event.target.value);\n\t\tthis.changed(newValue);\n\t}\n\n\tnumberValue() {\n\t\treturn typeof this.state.value === 'number' ?  this.state.value : 0;\n\t}\n\n\t// this is only to set defaults when input text is invalid\n\tinputBlur() {\n\t\tlet newValue = this.numberValue();\n\t\tif (newValue < 0) {\n\t\t\tnewValue = 0;\n\t\t} else if (newValue > 255) {\n\t\t\tnewValue = 255;\n\t\t}\n\t\tthis.changed(newValue);\n\t}\n\t\n\trender() {\n\t\tconst id = \"input-slider-\" + this.props.label;\n\t\treturn (\n\t\t\t<Box sx={{display: 'flex', alignItems: 'center', mt:2}}>\n\t\t\t\t<Typography id={id} sx={{ width: 55}} component=\"div\">{this.props.label}</Typography>\n\t\t\t\t<Slider sx={{ width: 'calc(100% - 110px)', ml: 2, mr: 2 }}\n\t\t\t\t\tmin={0} max={255} step={1} \n\t\t\t\t\tvalueLabelDisplay=\"auto\" \n\t\t\t\t\tvalue={this.numberValue()} \n\t\t\t\t\tonChange={this.sliderChange}\n\t\t\t\t\taria-labelledby={id}\n\t\t\t\t/>\n\t\t\t\t<Input sx={{ width: 55}}\n\t\t\t\t\tvalue={this.state.value}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tonChange={this.inputChange}\n\t\t\t\t\tonBlur={this.inputBlur}\n\t\t\t\t\tinputProps={{\n\t\t\t\t\t\tmin: 0, max: 255, step: 1,\n\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\t'aria-labelledby': id\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t);\n\t}\n}\n\nColorComponent.defaultProps = {\n\tvalue: 0,\n\tlabel: \"\",\n\tonChange: null\n}\n\nColorComponent.propTypes = {\n\tvalue: PropTypes.number,\n\tlabel: PropTypes.string,\n\tonChange: PropTypes.func\n};\n\nexport default ColorComponent;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '@mui/material/Box';\nimport ColorComponent from './ColorComponent';\nimport Paper from '@mui/material/Paper';\n\nclass ColorEditor extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.changed = this.changed.bind(this);\n\t\tthis.redChanged = this.redChanged.bind(this);\n\t\tthis.blueChanged = this.blueChanged.bind(this);\n\t\tthis.greenChanged = this.greenChanged.bind(this);\n\t}\n\n\tchanged(val, shift) {\n\t\tconst color = parseInt(this.props.color.replace(\"#\",\"0x\"));\n\t\tconst newColor = ((color & ~(0xff<<shift)) | (val << shift));\n\t\tconst strNewColor = newColor.toString(16);\n\t\tconst c = \"#000000\".substr(0, 7 - strNewColor.length) + strNewColor;\n\t\tif (null !== this.props.onChange) {\n\t\t\tthis.props.onChange(c);\n\t\t}\n\t}\n\n\tredChanged(value) {\n\t\tthis.changed(value, 16);\n\t}\n\n\tgreenChanged(value) {\n\t\tthis.changed(value, 8);\n\t}\n\n\tblueChanged(value) {\n\t\tthis.changed(value, 0);\n\t}\n\n\tgetComponents() {\n\t\tconst color = parseInt(this.props.color.replace(\"#\",\"0x\"));\n\t\treturn {\n\t\t\tred: (color >> 16) & 0xff,\n\t\t\tgreen: (color >> 8) & 0xff,\n\t\t\tblue: color & 0xff\n\t\t}\n\t}\n\n\trender() {\n\t\tconst c = this.getComponents()\n\t\treturn (\n\t\t\t<Box sx={{width:300}}>\n\t\t\t\t<Paper sx={{\n\t\t\t\t\theight: 90,\n\t\t\t\t\tbackgroundColor: this.props.color\n\t\t\t\t}} />\n\t\t\t\t<ColorComponent label=\"red\" value={c.red} onChange={this.redChanged} />\n\t\t\t\t<ColorComponent label=\"green\" value={c.green} onChange={this.greenChanged} />\n\t\t\t\t<ColorComponent label=\"blue\" value={c.blue} onChange={this.blueChanged} />\n\t\t\t</Box>\n\t\t);\n\t}\n}\n\nColorEditor.defaultProps = {\n\tcolor: null,\n\tonChange: null\n}\n\nColorEditor.propTypes = {\n\tcolor: PropTypes.string,\n\tonChange: PropTypes.func\n};\n\nexport default ColorEditor;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport ColorPalette from './elements/ColorPalette';\nimport ColorEditor from './elements/ColorEditor';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitleClose from './elements/DialogTitleClose';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\n\nclass PaletteEditorDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\topen: false\n\t\t}\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.handleOk = this.handleOk.bind(this);\n\t\tthis.drawColorSelected = this.drawColorSelected.bind(this);\n\t\tthis.playerColorSelected = this.playerColorSelected.bind(this);\n\t\tthis.ballColorSelected = this.ballColorSelected.bind(this);\n\t\tthis.colorChanged = this.colorChanged.bind(this);\n\t}\n\n\tShow() {\n\t\t// on show reset selection\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\tselPaletteType: \"draw\",\n\t\t\tselPaletteIndex: 0,\n\t\t\tdrawPalette: this.props.drawMode.colorOptions,\n\t\t\tplayersPalette: this.props.drawMode.colorOptionsPlayer,\n\t\t\tballsPalette: this.props.drawMode.colorOptionsBall\n\t\t})\n\t}\n\n\thandleClose() {\n\t\tthis.setState({open: false});\n\t}\n\n\thandleOk() {\n\t\tthis.handleClose();\n\t\tthis.props.drawMode.updateColors(\n\t\t\tthis.state.drawPalette, \n\t\t\tthis.state.playersPalette, \n\t\t\tthis.state.ballsPalette\n\t\t);\n\t}\n\n\tdrawColorSelected(index) {\n\t\tthis.setState({ selPaletteType: \"draw\", selPaletteIndex: index });\n\t}\n\n\tplayerColorSelected(index) {\n\t\tthis.setState({ selPaletteType: \"player\", selPaletteIndex: index });\n\t}\n\n\tballColorSelected(index) {\n\t\tthis.setState({ selPaletteType: \"ball\", selPaletteIndex: index });\n\t}\n\n\tselectedInPalette(paletteType) {\n\t\treturn this.state.selPaletteType === paletteType ? this.state.selPaletteIndex : -1;\n\t}\n\n\tcolorForEdit() {\n\t\tswitch (this.state.selPaletteType) {\n\t\t\tcase \"draw\":\n\t\t\t\treturn this.state.drawPalette[this.state.selPaletteIndex];\n\t\t\tcase \"player\":\n\t\t\t\treturn this.state.playersPalette[this.state.selPaletteIndex];\n\t\t\tcase \"ball\":\n\t\t\t\treturn this.state.ballsPalette[this.state.selPaletteIndex];\n\t\t\tdefault:\n\t\t\t\treturn \"#000000\";\n\t\t}\n\t}\n\n\tupdatePalette(palette, newColor) {\n\t\treturn palette.map((c,index) => {\n\t\t\tif (index === this.state.selPaletteIndex) {\n\t\t\t\treturn newColor;\n\t\t\t}\n\t\t\treturn c;\n\t\t});\n\t}\n\n\tcolorChanged(newColor) {\n\t\tswitch (this.state.selPaletteType) {\n\t\t\tcase \"draw\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tdrawPalette: this.updatePalette(this.state.drawPalette, newColor)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"player\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tplayersPalette: this.updatePalette(this.state.playersPalette, newColor)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"ball\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tballsPalette: this.updatePalette(this.state.ballsPalette, newColor)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.error(\"Invalid palette type\", this.state.selPaletteType);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog maxWidth=\"lg\" fullWidth={false} open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitleClose id=\"responsive-dialog-title\" onClick={this.handleClose}>Color palette editor</DialogTitleClose>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<Box sx={{display: 'flex', flexWrap: 'nowrap'}}>\n\t\t\t\t\t\t<Box sx={{mr:2}}>\n\t\t\t\t\t\t\t<Typography variant=\"h6\" gutterBottom component=\"div\">Drawings</Typography>\n\t\t\t\t\t\t\t<ColorPalette toolTipPrefix=\"Color\" palette={this.state.drawPalette} colorSelected={this.selectedInPalette(\"draw\")} onSelected={this.drawColorSelected} />\n\t\t\t\t\t\t\t<Typography variant=\"h6\" gutterBottom component=\"div\">Teams</Typography>\n\t\t\t\t\t\t\t<ColorPalette toolTipPrefix=\"Team\" palette={this.state.playersPalette} colorSelected={this.selectedInPalette(\"player\")} onSelected={this.playerColorSelected} />\n\t\t\t\t\t\t\t<Typography variant=\"h6\" gutterBottom component=\"div\">Balls</Typography>\n\t\t\t\t\t\t\t<ColorPalette toolTipPrefix=\"Ball\" palette={this.state.ballsPalette} colorSelected={this.selectedInPalette(\"ball\")} onSelected={this.ballColorSelected} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<ColorEditor color={this.colorForEdit()} onChange={this.colorChanged} />\n\t\t\t\t\t</Box>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={this.handleClose} variant=\"contained\" color=\"primary\" autoFocus>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.handleOk} variant=\"contained\" color=\"secondary\">Ok</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nPaletteEditorDialog.defaultProps = {\n\tdrawMode: null\n}\n\nPaletteEditorDialog.propTypes = {\n\tdrawMode: PropTypes.instanceOf(DrawMode)\n};\n\nexport default PaletteEditorDialog;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Divider from '@mui/material/Divider';\nimport Drawer from '@mui/material/Drawer';\nimport Box from '@mui/material/Box';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport Typography from '@mui/material/Typography';\nimport OpenInNew from '@mui/icons-material/OpenInNew';\nimport MovieCreation from '@mui/icons-material/MovieCreation';\nimport Delete from '@mui/icons-material/Delete';\nimport Save from '@mui/icons-material/Save';\nimport PhotoCamera from '@mui/icons-material/PhotoCamera';\nimport Palette from '@mui/icons-material/Palette';\nimport CloudDownloadIcon from '@mui/icons-material/CloudDownload';\n\nclass DrawerMenu extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.ToggleDrawer = this.ToggleDrawer.bind(this);\n\t\tthis.newScheme = this.newScheme.bind(this);\n\t\tthis.newAnimation = this.newAnimation.bind(this);\n\t\tthis.deleteAnimation = this.deleteAnimation.bind(this);\n\t\tthis.load = this.load.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.saveImage = this.saveImage.bind(this);\n\t\tthis.colorPaletteEdit = this.colorPaletteEdit.bind(this);\n\t\tthis.state = {\n\t\t\tdrawerOpen: false\n\t\t}\n\t}\n\n\tsetDrawer(isOpen) {\n\t\tthis.setState({\n\t\t\tdrawerOpen:isOpen\n\t\t});\n\t}\n\n\tToggleDrawer(e) {\n\t\tif (e.type === 'keydown' && (e.key === 'Tab' || e.key === 'Shift')) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setDrawer(!this.state.drawerOpen);\n\t}\n\n\tnewScheme() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.newScheme();\n\t}\n\n\tnewAnimation() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.newAnimation();\n\t}\n\n\tdeleteAnimation() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.deleteAnimation();\n\t}\n\n\tload() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.load();\n\t}\n\n\tsave() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.save();\n\t}\n\n\tsaveImage() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.saveImage();\n\t}\n\n\tcolorPaletteEdit() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.colorPaletteEdit();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Drawer anchor=\"left\" open={this.state.drawerOpen} onClose={this.ToggleDrawer}>\n\t\t\t\t<Box p={2}>\n\t\t\t\t\t<Typography variant=\"h4\" component=\"h2\">Tactics board</Typography>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<List component=\"nav\" aria-label=\"main mailbox folders\">\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.newScheme}>\n\t\t\t\t\t\t\t\t<ListItemIcon><OpenInNew /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"New scheme\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.newAnimation} disabled={this.props.animExists}>\n\t\t\t\t\t\t\t\t<ListItemIcon><MovieCreation /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"New animation\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.deleteAnimation} disabled={!this.props.animExists}>\n\t\t\t\t\t\t\t\t<ListItemIcon><Delete /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Delete animation\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.load} disabled={!this.props.isSignedIn}>\n\t\t\t\t\t\t\t\t<ListItemIcon><CloudDownloadIcon /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Browse my tactics\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.save} disabled={!this.props.isSignedIn}>\n\t\t\t\t\t\t\t\t<ListItemIcon><Save /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Save tactics board\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.saveImage}>\n\t\t\t\t\t\t\t\t<ListItemIcon><PhotoCamera /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Save picture\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemButton onClick={this.colorPaletteEdit}>\n\t\t\t\t\t\t\t\t<ListItemIcon><Palette /></ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Color palette edit\" />\n\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t</List>\n\t\t\t\t</Box>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n\nDrawerMenu.defaultProps = {\n\tload: null,\n\tsave: null,\n\tsaveImage: null,\n\tnewScheme: null,\n\tnewAnimation: null,\n\tdeleteAnimation: null,\n\tcolorPaletteEdit: null,\n\tanimExists: false,\n\tisSignedIn: false\n}\n\nDrawerMenu.propTypes = {\n\tload: PropTypes.func,\n\tsave: PropTypes.func,\n\tsaveImage: PropTypes.func,\n\tnewScheme: PropTypes.func,\n\tnewAnimation: PropTypes.func,\n\tdeleteAnimation: PropTypes.func,\n\tcolorPaletteEdit: PropTypes.func,\n\tanimExists: PropTypes.bool,\n\tisSignedIn: PropTypes.bool\n}\n\nexport default DrawerMenu;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitleClose from './elements/DialogTitleClose';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\n\nclass SaveDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.refName = React.createRef();\n\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.handleOk = this.handleOk.bind(this);\n\t\tthis.nameChange = this.nameChange.bind(this);\n\t\tthis.nameBlur = this.nameBlur.bind(this);\n\t\tthis.descriptionChange = this.descriptionChange.bind(this);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tname: \"\",\n\t\t\tdescription: \"\",\n\t\t\terrors:{}\n\t\t}\n\t}\n\n\tShow(name, description) {\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\tname: name,\n\t\t\tdescription: description,\n\t\t\terrors:{}\n\t\t});\n\t}\n\t\n\thandleClose() {\n\t\tthis.setState({open: false});\n\t}\n\n\thandleOk() {\n\t\t// do validation\n\t\tif (!this.isValid()) {\n\t\t\tconsole.log(\"Invalid save data\",this.state.errors);\n\t\t\treturn;\n\t\t}\n\t\t// handle result\n\t\tthis.handleClose();\n\t\tthis.props.onSave(\n\t\t\tthis.state.name.trim(),\n\t\t\tthis.state.description.trim()\n\t\t);\n\t}\n\n\tisValid() {\n\t\tconst err = this.state.errors;\n\t\tfor (const id in err) {\n\t\t\tif (!Object.hasOwnProperty.call(err, id)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (err[id].trim().length > 0) {\n\t\t\t\treturn false;\n\t\t\t} \n\t\t}\n\t\treturn true;\n\t}\n\n\tisValidRequired(target, errorText) {\n\t\tlet err = this.state.errors;\n\t\tlet isValid = true;\n\t\terr[target.id] = \"\";\n\t\tif (target.value.trim().length === 0) {\n\t\t\terr[target.id] = errorText;\n\t\t\tisValid = false;\n\t\t}\n\t\tthis.setState({ errors: err });\n\t\treturn isValid;\n\t}\n\n\tnameChange(e) {\n\t\tthis.setState({name:e.target.value})\n\t}\n\n\tnameBlur(e) {\n\t\tthis.isValidRequired(e.target, \"Name is required\")\n\t}\n\n\tdescriptionChange(e) {\n\t\tthis.setState({description:e.target.value})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog fullWidth={true} maxWidth={\"sm\"} open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitleClose id=\"responsive-dialog-title\" onClick={this.handleClose}>Save tactics board</DialogTitleClose>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<TextField \n\t\t\t\t\t\tref={this.refName}\n\t\t\t\t\t\tid=\"name-required\"\n\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\tplaceholder=\"Please enter tactics name\"\n\t\t\t\t\t\tvalue={this.state.name}\n\t\t\t\t\t\tonChange={this.nameChange}\n\t\t\t\t\t\tonBlur={this.nameBlur}\n\t\t\t\t\t\terror={\"\" !== this.state.errors[\"name-required\"]}\n\t\t\t\t\t\thelperText={this.state.errors[\"name-required\"]}\n\t\t\t\t\t\tmargin=\"dense\" required fullWidth autoFocus />\n\t\t\t\t\t<TextField \n\t\t\t\t\t\tid=\"description-optional\" \n\t\t\t\t\t\tlabel=\"Description (optional)\" \n\t\t\t\t\t\tplaceholder=\"Short tactics description\" \n\t\t\t\t\t\tvalue={this.state.description}\n\t\t\t\t\t\tonChange={this.descriptionChange}\n\t\t\t\t\t\tmargin=\"dense\" multiline rows={4} fullWidth />\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={this.handleClose} variant=\"contained\" color=\"primary\" autoFocus>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.handleOk} variant=\"contained\" color=\"secondary\">Ok</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nSaveDialog.defaultProps = {\n\tonSave: null\n}\n\nSaveDialog.propTypes = {\n\tonSave: PropTypes.func\n}\n\nexport default SaveDialog;","// https://firebase.google.com/docs/web/setup#available-libraries\n// For auth using: https://github.com/firebase/firebaseui-web-react\n// Import the functions you need from the SDKs you need\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n// TODO: Add SDKs for Firebase products that you want to use\nimport { getFirestore } from \"firebase/firestore\";\nimport { collection, collectionGroup, query, where, getDocs, limit, startAfter, orderBy, doc, setDoc, getDoc, deleteDoc, Timestamp } from \"firebase/firestore\";\nimport { getStorage, ref as refFile, uploadBytes, getDownloadURL, deleteObject } from \"firebase/storage\";\nimport { RemoveTags } from \"./pitch/Constants\";\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n\tapiKey: \"AIzaSyDAb0oHSQCeihL0Op9agehWqYQh1-7E4xE\",\n\tauthDomain: \"tactics-board-1c644.firebaseapp.com\",\n\tprojectId: \"tactics-board-1c644\",\n\tstorageBucket: \"tactics-board-1c644.appspot.com\",\n\tmessagingSenderId: \"704589627362\",\n\tappId: \"1:704589627362:web:b110cc834a5f5c19c543bb\",\n\tmeasurementId: \"G-PDXB2VPRL8\"\n};\n\n// Initialize Firebase\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\n//const analytics = getAnalytics(firebaseApp);\nconst firestore = getFirestore();\nconst storage = getStorage();\n\n\nasync function fbSave(tactics, thumbnailBlob) {\n\tconst user = firebaseApp.auth().currentUser;\n\tif (!user) {\n\t\tconsole.error(\"User is not signed in\");\n\t\treturn\n\t}\n\t//console.log(user);\n\n\tconsole.log(\"Firebase save\", tactics.name, tactics.description);\n\t//console.log(tactics);\n\n\t// first create/update user collection\n\tconst tacticsCollection = \"user-tactics\";\n\ttry {\n\t\tconst userCollection = { name: user.displayName };\n\t\tawait setDoc(\n\t\t\tdoc(firestore, tacticsCollection, user.uid), \n\t\t\tuserCollection, \n\t\t\t{merge:true}\n\t\t);\n\t} catch (error) {\n\t\tconsole.error(\"Creating / updating user collection\", error);\n\t}\n\n\t// user tactics root path for documents and thumbs\n\tconst userTacticsRoot = tacticsCollection + \"/\" + user.uid;\n\n\t// 2nd store thumbnail\n\ttry {\n\t\tconst userTacticsThumbs = userTacticsRoot + \"/tactics-thumbs/\" + tactics.id + \".png\";\n\t\tconst thumbRef = refFile(storage, userTacticsThumbs);\n\t\tawait uploadBytes(thumbRef, thumbnailBlob);\n\t} catch (error) {\n\t\tconsole.error(\"Saving user tactics thumbnail\", error);\n\t}\n\n\t// 3rd store tactics document\n\ttry {\n\t\t// convert dates to firestore timestamps\n\t\ttactics.created = Timestamp.fromDate(tactics.created);\n\t\ttactics.updated = Timestamp.fromDate(tactics.updated);\n\t\t// save\n\t\tconst userTacticsCollection = userTacticsRoot + \"/tactics\";\n\t\tawait setDoc(\n\t\t\tdoc(firestore, userTacticsCollection, tactics.id), \n\t\t\ttactics\n\t\t);\n\t} catch (error) {\n\t\tconsole.error(\"Saving user tactics\", error);\n\t}\n}\n\nasync function fbLoad(tacticsID) {\n\tconst user = firebaseApp.auth().currentUser;\n\tif (!user) {\n\t\tconsole.error(\"User is not signed in\");\n\t\treturn\n\t}\n\t//console.log(user);\n\n\ttry {\n\t\tconsole.log(\"Loading user tactics\", tacticsID);\n\t\tconst userTacticsPath = \"user-tactics/\" + user.uid + \"/tactics/\" + tacticsID;\n\t\tconst tacticsRef = doc(firestore, userTacticsPath);\n\t\tconst res = await getDoc(tacticsRef);\n\n\t\tif (!res.exists()) {\n\t\t\tconsole.log(\"User tactics not found\", tacticsID);\n\t\t\treturn null;\n\t\t}\n\n\t\tlet tactics = res.data();\n\t\t// fix data\n\t\ttactics.created = new Timestamp(\n\t\t\ttactics.created.seconds, \n\t\t\ttactics.created.nanoseconds\n\t\t).toDate();\n\t\ttactics.updated = new Timestamp(\n\t\t\ttactics.updated.seconds, \n\t\t\ttactics.updated.nanoseconds\n\t\t).toDate()\n\t\t//console.log(res.id, \" => \", tactics);\n\t\treturn tactics;\n\n\t} catch (error) {\n\t\tconsole.error(\"Loading user tactics\", error);\n\t\treturn null;\n\t}\n}\n\nasync function fbLoadShared(tacticsID) {\n\tconst user = firebaseApp.auth().currentUser;\n\tif (!user) {\n\t\tconsole.error(\"User is not signed in\");\n\t\treturn\n\t}\n\t//console.log(user);\n\n\tconsole.log(\"Loading shared tactics\", tacticsID);\n\tlet tactics = null;\n\ttry {\n\t\t// requires index on collection:tactics and field:id\n\t\tconst tacticsQuery = query(collectionGroup(firestore, 'tactics'), where('id', '==', tacticsID));\n\t\tconst querySnapshot = await getDocs(tacticsQuery);\n\t\tquerySnapshot.forEach((doc) => {\n\t\t\t//console.log(doc.id, ' => ', doc.data());\n\t\t\ttactics = doc.data();\n\t\t\t// fix data\n\t\t\ttactics.created = new Timestamp(\n\t\t\t\ttactics.created.seconds, \n\t\t\t\ttactics.created.nanoseconds\n\t\t\t).toDate();\n\t\t\ttactics.updated = new Timestamp(\n\t\t\t\ttactics.updated.seconds, \n\t\t\t\ttactics.updated.nanoseconds\n\t\t\t).toDate()\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(\"Loading shared tactics\", error);\n\t}\n\treturn tactics;\n}\n\nasync function fbList(tacticsPerPage, afterDoc){\n\t// docs to show\n\tlet tacticsList = [];\n\n\tconst user = firebaseApp.auth().currentUser;\n\tif (!user) {\n\t\tconsole.error(\"User is not signed in\");\n\t\treturn [null];\n\t}\n\t//console.log(user);\n\n\t// user root\n\tconst userTacticsRoot = \"user-tactics/\" + user.uid;\n\n\t// get list\n\ttry {\n\t\t// build query\n\t\tconst userTacticsCollection = userTacticsRoot + \"/tactics\";\n\t\tconst q = afterDoc ?\n\t\t\t// continue for paging\n\t\t\tquery(\n\t\t\t\tcollection(firestore,userTacticsCollection), \n\t\t\t\torderBy(\"updated\", \"desc\"),\n\t\t\t\tstartAfter(afterDoc),\n\t\t\t\tlimit(tacticsPerPage)\n\t\t\t)\n\t\t\t:\n\t\t\t// first page\n\t\t\tquery(\n\t\t\t\tcollection(firestore,userTacticsCollection), \n\t\t\t\torderBy(\"updated\", \"desc\"),\n\t\t\t\tlimit(tacticsPerPage)\n\t\t\t)\n\t\t;\n\n\t\t// get docs using query\n\t\tconst res = await getDocs(q)\n\n\t\t// iterate over docs\n\t\tres.forEach((doc) => {\n\t\t\tconst dta = doc.data();\n\t\t\t//console.log(doc.id, \" => \", dta);\n\t\t\ttacticsList.push({\n\t\t\t\tid: dta.id,\n\t\t\t\tname: RemoveTags(dta.name),\n\t\t\t\tdescription: RemoveTags(dta.description),\n\t\t\t\tcreated: new Timestamp(dta.created.seconds, dta.created.nanoseconds).toDate(),\n\t\t\t\tupdated: new Timestamp(dta.updated.seconds, dta.updated.nanoseconds).toDate(),\n\t\t\t\tdocRef: doc\n\t\t\t});\n\t\t});\n\t\t  \n\t\t//const last = await res.docs[0];\n\t\t//console.log(\"Found docs\",last);\n\t} catch (error) {\n\t\tconsole.log(\"Error fetching documents\", error);\n\t\treturn [null];\n\t}\n\n\t// get all thumbnails\n\ttry {\n\t\tfor (let i = 0; i < tacticsList.length; i++) {\n\t\t\tconst userTacticsThumbs = userTacticsRoot + \"/tactics-thumbs/\" + tacticsList[i].id + \".png\";\n\t\t\tconst refTmb = refFile(storage, userTacticsThumbs);\n\t\t\ttacticsList[i].thumbnail = await getDownloadURL(refTmb);\n\t\t}\n\t} catch (error) {\n\t\tconsole.log(\"Error fetching thumbnails\", error);\n\t\treturn [null];\n\t}\n\n\treturn tacticsList;\n}\n\nasync function fbDelete(tacticsID) {\n\tconst user = firebaseApp.auth().currentUser;\n\tif (!user) {\n\t\tconsole.error(\"User is not signed in\");\n\t\treturn\n\t}\n\t//console.log(user);\n\n\tconsole.log(\"Deleting user tactics\", tacticsID);\n\t// user tactics root path for documents and thumbs\n\tconst userTacticsRoot = \"user-tactics/\" + user.uid;\n\n\t// 1st delete document\n\ttry {\n\t\tconst userTacticsPath = userTacticsRoot + \"/tactics/\" + tacticsID;\n\t\tconst tacticsRef = doc(firestore, userTacticsPath);\n\t\tawait deleteDoc(tacticsRef);\n\t} catch (error) {\n\t\tconsole.error(\"Deleting user tactics\", error);\n\t}\n\n\t// 2nd delete thumbnail\n\ttry {\n\t\tconst userTacticsThumb = userTacticsRoot + \"/tactics-thumbs/\" + tacticsID + \".png\";\n\t\tconst thumbRef = refFile(storage, userTacticsThumb);\n\t\tawait deleteObject(thumbRef);\n\t} catch (error) {\n\t\tconsole.error(\"Deleting user tactics thumbnail\", error);\n\t}\n}\n\nexport { firebaseApp, fbSave, fbLoad, fbLoadShared, fbList, fbDelete }","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitleClose from './elements/DialogTitleClose';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport Grid from '@mui/material/Grid';\nimport Card from '@mui/material/Card';\nimport CardActionArea from '@mui/material/CardActionArea';\nimport CardHeader from '@mui/material/CardHeader';\nimport CardMedia from '@mui/material/CardMedia';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Skeleton from '@mui/material/Skeleton';\nimport Stack from '@mui/material/Stack';\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport CloudDownloadIcon from '@mui/icons-material/CloudDownload';\nimport IconButton from '@mui/material/IconButton';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { fbList, fbDelete } from '../firebaseSDK';\n\nclass BrowseDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.loadTactics = this.loadTactics.bind(this);\n\t\tthis.nextPage = this.nextPage.bind(this);\n\t\tthis.menuOpen = this.menuOpen.bind(this);\n\t\tthis.menuClose = this.menuClose.bind(this);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\ttactics: [null],\n\t\t\tloading: false,\n\t\t\tloadMore: false,\n\t\t\tmenuOpen: false,\n\t\t\tmenuAnchorEl: null,\n\t\t\tmenuTacticsID: null\n\t\t}\n\t}\n\n\tShow() {\n\t\t// reset on first list show\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\ttactics: [null],\n\t\t\tloading: true,\n\t\t\tloadMore: false,\n\t\t\tmenuOpen: false,\n\t\t\tmenuAnchorEl: null,\n\t\t\tmenuTacticsID: null\n\t\t});\n\t\tthis.firebaseList();\n\t}\n\t\n\thandleClose() {\n\t\tthis.setState({open: false});\n\t}\n\n\tasync firebaseList(){\n\t\t// docs to show\n\t\tlet tactics = await fbList(this.props.perPage, null);\n\t\t// set for display\n\t\tthis.setState({\n\t\t\ttactics: tactics,\n\t\t\tloading: false,\n\t\t\tloadMore: tactics.length === this.props.perPage\n\t\t});\n\t}\n\n\tasync nextPage() {\n\t\t//console.log(\"Next page...\");\n\t\tthis.setState({loading: true});\n\n\t\t// last doc reference\n\t\tconst afterDoc = this.state.tactics[this.state.tactics.length - 1].docRef;\n\t\t// docs to show\n\t\tlet tactics = await fbList(this.props.perPage, afterDoc);\n\t\tif (0 === tactics.length) {\n\t\t\tthis.setState({\n\t\t\t\tloading: false,\n\t\t\t\tloadMore: false\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t// set for display\n\t\tconst loadMore = tactics.length === this.props.perPage;\n\t\tthis.setState({\n\t\t\ttactics: this.state.tactics.concat(tactics),\n\t\t\tloading: false,\n\t\t\tloadMore: loadMore\n\t\t});\n\t}\n\n\tloadTactics(e) {\n\t\t// read from \"data-value\" attribute\n\t\tconst id = e.currentTarget.dataset.value;\n\t\tif (id) {\n\t\t\tthis.handleClose();\n\t\t\tthis.props.onLoad(id);\n\t\t}\n\t}\n\n\tmenuOpen(e) {\n\t\t// read from \"data-value\" attribute\n\t\tconst selectedValue = e.currentTarget.dataset.value;\n\t\tthis.setState({\n\t\t\tmenuOpen: true,\n\t\t\tmenuAnchorEl: e.currentTarget,\n\t\t\tmenuTacticsID: selectedValue\n\t\t});\n\t}\n\n\tasync menuClose(e) {\n\t\t// read from \"data-value\" attribute\n\t\tconst selectedValue = e.currentTarget.dataset.value;\n\t\tswitch (selectedValue) {\n\t\t\tcase \"delete\":\n\t\t\t\t//console.log(\"Delete\", this.state.menuTacticsID);\n\t\t\t\tawait fbDelete(this.state.menuTacticsID);\n\t\t\t\tthis.firebaseList();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.setState({\n\t\t\tmenuOpen: false,\n\t\t\tmenuAnchorEl: null,\n\t\t\tmenuTacticsID: null\n\t\t});\n\t}\n\n\trenderThumbnail(t) {\n\t\tif (t) {\n\t\t\treturn (<CardMedia component=\"img\" height={177} image={t.thumbnail} alt={t.name} />);\n\t\t}\n\t\treturn (<Skeleton variant=\"rectangular\" height={177} />);\n\t}\n\n\trenderTitle(t) {\n\t\tlet title = (<Skeleton />);\n\t\tlet subheader = (<Skeleton />);\n\t\tconst val = t ? t.id : null;\n\t\tif (t) {\n\t\t\ttitle = t.name;\n\t\t\tsubheader = t.updated.toLocaleString();\n\t\t}\n\t\treturn (\n\t\t\t<CardHeader\n\t\t\t\tsx={{\n\t\t\t\t\tpadding: 1,\n\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\"& .MuiCardHeader-content\": {\n\t\t\t\t\t\toverflow: \"hidden\"\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\ttitleTypographyProps={{ noWrap: true }}\n\t\t\t\tsubheaderTypographyProps={{ noWrap: true }}\n\t\t\t\ttitle={title}\n\t\t\t\tsubheader={subheader}\n\t\t\t\taction={\n\t\t\t\t\t<IconButton aria-label=\"settings\" data-value={val} onClick={this.menuOpen}>\n\t\t\t\t\t\t<MoreVertIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderDescription(t) {\n\t\tlet created = (<Skeleton />);\n\t\tlet description = (\n\t\t\t<React.Fragment>\n\t\t\t\t<Skeleton />\n\t\t\t\t<Skeleton />\n\t\t\t\t<Skeleton width=\"60%\" />\n\t\t\t</React.Fragment>\n\t\t);\n\t\tif (t) {\n\t\t\tcreated = `created: ${t.created.toLocaleString()}`;\n\t\t\tdescription = t.description;\n\t\t}\n\t\treturn (\n\t\t\t<CardContent sx={{ p:1, pt: 0.5, height: 71 }}>\n\t\t\t\t<Typography component=\"div\" variant=\"caption\" color=\"text.secondary\">{created}</Typography>\n\t\t\t\t{description}\n\t\t\t</CardContent>\n\t\t);\n\t}\n\n\trenderItems() {\n\t\treturn this.state.tactics.map((t, index) => {\n\t\t\tconst val = t ? t.id : null;\n\t\t\treturn (\n\t\t\t\t<Grid key={index} item xs={1}>\n\t\t\t\t\t<Card sx={{ width: 320, marginRight: 0.5, my: 1 }}>\n\t\t\t\t\t\t{this.renderTitle(t)}\n\t\t\t\t\t\t<CardActionArea data-value={val} onClick={this.loadTactics}>\n\t\t\t\t\t\t\t{this.renderThumbnail(t)}\n\t\t\t\t\t\t\t{this.renderDescription(t)}\n\t\t\t\t\t\t</CardActionArea>\n\t\t\t\t\t</Card>\n\t\t\t\t</Grid>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog fullWidth={true} maxWidth=\"lg\" open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitleClose id=\"responsive-dialog-title\" onClick={this.handleClose}>Browse my tactics - click on tactic to open in editor</DialogTitleClose>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<Grid container columns={3}>\n\t\t\t\t\t\t{this.renderItems()}\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Stack direction=\"row\" justifyContent=\"center\">\n\t\t\t\t\t\t<LoadingButton\n\t\t\t\t\t\t\tonClick={this.nextPage}\n\t\t\t\t\t\t\tloading={this.state.loading}\n\t\t\t\t\t\t\tdisabled={!this.state.loadMore}\n\t\t\t\t\t\t\tloadingPosition=\"start\"\n\t\t\t\t\t\t\tstartIcon={<CloudDownloadIcon />}\n\t\t\t\t\t\t\tvariant=\"contained\">More</LoadingButton>\n\t\t\t\t\t</Stack>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={this.handleClose} variant=\"contained\" color=\"primary\" autoFocus>Cancel</Button>\n\t\t\t\t</DialogActions>\n\t\t\t\t<Menu open={this.state.menuOpen} anchorEl={this.state.menuAnchorEl} onClose={this.menuClose}\n\t\t\t\t\tPaperProps={{\n\t\t\t\t\t\televation: 0,\n\t\t\t\t\t\tsx: {\n\t\t\t\t\t\t\toverflow: 'visible',\n\t\t\t\t\t\t\tfilter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\n\t\t\t\t\t\t\tmt: 1.5,\n\t\t\t\t\t\t\t'&:before': {\n\t\t\t\t\t\t\t\tcontent: '\"\"',\n\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\tright: 14,\n\t\t\t\t\t\t\t\twidth: 10,\n\t\t\t\t\t\t\t\theight: 10,\n\t\t\t\t\t\t\t\tbgcolor: 'background.paper',\n\t\t\t\t\t\t\t\ttransform: 'translateY(-50%) rotate(45deg)',\n\t\t\t\t\t\t\t\tzIndex: 0,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\ttransformOrigin={{ horizontal: 'right', vertical: 'top' }}\n\t\t\t\t\tanchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}>\n\t\t\t\t\t<MenuItem data-value=\"delete\" onClick={this.menuClose}>\n\t\t\t\t\t\t<ListItemIcon><DeleteIcon fontSize=\"small\" /></ListItemIcon>Delete\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</Menu>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nBrowseDialog.defaultProps = {\n\tonLoad: null,\n\tperPage: 6\n}\n\nBrowseDialog.propTypes = {\n\tonLoad: PropTypes.func,\n\tperPage: PropTypes.number\n}\n\nexport default BrowseDialog;","import React, { Component } from 'react';\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitleClose from './elements/DialogTitleClose';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport Stack from '@mui/material/Stack';\nimport Typography from '@mui/material/Typography';\nimport CopyAllIcon from '@mui/icons-material/CopyAll';\nimport Tooltip from '@mui/material/Tooltip';\n\nclass ShareDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.copyLink = this.copyLink.bind(this);\n\t\tthis.toolTipExited = this.toolTipExited.bind(this);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tid: \"\",\n\t\t\tname: \"\",\n\t\t\tdescription: \"\",\n\t\t\tcopied: false\n\t\t}\n\t}\n\n\tShow(id, name, description) {\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\tid: id,\n\t\t\tname: name,\n\t\t\tdescription: description,\n\t\t\tcopied: false\n\t\t});\n\t}\n\t\n\thandleClose() {\n\t\tthis.setState({open: false});\n\t}\n\n\tcopyLink() {\n\t\tconst lnk = document.location + '?t=' + this.state.id;\n\t\tnavigator.clipboard.writeText(lnk)\n\t\tthis.setState({copied: true});\n\t}\n\n\ttoolTipExited() {\n\t\tthis.setState({copied: false});\n\t}\n\n\trender() {\n\t\tconst lnk = document.location + '?t=' + this.state.id;\n\t\tconst tooltipTitle = this.state.copied ? \"copied\" : \"click to copy\"\n\t\treturn (\n\t\t\t<Dialog fullWidth={false} maxWidth=\"md\" open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitleClose id=\"responsive-dialog-title\" onClick={this.handleClose}>Share tactics</DialogTitleClose>\n\t\t\t\t<DialogContent dividers>\n\t\t\t\t\t<Stack spacing={2}>\n\t\t\t\t\t\t<Tooltip placement=\"top\" title={tooltipTitle} TransitionProps={{ onExited: this.toolTipExited }} >\n\t\t\t\t\t\t\t<Button variant=\"outlined\" endIcon={<CopyAllIcon />} onClick={this.copyLink} sx={{textTransform:\"none\"}} >{lnk}</Button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Typography component=\"div\" variant=\"h6\">{this.state.name}</Typography>\n\t\t\t\t\t\t<Typography component=\"div\" variant=\"body2\">{this.state.description}</Typography>\n\t\t\t\t\t</Stack>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={this.handleClose} variant=\"contained\" color=\"primary\" autoFocus>Cancel</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default ShareDialog;","import React, { Component } from 'react';\nimport { createTheme, ThemeProvider, StyledEngineProvider } from '@mui/material/styles';\nimport PitchEdit from './editors/PitchEdit';\nimport SvgToImg from './editors/SvgToImg';\nimport AppTools from './ui/AppTools';\nimport AnimPlayer from './ui/AnimPlayer';\nimport ConfirmDialog from './ui/ConfirmDialog';\nimport PaletteEditorDialog from './ui/PaletteEditorDialog';\nimport PitchFutsal from './pitch/PitchFutsal';\nimport DrawerMenu from './ui/DrawerMenu';\nimport DrawMode from './pitch/DrawMode';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert from '@mui/material/Alert';\nimport SaveDialog from './ui/SaveDialog';\nimport BrowseDialog from './ui/BrowseDialog';\nimport ShareDialog from './ui/ShareDialog';\nimport { v4 as uuidv4 } from 'uuid';\nimport { firebaseApp, fbSave, fbLoad, fbLoadShared } from './firebaseSDK';\nimport './App.css';\nimport './firebaseui-styling.global.css';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// application Material-UI theme\n\t\tthis.appTheme = createTheme();\n\t\t// references\n\t\tthis.refPitchEdit = React.createRef();\n\t\tthis.refSvgToImg = React.createRef();\n\t\tthis.refConfirmDialog = React.createRef();\n\t\tthis.refAnimPlayer = React.createRef();\n\t\tthis.refDrawerMenu = React.createRef();\n\t\tthis.refPaletteEditorDialog = React.createRef();\n\t\tthis.refSaveDialog = React.createRef();\n\t\tthis.refLoadDialog = React.createRef();\n\t\tthis.refShareDialog = React.createRef();\n\t\t// event handlers\n\t\tthis.ToggleDrawer = this.ToggleDrawer.bind(this);\n\t\tthis.SaveImage = this.SaveImage.bind(this);\n\t\tthis.NewScheme = this.NewScheme.bind(this);\n\t\tthis.NewAnimation = this.NewAnimation.bind(this);\n\t\tthis.AnimCreate = this.AnimCreate.bind(this);\n\t\tthis.DeleteAnimation = this.DeleteAnimation.bind(this);\n\t\tthis.AnimDelete = this.AnimDelete.bind(this);\n\t\tthis.PitchReset = this.PitchReset.bind(this);\n\t\tthis.ExtrasCreate = this.ExtrasCreate.bind(this);\n\t\tthis.OnPitchModified = this.OnPitchModified.bind(this);\n\t\tthis.OnDrawModeModified = this.OnDrawModeModified.bind(this);\n\t\tthis.SnackbarOpen=this.SnackbarOpen.bind(this);\n\t\tthis.SnackbarOnClose=this.SnackbarOnClose.bind(this);\n\t\tthis.AnimKeyFrameAdd=this.AnimKeyFrameAdd.bind(this);\n\t\tthis.AnimKeyFrameDelete=this.AnimKeyFrameDelete.bind(this);\n\t\tthis.AnimKeyFrameNext=this.AnimKeyFrameNext.bind(this);\n\t\tthis.AnimKeyFramePrevious=this.AnimKeyFramePrevious.bind(this);\n\t\tthis.AnimKeyFrameDurationSet=this.AnimKeyFrameDurationSet.bind(this);\n\t\tthis.AnimStart=this.AnimStart.bind(this);\n\t\tthis.AnimStop=this.AnimStop.bind(this);\n\t\tthis.AnimFrame=this.AnimFrame.bind(this);\n\t\tthis.animPlayerAnchorEl=this.animPlayerAnchorEl.bind(this);\n\t\tthis.animPlayerShow=this.animPlayerShow.bind(this);\n\t\tthis.LocalStorageLoad = this.LocalStorageLoad.bind(this);\n\t\tthis.LocalStorageSave = this.LocalStorageSave.bind(this);\n\t\tthis.LocalStorageDelete = this.LocalStorageDelete.bind(this);\n\t\tthis.ColorPaletteEdit = this.ColorPaletteEdit.bind(this);\n\t\tthis.showSaveDialog = this.showSaveDialog.bind(this);\n\t\tthis.firebaseSave = this.firebaseSave.bind(this);\n\t\tthis.firebaseBrowse = this.firebaseBrowse.bind(this);\n\t\tthis.firebaseLoad = this.firebaseLoad.bind(this);\n\t\tthis.ShareTactics = this.ShareTactics.bind(this);\n\n\t\t// init default state\n\t\tthis.pitch = this.DefaultPitch();\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.drawMode = new DrawMode();\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.state = {\n\t\t\tisSignedIn: false,\n\t\t\tpitch: this.pitch,\n\t\t\tdrawMode: this.drawMode,\n\t\t\tsnackBar: {\n\t\t\t\tShow: false,\n\t\t\t\tSeverity: 'info',\n\t\t\t\tMessage: ''\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\t// mount handler for authentication\n\t\tthis.unregisterAuthObserver = firebaseApp.auth().onAuthStateChanged((user) => {\n\t\t\tconsole.log(\"Current user\",user);\n\t\t\tthis.setState({\n\t\t\t\tisSignedIn: !!user\n\t\t\t});\n\t\t});\n\t\t// load previous board editing\n\t\tthis.LocalStorageLoad();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.unregisterAuthObserver();\n\t}\n\n\tDefaultPitch() {\n\t\tconst id = uuidv4();\n\t\tconst pitch = new PitchFutsal(id);\n\t\tpitch.initDefault(\n\t\t\t200, 8, 120, \n\t\t\t100, 5, 80\n\t\t);\n\t\treturn pitch;\n\t}\n\n\tPitchReset() {\n\t\tconsole.log(\"Pitch reset\");\n\t\tthis.pitch.onModified = null;\n\t\tthis.pitch = this.DefaultPitch();\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.drawMode.onModified = null;\n\t\tthis.drawMode = new DrawMode();\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.setState({\n\t\t\tpitch: this.pitch,\n\t\t\tdrawMode: this.drawMode\n\t\t});\n\t\tthis.LocalStorageDelete();\n\t}\n\n\tOnPitchModified(newPitch) {\n\t\tthis.pitch.onModified = null;\n\t\tthis.pitch = newPitch;\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.setState({\n\t\t\tpitch: this.pitch\n\t\t});\n\t}\n\n\tOnDrawModeModified(newDrawMode) {\n\t\tthis.drawMode.onModified = null;\n\t\tthis.drawMode = newDrawMode;\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.setState({\n\t\t\tdrawMode: this.drawMode\n\t\t});\n\t\t// update pitch overlay\n\t\t// TODO: reconsider this\n\t\tthis.pitch.overlay = this.drawMode.pitchOverlay;\n\t}\n\n\tToggleDrawer(e) {\n\t\tthis.refDrawerMenu.current.ToggleDrawer(e);\n\t}\n\n\tNewScheme() {\n\t\tif (!this.state.pitch.isModified) {\n\t\t\treturn;\n\t\t}\n\t\tthis.refConfirmDialog.current.Show(\n\t\t\t\"Create new scheme\", \"Pitch is modified, are you sure you want to discard changes?\",\n\t\t\tthis.PitchReset\n\t\t);\n\t}\n\n\tNewAnimation() {\n\t\tthis.refConfirmDialog.current.Show(\n\t\t\t\"Create new animation\", \"Are you sure you want to create new animation?\",\n\t\t\tthis.AnimCreate\n\t\t);\n\t}\n\n\tDeleteAnimation() {\n\t\tthis.refConfirmDialog.current.Show(\n\t\t\t\"Delete animation\", \"Are you sure you want to delete animation, only first key frame will be kept?\",\n\t\t\tthis.AnimDelete\n\t\t);\n\t}\n\n\tSaveImage() {\n\t\tconsole.log(\"App save image\");\n\t\tlet svg = this.refPitchEdit.current.getSVG();\n\t\tthis.refSvgToImg.current.toImg(\n\t\t\tsvg.svgText, \n\t\t\tsvg.width, svg.height, \n\t\t\tsvg.width/2, svg.height/2\n\t\t);\n\t}\n\n\tColorPaletteEdit() {\n\t\tthis.refPaletteEditorDialog.current.Show();\n\t}\n\n\tshowSaveDialog() {\n\t\tthis.refSaveDialog.current.Show(\n\t\t\tthis.state.pitch.name,\n\t\t\tthis.state.pitch.description\n\t\t);\n\t}\n\n\tasync firebaseSave(name, description) {\n\t\tif (!this.state.isSignedIn) {\n\t\t\tconsole.error(\"User is not signed in\");\n\t\t\treturn\n\t\t}\n\n\t\t// save to local storage to keep it and get data for save\n\t\tthis.state.pitch.setNameAndDescription(name, description);\n\t\tconst tactics = this.LocalStorageSave();\n\n\t\t// create thumbnail\n\t\tconst svg = this.refPitchEdit.current.getSVG();\n\t\tconst tmbWidth = 320;\n\t\tconst tmbHeight = tmbWidth * svg.height / svg.width;\n\t\tconst thumbnailBlob = await this.refSvgToImg.current.toBlob(\n\t\t\tsvg.svgText,\n\t\t\tsvg.width, svg.height,\n\t\t\ttmbWidth, tmbHeight\n\t\t);\n\n\t\t// save to google firestore\n\t\tawait fbSave(tactics, thumbnailBlob);\n\t}\n\n\tfirebaseBrowse() {\n\t\tthis.refLoadDialog.current.Show();\n\t}\n\n\tasync firebaseLoad(tacticsID) {\n\t\tif (!this.state.isSignedIn) {\n\t\t\tconsole.error(\"User is not signed in\");\n\t\t\treturn\n\t\t}\n\t\tlet tactics = await fbLoad(tacticsID);\n\t\tthis.editTactics(tactics, true, false);\n\t}\n\n\tasync firebaseLoadShared(tacticsID) {\n\t\tif (!this.state.isSignedIn) {\n\t\t\tconsole.error(\"User is not signed in\");\n\t\t\treturn\n\t\t}\n\t\tlet tactics = await fbLoadShared(tacticsID) \n\t\t// change ID so user can save it as own tactics\n\t\tthis.editTactics(tactics, true, true);\n\t}\n\n\teditTactics(tactics, toLocalStorage, changeID) {\n\t\tif (null === tactics) {\n\t\t\treturn;\n\t\t}\n\t\tif (changeID) {\n\t\t\ttactics.id = uuidv4();\n\t\t}\n\t\tthis.state.pitch.load(tactics);\n\t\t// check for settings and update settings\n\t\tif (tactics.settings) {\n\t\t\tthis.state.drawMode.updateColors(\n\t\t\t\ttactics.settings.objectColors,\n\t\t\t\ttactics.settings.playerColors,\n\t\t\t\ttactics.settings.ballColors\n\t\t\t);\n\t\t}\n\t\tif (toLocalStorage) {\n\t\t\tthis.LocalStorageSave();\n\t\t}\n\t}\n\n\tLocalStorageSave() {\n\t\tconsole.log(\"Saving to localStorage.\");\n\t\tlet tactics = this.state.pitch.save();\n\t\t// append settings to save object\n\t\ttactics.settings = {\n\t\t\tobjectColors: this.state.drawMode.colorOptions,\n\t\t\tplayerColors: this.state.drawMode.colorOptionsPlayer,\n\t\t\tballColors: this.state.drawMode.colorOptionsBall,\n\t\t}\n\t\tlocalStorage.setItem(\"tactics-board-current\", JSON.stringify(tactics));\n\t\treturn tactics;\n\t}\n\n\tLocalStorageLoad() {\n\t\tlet json = localStorage.getItem(\"tactics-board-current\");\n\t\tif (null === json) {\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(\"Loading from localStorage.\");\n\t\tconst tactics = JSON.parse(json);\n\t\t//console.log(tactics.id, \" => \", tactics);\n\t\tthis.state.pitch.load(tactics);\n\t\t// check for settings and update settings\n\t\tif (tactics.settings) {\n\t\t\tthis.state.drawMode.updateColors(\n\t\t\t\ttactics.settings.objectColors,\n\t\t\t\ttactics.settings.playerColors,\n\t\t\t\ttactics.settings.ballColors\n\t\t\t);\n\t\t}\n\t}\n\n\tLocalStorageDelete() {\n\t\tconsole.log(\"Deleting from localStorage.\");\n\t\tlocalStorage.removeItem(\"tactics-board-current\");\n\t}\n\n\t// function to open Snackbar\n\tSnackbarOpen(severity, message) {\n\t\tthis.setState({\n\t\t\tsnackBar: {\n\t\t\t\tShow: true,\n\t\t\t\tSeverity: severity,\n\t\t\t\tMessage: message\n\t\t\t}\n\t\t});\n\t}\n\n\t// Event when Snackbar closes\n\tSnackbarOnClose(){\n\t\t// read current state to avoid changing message while hiding\n\t\tconst severity = this.state.snackBar.Severity;\n\t\tconst message = this.state.snackBar.Message;\n\t\t// hide snackbar\n\t\tthis.setState({\n\t\t\tsnackBar: {\n\t\t\t\tShow: false,\n\t\t\t\tSeverity: severity,\n\t\t\t\tMessage: message\n\t\t\t}\n\t\t});\n\t}\n\n\tExtrasCreate(t, width, height) {\n\t\tthis.pitch.extrasCreate(\n\t\t\tt, this.state.drawMode.color, \n\t\t\twidth, height\n\t\t);\n\t}\n\n\tAnimCreate() {\n\t\tthis.pitch.animCreate();\n\t}\n\n\tAnimDelete() {\n\t\tthis.pitch.animDelete();\n\t}\n\n\tAnimKeyFrameAdd() {\n\t\tif (this.pitch.animKeyFrameAdd()){\n\t\t\tthis.SnackbarOpen(\"success\", \"New key frame added to animation\");\n\t\t} else {\n\t\t\tthis.SnackbarOpen(\"error\", \"Can't add new key frame no change is done to current key frame\");\n\t\t}\n\t}\n\n\tAnimKeyFrameDelete() {\n\t\tif (this.pitch.animKeyFrameDelete()) {\n\t\t\tthis.SnackbarOpen(\"success\", \"Key frame deleted from animation\");\n \t\t} else {\n\t\t\tthis.SnackbarOpen(\"error\", \"Can't delete key frame, only last can be deleted.\");\n\t\t}\n\t}\n\n\tAnimKeyFrameNext() {\n\t\tif (!this.pitch.animKeyFrameNext()) {\n\t\t\tthis.SnackbarOpen(\"warning\", \"No more key frames to navigate\");\n\t\t}\n\t}\n\n\tAnimKeyFramePrevious() {\n\t\tif (!this.pitch.animKeyFramePrevious()) {\n\t\t\tthis.SnackbarOpen(\"warning\", \"You are on first key frame\");\n\t\t}\n\t}\n\n\tAnimKeyFrameDurationSet(duration){\n\t\tif (!this.pitch.animKeyFrameDurationSet(duration)) {\n\t\t\tthis.SnackbarOpen(\"info\", `You set the frame duration to ${duration}s` );\n\t\t}\n\t}\n\n\tAnimStart() {\n\t\tthis.state.pitch.animStart();\n\t}\n\n\tAnimStop() {\n\t\tthis.state.pitch.animStop();\n\t}\n\n\tAnimFrame(time) {\n\t\tthis.state.pitch.animFrame(time);\n\t}\n\n\tanimPlayerAnchorEl() {\n\t\treturn this.refPitchEdit.current;\n\t}\n\n\tanimPlayerShow() {\n\t\tif (this.state.pitch.AnimKeyFrames.length < 2) {\n\t\t\tthis.SnackbarOpen(\"warning\", \"No animation is created\");\n\t\t\treturn;\n\t\t}\n\t\tthis.refAnimPlayer.current.show();\n    }\n\n\tShareTactics() {\n\t\tthis.refShareDialog.current.Show(\n\t\t\tthis.state.pitch.id,\n\t\t\tthis.state.pitch.name,\n\t\t\tthis.state.pitch.description\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<StyledEngineProvider injectFirst>\n\t\t\t\t<ThemeProvider theme={this.appTheme}>\n\t\t\t\t\t<AppTools drawMode={this.state.drawMode}\n\t\t\t\t\t\tsaveImage={this.SaveImage}\n\t\t\t\t\t\tanimExists={this.state.pitch.AnimExists}\n\t\t\t\t\t\tanimKeyFrameCurrent={this.state.pitch.AnimKeyFrameCurrent}\n\t\t\t\t\t\tanimKeyFrameTotal={this.state.pitch.AnimKeyFrames.length}\n\t\t\t\t\t\tanimKeyFrameAdd={this.AnimKeyFrameAdd}\n\t\t\t\t\t\tanimKeyFrameDelete={this.AnimKeyFrameDelete}\n\t\t\t\t\t\tanimKeyFrameNext={this.AnimKeyFrameNext}\n\t\t\t\t\t\tanimKeyFramePrevious={this.AnimKeyFramePrevious}\n\t\t\t\t\t\tanimKeyFrameDurationSet={this.AnimKeyFrameDurationSet}\n\t\t\t\t\t\tanimPlayerShow={this.animPlayerShow}\n\t\t\t\t\t\textrasCreate={this.ExtrasCreate}\n\t\t\t\t\t\tisSignedIn={this.state.isSignedIn}\n\t\t\t\t\t\tfirebaseApp={firebaseApp}\n\t\t\t\t\t\ttoggleDrawer={this.ToggleDrawer}\n\t\t\t\t\t\tshareTactics={this.ShareTactics}\n\t\t\t\t\t\tshareEnabled={this.state.pitch.shareEnabled()}\n\t\t\t\t\t/>\n\t\t\t\t\t<DrawerMenu ref={this.refDrawerMenu}\n\t\t\t\t\t\tload={this.firebaseBrowse}\n\t\t\t\t\t\tsave={this.showSaveDialog} \n\t\t\t\t\t\tsaveImage={this.SaveImage} \n\t\t\t\t\t\tnewScheme={this.NewScheme}\n\t\t\t\t\t\tnewAnimation={this.NewAnimation}\n\t\t\t\t\t\tdeleteAnimation={this.DeleteAnimation}\n\t\t\t\t\t\tcolorPaletteEdit={this.ColorPaletteEdit}\n\t\t\t\t\t\tanimExists={this.state.pitch.AnimExists}\n\t\t\t\t\t\tisSignedIn={this.state.isSignedIn}\n\t\t\t\t\t/>\n\t\t\t\t\t<PitchEdit ref={this.refPitchEdit} pitch={this.state.pitch} drawMode={this.state.drawMode} />\n\t\t\t\t\t<AnimPlayer ref={this.refAnimPlayer} \n\t\t\t\t\t\tanchorEl={this.animPlayerAnchorEl}\n\t\t\t\t\t\tkeyFramesNo={this.state.pitch.AnimKeyFrames.length}\n\t\t\t\t\t\tkeyFrameDuration={this.state.pitch.AnimKeyFrameDuration}\n\t\t\t\t\t\tanimStart={this.AnimStart}\n\t\t\t\t\t\tanimStop={this.AnimStop}\n\t\t\t\t\t\tanimFrame={this.AnimFrame}\n\t\t\t\t\t/>\n\t\t\t\t\t<ConfirmDialog ref={this.refConfirmDialog} />\n\t\t\t\t\t<PaletteEditorDialog ref={this.refPaletteEditorDialog} drawMode={this.state.drawMode} />\n\t\t\t\t\t<SaveDialog ref={this.refSaveDialog} onSave={this.firebaseSave} />\n\t\t\t\t\t<BrowseDialog ref={this.refLoadDialog} onLoad={this.firebaseLoad} />\n\t\t\t\t\t<ShareDialog ref={this.refShareDialog} />\n\t\t\t\t\t<Snackbar open={this.state.snackBar.Show} anchorOrigin={{ vertical: 'bottom', horizontal: 'center'}} autoHideDuration={2000} onClose={this.SnackbarOnClose}>\n\t\t\t\t\t\t<MuiAlert elevation={6} variant=\"filled\" onClose={this.SnackbarOnClose} severity={this.state.snackBar.Severity}>{this.state.snackBar.Message}</MuiAlert>\n\t\t\t\t\t</Snackbar>\n\t\t\t\t\t<SvgToImg ref={this.refSvgToImg} />\n\t\t\t\t</ThemeProvider>\n\t\t\t</StyledEngineProvider>\n\t\t);\n\t}\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport './index.css';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t{/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n\t\t<CssBaseline />\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}