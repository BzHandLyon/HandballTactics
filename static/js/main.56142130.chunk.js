(this["webpackJsonptactics-board"]=this["webpackJsonptactics-board"]||[]).push([[0],{5454:function(e,t,i){e.exports=i(5471)},5469:function(e,t,i){},5470:function(e,t,i){},5471:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),r=i(12),s=i.n(r),l=i(98),o=i(5534),h=i(7),c=i(6),u=i(10),d=i(14),p=i(13),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Object(h.a)(this,e),this._id=t,this._color=i,this._x=n,this._y=a,this._xDefault=r,this._yDefault=s}return Object(c.a)(e,[{key:"reset",value:function(){this._x=this._xDefault,this._y=this._yDefault}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"xDefault",get:function(){return this._xDefault},set:function(e){this._xDefault=e}},{key:"yDefault",get:function(){return this._yDefault},set:function(e){this._yDefault=e}}]),e}(),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"0";Object(h.a)(this,e),this._id=t,this._no=i,this._name=n,this._color=a,this._x=r,this._y=s,this._rotation=l,this._xDefault=o,this._yDefault=c,this._noDefault=u}return Object(c.a)(e,[{key:"reset",value:function(){this._x=this._xDefault,this._y=this._yDefault,this._rotation=0,this._name="",this._no=this._noDefault}},{key:"isPlaced",get:function(){return this._x!==this._xDefault||this._y!==this._yDefault}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"no",get:function(){return this._no},set:function(e){this._no=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e}},{key:"xDefault",get:function(){return this._xDefault},set:function(e){this._xDefault=e}},{key:"yDefault",get:function(){return this._yDefault},set:function(e){this._yDefault=e}},{key:"noDefault",get:function(){return this._noDefault},set:function(e){this._noDefault=e}}]),e}(),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"select",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(h.a)(this,e),this._mode=t,this._lineArrowStart=i,this._lineArrowEnd=n,this._lineDashed=a,this._color=0,this._pitchOverlay="none",this._pitchOverlayCallback=null}return Object(c.a)(e,[{key:"mode",get:function(){return this._mode},set:function(e){this._mode=e}},{key:"modeOptions",get:function(){return["select","line","square","ellipse","text"]}},{key:"lineArrowStart",get:function(){return this._lineArrowStart},set:function(e){console.log("Line Arrow Start",e),this._lineArrowStart=e}},{key:"lineArrowEnd",get:function(){return this._lineArrowEnd},set:function(e){console.log("Line Arrow End",e),this._lineArrowEnd=e}},{key:"lineDashed",get:function(){return this._lineDashed},set:function(e){console.log("Line Dashed",e),this._lineDashed=e}},{key:"color",get:function(){return this._color},set:function(e){console.log("Color",e),this._color=e}},{key:"pitchOverlayOptions",get:function(){return["none","exercise","basketball","volleyball"]}},{key:"pitchOverlay",get:function(){return this._pitchOverlay},set:function(e){console.log("PitchOverlay",e),e!==this._pitchOverlay&&(this._pitchOverlay=e,null!==this._pitchOverlayCallback&&this._pitchOverlayCallback(this._pitchOverlay))}},{key:"pitchOverlayCallback",get:function(){return this._pitchOverlayCallback},set:function(e){this._pitchOverlayCallback=e}}]),e}(),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Object(h.a)(this,e),this._id=t,this._x=i,this._y=n,this._width=a,this._height=r}return Object(c.a)(e,[{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),e}(),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(h.a)(this,e),this._id=t,this._color=i,this._x1=n,this._y1=a,this._x2=n+r,this._y2=a+s,this._rotation=l,this._dashed=o,this._isEdit=c}return Object(c.a)(e,[{key:"resize",value:function(e,t,i){if(this.x2=e,i){var n=this.width*(this.y1<t?1:-1);this.y2=this.y1+n}else this.y2=t}},{key:"edit",value:function(e,t,i){switch(e){case"tl":this.x1+=t,this.y1+=i;break;case"tr":this.x2+=t,this.y1+=i;break;case"bl":this.x1+=t,this.y2+=i;break;case"br":this.x2+=t,this.y2+=i;break;case"mv":this.x1+=t,this.y1+=i,this.x2+=t,this.y2+=i}}},{key:"rotate",value:function(e,t,i){var n=e-this.cx,a=t-this.cy,r=180*Math.atan2(a,n)/Math.PI;(r+=90)<0&&(r+=360),i&&(r=45*Math.floor(r/45)),this.rotation=r}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"x1",get:function(){return this._x1},set:function(e){this._x1=e}},{key:"y1",get:function(){return this._y1},set:function(e){this._y1=e}},{key:"x2",get:function(){return this._x2},set:function(e){this._x2=e}},{key:"y2",get:function(){return this._y2},set:function(e){this._y2=e}},{key:"box",get:function(){return new m(this.id,this.x,this.y,this.width,this.height)}},{key:"x",get:function(){return this._x1<this._x2?this._x1:this._x2}},{key:"width",get:function(){return this._x1<this._x2?this._x2-this._x1:this._x1-this._x2}},{key:"y",get:function(){return this._y1<this._y2?this._y1:this._y2}},{key:"height",get:function(){return this._y1<this._y2?this._y2-this._y1:this._y1-this._y2}},{key:"cx",get:function(){return this.x+this.width/2}},{key:"cy",get:function(){return this.y+this.height/2}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e}},{key:"dashed",get:function(){return this._dashed},set:function(e){this._dashed=e}},{key:"isEdit",get:function(){return this._isEdit},set:function(e){this._isEdit=e}}]),e}(),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(h.a)(this,e),this._id=t,this._color=i,this._x1=n,this._y1=a,this._x2=n+2*r,this._y2=a+2*s,this._rotation=l,this._dashed=o,this._isEdit=c}return Object(c.a)(e,[{key:"resize",value:function(e,t,i){if(this.x2=e,i){var n=this.rx*(this.y1<t?2:-2);this.y2=this.y1+n}else this.y2=t}},{key:"edit",value:function(e,t,i){switch(e){case"tl":this.x1+=t,this.y1+=i;break;case"tr":this.x2+=t,this.y1+=i;break;case"bl":this.x1+=t,this.y2+=i;break;case"br":this.x2+=t,this.y2+=i;break;case"mv":this.x1+=t,this.y1+=i,this.x2+=t,this.y2+=i}}},{key:"rotate",value:function(e,t,i){var n=e-this.cx,a=t-this.cy,r=180*Math.atan2(a,n)/Math.PI;(r+=90)<0&&(r+=360),i&&(r=45*Math.floor(r/45)),this.rotation=r}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"x1",get:function(){return this._x1},set:function(e){this._x1=e}},{key:"y1",get:function(){return this._y1},set:function(e){this._y1=e}},{key:"x2",get:function(){return this._x2},set:function(e){this._x2=e}},{key:"y2",get:function(){return this._y2},set:function(e){this._y2=e}},{key:"cx",get:function(){return(this._x1<this._x2?this._x1:this._x2)+this.rx}},{key:"cy",get:function(){return(this._y1<this._y2?this._y1:this._y2)+this.ry}},{key:"rx",get:function(){return(this._x1<this._x2?this._x2-this._x1:this._x1-this._x2)/2}},{key:"ry",get:function(){return(this._y1<this._y2?this._y2-this._y1:this._y1-this._y2)/2}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e}},{key:"dashed",get:function(){return this._dashed},set:function(e){this._dashed=e}},{key:"isEdit",get:function(){return this._isEdit},set:function(e){this._isEdit=e}},{key:"box",get:function(){return new m(this.id,this.cx-this.rx,this.cy-this.ry,2*this.rx,2*this.ry)}}]),e}(),E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(h.a)(this,e),this._x=t,this._y=i}return Object(c.a)(e,[{key:"equalTo",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"move",value:function(e,t){this._x+=e,this._y+=t}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}}]),e}(),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E(0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new E(0,0),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new E(0,0),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new E(0,0),s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(h.a)(this,e),this._id=t,this._p1=i,this._p2=n,this._c1=a,this._c2=r,this._arrowStart=s,this._arrowEnd=l}return Object(c.a)(e,[{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"p1",get:function(){return this._p1},set:function(e){this._p1=e}},{key:"p2",get:function(){return this._p2},set:function(e){this._p2=e}},{key:"c1",get:function(){return this._c1},set:function(e){this._c1=e}},{key:"c2",get:function(){return this._c2},set:function(e){this._c2=e}},{key:"arrowStart",get:function(){return this._arrowStart},set:function(e){this._arrowStart=e}},{key:"arrowEnd",get:function(){return this._arrowEnd},set:function(e){this._arrowEnd=e}}]),e}(),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new E(0,0),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new E(0,0),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new E(0,0),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new E(0,0),l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9&&void 0!==arguments[9]&&arguments[9];Object(h.a)(this,e),this._id=t,this._color=i,this._p1=n,this._p2=a,this._c1=r,this._c2=s,this._arrowStart=l,this._arrowEnd=o,this._dashed=c,this._isEdit=u}return Object(c.a)(e,[{key:"empty",value:function(){return this.p1.equalTo(this.p2)&&this.p1.equalTo(this.c1)&&this.p1.equalTo(this.c2)}},{key:"resize",value:function(e,t){this.p2=new E(e,t);var i=this.p2.x-this.p1.x,n=this.p2.y-this.p1.y;this.c1=new E(this.p1.x+i/3,this.p1.y+n/3),this.c2=new E(this.p1.x+i/3*2,this.p1.y+n/3*2)}},{key:"edit",value:function(e,t,i){switch(e){case"p1":console.log(t,i),this.p1.move(t,i);break;case"c1":this.c1.move(t,i);break;case"c2":this.c2.move(t,i);break;case"p2":this.p2.move(t,i)}}},{key:"paths",value:function(){var e=this.computeControlPoints([this.p1.x,this.c1.x,this.c2.x,this.p2.x]),t=this.computeControlPoints([this.p1.y,this.c1.y,this.c2.y,this.p2.y]),i=[];return i[0]=new k(this.id,this.p1,this.c1,new E(e.p1[0],t.p1[0]),new E(e.p2[0],t.p2[0]),this.arrowStart,!1),i[1]=new k(this.id,this.c1,this.c2,new E(e.p1[1],t.p1[1]),new E(e.p2[1],t.p2[1]),!1,!1),i[2]=new k(this.id,this.c2,this.p2,new E(e.p1[2],t.p1[2]),new E(e.p2[2],t.p2[2]),!1,this.arrowEnd),i}},{key:"computeControlPoints",value:function(e){var t=[],i=[],n=e.length-1,a=[],r=[],s=[],l=[];a[0]=0,r[0]=2,s[0]=1,l[0]=e[0]+2*e[1];for(var o=1;o<n-1;o++)a[o]=1,r[o]=4,s[o]=1,l[o]=4*e[o]+2*e[o+1];a[n-1]=2,r[n-1]=7,s[n-1]=0,l[n-1]=8*e[n-1]+e[n];for(var h=1;h<n;h++){var c=a[h]/r[h-1];r[h]=r[h]-c*s[h-1],l[h]=l[h]-c*l[h-1]}t[n-1]=l[n-1]/r[n-1];for(var u=n-2;u>=0;--u)t[u]=(l[u]-s[u]*t[u+1])/r[u];for(var d=0;d<n-1;d++)i[d]=2*e[d+1]-t[d+1];return i[n-1]=.5*(e[n]+t[n-1]),{p1:t,p2:i}}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}},{key:"p1",get:function(){return this._p1},set:function(e){this._p1=e}},{key:"p2",get:function(){return this._p2},set:function(e){this._p2=e}},{key:"c1",get:function(){return this._c1},set:function(e){this._c1=e}},{key:"c2",get:function(){return this._c2},set:function(e){this._c2=e}},{key:"arrowStart",get:function(){return this._arrowStart},set:function(e){this._arrowStart=e}},{key:"arrowEnd",get:function(){return this._arrowEnd},set:function(e){this._arrowEnd=e}},{key:"dashed",get:function(){return this._dashed},set:function(e){this._dashed=e}},{key:"isEdit",get:function(){return this._isEdit},set:function(e){this._isEdit=e}}]),e}(),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;Object(h.a)(this,e),this._playersIdPrefix="pl",this._noPlayers=t,this._noPlayerColors=i,this._playerSize=n,this._players=[],this._ballsIdPrefix="bl",this._noBalls=a,this._noBallColors=r,this._ballSize=s,this._balls=[],this._squareID=0,this._squares=[],this._ellipseID=0,this._ellipses=[],this._lineID=0,this._lines=[],this._textID=0,this._texts=[],this._overlay="none",this._initPlayers(),this._initBalls(),this._drawMode=new g}return Object(c.a)(e,[{key:"_initPlayers",value:function(){for(var e=Math.floor(this._noPlayers/this._noPlayerColors),t=0;t<this._noPlayers;t++){var i=Math.floor(t/e),n=e-t%e,a=new y(this._playersIdPrefix+t.toString(),n,"",i,i*this._playerSize,0,0,i*this._playerSize,0,n);this._players.push(a)}}},{key:"_initBalls",value:function(){for(var e=Math.floor(this._noBalls/this._noBallColors),t=0;t<this._noBalls;t++){var i=Math.floor(t/e),n=new f(this._ballsIdPrefix+t.toString(),i,i*this._ballSize,0,i*this._ballSize,0);this._balls.push(n)}}},{key:"playerMove",value:function(e,t,i){return this.players=this.players.map((function(n){return e===n.id&&(n.x+=t,n.y+=i),n})),this.players}},{key:"playerEditStart",value:function(e){if(!e.startsWith("pl"))return null;var t=this.players.find((function(t){return e===t.id}));return t.isPlaced?{id:t.id,name:t.name,no:t.no}:null}},{key:"playerEditDone",value:function(e){return this.players=this.players.map((function(t){return e.id!==t.id||(e.remove?t.reset():(t.name=e.name,t.no=e.no)),t})),this.players}},{key:"ballMove",value:function(e,t,i){return this.balls=this.balls.map((function(n){return e===n.id&&(n.x+=t,n.y+=i),n})),this.balls}},{key:"lineCreate",value:function(e,t){var i="ln"+this._lineID.toString();return this._lineID+=1,new b(i,this._drawMode.color,new E(e,t),new E(e,t),new E(e,t),new E(e,t),this._drawMode.lineArrowStart,this._drawMode.lineArrowEnd,this._drawMode.lineDashed)}},{key:"lineAdd",value:function(e){return this.lines=this.lines.map((function(e){return e})),this.lines.push(e),this.lines}},{key:"lineResize",value:function(e,t,i){return this.lines=this.lines.map((function(n){return e===n.id&&n.resize(t,i),n})),this.lines}},{key:"lineEdit",value:function(e,t,i,n){return this.lines=this.lines.map((function(a){return t===a.id&&a.edit(e,i,n),a})),this.lines}},{key:"lineCleanup",value:function(){return this.lines=this.lines.filter((function(e){return!e.empty()})),this.lines}},{key:"lineEditStart",value:function(e){return this.lines=this.lines.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this.lines}},{key:"lineEditEnd",value:function(){return this.lines=this.lines.map((function(e){return e.isEdit=!1,e})),this.lines}},{key:"ellipseCreate",value:function(e,t){var i="el"+this._ellipseID.toString();return this._ellipseID+=1,new _(i,this._drawMode.color,e,t,0,0,0,this._drawMode.lineDashed)}},{key:"ellipseAdd",value:function(e){return this.ellipses=this.ellipses.map((function(e){return e})),this.ellipses.push(e),this.ellipses}},{key:"ellipseResize",value:function(e,t,i,n){return this.ellipses=this.ellipses.map((function(a){return e===a.id&&a.resize(t,i,n),a})),this.ellipses}},{key:"ellipseEdit",value:function(e,t,i,n){return this.ellipses=this.ellipses.map((function(a){return t===a.id&&a.edit(e,i,n),a})),this.ellipses}},{key:"ellipseRotate",value:function(e,t,i,n){return this.ellipses=this.ellipses.map((function(a){return e===a.id&&a.rotate(t,i,n),a})),this.ellipses}},{key:"ellipseCleanup",value:function(){return this.ellipses=this.ellipses.filter((function(e){return e.rx>0&&e.ry>0})),this.ellipses}},{key:"ellipseEditStart",value:function(e){return this.ellipses=this.ellipses.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this.ellipses}},{key:"ellipsesEditEnd",value:function(){return this.ellipses=this.ellipses.map((function(e){return e.isEdit=!1,e})),this.ellipses}},{key:"squareCreate",value:function(e,t){var i="sq"+this._squareID.toString();return this._squareID+=1,new v(i,this._drawMode.color,e,t,0,0,0,this._drawMode.lineDashed)}},{key:"squareAdd",value:function(e){return this.squares=this.squares.map((function(e){return e})),this.squares.push(e),this.squares}},{key:"squareResize",value:function(e,t,i,n){return this.squares=this.squares.map((function(a){return e===a.id&&a.resize(t,i,n),a})),this.squares}},{key:"squareEdit",value:function(e,t,i,n){return this.squares=this.squares.map((function(a){return t===a.id&&a.edit(e,i,n),a})),this.squares}},{key:"squareRotate",value:function(e,t,i,n){return this.squares=this.squares.map((function(a){return e===a.id&&a.rotate(t,i,n),a})),this.squares}},{key:"squareCleanup",value:function(){return this.squares=this.squares.filter((function(e){return e.width>0&&e.height>0})),this.squares}},{key:"squareEditStart",value:function(e){return this.squares=this.squares.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this.squares}},{key:"squareEditEnd",value:function(){return this.squares=this.squares.map((function(e){return e.isEdit=!1,e})),this.squares}},{key:"overlaySize",value:function(){switch(this._overlay){case"exercise":return{width:2800,height:2e3};case"basketball":return{width:2800,height:1500};case"volleyball":return{width:1800,height:900};default:return null}}},{key:"drawMode",get:function(){return this._drawMode},set:function(e){this._drawMode=e}},{key:"players",get:function(){return this._players},set:function(e){this._players=e}},{key:"balls",get:function(){return this._balls},set:function(e){this._balls=e}},{key:"lines",get:function(){return this._lines},set:function(e){this._lines=e}},{key:"ellipses",get:function(){return this._ellipses},set:function(e){this._ellipses=e}},{key:"squares",get:function(){return this._squares},set:function(e){this._squares=e}},{key:"texts",get:function(){return this._texts},set:function(e){this._texts=e}},{key:"overlay",get:function(){return this._overlay},set:function(e){this._overlay=e}}]),e}(),x=i(4),O=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"render",value:function(){var e="player pc"+this.props.color,t="translate("+this.props.x+" "+this.props.y+")";return a.a.createElement("g",{className:e,textAnchor:"middle",transform:t},a.a.createElement("circle",{r:"50",cx:"50",cy:"70",className:"draggable","data-ref":this.props.id}),a.a.createElement("text",{className:"number",x:"50",y:"70",dominantBaseline:"central"},this.props.no),a.a.createElement("text",{x:"50"},this.props.name))}}]),i}(n.Component);O.defaultProps={id:"",x:0,y:0,color:0,no:0,name:""};var S=O,M=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"ballImage",value:function(){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 952 952"},a.a.createElement("path",{d:"M813 139A475 475 0 000 476a474 474 0 00476 476 474 474 0 00476-476 474 474 0 00-139-337zm-600-31l12-10a457 457 0 01370-60c-14 6-33 18-65 45a393 393 0 00-182 22c-31 11-55 23-71 33l-74-25c3 1 8-4 10-5zm433 119l-81 222-196 37-161-166c11-76 63-143 63-143s34-25 88-44a403 403 0 01174-20l113 114zM39 460c-5 32-6 66-3 100l-9-20a451 451 0 0136-252c-3 30-2 61 0 85-11 28-19 57-24 87zm40 173a418 418 0 018-239c33-28 77-44 101-52l158 164-16 179-155 52c-39-29-72-68-96-104zm470 260c-34 22-121 28-157 29a451 451 0 01-200-92c0-1-4-49-4-66l156-52 181 78 25 103h-1zm300-158c-27 38-59 75-98 102-36 25-85 34-128 41-3 1-44 8-45 6l-25-103 128-132 168-15 8 89-8 12zm3-135l-2 3-168 16-90-158 82-223 115 7a366 366 0 01118 169 434 434 0 01-55 186zm60-250a396 396 0 00-108-131c-5-25-19-65-57-107l2 2 7 5a459 459 0 01156 230v1z"}))}},{key:"render",value:function(){var e="ball bc"+this.props.color,t="translate("+this.props.x+" "+this.props.y+")",i=4===this.props.color?this.ballImage():null;return a.a.createElement("g",{className:e,transform:t},a.a.createElement("circle",{r:"30",cx:"30",cy:"30",className:"draggable","data-ref":this.props.id}),i)}}]),i}(n.Component);M.defaultProps={id:"",x:0,y:0,color:0};var j=M,D=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"render",value:function(){var e=this.props.size/2,t=this.props.position.x-e,i=this.props.position.y-e;return a.a.createElement("rect",{className:"editCorner draggable",x:t,y:i,width:this.props.size,height:this.props.size,"data-ref":this.props.id})}}]),i}(n.Component);D.defaultProps={id:"",size:50,position:null};var q=D,C=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"render",value:function(){var e=this.props.box,t=e.width/2,i=e.x+t,n=e.y,r=i,s=n-2*this.props.size;return a.a.createElement(a.a.Fragment,null,a.a.createElement("line",{x1:i,y1:n,x2:r,y2:s}),a.a.createElement("circle",{className:"editCorner draggable",cx:r,cy:s,r:this.props.size/2,"data-ref":"edit-rt-"+e.id}))}}]),i}(n.Component);C.defaultProps={size:50,box:null};var N=C,A=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"render",value:function(){var e=this.props.box,t=new E(e.x,e.y),i=new E(e.x+e.width,e.y),n=new E(e.x,e.y+e.height),r=new E(e.x+e.width,e.y+e.height),s=this.props.showBox?"editBox draggable":"editTransparent draggable";return a.a.createElement("g",null,a.a.createElement("rect",{className:s,x:e.x,y:e.y,width:e.width,height:e.height,"data-ref":"edit-mv-"+e.id}),a.a.createElement(q,{id:"edit-tl-"+e.id,position:t}),a.a.createElement(q,{id:"edit-tr-"+e.id,position:i}),a.a.createElement(q,{id:"edit-bl-"+e.id,position:n}),a.a.createElement(q,{id:"edit-br-"+e.id,position:r}),a.a.createElement(N,{box:e}))}}]),i}(n.Component);A.defaultProps={box:null,showBox:!1};var T=A,P=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"editBox",value:function(e,t){return e?a.a.createElement(T,{box:t,showBox:!1}):null}},{key:"render",value:function(){var e=this.props.square,t=(e.dashed?"square dashed pc":"square pc")+e.color,i="rotate("+e.rotation+","+e.cx+","+e.cy+")";return a.a.createElement("g",{className:t,transform:i},a.a.createElement("rect",{x:e.x,y:e.y,width:e.width,height:e.height,"data-ref":e.id}),this.editBox(e.isEdit,e.box))}}]),i}(n.Component);P.defaultProps={square:null};var R=P,W=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"editBox",value:function(e,t){return e?a.a.createElement(T,{box:t,showBox:!0}):null}},{key:"render",value:function(){var e=this.props.ellipse,t=(e.dashed?"ellipse dashed pc":"ellipse pc")+e.color,i="rotate("+e.rotation+","+e.cx+","+e.cy+")";return a.a.createElement("g",{className:t,transform:i},a.a.createElement("ellipse",{cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry,"data-ref":e.id}),this.editBox(e.isEdit,e.box))}}]),i}(n.Component);W.defaultProps={ellipse:null};var B=W,z=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"editHandles",value:function(e){return e.isEdit?a.a.createElement(a.a.Fragment,null,a.a.createElement(q,{id:"edit-l1-"+e.id,position:e.p1}),a.a.createElement(q,{id:"edit-l2-"+e.id,position:e.c1}),a.a.createElement(q,{id:"edit-l3-"+e.id,position:e.c2}),a.a.createElement(q,{id:"edit-l4-"+e.id,position:e.p2})):null}},{key:"renderPath",value:function(e){var t="M "+e.p1.x+" "+e.p1.y+" C "+e.c1.x+" "+e.c1.y+" "+e.c2.x+" "+e.c2.y+" "+e.p2.x+" "+e.p2.y,i=e.arrowStart?"url(#arrowStart)":"",n=e.arrowEnd?"url(#arrowEnd)":"";return a.a.createElement("path",{d:t,"data-ref":e.id,markerStart:i,markerEnd:n})}},{key:"render",value:function(){var e=this,t=this.props.line,i=(t.dashed?"line dashed pc":"line pc")+t.color,n=t.paths().map((function(t){return e.renderPath(t)}));return a.a.createElement("g",{className:i},n,this.editHandles(t))}}]),i}(n.Component);z.defaultProps={line:null};var I=z,F=i(5514),L=i(5522),X=i(5519),Y=i(5518),H=i(5523),U=i(5537),G=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).state={open:!1,player:{id:"",name:"",no:0}},n._refName=a.a.createRef(),n._refNumber=a.a.createRef(),n.openDialog=n.openDialog.bind(Object(u.a)(n)),n.close=n.close.bind(Object(u.a)(n)),n.save=n.save.bind(Object(u.a)(n)),n.remove=n.remove.bind(Object(u.a)(n)),n}return Object(c.a)(i,[{key:"openDialog",value:function(e){this.setState({open:!0,player:e})}},{key:"close",value:function(){this.setState({open:!1})}},{key:"save",value:function(){this.close(),null!==this.props.onEditDone&&this.props.onEditDone({id:this.state.player.id,remove:!1,name:this._refName.current.value,no:this._refNumber.current.value})}},{key:"remove",value:function(){this.close(),null!==this.props.onEditDone&&this.props.onEditDone({id:this.state.player.id,remove:!0})}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(F.a,{open:this.state.open,onClose:this.close,"aria-labelledby":"form-dialog-title"},a.a.createElement(Y.a,{id:"form-dialog-title"},"Edit player"),a.a.createElement(X.a,null,a.a.createElement(U.a,{inputRef:this._refNumber,margin:"dense",id:"playerNumber",defaultValue:this.state.player.no,label:"Number",type:"number",fullWidth:!0,autoFocus:!0}),a.a.createElement(U.a,{inputRef:this._refName,margin:"dense",id:"playerName",defaultValue:this.state.player.name,label:"Name",type:"text",fullWidth:!0})),a.a.createElement(L.a,null,a.a.createElement(H.a,{onClick:this.remove,color:"primary"},"Remove"),a.a.createElement(H.a,{onClick:this.close,color:"primary"},"Cancel"),a.a.createElement(H.a,{onClick:this.save,color:"primary"},"Save"))))}}]),i}(n.Component);G.defaultProps={onEditDone:null};var V=G,J=-1,$=0,K=1,Q=4,Z=5,ee=6,te=7,ie=8,ne=9,ae=10,re=11,se=12,le=13,oe=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e))._editRef=a.a.createRef(),n._bgRef=a.a.createRef(),n._playerDialogRef=a.a.createRef(),n._orgWidth=n.props.viewBoxRight-n.props.viewBoxLeft,n._orgHeight=n.props.viewBoxBottom-n.props.viewBoxTop,n._pitch=n.props.pitch,n.state={players:n._pitch.players,balls:n._pitch.balls,squares:n._pitch.squares,ellipses:n._pitch.ellipses,texts:n._pitch.texts,lines:n._pitch.lines,overlay:n._pitch.overlay},n.overlayChanged=n.overlayChanged.bind(Object(u.a)(n)),n._pitch.drawMode.pitchOverlayCallback=n.overlayChanged,n._dragNode=null,n._dragObjectType=J,n._mouseX=0,n._mouseY=0,n.hContextMenu=n.hContextMenu.bind(Object(u.a)(n)),n.hMouseDown=n.hMouseDown.bind(Object(u.a)(n)),n.hMouseUp=n.hMouseUp.bind(Object(u.a)(n)),n.hMouseMove=n.hMouseMove.bind(Object(u.a)(n)),n.playerEditDone=n.playerEditDone.bind(Object(u.a)(n)),n}return Object(c.a)(i,[{key:"overlayChanged",value:function(e){console.log("Overlay change",e,this.state.overlay),this._pitch.overlay=e,this.setState({overlay:e})}},{key:"getScale",value:function(){var e=this._bgRef.current.getBoundingClientRect();return{X:this._orgWidth/e.width,Y:this._orgHeight/e.height}}},{key:"getRealPosition",value:function(e){var t=this.getScale(),i=this._bgRef.current.getBoundingClientRect(),n=e.clientX-i.left,a=e.clientY-i.top;return{X:n*t.X,Y:a*t.Y}}},{key:"resetMouseDrag",value:function(e){this._mouseX=e.clientX,this._mouseY=e.clientY}},{key:"playerDrag",value:function(e,t,i){this.setState({players:this._pitch.playerMove(e,t,i)})}},{key:"ballDrag",value:function(e,t,i){this.setState({balls:this._pitch.ballMove(e,t,i)})}},{key:"editTopLeft",value:function(e,t,i){e.startsWith("sq")&&this.setState({squares:this._pitch.squareEdit("tl",e,t,i)}),e.startsWith("el")&&this.setState({ellipses:this._pitch.ellipseEdit("tl",e,t,i)})}},{key:"editTopRight",value:function(e,t,i){e.startsWith("sq")&&this.setState({squares:this._pitch.squareEdit("tr",e,t,i)}),e.startsWith("el")&&this.setState({ellipses:this._pitch.ellipseEdit("tr",e,t,i)})}},{key:"editBottomLeft",value:function(e,t,i){e.startsWith("sq")&&this.setState({squares:this._pitch.squareEdit("bl",e,t,i)}),e.startsWith("el")&&this.setState({ellipses:this._pitch.ellipseEdit("bl",e,t,i)})}},{key:"editBottomRight",value:function(e,t,i){e.startsWith("sq")&&this.setState({squares:this._pitch.squareEdit("br",e,t,i)}),e.startsWith("el")&&this.setState({ellipses:this._pitch.ellipseEdit("br",e,t,i)})}},{key:"editMove",value:function(e,t,i){e.startsWith("sq")&&this.setState({squares:this._pitch.squareEdit("mv",e,t,i)}),e.startsWith("el")&&this.setState({ellipses:this._pitch.ellipseEdit("mv",e,t,i)})}},{key:"editRotate",value:function(e,t,i,n){e.startsWith("sq")&&this.setState({squares:this._pitch.squareRotate(e,t,i,n)}),e.startsWith("el")&&this.setState({ellipses:this._pitch.ellipseRotate(e,t,i,n)})}},{key:"editLinePoint",value:function(e,t,i,n){this.setState({lines:this._pitch.lineEdit(e,t,i,n)})}},{key:"isDragStarted",value:function(e){return 0===e.button&&(!!e.target.classList.contains("draggable")&&(this._dragNode=e.target.getAttribute("data-ref"),null!==this._dragNode&&(this._dragObjectType=J,this._dragNode.startsWith("pl")&&(this._dragObjectType=$),this._dragNode.startsWith("bl")&&(this._dragObjectType=K),this._dragNode.startsWith("edit-tl-")&&(this._dragObjectType=Q,this._dragNode=this._dragNode.replace("edit-tl-","")),this._dragNode.startsWith("edit-tr-")&&(this._dragObjectType=Z,this._dragNode=this._dragNode.replace("edit-tr-","")),this._dragNode.startsWith("edit-bl-")&&(this._dragObjectType=ee,this._dragNode=this._dragNode.replace("edit-bl-","")),this._dragNode.startsWith("edit-br-")&&(this._dragObjectType=te,this._dragNode=this._dragNode.replace("edit-br-","")),this._dragNode.startsWith("edit-mv-")&&(this._dragObjectType=ie,this._dragNode=this._dragNode.replace("edit-mv-","")),this._dragNode.startsWith("edit-rt-")&&(this._dragObjectType=ne,this._dragNode=this._dragNode.replace("edit-rt-","")),this._dragNode.startsWith("edit-l1-")&&(this._dragObjectType=ae,this._dragNode=this._dragNode.replace("edit-l1-","")),this._dragNode.startsWith("edit-l2-")&&(this._dragObjectType=re,this._dragNode=this._dragNode.replace("edit-l2-","")),this._dragNode.startsWith("edit-l3-")&&(this._dragObjectType=se,this._dragNode=this._dragNode.replace("edit-l3-","")),this._dragNode.startsWith("edit-l4-")&&(this._dragObjectType=le,this._dragNode=this._dragNode.replace("edit-l4-","")),this.resetMouseDrag(e),!0)))}},{key:"playerEditStarted",value:function(e){if(!e.startsWith("pl"))return!1;var t=this._pitch.playerEditStart(e);return null!==t&&(this._playerDialogRef.current.openDialog(t),!0)}},{key:"squareEditStarted",value:function(e){return!!e.startsWith("sq")&&(console.log("Square edit start",e),!0)}},{key:"ellipseEditStarted",value:function(e){return!!e.startsWith("el")&&(console.log("Ellipse edit start",e),!0)}},{key:"lineEditStarted",value:function(e){return!!e.startsWith("ln")&&(console.log("Line edit start",e),!0)}},{key:"playerEditDone",value:function(e){this.setState({players:this._pitch.playerEditDone(e)})}},{key:"objectDrag",value:function(e,t,i,n,a){switch(this._dragObjectType){case $:this.playerDrag(this._dragNode,i,n);break;case K:this.ballDrag(this._dragNode,i,n);break;case Q:this.editTopLeft(this._dragNode,i,n);break;case Z:this.editTopRight(this._dragNode,i,n);break;case ee:this.editBottomLeft(this._dragNode,i,n);break;case te:this.editBottomRight(this._dragNode,i,n);break;case ie:this.editMove(this._dragNode,i,n);break;case ne:this.editRotate(this._dragNode,e,t,a);break;case ae:this.editLinePoint("p1",this._dragNode,i,n);break;case re:this.editLinePoint("c1",this._dragNode,i,n);break;case se:this.editLinePoint("c2",this._dragNode,i,n);break;case le:this.editLinePoint("p2",this._dragNode,i,n);break;default:console.log("Invalid drag object type",this._dragObjectType,this._dragNode)}}},{key:"hContextMenu",value:function(e){if("select"===this.props.pitch.drawMode.mode){var t=e.target.getAttribute("data-ref");if(null!==t){if(!this.playerEditStarted(t))return this.squareEditStarted(t)?(e.preventDefault(),void this.setState({squares:this.props.pitch.squareEditStart(t)})):this.ellipseEditStarted(t)?(e.preventDefault(),void this.setState({ellipses:this.props.pitch.ellipseEditStart(t)})):this.lineEditStarted(t)?(e.preventDefault(),void this.setState({lines:this.props.pitch.lineEditStart(t)})):void 0;e.preventDefault()}}}},{key:"hMouseDown",value:function(e){var t=this.getRealPosition(e);switch(this.props.pitch.drawMode.mode){case"line":e.preventDefault();var i=this.props.pitch.lineCreate(t.X,t.Y);this._dragNode=i.id,this.setState({lines:this.props.pitch.lineAdd(i)});break;case"square":e.preventDefault();var n=this.props.pitch.squareCreate(t.X,t.Y);this._dragNode=n.id,this.setState({squares:this.props.pitch.squareAdd(n)});break;case"ellipse":e.preventDefault();var a=this.props.pitch.ellipseCreate(t.X,t.Y);this._dragNode=a.id,this.setState({ellipses:this.props.pitch.ellipseAdd(a)});break;case"text":break;case"select":default:if(this.isDragStarted(e))return void e.preventDefault()}}},{key:"hMouseUp",value:function(e){e.preventDefault();var t=this.getRealPosition(e),i=e.getModifierState("Shift");switch(this.props.pitch.drawMode.mode){case"line":this.setState({lines:this.props.pitch.lineCleanup()});break;case"square":this.setState({squares:this.props.pitch.squareCleanup()});break;case"ellipse":this.setState({ellipses:this.props.pitch.ellipseCleanup()});break;case"text":break;case"select":default:var n=this.getScale(),a=(e.clientX-this._mouseX)*n.X,r=(e.clientY-this._mouseY)*n.Y;this.resetMouseDrag(e),this.objectDrag(t.X,t.Y,a,r,i)}0===e.button&&this._dragObjectType===J&&this.setState({lines:this.props.pitch.lineEditEnd(),squares:this.props.pitch.squareEditEnd(),ellipses:this.props.pitch.ellipsesEditEnd()}),this._dragNode=null,this._dragObjectType=J}},{key:"hMouseMove",value:function(e){if(null!=this._dragNode){e.preventDefault();var t=this.getRealPosition(e),i=e.getModifierState("Shift");switch(this.props.pitch.drawMode.mode){case"line":this.setState({lines:this.props.pitch.lineResize(this._dragNode,t.X,t.Y)});break;case"square":this.setState({squares:this.props.pitch.squareResize(this._dragNode,t.X,t.Y,i)});break;case"ellipse":this.setState({ellipses:this.props.pitch.ellipseResize(this._dragNode,t.X,t.Y,i)});break;case"text":break;case"select":default:var n=this.getScale(),a=(e.clientX-this._mouseX)*n.X,r=(e.clientY-this._mouseY)*n.Y;this.resetMouseDrag(e),this.objectDrag(t.X,t.Y,a,r,i)}}}},{key:"getSVG",value:function(){return{width:this._orgWidth,height:this._orgHeight,svgText:this._editRef.current.children[0].outerHTML}}},{key:"renderPlayers",value:function(){return this.state.players.map((function(e,t){return a.a.createElement(S,{key:t.toString(),id:e.id,x:e.x,y:e.y,no:e.no,name:e.name,color:e.color})}))}},{key:"renderBalls",value:function(){return this.state.balls.map((function(e,t){return a.a.createElement(j,{key:t.toString(),id:e.id,x:e.x,y:e.y,color:e.color})}))}},{key:"renderSquares",value:function(){return this.state.squares.map((function(e,t){return a.a.createElement(R,{key:t.toString(),square:e})}))}},{key:"renderEllipses",value:function(){return this.state.ellipses.map((function(e,t){return a.a.createElement(B,{key:t.toString(),ellipse:e})}))}},{key:"renderLines",value:function(){return this.state.lines.map((function(e,t){return a.a.createElement(I,{key:t.toString(),line:e})}))}},{key:"renderPitchOverlay",value:function(){var e=this._pitch.overlaySize();if(null===e)return null;var t="translate("+(this._orgWidth-e.width)/2+" "+(this._orgHeight-e.height)/2+")";return a.a.createElement("rect",{width:e.width,height:e.height,transform:t,fill:"none"})}},{key:"render",value:function(){var e=this.props.viewBoxLeft.toString()+" "+this.props.viewBoxTop.toString()+" "+this.props.viewBoxRight.toString()+" "+this.props.viewBoxBottom.toString(),t=this.renderPlayers(),i=this.renderBalls(),n=this.renderSquares(),r=this.renderEllipses(),s=this.renderLines(),l=this.renderPitchOverlay(),o="pitch "+this.props.classes.offset,h=(this._orgWidth-4e3)/2,c=(this._orgHeight-2e3)/2,u="translate("+h+" "+c+")",d="translate("+h+" "+(c+2e3+50)+")",p="translate("+(h+1050)+" "+(c+2e3+100)+")";return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:this._editRef,className:o},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:e,onContextMenu:this.hContextMenu,onMouseDown:this.hMouseDown,onMouseUp:this.hMouseUp,onMouseMove:this.hMouseMove},a.a.createElement("style",null,[".pc0 {\tfill: #8b2323; stroke: #8b2323; }",".pc1 {\tfill: #e7e739; stroke: #e7e739; }",".pc2 {\tfill: #912cee; stroke: #912cee; }",".pc3 {\tfill: #04b804; stroke: #04b804; }",".pc4 {\tfill: #1d4ba0; stroke: #1d4ba0; }",".pc5 {\tfill: #ee2c2c; stroke: #ee2c2c; }",".pc6 {\tfill: #ff7f50; stroke: #ff7f50; }",".pc7 {\tfill: #56c6eb; stroke: #56c6eb; }",".bc0 { fill: #ffa500; }",".bc1 { fill: #cc3333; }",".bc2 { fill: #222333; }",".bc3 { fill: #0000ff; }",".bc4 { fill: #ffffff; }",".bc4 svg { fill: #000000; }",".player { pointer-events: none; }",".player text { fill: black;\t}",".player text.number { fill: white; }",".dashed { stroke-dasharray: 20; }",".square { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }",".ellipse { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }",".line { stroke-width: 12; }",".line path { fill: none; stroke-width: 12; }",".draggable { cursor: move; pointer-events: all;}",".editBox { fill: none; stroke-width: 8; stroke-opacity: 1; }",".editTransparent { fill: none; stroke-width: 0; }",".editCorner { fill: red; stroke-width: 0; stroke-opacity: 1; }"]),a.a.createElement("pattern",{id:"goal-net",x:"0",y:"0",width:"20",height:"20",stroke:"black",patternUnits:"userSpaceOnUse"},a.a.createElement("line",{x1:"0",x2:"20",y1:"0",y2:"20"}),a.a.createElement("line",{x1:"20",x2:"00",y1:"0",y2:"20"})),a.a.createElement("marker",{id:"arrowEnd",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth"},a.a.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:"#f00"})),a.a.createElement("marker",{id:"arrowStart",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth"},a.a.createElement("path",{d:"M9,0 L9,6 L0,3 z",fill:"#f00"})),a.a.createElement("g",{id:"background",ref:this._bgRef},a.a.createElement("rect",{width:this._orgWidth,height:this._orgHeight,fill:"#b7b7b7",fillOpacity:"0.5"})),a.a.createElement("g",{id:"pitch",transform:u,fill:"#0280c6",stroke:"white",strokeWidth:"8"},a.a.createElement("rect",{width:"4000",height:"2000"}),a.a.createElement("line",{x1:"2000",x2:"2000",y1:"0",y2:"2000"}),a.a.createElement("circle",{r:"300",cx:"2000",cy:"1000",fill:"none"}),a.a.createElement("circle",{r:"12",cx:"2000",cy:"1000",fill:"white",strokeWidth:"0"}),a.a.createElement("g",{id:"corner_marks"},a.a.createElement("path",{fill:"none",d:"M25,0 a25,25 0 0,1 -25,25"}),a.a.createElement("path",{fill:"none",d:"M4000,25 a25,25 0 0,1 -25,-25"}),a.a.createElement("path",{fill:"none",d:"M0,1975 a25,25 0 0,1 25,25"}),a.a.createElement("path",{fill:"none",d:"M3975,2000 a25,25 0 0,1 25,-25"})),a.a.createElement("g",{id:"substitition-zones"},a.a.createElement("line",{x1:"1000",x2:"1000",y1:"-48",y2:"32"}),a.a.createElement("line",{x1:"1500",x2:"1500",y1:"-48",y2:"32"}),a.a.createElement("line",{x1:"2500",x2:"2500",y1:"-48",y2:"32"}),a.a.createElement("line",{x1:"3000",x2:"3000",y1:"-48",y2:"32"})),a.a.createElement("g",{id:"left"},a.a.createElement("line",{x1:"500",x2:"500",y1:"980",y2:"1020"}),a.a.createElement("line",{x1:"600",x2:"600",y1:"842",y2:"1158"}),a.a.createElement("circle",{r:"12",cx:"600",cy:"1000",fill:"white",strokeWidth:"0"}),a.a.createElement("path",{fill:"none",d:"M0,242 a600,600 0 0,1 600,600"}),a.a.createElement("path",{fill:"none",d:"M600,1158 a600,600 0 0,1 -600,600"}),a.a.createElement("line",{x1:"-20",x2:"-60",y1:"500",y2:"500"}),a.a.createElement("line",{x1:"-20",x2:"-60",y1:"1500",y2:"1500"}),a.a.createElement("g",{id:"goal-left"},a.a.createElement("rect",{width:"100",height:"300",x:"-100",y:"850",fill:"url(#goal-net)",stroke:"#777777",strokeWidth:"4"}),a.a.createElement("line",{x1:"0",x2:"0",y1:"850",y2:"1150"}),a.a.createElement("line",{x1:"0",x2:"0",y1:"850",y2:"1150",stroke:"red",strokeDasharray:"20"}))),a.a.createElement("g",{id:"left-penalty",fill:"white",strokeWidth:"0"},a.a.createElement("rect",{width:"16",height:"16",x:"992",y:"492"}),a.a.createElement("circle",{r:"12",cx:"1000",cy:"1000"}),a.a.createElement("rect",{width:"16",height:"16",x:"992",y:"1492"})),a.a.createElement("g",{id:"right"},a.a.createElement("line",{x1:"3500",x2:"3500",y1:"980",y2:"1020"}),a.a.createElement("line",{x1:"3400",x2:"3400",y1:"842",y2:"1158"}),a.a.createElement("circle",{r:"12",cx:"3400",cy:"1000",fill:"white",strokeWidth:"0"}),a.a.createElement("path",{fill:"none",d:"M3400,842 a600,600 0 0,1 600,-600"}),a.a.createElement("path",{fill:"none",d:"M3400,1158 a600,600 0 0,0 600,600"}),a.a.createElement("line",{x1:"4020",x2:"4060",y1:"500",y2:"500"}),a.a.createElement("line",{x1:"4020",x2:"4060",y1:"1500",y2:"1500"}),a.a.createElement("g",{id:"goal-right"},a.a.createElement("rect",{width:"100",height:"300",x:"4000",y:"850",fill:"url(#goal-net)",stroke:"#777777",strokeWidth:"4"}),a.a.createElement("line",{x1:"4000",x2:"4000",y1:"850",y2:"1150"}),a.a.createElement("line",{x1:"4000",x2:"4000",y1:"850",y2:"1150",stroke:"red",strokeDasharray:"20"}))),a.a.createElement("g",{id:"right-penalty",fill:"white",strokeWidth:"0"},a.a.createElement("rect",{width:"16",height:"16",x:"2992",y:"492"}),a.a.createElement("circle",{r:"12",cx:"3000",cy:"1000"}),a.a.createElement("rect",{width:"16",height:"16",x:"2992",y:"1492"}))),a.a.createElement("g",{id:"pitchOverlay",stroke:"white",strokeWidth:"8"},l),a.a.createElement("g",{id:"ellipses"},r),a.a.createElement("g",{id:"squares"},n),a.a.createElement("g",{id:"players",transform:d,fontSize:"50"},t),a.a.createElement("g",{id:"balls",transform:p},i),a.a.createElement("g",{id:"lines"},s),a.a.createElement("g",{id:"texts"}))),a.a.createElement(V,{ref:this._playerDialogRef,onEditDone:this.playerEditDone}))}}]),i}(n.Component);oe.defaultProps={pitch:null,viewBoxLeft:0,viewBoxTop:0,viewBoxRight:4500,viewBoxBottom:2500};var he=Object(x.a)((function(e){return{offset:{paddingTop:e.mixins.toolbar.minHeight}}}),{withTheme:!0})(oe),ce=i(88),ue=i(5532),de=i(5533),pe=i(43),fe=i(5474),ye=i(93),ge=i.n(ye),me=i(5528),ve=i(5541),_e=i(5538),Ee=i(5521),ke=i(5475),be=i(5526),we=i(5527),xe=i(5540),Oe=i(96),Se=i.n(Oe),Me=i(97),je=i.n(Me),De=i(95),qe=i.n(De),Ce=i(94),Ne=i.n(Ce),Ae=i(61),Te=i.n(Ae),Pe=i(17),Re=i(99),We=i(5525),Be=i(5529),ze=i(62),Ie=i.n(ze),Fe=i(63),Le=i.n(Fe),Xe=i(5530),Ye=i(5531),He=i(5539),Ue=i(5542),Ge=i(5524),Ve=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).state={open:!1,lineArrows:!1,linePattern:!1,lineDashed:n.props.drawMode.lineDashed,lineArrowStart:n.props.drawMode.lineArrowStart,lineArrowEnd:n.props.drawMode.lineArrowEnd,pitchOverlays:!1,pitchOverlay:n.props.drawMode.pitchOverlay},n.open=n.open.bind(Object(u.a)(n)),n.close=n.close.bind(Object(u.a)(n)),n.lineArrowsToggle=n.lineArrowsToggle.bind(Object(u.a)(n)),n.lineArrowEndToggle=n.lineArrowEndToggle.bind(Object(u.a)(n)),n.lineArrowStartToggle=n.lineArrowStartToggle.bind(Object(u.a)(n)),n.linePatternToggle=n.linePatternToggle.bind(Object(u.a)(n)),n.lineDashedOn=n.lineDashedOn.bind(Object(u.a)(n)),n.lineDashedOff=n.lineDashedOff.bind(Object(u.a)(n)),n.pitchOverlaysToggle=n.pitchOverlaysToggle.bind(Object(u.a)(n)),n.pitchOverlayOnChange=n.pitchOverlayOnChange.bind(Object(u.a)(n)),n}return Object(c.a)(i,[{key:"open",value:function(){this.setState({open:!0})}},{key:"close",value:function(e){var t=e.currentTarget.dataset.value;t&&(this.props.drawMode.mode=t,null!==this.props.onClose&&this.props.onClose()),this.setState({open:!1,lineArrows:!1,linePattern:!1,pitchOverlays:!1})}},{key:"lineArrowsToggle",value:function(){this.setState({lineArrows:!this.state.lineArrows})}},{key:"lineArrowStartToggle",value:function(){this.props.drawMode.lineArrowStart=!this.props.drawMode.lineArrowStart,this.setState({lineArrowStart:this.props.drawMode.lineArrowStart})}},{key:"lineArrowEndToggle",value:function(){this.props.drawMode.lineArrowEnd=!this.props.drawMode.lineArrowEnd,this.setState({lineArrowEnd:this.props.drawMode.lineArrowEnd})}},{key:"lineArrowsIcon",value:function(){return this.state.lineArrowStart&&this.state.lineArrowEnd?a.a.createElement(Pe.b,null):!this.state.lineArrowStart&&this.state.lineArrowEnd?a.a.createElement(Pe.c,null):this.state.lineArrowStart&&!this.state.lineArrowEnd?a.a.createElement(Pe.a,null):a.a.createElement(Pe.f,null)}},{key:"linePatternToggle",value:function(){this.setState({linePattern:!this.state.linePattern})}},{key:"lineDashedOn",value:function(){this.props.drawMode.lineDashed=!0,this.setState({lineDashed:this.props.drawMode.lineDashed,linePattern:!1})}},{key:"lineDashedOff",value:function(){this.props.drawMode.lineDashed=!1,this.setState({lineDashed:this.props.drawMode.lineDashed,linePattern:!1})}},{key:"linePatternIcon",value:function(){return this.state.lineDashed?a.a.createElement(Pe.e,null):a.a.createElement(Pe.f,null)}},{key:"pitchOverlaysRender",value:function(){return this.props.drawMode.pitchOverlayOptions.map((function(e,t){return a.a.createElement(Ge.a,{control:a.a.createElement(He.a,null),label:e,value:e})}))}},{key:"pitchOverlaysToggle",value:function(){this.setState({pitchOverlays:!this.state.pitchOverlays})}},{key:"pitchOverlayOnChange",value:function(e){this.props.drawMode.pitchOverlay=e.target.value,this.setState({pitchOverlay:e.target.value,pitchOverlays:!1,open:!1})}},{key:"render",value:function(){var e=this.lineArrowsIcon(),t=this.linePatternIcon(),i=this.pitchOverlaysRender();return a.a.createElement(Re.a,{id:"drawingMenu",anchorEl:this.props.anchorEl,keepMounted:!0,open:this.state.open,onClose:this.close},a.a.createElement(We.a,{"data-value":"select",onClick:this.close},a.a.createElement(be.a,null,a.a.createElement(Pe.d,null)),a.a.createElement(we.a,{primary:"Select / Move"})),a.a.createElement(me.a,null),a.a.createElement(We.a,{onClick:this.pitchOverlaysToggle},a.a.createElement(we.a,{primary:"Pitch overlay"}),this.state.pitchOverlays?a.a.createElement(Ie.a,null):a.a.createElement(Le.a,null)),a.a.createElement(Be.a,{in:this.state.pitchOverlays,timeout:"auto",unmountOnExit:!0},a.a.createElement(Ue.a,{name:"radio-pitch-overlays",value:this.state.pitchOverlay,onChange:this.pitchOverlayOnChange},i)),a.a.createElement(me.a,null),a.a.createElement(We.a,{"data-value":"line",onClick:this.close},a.a.createElement(be.a,null,a.a.createElement(Pe.i,null)),a.a.createElement(we.a,{primary:"Draw line"})),a.a.createElement(We.a,{onClick:this.lineArrowsToggle},a.a.createElement(be.a,null,e),a.a.createElement(we.a,{primary:"Line arrows"}),this.state.lineArrows?a.a.createElement(Ie.a,null):a.a.createElement(Le.a,null)),a.a.createElement(Be.a,{in:this.state.lineArrows,timeout:"auto",unmountOnExit:!0},a.a.createElement(Ee.a,{component:"div",disablePadding:!0},a.a.createElement(We.a,{onClick:this.lineArrowEndToggle},a.a.createElement(be.a,null,a.a.createElement(Pe.c,null)),a.a.createElement(we.a,{primary:"End"}),a.a.createElement(Xe.a,null,a.a.createElement(Ye.a,{edge:"end",onChange:this.lineArrowEndToggle,checked:this.state.lineArrowEnd}))),a.a.createElement(We.a,{onClick:this.lineArrowStartToggle},a.a.createElement(be.a,null,a.a.createElement(Pe.a,null)),a.a.createElement(we.a,{primary:"Start"}),a.a.createElement(Xe.a,null,a.a.createElement(Ye.a,{edge:"end",onChange:this.lineArrowStartToggle,checked:this.state.lineArrowStart}))))),a.a.createElement(We.a,{onClick:this.linePatternToggle},a.a.createElement(be.a,null,t),a.a.createElement(we.a,{primary:"Line pattern"}),this.state.linePattern?a.a.createElement(Ie.a,null):a.a.createElement(Le.a,null)),a.a.createElement(Be.a,{in:this.state.linePattern,timeout:"auto",unmountOnExit:!0},a.a.createElement(Ee.a,{component:"div",disablePadding:!0},a.a.createElement(We.a,{onClick:this.lineDashedOff},a.a.createElement(be.a,null,a.a.createElement(Pe.f,null)),a.a.createElement(we.a,{primary:"Solid"})),a.a.createElement(We.a,{onClick:this.lineDashedOn},a.a.createElement(be.a,null,a.a.createElement(Pe.e,null)),a.a.createElement(we.a,{primary:"Dashed"})))),a.a.createElement(me.a,null),a.a.createElement(We.a,{"data-value":"square",onClick:this.close},a.a.createElement(be.a,null,a.a.createElement(Pe.h,null)),a.a.createElement(we.a,{primary:"Draw square"})),a.a.createElement(me.a,null),a.a.createElement(We.a,{"data-value":"ellipse",onClick:this.close},a.a.createElement(be.a,null,a.a.createElement(Pe.g,null)),a.a.createElement(we.a,{primary:"Draw ellipse"})),a.a.createElement(me.a,null),a.a.createElement(We.a,{"data-value":"text",onClick:this.close},a.a.createElement(be.a,null,a.a.createElement(Te.a,null)),a.a.createElement(we.a,{primary:"Write text"})))}}]),i}(n.Component);Ve.defaultProps={anchorEl:null,onClose:null,drawMode:null};var Je=Ve,$e=i(91),Ke=i.n($e),Qe=i(90),Ze=i.n(Qe),et=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).state={fullScreen:!1},n.toggleFullScreen=n.toggleFullScreen.bind(Object(u.a)(n)),n}return Object(c.a)(i,[{key:"domFullScreenToggle",value:function(e){if(e){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"toggleFullScreen",value:function(){var e=!this.state.fullScreen;this.domFullScreenToggle(e),this.setState({fullScreen:e})}},{key:"fsIconGet",value:function(){return this.state.fullScreen?a.a.createElement(Ze.a,null):a.a.createElement(Ke.a,null)}},{key:"render",value:function(){var e=this.fsIconGet(),t=this.state.fullScreen?"Exit full screen":"Enter full screen";return a.a.createElement(xe.a,{title:t},a.a.createElement(fe.a,{"aria-label":t,color:"inherit",onClick:this.toggleFullScreen},e))}}]),i}(n.Component),tt=function(e){Object(d.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).state={drawerOpen:!1,drawingMode:n.props.pitchFutsal.drawMode.mode},n.toggleDrawer=n.toggleDrawer.bind(Object(u.a)(n)),n.saveImage=n.saveImage.bind(Object(u.a)(n)),n._refDrawMenu=a.a.createRef(),n._refOpenDrawMenu=a.a.createRef(),n.drawingModeIcon=n.drawingModeIcon.bind(Object(u.a)(n)),n.drawMenuAnchorEl=n.drawMenuAnchorEl.bind(Object(u.a)(n)),n.drawMenuOpen=n.drawMenuOpen.bind(Object(u.a)(n)),n.drawMenuClose=n.drawMenuClose.bind(Object(u.a)(n)),n}return Object(c.a)(i,[{key:"toggleDrawer",value:function(e){if("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key){var t=!this.state.drawerOpen;this.setState({drawerOpen:t})}}},{key:"saveImage",value:function(){this.props.pitchEditSaveImage()}},{key:"drawMenuAnchorEl",value:function(){return this._refOpenDrawMenu.current}},{key:"drawMenuOpen",value:function(){this._refDrawMenu.current.open()}},{key:"drawMenuClose",value:function(){this.setState({drawingMode:this.props.pitchFutsal.drawMode.mode})}},{key:"drawingModeIcon",value:function(){switch(this.state.drawingMode){case"line":return a.a.createElement(Pe.i,null);case"square":return a.a.createElement(Pe.h,null);case"ellipse":return a.a.createElement(Pe.g,null);case"text":return a.a.createElement(Te.a,null);case"select":default:return a.a.createElement(Pe.d,null)}}},{key:"render",value:function(){var e=this.drawingModeIcon();return a.a.createElement(a.a.Fragment,null,a.a.createElement(ue.a,{position:"fixed"},a.a.createElement(de.a,{variant:"regular"},a.a.createElement(fe.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:this.toggleDrawer},a.a.createElement(ge.a,null)),a.a.createElement(pe.a,{variant:"h6",color:"inherit"},"Futsal tactics board"),a.a.createElement("div",{className:this.props.classes.grow}),a.a.createElement(xe.a,{title:"Selected draw mode"},a.a.createElement(fe.a,{ref:this._refOpenDrawMenu,"aria-label":"Selected draw mode",color:"inherit",onClick:this.drawMenuOpen},e)),a.a.createElement(xe.a,{title:"Save picture"},a.a.createElement(fe.a,{"aria-label":"Save picture",color:"inherit",onClick:this.saveImage},a.a.createElement(Ne.a,null))),a.a.createElement(xe.a,{title:"Share link"},a.a.createElement(fe.a,{"aria-label":"Share link",color:"inherit"},a.a.createElement(qe.a,null))),a.a.createElement(et,null))),a.a.createElement(ve.a,{anchor:"left",open:this.state.drawerOpen,onClose:this.toggleDrawer},a.a.createElement(_e.a,{p:2},a.a.createElement(pe.a,{variant:"h4",component:"h2"},"Tactics board"),a.a.createElement(me.a,null),a.a.createElement(Ee.a,{component:"nav","aria-label":"main mailbox folders"},a.a.createElement(ke.a,{button:!0},a.a.createElement(be.a,null,a.a.createElement(Se.a,null)),a.a.createElement(we.a,{primary:"Create new scheme"})),a.a.createElement(ke.a,{button:!0},a.a.createElement(be.a,null,a.a.createElement(je.a,null)),a.a.createElement(we.a,{primary:"Create new animation"}))))),a.a.createElement(Je,{ref:this._refDrawMenu,anchorEl:this.drawMenuAnchorEl,onClose:this.drawMenuClose,drawMode:this.props.pitchFutsal.drawMode}))}}]),i}(n.Component);tt.defaultProps={pitchFutsal:null,pitchEditSaveImage:null};var it=Object(x.a)((function(e){return{grow:{flexGrow:1}}}),{withTheme:!0})(tt),nt=(i(5469),Object(l.a)()),at=a.a.createRef(),rt=a.a.createRef(),st=new w(200,8,120,100,5,80);function lt(){console.log("App save image");var e=at.current.getSVG();rt.current.toImg(e.svgText,e.width,e.height,e.width/2,e.height/2)}var ot=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.a,{theme:nt},a.a.createElement(it,{pitchFutsal:st,pitchEditSaveImage:lt}),a.a.createElement(he,{ref:at,pitch:st,viewBoxLeft:0,viewBoxTop:0,viewBoxRight:4500,viewBoxBottom:2500}),a.a.createElement(ce.a,{ref:rt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ht=i(5535);i(5470);s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ht.a,null),a.a.createElement(ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e,t,i){"use strict";(function(e){var n=i(7),a=i(6),r=i(14),s=i(13),l=i(0),o=i.n(l),h=i(89),c=i.n(h),u=function(t){Object(r.a)(l,t);var i=Object(s.a)(l);function l(e){var t;return Object(n.a)(this,l),(t=i.call(this,e))._refRenderer=o.a.createRef(),t}return Object(a.a)(l,[{key:"toImg",value:function(t,i,n,a,r){var s=this,l=document.createElement("canvas");l.width=a,l.height=r;var o=l.getContext("2d"),h=document.createElement("img");h.addEventListener("load",(function(e){o.drawImage(h,0,0,i,n,0,0,i,n),l.toBlob((function(e){c.a.saveAs(e,"tactics-board.png")})),s._refRenderer.current.innerHTML=""}));var u="data:image/svg+xml;base64,"+new e(t).toString("base64");h.src=u}},{key:"render",value:function(){return o.a.createElement("div",{ref:this._refRenderer,style:{display:"none"}})}}]),l}(l.Component);t.a=u}).call(this,i(5462).Buffer)}},[[5454,1,2]]]);
//# sourceMappingURL=main.56142130.chunk.js.map