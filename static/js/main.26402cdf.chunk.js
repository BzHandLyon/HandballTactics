(this["webpackJsonptactics-board"]=this["webpackJsonptactics-board"]||[]).push([[0],{152:function(e,t,i){},153:function(e,t,i){},154:function(e,t,i){"use strict";i.r(t);var a=i(0),n=i.n(a),r=i(16),s=i.n(r),l=i(7),o=i(6),h=i(5),c=i(11),u=i(10),d=i(111),m=i(236),p=i(93),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(l.a)(this,e),this.x=t,this.y=i}return Object(o.a)(e,[{key:"equalTo",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"move",value:function(e,t){this.x+=e,this.y+=t}},{key:"clone",value:function(){return new e(this.x,this.y)}}]),e}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new y(0,0),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new y(0,0);Object(l.a)(this,e),this.id=t,this.color=i,this.pos=a,this.posDefault=n}return Object(o.a)(e,[{key:"reset",value:function(){this.pos=this.posDefault.clone()}},{key:"clone",value:function(){return new e(this.id,this.color,this.pos.clone(),this.posDefault.clone())}},{key:"equalTo",value:function(e){return this.id===e.id&&this.color===e.color&&this.pos.equalTo(e.pos)&&this.posDefault.equalTo(e.posDefault)}},{key:"isPlaced",get:function(){return!this.pos.equalTo(this.posDefault)}}]),e}(),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new y(0,0),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new y(0,0),h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"0";Object(l.a)(this,e),this.id=t,this.no=i,this.name=a,this.color=n,this.pos=r,this.rotation=s,this.posDefault=o,this.noDefault=h}return Object(o.a)(e,[{key:"reset",value:function(){this.pos=this.posDefault.clone(),this.rotation=0,this.name="",this.no=this.noDefault}},{key:"clone",value:function(){return new e(this.id,this.no,this.name,this.color,this.pos.clone(),this.rotation,this.posDefault.clone(),this.noDefault)}},{key:"equalTo",value:function(e){return this.id===e.id&&this.no===e.no&&this.name===e.name&&this.color===e.color&&this.pos.equalTo(e.pos)&&this.rotation===e.rotation&&this.posDefault.equalTo(e.posDefault)&&this.noDefault===e.noDefault}},{key:"isPlaced",get:function(){return!this.pos.equalTo(this.posDefault)}}]),e}(),g=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Object(l.a)(this,e),this.id=t,this.x=i,this.y=a,this.width=n,this.height=r},b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(l.a)(this,e),this.id=t,this.color=i,this.x1=a,this.y1=n,this.x2=a+r,this.y2=n+s,this.rotation=o,this.dashed=h,this.isEdit=c}return Object(o.a)(e,[{key:"box",get:function(){return new g(this.id,this.x,this.y,this.width,this.height)}},{key:"x",get:function(){return this.x1<this.x2?this.x1:this.x2}},{key:"width",get:function(){return this.x1<this.x2?this.x2-this.x1:this.x1-this.x2}},{key:"y",get:function(){return this.y1<this.y2?this.y1:this.y2}},{key:"height",get:function(){return this.y1<this.y2?this.y2-this.y1:this.y1-this.y2}},{key:"cx",get:function(){return this.x+this.width/2}},{key:"cy",get:function(){return this.y+this.height/2}},{key:"resize",value:function(e,t,i){if(this.x2=e,i){var a=this.width*(this.y1<t?1:-1);this.y2=this.y1+a}else this.y2=t}},{key:"edit",value:function(e,t,i){switch(e){case"tl":this.x1+=t,this.y1+=i;break;case"tr":this.x2+=t,this.y1+=i;break;case"bl":this.x1+=t,this.y2+=i;break;case"br":this.x2+=t,this.y2+=i;break;case"mv":this.x1+=t,this.y1+=i,this.x2+=t,this.y2+=i}}},{key:"rotate",value:function(e,t,i){var a=e-this.cx,n=t-this.cy,r=180*Math.atan2(n,a)/Math.PI;(r+=90)<0&&(r+=360),i&&(r=45*Math.floor(r/45)),this.rotation=r}}]),e}(),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(l.a)(this,e),this.id=t,this.color=i,this.x1=a,this.y1=n,this.x2=a+2*r,this.y2=n+2*s,this.rotation=o,this.dashed=h,this.isEdit=c}return Object(o.a)(e,[{key:"cx",get:function(){return(this.x1<this.x2?this.x1:this.x2)+this.rx}},{key:"cy",get:function(){return(this.y1<this.y2?this.y1:this.y2)+this.ry}},{key:"rx",get:function(){return(this.x1<this.x2?this.x2-this.x1:this.x1-this.x2)/2}},{key:"ry",get:function(){return(this.y1<this.y2?this.y2-this.y1:this.y1-this.y2)/2}},{key:"box",get:function(){return new g(this.id,this.cx-this.rx,this.cy-this.ry,2*this.rx,2*this.ry)}},{key:"resize",value:function(e,t,i){if(this.x2=e,i){var a=this.rx*(this.y1<t?2:-2);this.y2=this.y1+a}else this.y2=t}},{key:"edit",value:function(e,t,i){switch(e){case"tl":this.x1+=t,this.y1+=i;break;case"tr":this.x2+=t,this.y1+=i;break;case"bl":this.x1+=t,this.y2+=i;break;case"br":this.x2+=t,this.y2+=i;break;case"mv":this.x1+=t,this.y1+=i,this.x2+=t,this.y2+=i}}},{key:"rotate",value:function(e,t,i){var a=e-this.cx,n=t-this.cy,r=180*Math.atan2(n,a)/Math.PI;(r+=90)<0&&(r+=360),i&&(r=45*Math.floor(r/45)),this.rotation=r}}]),e}(),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new y(0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new y(0,0),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new y(0,0),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new y(0,0),s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(l.a)(this,e),this.id=t,this.p1=i,this.p2=a,this.c1=n,this.c2=r,this.arrowStart=s,this.arrowEnd=o}return Object(o.a)(e,[{key:"CubicBezierP0",value:function(e,t){return e*e*e*t}},{key:"CubicBezierP1",value:function(e,t,i){return 3*t*t*e*i}},{key:"CubicBezierP2",value:function(e,t,i){return 3*t*e*e*i}},{key:"CubicBezierP3",value:function(e,t){return e*e*e*t}},{key:"CubicBezier",value:function(e,t,i,a,n){var r=1-e;return this.CubicBezierP0(r,t)+this.CubicBezierP1(e,r,i)+this.CubicBezierP2(e,r,a)+this.CubicBezierP3(e,n)}},{key:"rotation",value:function(e){var t=1-e,i=this.c1.x-this.p1.x,a=this.c1.y-this.p1.y,n=this.c2.x-this.c1.x,r=this.c2.y-this.c1.y,s=this.p2.x-this.c2.x,l=this.p2.y-this.c2.y,o=new y(i*t,a*t),h=new y(n*t,r*t),c=new y(s*t,l*t),u=new y((h.x-o.x)*t,(h.y-o.y)*t),d=new y((c.x-h.x)*t,(c.y-h.y)*t),m=d.x-u.x,p=d.y-u.y,f=180*Math.atan2(m,p)/Math.PI;return f<0&&(f+=360),console.log(f),f}},{key:"position",value:function(e){return new y(this.CubicBezier(e,this.p1.x,this.c1.x,this.c2.x,this.p2.x),this.CubicBezier(e,this.p1.y,this.c1.y,this.c2.y,this.p2.y))}}]),e}(),E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new y(0,0),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new y(0,0),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new y(0,0),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new y(0,0),o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9&&void 0!==arguments[9]&&arguments[9];Object(l.a)(this,e),this.id=t,this.color=i,this.p1=a,this.p2=n,this.c1=r,this.c2=s,this.arrowStart=o,this.arrowEnd=h,this.dashed=c,this.isEdit=u}return Object(o.a)(e,[{key:"empty",value:function(){return this.p1.equalTo(this.p2)&&this.p1.equalTo(this.c1)&&this.p1.equalTo(this.c2)}},{key:"resizeP1",value:function(e,t){this.p1=new y(this.p1.x+e,this.p1.y+t),this.linearControlPoints()}},{key:"resizeP2",value:function(e,t){this.p2=new y(this.p2.x+e,this.p2.y+t),this.linearControlPoints()}},{key:"linearControlPoints",value:function(){var e=this.p2.x-this.p1.x,t=this.p2.y-this.p1.y;this.c1=new y(this.p1.x+e/3,this.p1.y+t/3),this.c2=new y(this.p1.x+e/3*2,this.p1.y+t/3*2)}},{key:"edit",value:function(e,t,i){switch(e){case"p1":this.p1.move(t,i);break;case"c1":this.c1.move(t,i);break;case"c2":this.c2.move(t,i);break;case"p2":this.p2.move(t,i)}}},{key:"paths",value:function(){var e=this.computeControlPoints([this.p1.x,this.c1.x,this.c2.x,this.p2.x]),t=this.computeControlPoints([this.p1.y,this.c1.y,this.c2.y,this.p2.y]),i=[];return i[0]=new k(this.id,this.p1,this.c1,new y(e.p1[0],t.p1[0]),new y(e.p2[0],t.p2[0]),this.arrowStart,!1),i[1]=new k(this.id,this.c1,this.c2,new y(e.p1[1],t.p1[1]),new y(e.p2[1],t.p2[1]),!1,!1),i[2]=new k(this.id,this.c2,this.p2,new y(e.p1[2],t.p1[2]),new y(e.p2[2],t.p2[2]),!1,this.arrowEnd),i}},{key:"computeControlPoints",value:function(e){var t=[],i=[],a=e.length-1,n=[],r=[],s=[],l=[];n[0]=0,r[0]=2,s[0]=1,l[0]=e[0]+2*e[1];for(var o=1;o<a-1;o++)n[o]=1,r[o]=4,s[o]=1,l[o]=4*e[o]+2*e[o+1];n[a-1]=2,r[a-1]=7,s[a-1]=0,l[a-1]=8*e[a-1]+e[a];for(var h=1;h<a;h++){var c=n[h]/r[h-1];r[h]=r[h]-c*s[h-1],l[h]=l[h]-c*l[h-1]}t[a-1]=l[a-1]/r[a-1];for(var u=a-2;u>=0;--u)t[u]=(l[u]-s[u]*t[u+1])/r[u];for(var d=0;d<a-1;d++)i[d]=2*e[d+1]-t[d+1];return i[a-1]=.5*(e[a]+t[a-1]),{p1:t,p2:i}}}]),e}(),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(l.a)(this,e),this.id=t,this.color=i,this.size=a,this.text=n,this.x=r,this.y=s,this.rotation=o,this.bx=r,this.by=s,this.bwidth=0,this.bheight=0,this.isEdit=h,this.isTextEdit=c}return Object(o.a)(e,[{key:"box",get:function(){return new g(this.id,this.bx,this.by,this.bwidth,this.bheight)}},{key:"move",value:function(e,t){this.x+=e,this.y+=t}},{key:"rotate",value:function(e,t,i){var a=e-(this.x+this.bwidth/2),n=t-(this.y+this.bheight/2),r=180*Math.atan2(n,a)/Math.PI;(r+=90)<0&&(r+=360),i&&(r=45*Math.floor(r/45)),this.rotation=r}}]),e}(),O="bl",S="pl",C="sq",P="el",F="ln",A="txt",D="pp",j="bp",_="ex",M=0,K=1,R=2,T=3,N=4,z=[{name:"Goal",width:100,height:300,viewBoxScale:1},{name:"Small Goal",width:50,height:150,viewBoxScale:2},{name:"Ladder",width:100,height:350,viewBoxScale:1},{name:"Cone",width:70,height:85,viewBoxScale:3},{name:"Flag",width:130,height:280,viewBoxScale:2}],B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Object(l.a)(this,e),this.id=t,this.t=i,this.x=a,this.y=n,this.width=r,this.height=s,this.rotation=o,this.isEdit=h}return Object(o.a)(e,[{key:"isBoxVisible",get:function(){switch(this.t){case T:case N:return!0;case M:case K:case R:default:return!1}}},{key:"isResizable",get:function(){switch(this.t){case R:return!0;case M:case K:case T:case N:default:return!1}}},{key:"isRotatable",get:function(){switch(this.t){case M:case K:case R:return!0;case T:case N:default:return!1}}},{key:"box",get:function(){return new g(this.id,this.x-this.width/2,this.y-this.height/2,this.width,this.height)}},{key:"edit",value:function(e,t,i){switch(e){case"tl":case"tr":case"bl":case"br":this.x+=t,this.y+=i,this.width+=t,this.height+=i;break;case"mv":this.x+=t,this.y+=i}}},{key:"rotate",value:function(e,t,i){var a=e-this.x,n=t-this.y,r=180*Math.atan2(n,a)/Math.PI;(r+=90)<0&&(r+=360),i&&(r=45*Math.floor(r/45)),this.rotation=r}}]),e}(),I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(l.a)(this,e),this.players=t,this.playerPaths=i,this.playerPathSplines=[],this.balls=a,this.ballPaths=n,this.ballPathSplines=[]}return Object(o.a)(e,[{key:"playerPathID",value:function(e){return D+e}},{key:"ballPathID",value:function(e){return j+e}},{key:"animPreCalcSplines",value:function(){null!==this.playerPaths&&(this.playerPathSplines=this.playerPaths.map((function(e){return e.paths()}))),null!=this.ballPaths&&(this.ballPathSplines=this.ballPaths.map((function(e){return e.paths()})))}},{key:"splinePathPos",value:function(e){var t=3*e,i=Math.floor(t);return i>=3&&(i=2),{idx:i,t:t-i}}},{key:"animatePlayersOnPaths",value:function(e){var t=this,i=this.splinePathPos(e);return this.players.map((function(e,a){if(!e.isPlaced)return e;var n=e.clone(),r=t.playerPathSplines[a];return n.pos=r[i.idx].position(i.t),n}))}},{key:"animateBallsOnPaths",value:function(e){var t=this,i=this.splinePathPos(e);return this.balls.map((function(e,a){if(!e.isPlaced)return e;var n=e.clone(),r=t.ballPathSplines[a];return n.pos=r[i.idx].position(i.t),n}))}},{key:"clone",value:function(){var t=this;return new e(this.players.map((function(e){return e.clone()})),this.players.map((function(e,i){return new E(t.playerPathID(i),99,e.pos.clone(),e.pos.clone(),e.pos.clone(),e.pos.clone(),!1,!1,!0,!0)})),this.balls.map((function(e){return e.clone()})),this.balls.map((function(e,i){return new E(t.ballPathID(i),99,e.pos.clone(),e.pos.clone(),e.pos.clone(),e.pos.clone(),!1,!1,!0,!0)})))}},{key:"equalTo",value:function(e){if(this.players.length!==e.players.length)return!1;for(var t=0;t<this.players.length;t++)if(!this.players[t].equalTo(e.players[t]))return!1;if(this.balls.length!==e.balls.length)return!1;for(var i=0;i<this.balls.length;i++)if(!this.balls[i].equalTo(e.balls[i]))return!1;return!0}}]),e}(),q=function(){function e(){Object(l.a)(this,e),this.width=4500,this.height=2500,this.AnimKeyFrameCurrent=0,this.AnimKeyFrameDuration=5,this.AnimKeyFrames=[],this.AnimPlaying=!1,this.AnimPlayers=null,this.AnimBalls=null,this.squareID=-1,this.squares=[],this.ellipseID=-1,this.ellipses=[],this.lineID=-1,this.lines=[],this.textID=-1,this.texts=[],this.extrasID=-1,this.extras=[],this._overlay="none",this.isModified=!1,this.onModified=null}return Object(o.a)(e,[{key:"initDefault",value:function(e,t,i,a,n,r){var s=new I(this._initPlayers(e,t,i),null,this._initBalls(a,n,r),null);this.AnimKeyFrames.push(s)}},{key:"_initPlayers",value:function(e,t,i){for(var a=[],n=Math.floor(e/t),r=0;r<e;r++){var s=Math.floor(r/n),l=n-r%n,o=s*i,h=new v(S+r,l,"",s,new y(o,0),0,new y(o,0),l);a.push(h)}return a}},{key:"_initBalls",value:function(e,t,i){for(var a=[],n=Math.floor(e/t),r=0;r<e;r++){var s=Math.floor(r/n),l=s*i,o=new f(O+r,s,new y(l,0),new y(l,0));a.push(o)}return a}},{key:"_modified",value:function(){var t=new e;t.isModified=!0,t.width=this.width,t.height=this.height,t.AnimKeyFrameCurrent=this.AnimKeyFrameCurrent,t.AnimKeyFrameDuration=this.AnimKeyFrameDuration,t.AnimKeyFrames=this.AnimKeyFrames,t.AnimPlaying=this.AnimPlaying,t.AnimPlayers=this.AnimPlayers,t.AnimBalls=this.AnimBalls,t.squareID=this.squareID,t.squares=this.squares,t.ellipseID=this.ellipseID,t.ellipses=this.ellipses,t.lineID=this.lineID,t.lines=this.lines,t.textID=this.textID,t.texts=this.texts,t.extrasID=this.extrasID,t.extras=this.extras,t._overlay=this.overlay,null!==this.onModified&&this.onModified(t)}},{key:"playersCurrentKeyFrame",value:function(){return this.AnimPlaying?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent].players}},{key:"playerPathsCurrentKeyFrame",value:function(){return this.AnimPlaying?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths}},{key:"playersPreviousKeyFrame",value:function(){return this.AnimPlaying||0===this.AnimKeyFrameCurrent?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent-1].players}},{key:"animKeyFrameDurationSet",value:function(e){var t=parseInt(e);this.AnimKeyFrameDuration=isNaN(t)?1:t,0>=this.AnimKeyFrameDuration&&(this.AnimKeyFrameDuration=1),this._modified()}},{key:"animKeyFrameAdd",value:function(){var e=this.AnimKeyFrames.length-1,t=e-1;if(t>=0&&this.AnimKeyFrames[e].equalTo(this.AnimKeyFrames[t]))return console.log("No change in data new add frame forbidden"),!1;var i=this.AnimKeyFrames[e].clone();return this.AnimKeyFrames=this.AnimKeyFrames.map((function(e){return e})),this.AnimKeyFrames.push(i),this.AnimKeyFrameCurrent=this.AnimKeyFrames.length-1,this._modified(),!0}},{key:"animKeyFrameDelete",value:function(){var e=this.AnimKeyFrames.length-1;if(0===e)return!1;if(e!==this.AnimKeyFrameCurrent)return!1;for(var t=[],i=0;i<e;i++)t.push(this.AnimKeyFrames[i]);return this.AnimKeyFrames=t,this.AnimKeyFrameCurrent=this.AnimKeyFrames.length-1,this._modified(),!0}},{key:"animKeyFrameNext",value:function(){var e=this.AnimKeyFrameCurrent+1;return!(e>=this.AnimKeyFrames.length)&&(this.AnimKeyFrameCurrent=e,this._modified(),!0)}},{key:"animKeyFramePrevious",value:function(){return 0!==this.AnimKeyFrameCurrent&&(this.AnimKeyFrameCurrent--,this._modified(),!0)}},{key:"animStart",value:function(){this.AnimPlaying=!0,this.AnimKeyFrames.map((function(e){return e.animPreCalcSplines()})),this.animFrame(0),this._modified()}},{key:"animStop",value:function(){this.AnimPlaying=!1,this.AnimPlayers=null,this.AnimBalls=null,this._modified()}},{key:"animFrame",value:function(e){var t=1e3*this.AnimKeyFrameDuration,i=Math.floor(e/t),a=(e-i*t)/t,n=i+1;n>=this.AnimKeyFrames.length&&(n=this.AnimKeyFrames.length-1,a=1),this.AnimPlayers=this.AnimKeyFrames[n].animatePlayersOnPaths(a),this.AnimBalls=this.AnimKeyFrames[n].animateBallsOnPaths(a),this._modified()}},{key:"playerMove",value:function(e,t,i){var a=this.playersCurrentKeyFrame().map((function(a){return e===a.id&&a.pos.move(t,i),a}));this.AnimKeyFrames[this.AnimKeyFrameCurrent].players=a,this.playerAdjustAnimPaths(e.replace(S,D),t,i),this._modified()}},{key:"playerAdjustAnimPaths",value:function(e,t,i){this.AnimKeyFrameCurrent>0&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths=this.lineResizeP2(this.playerPathsCurrentKeyFrame(),e,t,i)),this.AnimKeyFrameCurrent<this.AnimKeyFrames.length-1&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent+1].playerPaths=this.lineResizeP1(this.AnimKeyFrames[this.AnimKeyFrameCurrent+1].playerPaths,e,t,i))}},{key:"playerEditStart",value:function(e){if(!e.startsWith(S))return null;var t=this.playersCurrentKeyFrame().find((function(t){return e===t.id}));return t.isPlaced?{id:t.id,name:t.name,no:t.no}:null}},{key:"playerEditDone",value:function(e){this.AnimKeyFrames=this.AnimKeyFrames.map((function(t){return t.players=t.players.map((function(t){return e.id!==t.id||(e.remove?t.reset():(t.name=e.name,t.no=e.no)),t})),t})),this._modified()}},{key:"ballsCurrentKeyFrame",value:function(){return this.AnimPlaying?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent].balls}},{key:"ballPathsCurrentKeyFrame",value:function(){return this.AnimPlaying?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths}},{key:"ballsPreviousKeyFrame",value:function(){return this.AnimPlaying||0===this.AnimKeyFrameCurrent?null:this.AnimKeyFrames[this.AnimKeyFrameCurrent-1].balls}},{key:"ballMove",value:function(e,t,i){var a=this.ballsCurrentKeyFrame().map((function(a){return e===a.id&&a.pos.move(t,i),a}));this.AnimKeyFrames[this.AnimKeyFrameCurrent].balls=a,this.ballAdjustAnimPaths(e.replace(O,j),t,i),this._modified()}},{key:"ballAdjustAnimPaths",value:function(e,t,i){this.AnimKeyFrameCurrent>0&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths=this.lineResizeP2(this.ballPathsCurrentKeyFrame(),e,t,i)),this.AnimKeyFrameCurrent<this.AnimKeyFrames.length-1&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent+1].ballPaths=this.lineResizeP1(this.AnimKeyFrames[this.AnimKeyFrameCurrent+1].ballPaths,e,t,i))}},{key:"lineNewID",value:function(){return this.lineID+=1,F+this.lineID}},{key:"lineCreate",value:function(e,t,i,a,n,r){var s=new E(this.lineNewID(),i,new y(e,t),new y(e,t),new y(e,t),new y(e,t),a,n,r);return this.lines=this.lines.map((function(e){return e})),this.lines.push(s),this._modified(),s.id}},{key:"lineResizeP1",value:function(e,t,i,a){return e.map((function(e){return t===e.id&&e.resizeP1(i,a),e}))}},{key:"lineResizeP2",value:function(e,t,i,a){return e.map((function(e){return t===e.id&&e.resizeP2(i,a),e}))}},{key:"lineResize",value:function(e,t,i){this.lines=this.lineResizeP2(this.lines,e,t,i),this._modified()}},{key:"lineOrPathEdit",value:function(e,t,i,a,n){return e.map((function(e){return i===e.id&&e.edit(t,a,n),e}))}},{key:"lineEdit",value:function(e,t,i,a){t.startsWith(F)&&(this.lines=this.lineOrPathEdit(this.lines,e,t,i,a)),t.startsWith(D)&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths=this.lineOrPathEdit(this.playerPathsCurrentKeyFrame(),e,t,i,a)),t.startsWith(j)&&(this.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths=this.lineOrPathEdit(this.ballPathsCurrentKeyFrame(),e,t,i,a)),this._modified()}},{key:"lineCleanup",value:function(){this.lines=this.lines.filter((function(e){return!e.empty()})),this._modified()}},{key:"lineEditStart",value:function(e){return!!e.startsWith(F)&&(this.lines=this.lines.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this._modified(),!0)}},{key:"lineEditEnd",value:function(){this.lines=this.lines.map((function(e){return e.isEdit=!1,e})),this._modified()}},{key:"ellipseNewID",value:function(){return this.ellipseID+=1,P+this.ellipseID}},{key:"ellipseCreate",value:function(e,t,i,a){var n=new x(this.ellipseNewID(),i,e,t,0,0,0,a);return this.ellipses=this.ellipses.map((function(e){return e})),this.ellipses.push(n),this._modified(),n.id}},{key:"ellipseResize",value:function(e,t,i,a){this.ellipses=this.ellipses.map((function(n){return e===n.id&&n.resize(t,i,a),n})),this._modified()}},{key:"ellipseEdit",value:function(e,t,i,a){t.startsWith(P)&&(this.ellipses=this.ellipses.map((function(n){return t===n.id&&n.edit(e,i,a),n})),this._modified())}},{key:"ellipseRotate",value:function(e,t,i,a){e.startsWith(P)&&(this.ellipses=this.ellipses.map((function(n){return e===n.id&&n.rotate(t,i,a),n})),this._modified())}},{key:"ellipseCleanup",value:function(){this.ellipses=this.ellipses.filter((function(e){return e.rx>0&&e.ry>0})),this._modified()}},{key:"ellipseEditStart",value:function(e){return!!e.startsWith(P)&&(this.ellipses=this.ellipses.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this._modified(),!0)}},{key:"ellipsesEditEnd",value:function(){this.ellipses=this.ellipses.map((function(e){return e.isEdit=!1,e}))}},{key:"squareNewID",value:function(){return this.squareID+=1,C+this.squareID}},{key:"squareCreate",value:function(e,t,i,a){var n=new b(this.squareNewID(),i,e,t,0,0,0,a);return this.squares=this.squares.map((function(e){return e})),this.squares.push(n),this._modified(),n.id}},{key:"squareResize",value:function(e,t,i,a){this.squares=this.squares.map((function(n){return e===n.id&&n.resize(t,i,a),n})),this._modified()}},{key:"squareEdit",value:function(e,t,i,a){t.startsWith(C)&&(this.squares=this.squares.map((function(n){return t===n.id&&n.edit(e,i,a),n})),this._modified())}},{key:"squareRotate",value:function(e,t,i,a){e.startsWith(C)&&(this.squares=this.squares.map((function(n){return e===n.id&&n.rotate(t,i,a),n})),this._modified())}},{key:"squareCleanup",value:function(){this.squares=this.squares.filter((function(e){return e.width>0&&e.height>0})),this._modified()}},{key:"squareEditStart",value:function(e){return!!e.startsWith(C)&&(this.squares=this.squares.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this._modified(),!0)}},{key:"squareEditEnd",value:function(){this.squares=this.squares.map((function(e){return e.isEdit=!1,e}))}},{key:"textNewID",value:function(){return this.textID+=1,A+this.textID}},{key:"textCreate",value:function(e,t,i,a){var n=new w(this.textNewID(),i,a,"",e,t,0,!1,!0);return this.texts=this.texts.map((function(e){return e})),this.texts.push(n),this._modified(),n.id}},{key:"textEditDone",value:function(e,t,i,a,n,r){this.texts=this.texts.map((function(s){return e===s.id&&(s.isEdit=!1,s.isTextEdit=!1,s.text=t,s.bx=i,s.by=a,s.bwidth=n,s.bheight=r),s})),this._modified()}},{key:"textEditStart",value:function(e){return!!e.startsWith(A)&&(this.texts=this.texts.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this._modified(),!0)}},{key:"textMove",value:function(e,t,i){e.startsWith(A)&&(this.texts=this.texts.map((function(a){return e===a.id&&a.move(t,i),a})),this._modified())}},{key:"textRotate",value:function(e,t,i,a){e.startsWith(A)&&(this.texts=this.texts.map((function(n){return e===n.id&&n.rotate(t,i,a),n})),this._modified())}},{key:"extrasNewID",value:function(){return this.extrasID+=1,_+this.extrasID}},{key:"extrasCreate",value:function(e,t,i){var a=new B(this.extrasNewID(),e,this.width/2,this.height/2,t,i,0,!0);return this.extras=this.extras.map((function(e){return e})),this.extras.push(a),this._modified(),a.id}},{key:"extrasEditStart",value:function(e){return!!e.startsWith(_)&&(this.extras=this.extras.map((function(t){return e===t.id&&(t.isEdit=!0),t})),this._modified(),!0)}},{key:"extrasMove",value:function(e,t,i){if(!e.startsWith(_))return!1;this.extras=this.extras.map((function(a){return e===a.id&&a.move(t,i),a})),this._modified()}},{key:"extrasRotate",value:function(e,t,i,a){e.startsWith(_)&&(this.extras=this.extras.map((function(n){return e===n.id&&n.isRotatable&&n.rotate(t,i,a),n})),this._modified())}},{key:"extrasEdit",value:function(e,t,i,a){if(t.startsWith(_))return this.extras=this.extras.map((function(n){return t===n.id&&n.edit(e,i,a),n})),this._modified(),this.extras}},{key:"extrasEditEnd",value:function(){this.extras=this.extras.map((function(e){return e.isEdit=!1,e}))}},{key:"editTopLeft",value:function(e,t,i){this.squareEdit("tl",e,t,i),this.ellipseEdit("tl",e,t,i),this.extrasEdit("tl",e,t,i)}},{key:"editTopRight",value:function(e,t,i){this.squareEdit("tr",e,t,i),this.ellipseEdit("tr",e,t,i),this.extrasEdit("tr",e,t,i)}},{key:"editBottomLeft",value:function(e,t,i){this.squareEdit("bl",e,t,i),this.ellipseEdit("bl",e,t,i),this.extrasEdit("bl",e,t,i)}},{key:"editBottomRight",value:function(e,t,i){this.squareEdit("br",e,t,i),this.ellipseEdit("br",e,t,i),this.extrasEdit("br",e,t,i)}},{key:"editMove",value:function(e,t,i){this.squareEdit("mv",e,t,i),this.ellipseEdit("mv",e,t,i),this.extrasEdit("mv",e,t,i),this.textMove(e,t,i)}},{key:"editRotate",value:function(e,t,i,a){this.squareRotate(e,t,i,a),this.ellipseRotate(e,t,i,a),this.extrasRotate(e,t,i,a),this.textRotate(e,t,i,a)}},{key:"endAllEdits",value:function(){this.lineEditEnd(),this.squareEditEnd(),this.ellipsesEditEnd(),this.extrasEditEnd(),this._modified()}},{key:"overlay",get:function(){return this._overlay},set:function(e){this._overlay!==e&&(this._overlay=e,this._modified())}},{key:"overlaySize",value:function(){switch(this.overlay){case"exercise":return{width:2800,height:2e3};case"basketball":return{width:2800,height:1500};case"volleyball":return{width:1800,height:900};default:return null}}}]),e}(),W=function(){function e(){Object(l.a)(this,e),this._mode="select",this._lineArrowStart=!1,this._lineArrowEnd=!1,this._lineDashed=!1,this._color=0,this._textSize=2,this._pitchOverlay="none",this.onModified=null}return Object(o.a)(e,[{key:"_modified",value:function(){var t=new e;t._mode=this.mode,t._lineArrowStart=this.lineArrowStart,t._lineArrowEnd=this.lineArrowEnd,t._lineDashed=this.lineDashed,t._color=this.color,t._textSize=this.textSize,t._pitchOverlay=this.pitchOverlay,null!==this.onModified&&this.onModified(t)}},{key:"modeOptions",get:function(){return["select","line","square","ellipse","text","extras"]}},{key:"mode",get:function(){return this._mode},set:function(e){this._mode=e,this._modified()}},{key:"lineArrowStart",get:function(){return this._lineArrowStart},set:function(e){this._lineArrowStart=e,this._modified()}},{key:"lineArrowEnd",get:function(){return this._lineArrowEnd},set:function(e){this._lineArrowEnd=e,this._modified()}},{key:"lineDashed",get:function(){return this._lineDashed},set:function(e){this._lineDashed=e,this._modified()}},{key:"colorOptions",get:function(){return["#8b2323","#e7e739","#912cee","#04b804","#1d4ba0","#ee2c2c","#ff7f50","#56c6eb"]}},{key:"editColor",get:function(){return"#666666"}},{key:"editColorIndex",get:function(){return 99}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this._modified()}},{key:"textSizeOptions",get:function(){return["Extra small","Small","Normal","Large","Extra large"]}},{key:"textSize",get:function(){return this._textSize},set:function(e){this._textSize=e,this._modified()}},{key:"pitchOverlayOptions",get:function(){return["none","exercise","basketball","volleyball"]}},{key:"pitchOverlay",get:function(){return this._pitchOverlay},set:function(e){this._pitchOverlay=e,this._modified()}}]),e}(),L=i(4),Y=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"renderPlayerName",value:function(e){return 0===e.length?null:n.a.createElement("text",{y:"-70"},e)}},{key:"render",value:function(){var e=this.props.player,t=this.props.isEdit?e.id:null,i=this.props.isEdit?"draggable":null,a="player pc"+e.color+(this.props.isPrevFrame?" transparent":""),r="translate("+e.pos.x+" "+e.pos.y+") rotate("+e.rotation+")";return n.a.createElement("g",{className:a,textAnchor:"middle",transform:r},n.a.createElement("circle",{r:"50",className:i,"data-ref":t}),n.a.createElement("text",{className:"number",dominantBaseline:"central"},e.no),this.renderPlayerName(e.name))}}]),i}(a.Component);Y.defaultProps={player:null,isEdit:!0,isPrevFrame:!1};var X=Y,H=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"ballImage",value:function(){return n.a.createElement("g",{transform:"translate(-30 -30)"},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 952 952"},n.a.createElement("path",{d:"M813 139A475 475 0 000 476a474 474 0 00476 476 474 474 0 00476-476 474 474 0 00-139-337zm-600-31l12-10a457 457 0 01370-60c-14 6-33 18-65 45a393 393 0 00-182 22c-31 11-55 23-71 33l-74-25c3 1 8-4 10-5zm433 119l-81 222-196 37-161-166c11-76 63-143 63-143s34-25 88-44a403 403 0 01174-20l113 114zM39 460c-5 32-6 66-3 100l-9-20a451 451 0 0136-252c-3 30-2 61 0 85-11 28-19 57-24 87zm40 173a418 418 0 018-239c33-28 77-44 101-52l158 164-16 179-155 52c-39-29-72-68-96-104zm470 260c-34 22-121 28-157 29a451 451 0 01-200-92c0-1-4-49-4-66l156-52 181 78 25 103h-1zm300-158c-27 38-59 75-98 102-36 25-85 34-128 41-3 1-44 8-45 6l-25-103 128-132 168-15 8 89-8 12zm3-135l-2 3-168 16-90-158 82-223 115 7a366 366 0 01118 169 434 434 0 01-55 186zm60-250a396 396 0 00-108-131c-5-25-19-65-57-107l2 2 7 5a459 459 0 01156 230v1z"})))}},{key:"render",value:function(){var e=this.props.ball,t=this.props.isEdit?e.id:null,i=this.props.isEdit?"draggable":null,a="ball bc"+e.color+(this.props.isPrevFrame?" transparent":""),r="translate("+e.pos.x+" "+e.pos.y+")",s=4===e.color?this.ballImage():null;return n.a.createElement("g",{className:a,transform:r},n.a.createElement("circle",{r:"30",className:i,"data-ref":t}),s)}}]),i}(a.Component);H.defaultProps={ball:null,isEdit:!0,isPrevFrame:!1};var U=H,G=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){var e=this.props.size/2,t=this.props.position.x-e,i=this.props.position.y-e;return n.a.createElement("rect",{className:"editCorner draggable",x:t,y:i,width:this.props.size,height:this.props.size,"data-ref":this.props.id})}}]),i}(a.Component);G.defaultProps={id:"",size:40,position:null};var V=G,J=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){var e=this.props.box,t=e.width/2,i=e.x+t,a=e.y,r=i,s=a-2*this.props.size;return n.a.createElement(n.a.Fragment,null,n.a.createElement("line",{x1:i,y1:a,x2:r,y2:s}),n.a.createElement("circle",{className:"editCorner draggable",cx:r,cy:s,r:this.props.size/2,"data-ref":"edit-rt-"+e.id}))}}]),i}(a.Component);J.defaultProps={size:50,box:null};var $=J,Q=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"renderHandles",value:function(e){if(!this.props.showResize)return null;var t=new y(e.x,e.y),i=new y(e.x+e.width,e.y),a=new y(e.x,e.y+e.height),r=new y(e.x+e.width,e.y+e.height);return n.a.createElement(n.a.Fragment,null,n.a.createElement(V,{id:"edit-tl-"+e.id,position:t}),n.a.createElement(V,{id:"edit-tr-"+e.id,position:i}),n.a.createElement(V,{id:"edit-bl-"+e.id,position:a}),n.a.createElement(V,{id:"edit-br-"+e.id,position:r}))}},{key:"renderRotateHandle",value:function(e){return this.props.showRotate?n.a.createElement($,{box:e}):null}},{key:"render",value:function(){var e=this.props.box,t=this.props.showBox?"editBox draggable":"editTransparent draggable";return n.a.createElement("g",null,n.a.createElement("rect",{className:t,x:e.x,y:e.y,width:e.width,height:e.height,"data-ref":"edit-mv-"+e.id}),this.renderHandles(e),this.renderRotateHandle(e))}}]),i}(a.Component);Q.defaultProps={box:null,showBox:!1,showResize:!0,showRotate:!0};var Z=Q,ee=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"editBox",value:function(e,t){return e?n.a.createElement(Z,{box:t,showBox:!1}):null}},{key:"render",value:function(){var e=this.props.square,t=(e.dashed?"square dashed pc":"square pc")+e.color,i="rotate("+e.rotation+","+e.cx+","+e.cy+")";return n.a.createElement("g",{className:t,transform:i},n.a.createElement("rect",{x:e.x,y:e.y,width:e.width,height:e.height,"data-ref":e.id}),this.editBox(e.isEdit,e.box))}}]),i}(a.Component);ee.defaultProps={square:null};var te=ee,ie=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"editBox",value:function(e,t){return e?n.a.createElement(Z,{box:t,showBox:!0}):null}},{key:"render",value:function(){var e=this.props.ellipse,t=(e.dashed?"ellipse dashed pc":"ellipse pc")+e.color,i="rotate("+e.rotation+","+e.cx+","+e.cy+")";return n.a.createElement("g",{className:t,transform:i},n.a.createElement("ellipse",{cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry,"data-ref":e.id}),this.editBox(e.isEdit,e.box))}}]),i}(a.Component);ie.defaultProps={ellipse:null};var ae=ie,ne=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"editHandles",value:function(e,t){return e.isEdit?t?n.a.createElement(n.a.Fragment,null,n.a.createElement(V,{id:"edit-l2-"+e.id,position:e.c1}),n.a.createElement(V,{id:"edit-l3-"+e.id,position:e.c2})):n.a.createElement(n.a.Fragment,null,n.a.createElement(V,{id:"edit-l1-"+e.id,position:e.p1}),n.a.createElement(V,{id:"edit-l2-"+e.id,position:e.c1}),n.a.createElement(V,{id:"edit-l3-"+e.id,position:e.c2}),n.a.createElement(V,{id:"edit-l4-"+e.id,position:e.p2})):null}},{key:"renderPath",value:function(e,t){var i="M "+e.p1.x+" "+e.p1.y+" C "+e.c1.x+" "+e.c1.y+" "+e.c2.x+" "+e.c2.y+" "+e.p2.x+" "+e.p2.y,a=e.arrowStart?"url(#arrowStart)":null,r=e.arrowEnd?"url(#arrowEnd)":null;return n.a.createElement("path",{key:t,d:i,"data-ref":e.id,markerStart:a,markerEnd:r})}},{key:"render",value:function(){var e=this,t=this.props.line,i=(this.props.isPath?"path":"line")+(t.dashed?" dashed pc":" pc")+t.color,a=t.paths().map((function(t,i){return e.renderPath(t,i.toString())}));return n.a.createElement("g",{className:i},a,this.editHandles(t,this.props.isPath))}}]),i}(a.Component);ne.defaultProps={line:null,isPath:!1};var re=ne,se=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var a;return Object(l.a)(this,i),(a=t.call(this,e))._selectionStart=0,a._selectionEnd=0,a._boxPadding=10,a._editRef=n.a.createRef(),a._textRef=n.a.createRef(),a._cursorRef=n.a.createRef(),a._boxRef=n.a.createRef(),a.editStart=a.editStart.bind(Object(h.a)(a)),a.editChange=a.editChange.bind(Object(h.a)(a)),a.editKeyUp=a.editKeyUp.bind(Object(h.a)(a)),a.editEnd=a.editEnd.bind(Object(h.a)(a)),a}return Object(o.a)(i,[{key:"componentDidUpdate",value:function(e,t){this.props.text.isTextEdit&&this._editRef.current.focus()}},{key:"removeText",value:function(){for(;this._textRef.current.firstChild;)this._textRef.current.removeChild(this._textRef.current.firstChild)}},{key:"addTextLine",value:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","tspan");t.setAttribute("x","0"),t.setAttribute("dy","1.2em"),t.textContent=e,this._textRef.current.appendChild(t)}},{key:"drawCursor",value:function(e,t,i){var a=this._cursorRef.current;a.setAttribute("x1",e),a.setAttribute("y1",t),a.setAttribute("x2",e),a.setAttribute("y2",t+i)}},{key:"drawTextBoundingBox",value:function(e){var t=e.x-this._boxPadding,i=e.y-this._boxPadding,a=e.width+2*this._boxPadding,n=e.height+2*this._boxPadding,r=this._boxRef.current;r.setAttribute("x",t),r.setAttribute("y",i),r.setAttribute("width",a),r.setAttribute("height",n)}},{key:"editStart",value:function(e){this._editRef.current.value=this.props.text.text}},{key:"editChange",value:function(e){this.removeText();for(var t=this._editRef.current.value,i="",a=0;a<t.length;a++)i+=t[a],"\n"===t[a]&&(this.addTextLine(i),i="");i.length>0&&this.addTextLine(i)}},{key:"editShowCursor",value:function(){if(0!==this._selectionEnd)try{var e=this._textRef.current.getExtentOfChar(this._selectionEnd-1);this.drawCursor(e.x+e.width,e.y,e.height);var t=this._textRef.current.getBBox();this.drawTextBoundingBox(t)}catch(i){console.log(i)}}},{key:"editKeyUp",value:function(e){this._selectionStart=this._editRef.current.selectionStart,this._selectionEnd=this._editRef.current.selectionEnd,this.editShowCursor()}},{key:"editEnd",value:function(e){if(null!==this.props.onEditDone){var t=this._editRef.current.value.trim(),i=this._textRef.current.getBBox();console.log(i),this.removeText(),this.props.onEditDone(this.props.text.id,t,i.x,i.y,i.width,i.height)}}},{key:"editBox",value:function(e,t){return e?n.a.createElement(Z,{box:t,showBox:!0,showResize:!1}):null}},{key:"editor",value:function(e){return e.isTextEdit?n.a.createElement(n.a.Fragment,null,n.a.createElement("line",{ref:this._cursorRef,strokeWidth:"8"}),n.a.createElement("rect",{ref:this._boxRef,className:"editBox",x:"0",y:"0",width:e.width,height:e.height}),n.a.createElement("foreignObject",null,n.a.createElement("textarea",{ref:this._editRef,onFocus:this.editStart,onInput:this.editChange,onKeyUp:this.editKeyUp,onBlur:this.editEnd}))):null}},{key:"renderLines",value:function(e){return e.isTextEdit?null:e.text.split("\n").map((function(t,i){return n.a.createElement("tspan",{key:i,"data-ref":e.id,x:"0",dy:"1.2em"},t)}))}},{key:"render",value:function(){var e=this.props.text,t="txt"+e.size+" pc"+e.color,i="translate("+e.x+","+e.y+")";if(0!==e.rotation){var a=e.bx+e.bwidth/2,r=e.by+e.bheight/2;i+=" rotate("+e.rotation+","+a+","+r+")"}return n.a.createElement("g",{className:t,transform:i},n.a.createElement("text",{ref:this._textRef,"data-ref":e.id,xmlSpace:"preserve"},this.renderLines(e)),this.editor(e),this.editBox(e.isEdit,e.box))}}]),i}(a.Component);se.defaultProps={text:null,onEditDone:null};var le=se,oe=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){var e=this.props.width,t=this.props.height,i=e/2,a=t/2,r=this.props.x-i,s=this.props.y-a,l=this.props.x+i,o=this.props.y-a,h=this.props.x+i,c=this.props.y+a;return n.a.createElement("g",null,n.a.createElement("rect",{x:r,y:s,width:e,height:t,fill:"url(#goal-net)",stroke:"#777777",strokeWidth:"4","data-ref":this.props.id}),n.a.createElement("line",{x1:l,y1:o,x2:h,y2:c,strokeWidth:"5",stroke:"white"}),n.a.createElement("line",{x1:l,y1:o,x2:h,y2:c,stroke:"red",strokeDasharray:"20",strokeWidth:"6"}))}}]),i}(a.Component);oe.defaultProps={id:null,x:0,y:0,width:100,height:300};var he=oe,ce=i(32),ue=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"steps",value:function(e,t,i,a,r){var s=this,l=a/(r+1);return Object(ce.a)(Array(r)).map((function(a,r){var o=i+(r+1)*l;return n.a.createElement("line",{key:r,x1:e,y1:o,x2:t,y2:o,strokeWidth:"5",stroke:"black","data-ref":s.props.id})}))}},{key:"render",value:function(){var e=this.props.width,t=this.props.height,i=e/2,a=t/2,r=this.props.x-i,s=this.props.x+i,l=this.props.y-a,o=this.props.y+a;return n.a.createElement("g",null,n.a.createElement("line",{x1:r,y1:l,x2:r,y2:o,strokeWidth:"5",stroke:"black","data-ref":this.props.id}),this.steps(r,s,l,t,5),n.a.createElement("line",{x1:s,y1:l,x2:s,y2:o,strokeWidth:"5",stroke:"black","data-ref":this.props.id}))}}]),i}(a.Component);ue.defaultProps={id:null,x:0,y:0,width:150,height:350};var de=ue,me=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){var e=this,t="";return i.shape.forEach((function(i){var a=i[0]+e.props.x,n=i[1]+e.props.y;t+="".concat(a,",").concat(n," ")})),n.a.createElement("g",null,n.a.createElement("polygon",{points:t,stroke:"black"}))}}]),i}(a.Component);me.shape=[[5,-42],[-5,-42],[-20,23],[-35,28],[0,43],[35,28],[20,23]],me.defaultProps={id:null,x:0,y:0,width:70,height:85};var pe=me,ye=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){var e=this.props.width,t=this.props.height,i=e/2,a=t/2,r=this.props.x-i,s=this.props.y-a,l=this.props.y+a;return n.a.createElement("g",null,n.a.createElement("rect",{x:r,y:s,width:e,height:t/3,fill:"red",stroke:"black",strokeWidth:"3","data-ref":this.props.id}),n.a.createElement("line",{x1:r,y1:s,x2:r,y2:l,stroke:"black",strokeWidth:"6","data-ref":this.props.id}))}}]),i}(a.Component);ye.defaultProps={id:null,x:0,y:0,width:130,height:280};var fe=ye,ve=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(){return Object(l.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"editBox",value:function(e,t,i,a,r){return e?n.a.createElement(Z,{box:t,showBox:i,showResize:a,showRotate:r}):null}},{key:"renderGfx",value:function(e){switch(e.t){case M:case K:return n.a.createElement(he,{id:e.id,x:e.x,y:e.y,width:e.width,height:e.height});case R:return n.a.createElement(de,{id:e.id,x:e.x,y:e.y,width:e.width,height:e.height});case T:return n.a.createElement(pe,{id:e.id,x:e.x,y:e.y,width:e.width,height:e.height});case N:return n.a.createElement(fe,{id:e.id,x:e.x,y:e.y,width:e.width,height:e.height});default:return n.a.createElement("rect",{x:e.x,y:e.y,width:e.width,height:e.height,"data-ref":e.id})}}},{key:"render",value:function(){var e=this.props.extras,t="rotate("+e.rotation+","+e.x+","+e.y+")";return n.a.createElement("g",{transform:t},this.renderGfx(e),this.editBox(e.isEdit,e.box,e.isBoxVisible,e.isResizable,e.isRotatable))}}]),i}(a.Component);ve.defaultProps={extras:null};var ge=ve,be=i(195),xe=i(205),ke=i(200),Ee=i(199),we=i(206),Oe=i(241),Se=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var a;return Object(l.a)(this,i),(a=t.call(this,e)).state={open:!1,player:{id:"",name:"",no:0}},a._refName=n.a.createRef(),a._refNumber=n.a.createRef(),a.openDialog=a.openDialog.bind(Object(h.a)(a)),a.close=a.close.bind(Object(h.a)(a)),a.save=a.save.bind(Object(h.a)(a)),a.remove=a.remove.bind(Object(h.a)(a)),a}return Object(o.a)(i,[{key:"openDialog",value:function(e){this.setState({open:!0,player:e})}},{key:"close",value:function(){this.setState({open:!1})}},{key:"save",value:function(){this.close(),null!==this.props.onEditDone&&this.props.onEditDone({id:this.state.player.id,remove:!1,name:this._refName.current.value,no:Number.parseInt(this._refNumber.current.value)})}},{key:"remove",value:function(){this.close(),null!==this.props.onEditDone&&this.props.onEditDone({id:this.state.player.id,remove:!0})}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(be.a,{open:this.state.open,onClose:this.close,"aria-labelledby":"form-dialog-title"},n.a.createElement(Ee.a,{id:"form-dialog-title"},"Edit player"),n.a.createElement(ke.a,null,n.a.createElement(Oe.a,{inputRef:this._refNumber,margin:"dense",id:"playerNumber",defaultValue:this.state.player.no,label:"Number",type:"number",fullWidth:!0,autoFocus:!0}),n.a.createElement(Oe.a,{inputRef:this._refName,margin:"dense",id:"playerName",defaultValue:this.state.player.name,label:"Name",type:"text",fullWidth:!0})),n.a.createElement(xe.a,null,n.a.createElement(we.a,{onClick:this.remove,color:"primary"},"Remove"),n.a.createElement(we.a,{onClick:this.close,color:"primary"},"Cancel"),n.a.createElement(we.a,{onClick:this.save,color:"primary"},"Save"))))}}]),i}(a.Component);Se.defaultProps={onEditDone:null};var Ce=Se,Pe=-1,Fe=0,Ae=1,De=4,je=5,_e=6,Me=7,Ke=8,Re=9,Te=10,Ne=11,ze=12,Be=13,Ie=[{prefix:"pl",removePrefix:!1,typ:Fe},{prefix:"bl",removePrefix:!1,typ:Ae},{prefix:"edit-tl-",removePrefix:!0,typ:De},{prefix:"edit-tr-",removePrefix:!0,typ:je},{prefix:"edit-bl-",removePrefix:!0,typ:_e},{prefix:"edit-br-",removePrefix:!0,typ:Me},{prefix:"edit-mv-",removePrefix:!0,typ:Ke},{prefix:"edit-rt-",removePrefix:!0,typ:Re},{prefix:"edit-l1-",removePrefix:!0,typ:Te},{prefix:"edit-l2-",removePrefix:!0,typ:Ne},{prefix:"edit-l3-",removePrefix:!0,typ:ze},{prefix:"edit-l4-",removePrefix:!0,typ:Be}],qe=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var a;return Object(l.a)(this,i),(a=t.call(this,e))._editRef=n.a.createRef(),a._bgRef=n.a.createRef(),a._playerDialogRef=n.a.createRef(),a._orgWidth=a.props.viewBoxRight-a.props.viewBoxLeft,a._orgHeight=a.props.viewBoxBottom-a.props.viewBoxTop,a._pitch=a.props.pitch,a._dragNode=null,a._dragObjectType=Pe,a._mouseX=0,a._mouseY=0,a.hContextMenu=a.hContextMenu.bind(Object(h.a)(a)),a.hMouseDown=a.hMouseDown.bind(Object(h.a)(a)),a.hMouseUp=a.hMouseUp.bind(Object(h.a)(a)),a.hMouseMove=a.hMouseMove.bind(Object(h.a)(a)),a.textEditDone=a.textEditDone.bind(Object(h.a)(a)),a.playerEditDone=a.playerEditDone.bind(Object(h.a)(a)),a}return Object(o.a)(i,[{key:"getScale",value:function(){var e=this._bgRef.current.getBoundingClientRect();return{X:this._orgWidth/e.width,Y:this._orgHeight/e.height}}},{key:"getRealPosition",value:function(e){var t=this.getScale(),i=this._bgRef.current.getBoundingClientRect(),a=e.clientX-i.left,n=e.clientY-i.top,r=e.clientX-this._mouseX,s=e.clientY-this._mouseY;return this.resetMouseDrag(e),{scaleX:t.X,scaleY:t.Y,X:a*t.X,Y:n*t.Y,deltaX:r*t.X,deltaY:s*t.Y}}},{key:"resetMouseDrag",value:function(e){this._mouseX=e.clientX,this._mouseY=e.clientY}},{key:"isDragStarted",value:function(e){if(0!==e.button)return!1;if(!e.target.classList.contains("draggable"))return!1;if(this._dragNode=e.target.getAttribute("data-ref"),null===this._dragNode)return!1;this.resetMouseDrag(e),this._dragObjectType=Pe;var t,i=Object(p.a)(Ie);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(this._dragNode.startsWith(a.prefix))return this._dragObjectType=a.typ,a.removePrefix&&(this._dragNode=this._dragNode.replace(a.prefix,"")),!0}}catch(n){i.e(n)}finally{i.f()}return!1}},{key:"playerEditStarted",value:function(e){var t=this.props.pitch.playerEditStart(e);return null!==t&&(this._playerDialogRef.current.openDialog(t),!0)}},{key:"playerEditDone",value:function(e){this.props.pitch.playerEditDone(e)}},{key:"objectDrag",value:function(e,t,i,a,n){var r=this.props.pitch;switch(this._dragObjectType){case Fe:r.playerMove(this._dragNode,i,a);break;case Ae:r.ballMove(this._dragNode,i,a);break;case De:r.editTopLeft(this._dragNode,i,a);break;case je:r.editTopRight(this._dragNode,i,a);break;case _e:r.editBottomLeft(this._dragNode,i,a);break;case Me:r.editBottomRight(this._dragNode,i,a);break;case Ke:r.editMove(this._dragNode,i,a);break;case Re:r.editRotate(this._dragNode,e,t,n);break;case Te:r.lineEdit("p1",this._dragNode,i,a);break;case Ne:r.lineEdit("c1",this._dragNode,i,a);break;case ze:r.lineEdit("c2",this._dragNode,i,a);break;case Be:r.lineEdit("p2",this._dragNode,i,a);break;default:console.log("Invalid drag object type",this._dragObjectType,this._dragNode)}}},{key:"hContextMenu",value:function(e){if("select"===this.props.drawMode.mode){var t=e.target.getAttribute("data-ref");if(null!==t){var i=this.props.pitch;(this.playerEditStarted(t)||i.squareEditStart(t)||i.ellipseEditStart(t)||i.lineEditStart(t)||i.textEditStart(t)||i.extrasEditStart(t))&&e.preventDefault()}}}},{key:"hMouseDown",value:function(e){var t=this.getRealPosition(e),i=this.props.drawMode,a=this.props.pitch;switch(i.mode){case"line":e.preventDefault(),this._dragNode=a.lineCreate(t.X,t.Y,i.color,i.lineArrowStart,i.lineArrowEnd,i.lineDashed);break;case"square":e.preventDefault(),this._dragNode=a.squareCreate(t.X,t.Y,i.color,i.lineDashed);break;case"ellipse":e.preventDefault(),this._dragNode=a.ellipseCreate(t.X,t.Y,i.color,i.lineDashed);break;case"text":e.preventDefault(),this._dragNode=a.textCreate(t.X,t.Y,i.color,i.textSize);break;case"select":default:if(this.isDragStarted(e))return void e.preventDefault()}}},{key:"hMouseUp",value:function(e){e.preventDefault();var t=this.props.pitch,i=this.getRealPosition(e),a=e.getModifierState("Shift");switch(this.props.drawMode.mode){case"line":t.lineCleanup();break;case"square":t.squareCleanup();break;case"ellipse":t.ellipseCleanup();break;case"text":break;case"select":default:this.objectDrag(i.X,i.Y,i.deltaX,i.deltaY,a)}0===e.button&&this._dragObjectType===Pe&&t.endAllEdits(),this._dragNode=null,this._dragObjectType=Pe}},{key:"hMouseMove",value:function(e){if(null!=this._dragNode){var t=this.props.pitch;e.preventDefault();var i=this.getRealPosition(e),a=e.getModifierState("Shift");switch(this.props.drawMode.mode){case"line":t.lineResize(this._dragNode,i.deltaX,i.deltaY);break;case"square":t.squareResize(this._dragNode,i.X,i.Y,a);break;case"ellipse":t.ellipseResize(this._dragNode,i.X,i.Y,a);break;case"text":break;case"select":default:this.objectDrag(i.X,i.Y,i.deltaX,i.deltaY,a)}}}},{key:"textEditDone",value:function(e,t,i,a,n,r){this.props.pitch.textEditDone(e,t,i,a,n,r)}},{key:"getSVG",value:function(){return{width:this._orgWidth,height:this._orgHeight,svgText:this._editRef.current.children[0].outerHTML}}},{key:"renderPlayers",value:function(e,t,i){if(null===e)return null;var a=t?"ed":"";return e.map((function(e,r){return n.a.createElement(X,{key:a+r.toString(),player:e,isEdit:t,isPrevFrame:i})}))}},{key:"renderBalls",value:function(e,t,i){if(null===e)return null;var a=t?"ed":"";return e.map((function(e,r){return n.a.createElement(U,{key:a+r.toString(),ball:e,isEdit:t,isPrevFrame:i})}))}},{key:"renderSquares",value:function(e){return e.map((function(e,t){return n.a.createElement(te,{key:t.toString(),square:e})}))}},{key:"renderEllipses",value:function(e){return e.map((function(e,t){return n.a.createElement(ae,{key:t.toString(),ellipse:e})}))}},{key:"renderLines",value:function(e,t){if(null===e)return null;var i=t?"ph":"";return e.map((function(e,a){return e.empty()?null:n.a.createElement(re,{key:i+a.toString(),line:e,isPath:t})}))}},{key:"renderTexts",value:function(e){var t=this;return e.map((function(e,i){return n.a.createElement(le,{key:i.toString(),text:e,onEditDone:t.textEditDone})}))}},{key:"renderExtras",value:function(e){return e.map((function(e,t){return n.a.createElement(ge,{key:t.toString(),extras:e})}))}},{key:"renderPitchOverlay",value:function(){var e=this.props.pitch.overlaySize();if(null===e)return null;var t="translate("+(this._orgWidth-e.width)/2+" "+(this._orgHeight-e.height)/2+")";return n.a.createElement("rect",{width:e.width,height:e.height,transform:t,fill:"none"})}},{key:"generatePicthStyles",value:function(){return this.props.drawMode.colorOptions.map((function(e,t){return".pc"+t+" { fill: "+e+"; stroke: "+e+"; }"})).concat([".pc"+this.props.drawMode.editColorIndex+" { fill: "+this.props.drawMode.editColor+"; stroke: "+this.props.drawMode.editColor+"; }"]).concat([".bc0 { fill: #ffa500; }",".bc1 { fill: #cc3333; }",".bc2 { fill: #222333; }",".bc3 { fill: #0000ff; }",".bc4 { fill: #ffffff; }",".bc4 svg { fill: #000000; }","#texts { font-family: sans-serif; font-size: 10em; cursor: default; user-select: none; }",".txt0 text { font-size: 0.5em; }",".txt1 text { font-size: 0.8em; }",".txt2 text { font-size: 1em; }",".txt3 text { font-size: 1.5em; }",".txt4 text { font-size: 2em; }",".player { pointer-events: none; }",".player text { font-family: sans-serif; fill: black; }",".player text.number { fill: white; }",".dashed { stroke-dasharray: 20; }",".square { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }",".ellipse { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }",".line { stroke-width: 12; }",".line path { fill: none; stroke-width: 12; }",".path { stroke-width: 6; }",".path path { fill: none; stroke-width: 6; }",".draggable { cursor: move; pointer-events: all;}",".editBox { fill: none; stroke-width: 8; stroke-opacity: 1; }",".editTransparent { fill: none; stroke-width: 0; }",".editCorner { fill: red; stroke-width: 0; stroke-opacity: 1; }",".transparent { fill-opacity: 50%; stroke-opacity: 50%; }"])}},{key:"render",value:function(){var e=this.props.viewBoxLeft.toString()+" "+this.props.viewBoxTop.toString()+" "+this.props.viewBoxRight.toString()+" "+this.props.viewBoxBottom.toString(),t="pitch "+this.props.classes.offset,i=(this._orgWidth-4e3)/2,a=(this._orgHeight-2e3)/2,r="translate("+i+" "+a+")",s="translate("+(i+50)+" "+(a+2e3+50+25)+")",l="translate("+(i+1050)+" "+(a+2e3+90)+")";return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{ref:this._editRef,className:t},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:e,onContextMenu:this.hContextMenu,onMouseDown:this.hMouseDown,onMouseUp:this.hMouseUp,onMouseMove:this.hMouseMove},n.a.createElement("style",null,this.generatePicthStyles()),n.a.createElement("pattern",{id:"goal-net",x:"0",y:"0",width:"20",height:"20",stroke:"black",patternUnits:"userSpaceOnUse"},n.a.createElement("line",{x1:"0",x2:"20",y1:"0",y2:"20"}),n.a.createElement("line",{x1:"20",x2:"00",y1:"0",y2:"20"})),n.a.createElement("marker",{id:"arrowEnd",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.a.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:"#f00"})),n.a.createElement("marker",{id:"arrowStart",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.a.createElement("path",{d:"M9,0 L9,6 L0,3 z",fill:"#f00"})),n.a.createElement("g",{id:"background",ref:this._bgRef},n.a.createElement("rect",{width:this._orgWidth,height:this._orgHeight,fill:"#b7b7b7",fillOpacity:"0.5"})),n.a.createElement("g",{id:"pitch",transform:r,fill:"#0280c6",stroke:"white",strokeWidth:"8"},n.a.createElement("rect",{width:"4000",height:"2000"}),n.a.createElement("line",{x1:"2000",x2:"2000",y1:"0",y2:"2000"}),n.a.createElement("circle",{r:"300",cx:"2000",cy:"1000",fill:"none"}),n.a.createElement("circle",{r:"12",cx:"2000",cy:"1000",fill:"white",strokeWidth:"0"}),n.a.createElement("g",{id:"corner_marks"},n.a.createElement("path",{fill:"none",d:"M25,0 a25,25 0 0,1 -25,25"}),n.a.createElement("path",{fill:"none",d:"M4000,25 a25,25 0 0,1 -25,-25"}),n.a.createElement("path",{fill:"none",d:"M0,1975 a25,25 0 0,1 25,25"}),n.a.createElement("path",{fill:"none",d:"M3975,2000 a25,25 0 0,1 25,-25"})),n.a.createElement("g",{id:"substitition-zones"},n.a.createElement("line",{x1:"1000",x2:"1000",y1:"-48",y2:"32"}),n.a.createElement("line",{x1:"1500",x2:"1500",y1:"-48",y2:"32"}),n.a.createElement("line",{x1:"2500",x2:"2500",y1:"-48",y2:"32"}),n.a.createElement("line",{x1:"3000",x2:"3000",y1:"-48",y2:"32"})),n.a.createElement("g",{id:"left"},n.a.createElement("line",{x1:"500",x2:"500",y1:"980",y2:"1020"}),n.a.createElement("line",{x1:"600",x2:"600",y1:"842",y2:"1158"}),n.a.createElement("circle",{r:"12",cx:"600",cy:"1000",fill:"white",strokeWidth:"0"}),n.a.createElement("path",{fill:"none",d:"M0,242 a600,600 0 0,1 600,600"}),n.a.createElement("path",{fill:"none",d:"M600,1158 a600,600 0 0,1 -600,600"}),n.a.createElement("line",{x1:"-20",x2:"-60",y1:"500",y2:"500"}),n.a.createElement("line",{x1:"-20",x2:"-60",y1:"1500",y2:"1500"}),n.a.createElement("g",{id:"goal-left"},n.a.createElement("rect",{width:"100",height:"300",x:"-100",y:"850",fill:"url(#goal-net)",stroke:"#777777",strokeWidth:"4"}),n.a.createElement("line",{x1:"0",x2:"0",y1:"850",y2:"1150"}),n.a.createElement("line",{x1:"0",x2:"0",y1:"850",y2:"1150",stroke:"red",strokeDasharray:"20"}))),n.a.createElement("g",{id:"left-penalty",fill:"white",strokeWidth:"0"},n.a.createElement("rect",{width:"16",height:"16",x:"992",y:"492"}),n.a.createElement("circle",{r:"12",cx:"1000",cy:"1000"}),n.a.createElement("rect",{width:"16",height:"16",x:"992",y:"1492"})),n.a.createElement("g",{id:"right"},n.a.createElement("line",{x1:"3500",x2:"3500",y1:"980",y2:"1020"}),n.a.createElement("line",{x1:"3400",x2:"3400",y1:"842",y2:"1158"}),n.a.createElement("circle",{r:"12",cx:"3400",cy:"1000",fill:"white",strokeWidth:"0"}),n.a.createElement("path",{fill:"none",d:"M3400,842 a600,600 0 0,1 600,-600"}),n.a.createElement("path",{fill:"none",d:"M3400,1158 a600,600 0 0,0 600,600"}),n.a.createElement("line",{x1:"4020",x2:"4060",y1:"500",y2:"500"}),n.a.createElement("line",{x1:"4020",x2:"4060",y1:"1500",y2:"1500"}),n.a.createElement("g",{id:"goal-right"},n.a.createElement("rect",{width:"100",height:"300",x:"4000",y:"850",fill:"url(#goal-net)",stroke:"#777777",strokeWidth:"4"}),n.a.createElement("line",{x1:"4000",x2:"4000",y1:"850",y2:"1150"}),n.a.createElement("line",{x1:"4000",x2:"4000",y1:"850",y2:"1150",stroke:"red",strokeDasharray:"20"}))),n.a.createElement("g",{id:"right-penalty",fill:"white",strokeWidth:"0"},n.a.createElement("rect",{width:"16",height:"16",x:"2992",y:"492"}),n.a.createElement("circle",{r:"12",cx:"3000",cy:"1000"}),n.a.createElement("rect",{width:"16",height:"16",x:"2992",y:"1492"}))),n.a.createElement("g",{id:"pitchOverlay",stroke:"white",strokeWidth:"8"},this.renderPitchOverlay()),n.a.createElement("g",{id:"ellipses"},this.renderEllipses(this.props.pitch.ellipses)),n.a.createElement("g",{id:"squares"},this.renderSquares(this.props.pitch.squares)),n.a.createElement("g",{id:"extras"},this.renderExtras(this.props.pitch.extras)),n.a.createElement("g",{id:"players",transform:s,fontSize:"50"},this.renderLines(this.props.pitch.playerPathsCurrentKeyFrame(),!0),this.renderPlayers(this.props.pitch.playersPreviousKeyFrame(),!1,!0),this.renderPlayers(this.props.pitch.playersCurrentKeyFrame(),!0,!1),this.renderPlayers(this.props.pitch.AnimPlayers,!1,!1)),n.a.createElement("g",{id:"balls",transform:l},this.renderLines(this.props.pitch.ballPathsCurrentKeyFrame(),!0),this.renderBalls(this.props.pitch.ballsPreviousKeyFrame(),!1,!0),this.renderBalls(this.props.pitch.ballsCurrentKeyFrame(),!0,!1),this.renderBalls(this.props.pitch.AnimBalls,!1,!1)),n.a.createElement("g",{id:"lines"},this.renderLines(this.props.pitch.lines,!1)),n.a.createElement("g",{id:"texts"},this.renderTexts(this.props.pitch.texts)))),n.a.createElement(Ce,{ref:this._playerDialogRef,onEditDone:this.playerEditDone}))}}]),i}(a.Component);qe.defaultProps={pitch:null,drawMode:null,viewBoxLeft:0,viewBoxTop:0,viewBoxRight:4500,viewBoxBottom:2500};var We=Object(L.a)((function(e){return{offset:{paddingTop:e.mixins.toolbar.minHeight}}}),{withTheme:!0})(qe),Le=i(94),Ye=i(224),Xe=i(225),He=i(45),Ue=i(158),Ge=i(106),Ve=i.n(Ge),Je=i(217),$e=i(246),Qe=i(239),Ze=i(204),et=i(159),tt=i(214),it=i(216),at=i(245),nt=i(109),rt=i.n(nt),st=i(110),lt=i.n(st),ot=i(108),ht=i.n(ot),ct=i(107),ut=i.n(ct),dt=i(73),mt=i.n(dt),pt=i(72),yt=i.n(pt),ft=i(219),vt=i.n(ft),gt=i(222),bt=i.n(gt),xt=i(223),kt=i.n(xt),Et=i(215),wt=i.n(Et),Ot=i(112),St=i(213),Ct=i(218),Pt=i(59),Ft=i.n(Pt),At=i(60),Dt=i.n(At),jt=i(220),_t=i(221),Mt=i(243),Kt=i(247),Rt=i(212),Tt=i(96),Nt=i.n(Tt),zt=i(207),Bt=i.n(zt),It=i(208),qt=i.n(It),Wt=i(209),Lt=i.n(Wt),Yt=i(210),Xt=i.n(Yt),Ht=i(211),Ut=i.n(Ht),Gt=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var a;return Object(l.a)(this,i),(a=t.call(this,e)).state={open:!1,lineArrows:!1,linePattern:!1,pitchOverlays:!1,textSizes:!1},a.open=a.open.bind(Object(h.a)(a)),a.close=a.close.bind(Object(h.a)(a)),a.lineArrowsToggle=a.lineArrowsToggle.bind(Object(h.a)(a)),a.lineArrowEndToggle=a.lineArrowEndToggle.bind(Object(h.a)(a)),a.lineArrowStartToggle=a.lineArrowStartToggle.bind(Object(h.a)(a)),a.linePatternToggle=a.linePatternToggle.bind(Object(h.a)(a)),a.lineDashedOn=a.lineDashedOn.bind(Object(h.a)(a)),a.lineDashedOff=a.lineDashedOff.bind(Object(h.a)(a)),a.pitchOverlaysToggle=a.pitchOverlaysToggle.bind(Object(h.a)(a)),a.pitchOverlayOnChange=a.pitchOverlayOnChange.bind(Object(h.a)(a)),a.colorSelect=a.colorSelect.bind(Object(h.a)(a)),a.extrasSelect=a.extrasSelect.bind(Object(h.a)(a)),a.textSizesToggle=a.textSizesToggle.bind(Object(h.a)(a)),a.textSizeSelected=a.textSizeSelected.bind(Object(h.a)(a)),a}return Object(o.a)(i,[{key:"open",value:function(){this.setState({open:!0})}},{key:"close",value:function(e){var t=e.currentTarget.dataset.value;console.log(t),t&&(this.props.drawMode.mode=t),this.setState({open:!1,lineArrows:!1,linePattern:!1,pitchOverlays:!1,textSizes:!1})}},{key:"lineArrowsToggle",value:function(){this.setState({lineArrows:!this.state.lineArrows})}},{key:"lineArrowStartToggle",value:function(){this.props.drawMode.lineArrowStart=!this.props.drawMode.lineArrowStart}},{key:"lineArrowEndToggle",value:function(){this.props.drawMode.lineArrowEnd=!this.props.drawMode.lineArrowEnd}},{key:"lineArrowsIcon",value:function(){var e=this.props.drawMode;return e.lineArrowStart&&e.lineArrowEnd?n.a.createElement(Bt.a,null):!e.lineArrowStart&&e.lineArrowEnd?n.a.createElement(qt.a,null):e.lineArrowStart&&!e.lineArrowEnd?n.a.createElement(Lt.a,null):n.a.createElement(Xt.a,null)}},{key:"linePatternToggle",value:function(){this.setState({linePattern:!this.state.linePattern})}},{key:"lineDashedOn",value:function(){this.props.drawMode.lineDashed=!0,this.setState({linePattern:!1})}},{key:"lineDashedOff",value:function(){this.props.drawMode.lineDashed=!1,this.setState({linePattern:!1})}},{key:"linePatternIcon",value:function(){return this.props.drawMode.lineDashed?n.a.createElement(Ut.a,null):n.a.createElement(Xt.a,null)}},{key:"pitchOverlaysRender",value:function(){return this.props.drawMode.pitchOverlayOptions.map((function(e,t){return n.a.createElement(Rt.a,{key:t,control:n.a.createElement(Mt.a,null),label:e,value:e,style:{marginLeft:0}})}))}},{key:"pitchOverlaysToggle",value:function(){this.setState({pitchOverlays:!this.state.pitchOverlays})}},{key:"pitchOverlayOnChange",value:function(e){this.props.drawMode.pitchOverlay=e.target.value,this.setState({pitchOverlays:!1,open:!1})}},{key:"colorSelect",value:function(e){this.close(e),this.props.paletteDialogRef().Show()}},{key:"extrasSelect",value:function(e){this.close(e),this.props.extrasDialogRef().Show()}},{key:"textSizesToggle",value:function(){this.setState({textSizes:!this.state.textSizes})}},{key:"textSizeSelected",value:function(e){var t=e.target.value;t&&(this.props.drawMode.textSize=parseInt(t)),this.textSizesToggle()}},{key:"textSizeItemsRender",value:function(){return this.props.drawMode.textSizeOptions.map((function(e,t){return n.a.createElement(Rt.a,{key:t,control:n.a.createElement(Mt.a,null),label:e,value:t,style:{marginLeft:0}})}))}},{key:"render",value:function(){var e=this.lineArrowsIcon(),t=this.linePatternIcon(),i=this.props.drawMode.colorOptions[this.props.drawMode.color],a="Color "+this.props.drawMode.color;return n.a.createElement(Ot.a,{id:"drawingMenu",anchorEl:this.props.anchorEl,keepMounted:!0,open:this.state.open,onClose:this.close},n.a.createElement(St.a,{"data-value":"select",onClick:this.close},n.a.createElement(tt.a,null,n.a.createElement(wt.a,null)),n.a.createElement(it.a,{primary:"Select / Move"})),n.a.createElement(Je.a,null),n.a.createElement(St.a,{onClick:this.pitchOverlaysToggle},n.a.createElement(it.a,{primary:"Pitch overlay"}),this.state.pitchOverlays?n.a.createElement(Ft.a,null):n.a.createElement(Dt.a,null)),n.a.createElement(Ct.a,{in:this.state.pitchOverlays,timeout:"auto",unmountOnExit:!0},n.a.createElement(Kt.a,{name:"radio-pitch-overlays",value:this.props.drawMode.pitchOverlay,onChange:this.pitchOverlayOnChange},this.pitchOverlaysRender())),n.a.createElement(Je.a,null),n.a.createElement(St.a,{onClick:this.colorSelect},n.a.createElement(tt.a,null,n.a.createElement(Nt.a,{style:{color:i}})),n.a.createElement(it.a,{primary:a})),n.a.createElement(Je.a,null),n.a.createElement(St.a,{onClick:this.extrasSelect},n.a.createElement(tt.a,null,n.a.createElement(yt.a,null)),n.a.createElement(it.a,{primary:"Extras"})),n.a.createElement(Je.a,null),n.a.createElement(St.a,{"data-value":"line",onClick:this.close},n.a.createElement(tt.a,null,n.a.createElement(vt.a,null)),n.a.createElement(it.a,{primary:"Draw line"})),n.a.createElement(St.a,{onClick:this.lineArrowsToggle},n.a.createElement(tt.a,null,e),n.a.createElement(it.a,{primary:"Line arrows"}),this.state.lineArrows?n.a.createElement(Ft.a,null):n.a.createElement(Dt.a,null)),n.a.createElement(Ct.a,{in:this.state.lineArrows,timeout:"auto",unmountOnExit:!0},n.a.createElement(Ze.a,{component:"div",disablePadding:!0},n.a.createElement(St.a,{onClick:this.lineArrowEndToggle},n.a.createElement(tt.a,null,n.a.createElement(qt.a,null)),n.a.createElement(it.a,{primary:"End"}),n.a.createElement(jt.a,null,n.a.createElement(_t.a,{edge:"end",onChange:this.lineArrowEndToggle,checked:this.props.drawMode.lineArrowEnd}))),n.a.createElement(St.a,{onClick:this.lineArrowStartToggle},n.a.createElement(tt.a,null,n.a.createElement(Lt.a,null)),n.a.createElement(it.a,{primary:"Start"}),n.a.createElement(jt.a,null,n.a.createElement(_t.a,{edge:"end",onChange:this.lineArrowStartToggle,checked:this.props.drawMode.lineArrowStart}))))),n.a.createElement(St.a,{onClick:this.linePatternToggle},n.a.createElement(tt.a,null,t),n.a.createElement(it.a,{primary:"Line pattern"}),this.state.linePattern?n.a.createElement(Ft.a,null):n.a.createElement(Dt.a,null)),n.a.createElement(Ct.a,{in:this.state.linePattern,timeout:"auto",unmountOnExit:!0},n.a.createElement(Ze.a,{component:"div",disablePadding:!0},n.a.createElement(St.a,{onClick:this.lineDashedOff},n.a.createElement(tt.a,null,n.a.createElement(Xt.a,null)),n.a.createElement(it.a,{primary:"Solid"})),n.a.createElement(St.a,{onClick:this.lineDashedOn},n.a.createElement(tt.a,null,n.a.createElement(Ut.a,null)),n.a.createElement(it.a,{primary:"Dashed"})))),n.a.createElement(Je.a,null),n.a.createElement(St.a,{"data-value":"square",onClick:this.close},n.a.createElement(tt.a,null,n.a.createElement(bt.a,null)),n.a.createElement(it.a,{primary:"Draw square"})),n.a.createElement(Je.a,null),n.a.createElement(St.a,{"data-value":"ellipse",onClick:this.close},n.a.createElement(tt.a,null,n.a.createElement(kt.a,null)),n.a.createElement(it.a,{primary:"Draw ellipse"})),n.a.createElement(Je.a,null),n.a.createElement(St.a,{"data-value":"text",onClick:this.close},n.a.createElement(tt.a,null,n.a.createElement(mt.a,null)),n.a.createElement(it.a,{primary:"Write text"})),n.a.createElement(St.a,{onClick:this.textSizesToggle},n.a.createElement(it.a,{primary:"Text size"}),this.state.textSizes?n.a.createElement(Ft.a,null):n.a.createElement(Dt.a,null)),n.a.createElement(Ct.a,{in:this.state.textSizes,timeout:"auto",unmountOnExit:!0},n.a.createElement(Kt.a,{name:"radio-pitch-textSize",value:this.props.drawMode.textSize,onChange:this.textSizeSelected},this.textSizeItemsRender())))}}]),i}(a.Component);Gt.defaultProps={anchorEl:null,drawMode:null,paletteDialogRef:null};var Vt=Gt,Jt=i(97),$t=i.n(Jt),Qt=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e,a){var n;return Object(l.a)(this,i),(n=t.call(this,e,a)).state={open:!1},n.Show=n.Show.bind(Object(h.a)(n)),n.handleClose=n.handleClose.bind(Object(h.a)(n)),n.colorChange=n.colorChange.bind(Object(h.a)(n)),n}return Object(o.a)(i,[{key:"Show",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"colorChange",value:function(e){this.props.drawMode.color=parseInt(e.target.value),this.handleClose()}},{key:"radioIcon",value:function(e,t){return e?n.a.createElement("div",{className:this.props.classes.radioIconSelected,style:{backgroundColor:t}},n.a.createElement($t.a,{style:{fontSize:30}})):n.a.createElement("div",{className:this.props.classes.radioIcon,style:{backgroundColor:t}})}},{key:"renderRadios",value:function(){var e=this,t=this.props.drawMode;return t.colorOptions.map((function(i,a){var r=e.radioIcon(!1,i),s=e.radioIcon(!0,i);return n.a.createElement(Mt.a,{name:"color-select",key:a,value:a,className:e.props.classes.radio,checked:a===t.color,icon:r,checkedIcon:s,onChange:e.colorChange})}))}},{key:"render",value:function(){return n.a.createElement(be.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title"},n.a.createElement(Ee.a,{id:"responsive-dialog-title"},"Color palette"),n.a.createElement(ke.a,null,this.renderRadios()))}}]),i}(a.Component);Qt.defaultProps={drawMode:null};var Zt=Object(L.a)((function(e){return{radio:{padding:0},radioIcon:{width:48,height:48},radioIconSelected:{width:48,height:48,border:"1px solid white",color:e.palette.common.white,display:"flex",justifyContent:"center",alignItems:"center"}}}),{withTheme:!0})(Qt),ei=i(99),ti=i.n(ei),ii=i(98),ai=i.n(ii),ni=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var a;return Object(l.a)(this,i),(a=t.call(this,e)).state={fullScreen:!1},a.toggleFullScreen=a.toggleFullScreen.bind(Object(h.a)(a)),a}return Object(o.a)(i,[{key:"domFullScreenToggle",value:function(e){if(e){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"toggleFullScreen",value:function(){var e=!this.state.fullScreen;this.domFullScreenToggle(e),this.setState({fullScreen:e})}},{key:"fsIconGet",value:function(){return this.state.fullScreen?n.a.createElement(ai.a,null):n.a.createElement(ti.a,null)}},{key:"render",value:function(){var e=this.fsIconGet(),t=this.state.fullScreen?"Exit full screen":"Enter full screen";return n.a.createElement(at.a,{title:t},n.a.createElement(Ue.a,{"aria-label":t,color:"inherit",onClick:this.toggleFullScreen},e))}}]),i}(a.Component),ri=i(101),si=i.n(ri),li=i(102),oi=i.n(li),hi=i(105),ci=i.n(hi),ui=i(103),di=i.n(ui),mi=i(104),pi=i.n(mi),yi=i(242),fi=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var a;return Object(l.a)(this,i),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(o.a)(i,[{key:"handleChange",value:function(e){this.props.keyFrameDurationSet(e.target.value)}},{key:"playDisabled",value:function(){return this.props.keyFrameTotal<2}},{key:"addDisabled",value:function(){var e=this.props.keyFrameTotal-1;return this.props.keyFrameCurrent!==e}},{key:"deleteDisabled",value:function(){var e=this.props.keyFrameTotal-1;return this.props.keyFrameCurrent!==e||0===e}},{key:"previousDisabled",value:function(){return 0===this.props.keyFrameCurrent}},{key:"nextDisabled",value:function(){var e=this.props.keyFrameTotal-1;return this.props.keyFrameCurrent===e}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(at.a,{title:"Previous Frame"},n.a.createElement("span",null,n.a.createElement(Ue.a,{edge:"end",color:"inherit","aria-label":"Previous Frame",onClick:this.props.keyFramePrevious,disabled:this.previousDisabled()},n.a.createElement(si.a,{fontSize:"small"})))),n.a.createElement(at.a,{title:"Current Frame"},n.a.createElement(Ue.a,{color:"inherit","aria-label":"Current Frame"},this.props.keyFrameCurrent)),n.a.createElement(at.a,{title:"Next Frame"},n.a.createElement("span",null,n.a.createElement(Ue.a,{edge:"start",color:"inherit","aria-label":"Next Frame",onClick:this.props.keyFrameNext,disabled:this.nextDisabled()},n.a.createElement(oi.a,{fontSize:"small"})))),n.a.createElement(at.a,{title:"Add Frame"},n.a.createElement("span",null,n.a.createElement(Ue.a,{color:"inherit","aria-label":"Add Frame",onClick:this.props.keyFrameAdd,disabled:this.addDisabled()},n.a.createElement(di.a,null)))),n.a.createElement(at.a,{title:"Delete Frame"},n.a.createElement("span",null,n.a.createElement(Ue.a,{color:"inherit","aria-label":"Add Frame",onClick:this.props.keyFrameDelete,disabled:this.deleteDisabled()},n.a.createElement(pi.a,null)))),n.a.createElement(at.a,{title:"Play Animation"},n.a.createElement("span",null,n.a.createElement(Ue.a,{"aria-label":"Play Animation",color:"inherit",onClick:this.props.animPlayerShow,disabled:this.playDisabled()},n.a.createElement(ci.a,null)))),n.a.createElement(at.a,{"data-delay-hide":"1000",title:"Select frame duration"},n.a.createElement(yi.a,{id:"frameDurationSelect",onChange:this.handleChange,defaultValue:5},n.a.createElement(St.a,{value:1},"1"),n.a.createElement(St.a,{value:3},"3"),n.a.createElement(St.a,{value:5},"5"),n.a.createElement(St.a,{value:7},"7"),n.a.createElement(St.a,{value:10},"10"))))}}]),i}(a.Component);fi.defaultProps={keyFrameCurrent:0,keyFrameTotal:0,keyFrameAdd:null,keyFrameDelete:null,keyFrameNext:null,keyFramePrevious:null,keyFrameDurationSet:null,animPlayerShow:null};var vi=fi,gi=i(69),bi=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e,a){var n;return Object(l.a)(this,i),(n=t.call(this,e,a)).state={open:!1},n.Show=n.Show.bind(Object(h.a)(n)),n.handleClose=n.handleClose.bind(Object(h.a)(n)),n.extrasChange=n.extrasChange.bind(Object(h.a)(n)),n}return Object(o.a)(i,[{key:"Show",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"extrasChange",value:function(e){if(this.props.extrasCreate){var t=parseInt(e.target.value),i=z[t];this.props.extrasCreate(t,i.width,i.height)}this.handleClose()}},{key:"getExtrasGfx",value:function(e){var t=z[e],i=t.width/2*t.viewBoxScale,a=t.height/2*t.viewBoxScale;switch(e){case M:case K:return n.a.createElement(he,{x:i,y:a,width:t.width,height:t.height});case R:return n.a.createElement(de,{x:i,y:a,width:t.width,height:t.height});case T:return n.a.createElement(pe,{x:i,y:a,width:t.width,height:t.height});case N:return n.a.createElement(fe,{x:i,y:a,width:t.width,height:t.height});default:throw new Error("Unknown extras type")}}},{key:"radioIcon",value:function(e){var t=z[e],i="0 0 ".concat(t.width*t.viewBoxScale," ").concat(t.height*t.viewBoxScale);return n.a.createElement(gi.a,{viewBox:i,className:this.props.classes.radioIcon},this.getExtrasGfx(e))}},{key:"renderRadios",value:function(){var e=this;return[M,K,R,T,N].map((function(t,i){var a=e.radioIcon(t),r=z[t];return n.a.createElement("div",{key:i,style:{display:"inline-block"}},n.a.createElement("label",{style:{display:"block",textAlign:"center"}},r.name),n.a.createElement(Mt.a,{name:"extras-select",value:t,className:e.props.classes.radio,icon:a,onChange:e.extrasChange}))}))}},{key:"render",value:function(){return n.a.createElement(be.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title"},n.a.createElement(Ee.a,null,"Select element to place on pitch"),n.a.createElement(ke.a,null,this.renderRadios()))}}]),i}(a.Component);bi.defaultProps={extrasCreate:null};var xi=Object(L.a)((function(e){return{radio:{padding:0},radioIcon:{width:100,height:100}}}),{withTheme:!0})(bi),ki=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var a;return Object(l.a)(this,i),(a=t.call(this,e)).state={drawerOpen:!1},a.toggleDrawer=a.toggleDrawer.bind(Object(h.a)(a)),a._refDrawMenu=n.a.createRef(),a._refOpenDrawMenu=n.a.createRef(),a.drawingModeIcon=a.drawingModeIcon.bind(Object(h.a)(a)),a.drawMenuAnchorEl=a.drawMenuAnchorEl.bind(Object(h.a)(a)),a.drawMenuOpen=a.drawMenuOpen.bind(Object(h.a)(a)),a.createNewScheme=a.createNewScheme.bind(Object(h.a)(a)),a.createNewAnimation=a.createNewAnimation.bind(Object(h.a)(a)),a._refPaletteDialog=n.a.createRef(),a.paletteDialogRef=a.paletteDialogRef.bind(Object(h.a)(a)),a.extrasDialogRef=a.extrasDialogRef.bind(Object(h.a)(a)),a._refExtrasDialog=n.a.createRef(),a}return Object(o.a)(i,[{key:"setDrawer",value:function(e){this.setState({drawerOpen:e})}},{key:"toggleDrawer",value:function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&this.setDrawer(!this.state.drawerOpen)}},{key:"createNewScheme",value:function(){this.setDrawer(!1),this.props.createNewScheme()}},{key:"createNewAnimation",value:function(){this.setDrawer(!1),this.props.createNewAnimation()}},{key:"drawMenuAnchorEl",value:function(){return this._refOpenDrawMenu.current}},{key:"drawMenuOpen",value:function(){this._refDrawMenu.current.open()}},{key:"drawingModeIcon",value:function(){switch(this.props.drawMode.mode){case"line":return n.a.createElement(vt.a,null);case"square":return n.a.createElement(bt.a,null);case"ellipse":return n.a.createElement(kt.a,null);case"text":return n.a.createElement(mt.a,null);case"extras":return n.a.createElement(yt.a,null);case"select":default:return n.a.createElement(wt.a,null)}}},{key:"paletteDialogRef",value:function(){return this._refPaletteDialog.current}},{key:"extrasDialogRef",value:function(){return this._refExtrasDialog.current}},{key:"render",value:function(){var e=this.drawingModeIcon();return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ye.a,{position:"fixed"},n.a.createElement(Xe.a,{variant:"regular"},n.a.createElement(Ue.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:this.toggleDrawer},n.a.createElement(Ve.a,null)),n.a.createElement(He.a,{variant:"h6",color:"inherit"},"Futsal tactics board"),n.a.createElement("div",{className:this.props.classes.grow}),n.a.createElement(vi,{keyFrameCurrent:this.props.animKeyFrameCurrent,keyFrameTotal:this.props.animKeyFrameTotal,keyFrameAdd:this.props.animKeyFrameAdd,keyFrameDelete:this.props.animKeyFrameDelete,keyFrameNext:this.props.animKeyFrameNext,keyFramePrevious:this.props.animKeyFramePrevious,keyFrameDurationSet:this.props.animKeyFrameDurationSet,animPlayerShow:this.props.animPlayerShow}),n.a.createElement("div",{className:this.props.classes.grow}),n.a.createElement(at.a,{title:"Selected draw mode"},n.a.createElement(Ue.a,{ref:this._refOpenDrawMenu,"aria-label":"Selected draw mode",color:"inherit",onClick:this.drawMenuOpen},e)),n.a.createElement(at.a,{title:"Save picture"},n.a.createElement(Ue.a,{"aria-label":"Save picture",color:"inherit",onClick:this.props.saveImage},n.a.createElement(ut.a,null))),n.a.createElement(at.a,{title:"Share link"},n.a.createElement(Ue.a,{"aria-label":"Share link",color:"inherit"},n.a.createElement(ht.a,null))),n.a.createElement(ni,null))),n.a.createElement($e.a,{anchor:"left",open:this.state.drawerOpen,onClose:this.toggleDrawer},n.a.createElement(Qe.a,{p:2},n.a.createElement(He.a,{variant:"h4",component:"h2"},"Tactics board"),n.a.createElement(Je.a,null),n.a.createElement(Ze.a,{component:"nav","aria-label":"main mailbox folders"},n.a.createElement(et.a,{button:!0,onClick:this.createNewScheme},n.a.createElement(tt.a,null,n.a.createElement(rt.a,null)),n.a.createElement(it.a,{primary:"Create new scheme"})),n.a.createElement(et.a,{button:!0,onClick:this.createNewAnimation},n.a.createElement(tt.a,null,n.a.createElement(lt.a,null)),n.a.createElement(it.a,{primary:"Create new animation"}))))),n.a.createElement(Vt,{ref:this._refDrawMenu,anchorEl:this.drawMenuAnchorEl,drawMode:this.props.drawMode,paletteDialogRef:this.paletteDialogRef,extrasDialogRef:this.extrasDialogRef}),n.a.createElement(Zt,{ref:this._refPaletteDialog,drawMode:this.props.drawMode}),n.a.createElement(xi,{ref:this._refExtrasDialog,extrasCreate:this.props.extrasCreate}))}}]),i}(a.Component);ki.defaultProps={drawMode:null,saveImage:null,createNewScheme:null,createNewAnimation:null,snackbarOpen:null,animKeyFrameCurrent:0,animKeyFrameTotal:0,animKeyFrameAdd:null,animKeyFrameDelete:null,animKeyFrameNext:null,animKeyFramePrevious:null,keyFrameDurationSet:null,animPlayerShow:null,extrasCreate:null};var Ei=Object(L.a)((function(e){return{grow:{flexGrow:1}}}),{withTheme:!0})(ki),wi=i(203),Oi=i(231),Si=i(227),Ci=i(228),Pi=i(229),Fi=i(230),Ai=i(232),Di=i(233),ji=i(234),_i=i(226),Mi=Object(L.a)((function(e){return{root:{height:10,borderRadius:5,width:250},bar:{borderRadius:5,transition:"none"}}}))(_i.a),Ki=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var a;return Object(l.a)(this,i),(a=t.call(this,e)).state={isOpen:!1,isPlaying:!1,isRepeat:!1,animTime:0},a.currentTime=0,a.show=a.show.bind(Object(h.a)(a)),a.handleClose=a.handleClose.bind(Object(h.a)(a)),a.playPause=a.playPause.bind(Object(h.a)(a)),a.stop=a.stop.bind(Object(h.a)(a)),a.animStep=a.animStep.bind(Object(h.a)(a)),a.loopToggle=a.loopToggle.bind(Object(h.a)(a)),a.keyFrameNext=a.keyFrameNext.bind(Object(h.a)(a)),a.keyFramePrevious=a.keyFramePrevious.bind(Object(h.a)(a)),a}return Object(o.a)(i,[{key:"show",value:function(){this.setState({isOpen:!0,isPlaying:!1,isRepeat:!1,animTime:0}),null!=this.props.animStart&&this.props.animStart(),this.currentTime=0,window.requestAnimationFrame(this.animStep)}},{key:"handleClose",value:function(){this.setState({isOpen:!1,isPlaying:!1,isRepeat:!1,animTime:0}),null!=this.props.animStop&&this.props.animStop()}},{key:"loopToggle",value:function(){this.setState({isRepeat:!this.state.isRepeat})}},{key:"playPause",value:function(){this.setState({isPlaying:!this.state.isPlaying})}},{key:"stop",value:function(){this.setState({isPlaying:!1,animTime:0})}},{key:"keyFrameDurationMs",value:function(){return 1e3*this.props.keyFrameDuration}},{key:"keyFrameLast",value:function(){return this.props.keyFramesNo-1}},{key:"keyFramePreviousDisabled",value:function(){return 0===this.state.animTime}},{key:"keyFramePrevious",value:function(){var e=this.keyFrameDurationMs(),t=this.state.animTime-e;t<0&&(t=0),t=Math.floor(t/e)*e,this.setState({animTime:t})}},{key:"keyFrameNextDisabled",value:function(){return this.state.animTime>=this.animTotalTime()}},{key:"keyFrameNext",value:function(){var e=this.keyFrameDurationMs(),t=this.animTotalTime(),i=this.state.animTime+e;i>t&&(i=t),i=Math.floor(i/e)*e,this.setState({animTime:i})}},{key:"animTotalTime",value:function(){return this.keyFrameLast()*this.keyFrameDurationMs()}},{key:"animProgress",value:function(){var e=100*this.state.animTime/this.animTotalTime();return Math.round(e)}},{key:"animTime",value:function(){var e=this.state.animTime/1e3,t=Math.floor(e).toString(),i=Math.floor(1e3*(e-t)).toString();return(t="000".substring(0,3-t.length)+t)+":"+(i="000".substring(0,3-i.length)+i)}},{key:"animStep",value:function(e){var t=e-this.currentTime;this.currentTime=e;var i=this.animTotalTime(),a=this.state.animTime;this.state.isPlaying&&((a+=t)>i&&(a=this.state.isRepeat?0:i),this.setState({animTime:a})),this.state.isOpen&&(null!=this.props.animFrame&&this.props.animFrame(a),window.requestAnimationFrame(this.animStep))}},{key:"renderRepeat",value:function(){return this.state.isRepeat?n.a.createElement(Si.a,null):n.a.createElement(Ci.a,null)}},{key:"renderPlayPause",value:function(){return this.state.isPlaying?n.a.createElement(Pi.a,null):n.a.createElement(Fi.a,null)}},{key:"stopDisabled",value:function(){return 0===this.state.animTime}},{key:"render",value:function(){return n.a.createElement(wi.a,{open:this.state.isOpen,onClose:this.handleClose,anchorEl:this.props.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{horizontal:"center",vertical:"top"}},n.a.createElement(Oi.a,{container:!0,alignItems:"center"},n.a.createElement(Oi.a,{item:!0},n.a.createElement(at.a,{title:"Repeat Animation"},n.a.createElement(Ue.a,{"aria-label":"Repeat Animation",color:"inherit",onClick:this.loopToggle},this.renderRepeat())),n.a.createElement(at.a,{title:"Previous key frame"},n.a.createElement("span",null,n.a.createElement(Ue.a,{"aria-label":"Previous key frame",color:"inherit",onClick:this.keyFramePrevious,disabled:this.keyFramePreviousDisabled()},n.a.createElement(Ai.a,null)))),n.a.createElement(at.a,{title:"Play/Pause Animation"},n.a.createElement(Ue.a,{"aria-label":"Play/Pause Animation",color:"inherit",onClick:this.playPause},this.renderPlayPause())),n.a.createElement(at.a,{title:"Next key frame"},n.a.createElement("span",null,n.a.createElement(Ue.a,{"aria-label":"Previous key frame",color:"inherit",onClick:this.keyFrameNext,disabled:this.keyFrameNextDisabled()},n.a.createElement(Di.a,null)))),n.a.createElement(at.a,{title:"Stop Animation"},n.a.createElement("span",null,n.a.createElement(Ue.a,{"aria-label":"Stop Animation",color:"inherit",onClick:this.stop,disabled:this.stopDisabled()},n.a.createElement(ji.a,null))))),n.a.createElement(Oi.a,{item:!0},n.a.createElement(Qe.a,{display:"flex",alignItems:"center"},n.a.createElement(Qe.a,{mr:1,minWidth:55},n.a.createElement(He.a,{variant:"body2",color:"textSecondary"},this.animTime())),n.a.createElement(Qe.a,{mr:1},n.a.createElement(Mi,{variant:"determinate",value:this.animProgress()}))))))}}]),i}(a.Component);Ki.defaultProps={anchorEl:null,keyFramesNo:0,keyFrameDuration:0,animStart:null,animStop:null,animFrame:null};var Ri=Ki,Ti=i(235),Ni=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e,a){var n;return Object(l.a)(this,i),(n=t.call(this,e,a)).okCallback=null,n.state={open:!1,title:"",text:""},n.Show=n.Show.bind(Object(h.a)(n)),n.handleOk=n.handleOk.bind(Object(h.a)(n)),n.handleClose=n.handleClose.bind(Object(h.a)(n)),n}return Object(o.a)(i,[{key:"Show",value:function(e,t,i){this.okCallback=i,this.setState({open:!0,title:e,text:t})}},{key:"handleClose",value:function(){this.okCallback=null,this.setState({open:!1})}},{key:"handleOk",value:function(){null!==this.okCallback&&this.okCallback(),this.handleClose()}},{key:"render",value:function(){return n.a.createElement(be.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title"},n.a.createElement(Ee.a,{id:"responsive-dialog-title"},this.state.title),n.a.createElement(ke.a,null,n.a.createElement(Ti.a,null,this.state.text)),n.a.createElement(xe.a,null,n.a.createElement(we.a,{onClick:this.handleClose,variant:"contained",color:"primary",autoFocus:!0},"Cancel"),n.a.createElement(we.a,{onClick:this.handleOk,variant:"contained",color:"secondary"},"Ok")))}}]),i}(a.Component),zi=i(244),Bi=i(240),Ii=(i(152),function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var a;return Object(l.a)(this,i),(a=t.call(this,e)).appTheme=Object(d.a)(),a.refPitchEdit=n.a.createRef(),a.refSvgToImg=n.a.createRef(),a.refConfirmDialog=n.a.createRef(),a.refAnimPlayer=n.a.createRef(),a.SaveImage=a.SaveImage.bind(Object(h.a)(a)),a.CreateNewScheme=a.CreateNewScheme.bind(Object(h.a)(a)),a.CreateNewAnimation=a.CreateNewAnimation.bind(Object(h.a)(a)),a.PitchReset=a.PitchReset.bind(Object(h.a)(a)),a.ExtrasCreate=a.ExtrasCreate.bind(Object(h.a)(a)),a.OnPitchModified=a.OnPitchModified.bind(Object(h.a)(a)),a.OnDrawModeModified=a.OnDrawModeModified.bind(Object(h.a)(a)),a.SnackbarOpen=a.SnackbarOpen.bind(Object(h.a)(a)),a.SnackbarOnClose=a.SnackbarOnClose.bind(Object(h.a)(a)),a.AnimKeyFrameAdd=a.AnimKeyFrameAdd.bind(Object(h.a)(a)),a.AnimKeyFrameDelete=a.AnimKeyFrameDelete.bind(Object(h.a)(a)),a.AnimKeyFrameNext=a.AnimKeyFrameNext.bind(Object(h.a)(a)),a.AnimKeyFramePrevious=a.AnimKeyFramePrevious.bind(Object(h.a)(a)),a.AnimKeyFrameDurationSet=a.AnimKeyFrameDurationSet.bind(Object(h.a)(a)),a.AnimStart=a.AnimStart.bind(Object(h.a)(a)),a.AnimStop=a.AnimStop.bind(Object(h.a)(a)),a.AnimFrame=a.AnimFrame.bind(Object(h.a)(a)),a.animPlayerAnchorEl=a.animPlayerAnchorEl.bind(Object(h.a)(a)),a.animPlayerShow=a.animPlayerShow.bind(Object(h.a)(a)),a.pitch=a.DefaultPitch(),a.pitch.onModified=a.OnPitchModified,a.drawMode=new W,a.drawMode.onModified=a.OnDrawModeModified,a.state={pitch:a.pitch,drawMode:a.drawMode,snackBar:{Show:!1,Severity:"info",Message:""}},a}return Object(o.a)(i,[{key:"DefaultPitch",value:function(){var e=new q;return e.initDefault(200,8,120,100,5,80),e}},{key:"PitchReset",value:function(){console.log("Pitch reset"),this.pitch.onModified=null,this.pitch=this.DefaultPitch(),this.pitch.onModified=this.OnPitchModified,this.drawMode.onModified=null,this.drawMode=new W,this.drawMode.onModified=this.OnDrawModeModified,this.setState({pitch:this.pitch,drawMode:this.drawMode})}},{key:"OnPitchModified",value:function(e){this.pitch.onModified=null,this.pitch=e,this.pitch.onModified=this.OnPitchModified,this.setState({pitch:this.pitch})}},{key:"OnDrawModeModified",value:function(e){this.drawMode.onModified=null,this.drawMode=e,this.drawMode.onModified=this.OnDrawModeModified,this.setState({drawMode:this.drawMode}),this.pitch.overlay=this.drawMode.pitchOverlay}},{key:"CreateNewScheme",value:function(){this.state.pitch.isModified&&this.refConfirmDialog.current.Show("Create new scheme","Pitch is modified, are you sure you want to discard changes?",this.PitchReset)}},{key:"CreateNewAnimation",value:function(){this.refConfirmDialog.current.Show("Create new animation","Are you sure you want to create new animation?",null)}},{key:"SaveImage",value:function(){console.log("App save image");var e=this.refPitchEdit.current.getSVG();this.refSvgToImg.current.toImg(e.svgText,e.width,e.height,e.width/2,e.height/2)}},{key:"SnackbarOpen",value:function(e,t){this.setState({snackBar:{Show:!0,Severity:e,Message:t}})}},{key:"SnackbarOnClose",value:function(){var e=this.state.snackBar.Severity,t=this.state.snackBar.Message;this.setState({snackBar:{Show:!1,Severity:e,Message:t}})}},{key:"ExtrasCreate",value:function(e,t,i){this.pitch.extrasCreate(e,t,i)}},{key:"AnimKeyFrameAdd",value:function(){this.pitch.animKeyFrameAdd()?this.SnackbarOpen("success","New key frame added to animation"):this.SnackbarOpen("error","Can't add new key frame no change is done to current key frame")}},{key:"AnimKeyFrameDelete",value:function(){this.pitch.animKeyFrameDelete()?this.SnackbarOpen("success","Key frame deleted from animation"):this.SnackbarOpen("error","Can't delete key frame, only last can be deleted.")}},{key:"AnimKeyFrameNext",value:function(){this.pitch.animKeyFrameNext()||this.SnackbarOpen("warning","No more key frames to navigate")}},{key:"AnimKeyFramePrevious",value:function(){this.pitch.animKeyFramePrevious()||this.SnackbarOpen("warning","You are on first key frame")}},{key:"AnimKeyFrameDurationSet",value:function(e){this.pitch.animKeyFrameDurationSet(e)||this.SnackbarOpen("info","You set the frame duration to ".concat(e,"s"))}},{key:"AnimStart",value:function(){this.state.pitch.animStart()}},{key:"AnimStop",value:function(){this.state.pitch.animStop()}},{key:"AnimFrame",value:function(e){this.state.pitch.animFrame(e)}},{key:"animPlayerAnchorEl",value:function(){return this.refPitchEdit.current}},{key:"animPlayerShow",value:function(){this.state.pitch.AnimKeyFrames.length<2?this.SnackbarOpen("warning","No animation is created"):this.refAnimPlayer.current.show()}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{theme:this.appTheme},n.a.createElement(Ei,{drawMode:this.state.drawMode,saveImage:this.SaveImage,createNewScheme:this.CreateNewScheme,createNewAnimation:this.CreateNewAnimation,animKeyFrameCurrent:this.state.pitch.AnimKeyFrameCurrent,animKeyFrameTotal:this.state.pitch.AnimKeyFrames.length,animKeyFrameAdd:this.AnimKeyFrameAdd,animKeyFrameDelete:this.AnimKeyFrameDelete,animKeyFrameNext:this.AnimKeyFrameNext,animKeyFramePrevious:this.AnimKeyFramePrevious,animKeyFrameDurationSet:this.AnimKeyFrameDurationSet,animPlayerShow:this.animPlayerShow,extrasCreate:this.ExtrasCreate}),n.a.createElement(We,{ref:this.refPitchEdit,pitch:this.state.pitch,drawMode:this.state.drawMode,viewBoxLeft:0,viewBoxTop:0,viewBoxRight:4500,viewBoxBottom:2500}),n.a.createElement(Ri,{ref:this.refAnimPlayer,anchorEl:this.animPlayerAnchorEl,keyFramesNo:this.state.pitch.AnimKeyFrames.length,keyFrameDuration:this.state.pitch.AnimKeyFrameDuration,animStart:this.AnimStart,animStop:this.AnimStop,animFrame:this.AnimFrame}),n.a.createElement(Ni,{ref:this.refConfirmDialog}),n.a.createElement(zi.a,{open:this.state.snackBar.Show,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:2e3,onClose:this.SnackbarOnClose},n.a.createElement(Bi.a,{elevation:6,variant:"filled",onClose:this.SnackbarOnClose,severity:this.state.snackBar.Severity},this.state.snackBar.Message)),n.a.createElement(Le.a,{ref:this.refSvgToImg})))}}]),i}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qi=i(237);i(153);s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(qi.a,null),n.a.createElement(Ii,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},94:function(e,t,i){"use strict";(function(e){var a=i(7),n=i(6),r=i(11),s=i(10),l=i(0),o=i.n(l),h=i(95),c=i.n(h),u=function(t){Object(r.a)(l,t);var i=Object(s.a)(l);function l(e){var t;return Object(a.a)(this,l),(t=i.call(this,e))._refRenderer=o.a.createRef(),t}return Object(n.a)(l,[{key:"toImg",value:function(t,i,a,n,r){var s=this,l=document.createElement("canvas");l.width=n,l.height=r;var o=l.getContext("2d"),h=document.createElement("img");h.addEventListener("load",(function(e){o.drawImage(h,0,0,i,a,0,0,i,a),l.toBlob((function(e){c.a.saveAs(e,"tactics-board.png")})),s._refRenderer.current.innerHTML=""}));var u="data:image/svg+xml;base64,"+new e(t).toString("base64");h.src=u}},{key:"render",value:function(){return o.a.createElement("div",{ref:this._refRenderer,style:{display:"none"}})}}]),l}(l.Component);t.a=u}).call(this,i(145).Buffer)}},[[154,1,2]]]);
//# sourceMappingURL=main.26402cdf.chunk.js.map