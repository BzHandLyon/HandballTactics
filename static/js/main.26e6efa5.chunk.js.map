{"version":3,"sources":["pitch/Ball.js","pitch/Player.js","pitch/Box.js","pitch/Square.js","pitch/Ellipse.js","pitch/Point.js","pitch/Path.js","pitch/Line.js","pitch/Text.js","pitch/Constants.js","pitch/AnimKeyFrame.js","pitch/PitchFutsal.js","pitch/DrawMode.js","editors/PlayerEdit.js","editors/BallEdit.js","editors/DragHandle.js","editors/RotateHandle.js","editors/EditBox.js","editors/SquareEdit.js","editors/EllipseEdit.js","editors/LineEdit.js","editors/TextEdit.js","editors/PlayerDialog.js","editors/PitchEdit.js","ui/DrawMenu.js","ui/PaletteDialog.js","ui/FullscreenToggle.js","ui/AnimControls.js","ui/AppTools.js","ui/ConfirmDialog.js","App.js","serviceWorker.js","index.js","editors/SvgToImg.js"],"names":["Ball","id","color","x","y","xDefault","yDefault","this","b","Player","no","name","rotation","noDefault","p","Box","width","height","Square","x1","y1","dashed","isEdit","x2","y2","proportional","szy","corner","deltaX","deltaY","posX","posY","snap","vx","cx","vy","cy","angle","Math","atan2","PI","floor","Ellipse","rx","ry","Point","Path","p1","p2","c1","c2","arrowStart","arrowEnd","Line","equalTo","linearControlPoints","lx","ly","pid","move","computeControlPoints","paths","K","n","length","a","c","r","i","m","Text","size","text","isTextEdit","bx","by","bwidth","bheight","ElementIDPrefix","AnimKeyFrame","players","playerPaths","balls","ballPaths","index","map","clone","playerPathID","ballPathID","kf","PitchFutsal","AnimKeyFrameCurrent","AnimKeyFrames","squareID","squares","ellipseID","ellipses","lineID","lines","textID","texts","_overlay","isModified","onModified","noPlayers","noPlayerColors","playerSize","noBalls","noBallColors","ballSize","_initPlayers","_initBalls","push","groupSize","number","player","ball","cp","overlay","last","beforeLast","console","log","newKeyFrame","_modified","next","playersCurrentKeyFrame","replace","lineResizeP2","playerPathsCurrentKeyFrame","startsWith","find","isPlaced","remove","reset","ballsCurrentKeyFrame","ballPathsCurrentKeyFrame","isDashed","l","lineNewID","resizeP1","resizeP2","resize","edit","lineOrPathEdit","filter","empty","el","ellipseNewID","e","rotate","sq","squareNewID","s","tx","textNewID","t","squareEdit","ellipseEdit","textMove","squareRotate","ellipseRotate","textRotate","lineEditEnd","squareEditEnd","ellipsesEditEnd","value","DrawMode","_mode","_lineArrowStart","_lineArrowEnd","_lineDashed","_color","_textSize","_pitchOverlay","dm","mode","lineArrowStart","lineArrowEnd","lineDashed","textSize","pitchOverlay","PlayerEdit","pl","props","editID","editClassName","className","transform","textAnchor","data-ref","dominantBaseline","renderPlayerName","Component","defaultProps","BallEdit","xmlns","viewBox","d","ballImage","DragHandle","half","position","RotateHandle","box","Fragment","EditBox","showResize","tl","tr","bl","br","boxClass","showBox","renderHandles","SquareEdit","square","editBox","EllipseEdit","ellipse","LineEdit","isPath","key","markerStart","markerEnd","line","allPaths","renderPath","toString","editHandles","TextEdit","_selectionStart","_selectionEnd","_boxPadding","_editRef","React","createRef","_textRef","_cursorRef","_boxRef","editStart","bind","editChange","editKeyUp","editEnd","prevProps","prevState","current","focus","firstChild","removeChild","ln","tspan","document","createElementNS","setAttribute","textContent","appendChild","cln","bBox","removeText","txt","addTextLine","cr","getExtentOfChar","drawCursor","bb","getBBox","drawTextBoundingBox","error","selectionStart","selectionEnd","editShowCursor","onEditDone","trim","ref","strokeWidth","onFocus","onInput","onKeyUp","onBlur","split","dy","xmlSpace","renderLines","editor","PlayerDialog","state","open","_refName","_refNumber","openDialog","close","save","setState","Number","parseInt","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","TextField","inputRef","margin","defaultValue","label","type","fullWidth","autoFocus","DialogActions","Button","onClick","DragObject","DragObjectCheck","prefix","removePrefix","typ","PitchEdit","_bgRef","_playerDialogRef","_orgWidth","viewBoxRight","viewBoxLeft","_orgHeight","viewBoxBottom","viewBoxTop","_pitch","pitch","_dragNode","_dragObjectType","_mouseX","_mouseY","hContextMenu","hMouseDown","hMouseUp","hMouseMove","textEditDone","playerEditDone","getBoundingClientRect","X","Y","scale","getScale","clientX","left","clientY","top","button","target","classList","contains","getAttribute","resetMouseDrag","chk","editNode","editPlayer","playerEditStart","playerMove","ballMove","editTopLeft","editTopRight","editBottomLeft","editBottomRight","editMove","editRotate","lineEdit","drawMode","playerEditStarted","squareEditStart","ellipseEditStart","lineEditStart","textEditStart","preventDefault","pos","getRealPosition","lineCreate","squareCreate","ellipseCreate","textCreate","isDragStarted","isShift","getModifierState","lineCleanup","squareCleanup","ellipseCleanup","objectDrag","endAllEdits","lineResize","squareResize","ellipseResize","svgText","children","outerHTML","keyPrefix","o","overlaySize","fill","colorOptions","col","concat","editColorIndex","editColor","pitchClasses","classes","offset","pitchLeft","pitchTop","pitchTransform","playersTransform","ballsTransform","onContextMenu","onMouseDown","onMouseUp","onMouseMove","generatePicthStyles","stroke","patternUnits","markerWidth","markerHeight","refX","refY","orient","markerUnits","fillOpacity","strokeDasharray","renderPitchOverlay","renderEllipses","renderSquares","fontSize","renderPlayers","playersPreviousKeyFrame","renderBalls","ballsPreviousKeyFrame","renderTexts","withStyles","theme","paddingTop","mixins","toolbar","minHeight","withTheme","DrawMenu","lineArrows","linePattern","pitchOverlays","textSizes","lineArrowsToggle","lineArrowEndToggle","lineArrowStartToggle","linePatternToggle","lineDashedOn","lineDashedOff","pitchOverlaysToggle","pitchOverlayOnChange","colorSelect","textSizesToggle","textSizeSelected","currentTarget","dataset","pitchOverlayOptions","FormControlLabel","control","Radio","style","marginLeft","event","paletteDialogRef","Show","sz","textSizeOptions","arrowsIcon","lineArrowsIcon","patternIcon","linePatternIcon","colorSelected","colorNameSelected","anchorEl","keepMounted","MenuItem","data-value","ListItemIcon","ListItemText","primary","Divider","Collapse","in","timeout","unmountOnExit","RadioGroup","onChange","pitchOverlaysRender","List","component","disablePadding","ListItemSecondaryAction","Switch","edge","checked","textSizeItemsRender","PaletteDialog","context","handleClose","colorChange","isChecked","radioIconSelected","backgroundColor","radioIcon","ico","icoChk","radio","icon","checkedIcon","renderRadios","padding","border","palette","common","white","display","justifyContent","alignItems","FullscreenToggle","fullScreen","toggleFullScreen","toFullScreen","elem","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","isFullScreen","domFullScreenToggle","fsIcon","fsIconGet","fsLabel","Tooltip","title","IconButton","aria-label","AnimControls","float","animKeyFramePrevious","animKeyFrameNext","animKeyFrameAdd","AppTools","drawerOpen","toggleDrawer","_refDrawMenu","_refOpenDrawMenu","_refAnimControl","drawingModeIcon","drawMenuAnchorEl","drawMenuOpen","createNewScheme","createNewAnimation","_refPaletteDialog","isOpen","setDrawer","AppBar","Toolbar","variant","Typography","grow","animControlAnchorEl","saveImage","Drawer","anchor","ListItem","flexGrow","ConfirmDialog","okCallback","handleOk","fnCallback","DialogContentText","App","appTheme","createMuiTheme","refAppTools","refPitchEdit","refSvgToImg","refConfirmDialog","SaveImage","CreateNewScheme","CreateNewAnimation","PitchReset","OnPitchModified","OnDrawModeModified","OnCloseSnackbar","OnOpenSnackbar","DefaultPitch","snackBarShow","snackBarMsg","initDefault","newPitch","newDrawMode","svg","getSVG","toImg","message","ThemeProvider","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","action","openSnackbar","SvgToImg","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","CssBaseline","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","_refRenderer","orgWidth","orgHeight","imgWidth","imgHeight","canvas","createElement","ctx","getContext","img","addEventListener","drawImage","toBlob","blob","FileSaver","saveAs","innerHTML","encodedString","Buffer","src"],"mappings":"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","file":"static/js/main.26e6efa5.chunk.js","sourcesContent":["class Ball {\n\tconstructor(id=\"\", color=0, x=0, y=0, xDefault=0, yDefault=0){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.xDefault = xDefault;\n\t\tthis.yDefault = yDefault;\n\t}\n\n\treset() {\n\t\tthis.x = this.xDefault;\n\t\tthis.y = this.yDefault;\n\t}\n\n\tclone() {\n\t\treturn new Ball(\n\t\t\tthis.id, \n\t\t\tthis.color, \n\t\t\tthis.x, this.y,\n\t\t\tthis.xDefault, this.yDefault\n\t\t);\n\t}\n\n\tequalTo(b) {\n\t\treturn this.id === b.id\n\t\t\t&& this.color === b.color\n\t\t\t&& this.x === b.x\n\t\t\t&& this.y === b.y\n\t\t\t&& this.xDefault === b.xDefault\n\t\t\t&& this.yDefault === b.yDefault\n\t}\n}\n\nexport default Ball;\n","class Player {\n\tconstructor(id=\"\", no=\"0\", name=\"\", color=0, x=0, y=0, rotation=0, xDefault=0, yDefault=0, noDefault=\"0\"){\n\t\tthis.id = id;\n\t\tthis.no = no;\n\t\tthis.name = name;\n\t\tthis.color = color;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.rotation = rotation;\n\t\tthis.xDefault = xDefault;\n\t\tthis.yDefault = yDefault;\n\t\tthis.noDefault = noDefault;\n\t}\t\n\n\treset() {\n\t\tthis.x = this.xDefault;\n\t\tthis.y = this.yDefault;\n\t\tthis.rotation = 0;\n\t\tthis.name = \"\";\n\t\tthis.no = this.noDefault;\n\t}\n\n\tclone() {\n\t\treturn new Player(\n\t\t\tthis.id, \n\t\t\tthis.no, \n\t\t\tthis.name, \n\t\t\tthis.color, \n\t\t\tthis.x, this.y, this.rotation,\n\t\t\tthis.xDefault, this.yDefault, this.noDefault\n\t\t);\n\t}\n\n\tequalTo(p) {\n\t\treturn this.id === p.id\n\t\t\t&& this.no === p.no\n\t\t\t&& this.name === p.name\n\t\t\t&& this.color === p.color\n\t\t\t&& this.x === p.x\n\t\t\t&& this.y === p.y\n\t\t\t&& this.rotation === p.rotation\n\t\t\t&& this.xDefault === p.xDefault\n\t\t\t&& this.yDefault === p.yDefault\n\t\t\t&& this.noDefault === p.noDefault\n\t}\n\n\tget isPlaced() {\n\t\treturn this.x !== this.xDefault || this.y !== this.yDefault;\n\t}\n}\n\nexport default Player;\n","class Box {\n\tconstructor(id=\"\", x=0, y=0, width=0, height=0){\n\t\tthis.id = id;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n}\n\nexport default Box;\n","import Box from './Box';\n\nclass Square {\n\tconstructor(id=\"\", color=0, x1=0, y1=0, width=0, height=0, rotation=0, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x1 + width;\n\t\tthis.y2 = y1 + height;\n\t\tthis.rotation = rotation;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.x,\n\t\t\tthis.y,\n\t\t\tthis.width,\n\t\t\tthis.height\n\t\t);\n\t}\n\n\tget x() {\n\t\treturn this.x1 < this.x2 ? this.x1 : this.x2;\n\t}\n\n\tget width() {\n\t\treturn this.x1 < this.x2 ? this.x2 - this.x1 : this.x1 - this.x2;\n\t}\n\n\tget y() {\n\t\treturn this.y1 < this.y2 ? this.y1 : this.y2;\n\t}\n\n\tget height() {\n\t\treturn this.y1 < this.y2 ? this.y2 - this.y1 : this.y1 - this.y2;\n\t}\n\n\tget cx() {\n\t\treturn this.x + this.width / 2;\n\t}\n\n\tget cy() {\n\t\treturn this.y + this.height / 2;\n\t}\n\n\tresize(x2, y2, proportional) {\n\t\tthis.x2 = x2;\n\t\tif (!proportional) {\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tlet szy = this.width * (this.y1 < y2 ? 1 : -1);\n\t\t\tthis.y2 = this.y1 + szy;\n\t\t}\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.cx;\n\t\tlet vy = posY - this.cy;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Square;\n","import Box from './Box';\n\nclass Ellipse {\n\tconstructor(id=\"\", color=0, x1=0, y1=0, rx=0, ry=0, rotation=0, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x1 + rx * 2;\n\t\tthis.y2 = y1 + ry * 2;\n\t\tthis.rotation = rotation;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tget cx() {\n\t\treturn (this.x1 < this.x2 ? this.x1 : this.x2) + this.rx;\n\t}\n\n\tget cy() {\n\t\treturn (this.y1 < this.y2 ? this.y1 : this.y2) + this.ry;\n\t}\n\n\tget rx() {\n\t\treturn (this.x1 < this.x2 ? this.x2 - this.x1 : this.x1 - this.x2) / 2;\n\t}\n\n\tget ry() {\n\t\treturn (this.y1 < this.y2 ? this.y2 - this.y1 : this.y1 - this.y2) / 2;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.cx - this.rx,\n\t\t\tthis.cy - this.ry,\n\t\t\tthis.rx * 2,\n\t\t\tthis.ry * 2\n\t\t);\n\t}\n\n\tresize(x2, y2, proportional) {\n\t\tthis.x2 = x2;\n\t\tif (!proportional) {\n\t\t\tthis.y2 = y2;\n\t\t} else {\n\t\t\tlet szy = this.rx * (this.y1 < y2 ? 2 : -2);\n\t\t\tthis.y2 = this.y1 + szy;\n\t\t}\n\t}\n\n\tedit(corner, deltaX, deltaY) {\n\t\tswitch (corner) {\n\t\t\tcase \"tl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"tr\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"bl\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"br\":\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tcase \"mv\":\n\t\t\t\tthis.x1 += deltaX;\n\t\t\t\tthis.y1 += deltaY;\n\t\t\t\tthis.x2 += deltaX;\n\t\t\t\tthis.y2 += deltaY;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - this.cx;\n\t\tlet vy = posY - this.cy;\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Ellipse;\n","class Point {\n\tconstructor(x=0, y=0){\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tequalTo(p) {\n\t\treturn p.x === this.x && p.y === this.y\n\t}\n\n\tmove(deltaX, deltaY) {\n\t\tthis.x += deltaX;\n\t\tthis.y += deltaY;\n\t}\n}\n\nexport default Point;\n","import Point from \"./Point\";\n\nclass Path {\n\tconstructor(id=\"\", p1=new Point(0,0), p2=new Point(0,0), c1=new Point(0,0), c2=new Point(0,0), arrowStart=false, arrowEnd=false){\n\t\tthis.id = id;\n\t\tthis.p1 = p1;\n\t\tthis.p2 = p2;\n\t\tthis.c1 = c1;\n\t\tthis.c2 = c2;\n\t\tthis.arrowStart = arrowStart;\n\t\tthis.arrowEnd = arrowEnd;\n\t}\n}\n\nexport default Path;\n","import Point from \"./Point\";\nimport Path from \"./Path\";\n\nclass Line {\n\t// For line spline with control points see https://www.particleincell.com/2012/bezier-splines/\n\t// Line iz created as straight line with 2 spline segments\n\tconstructor(id=\"\", color=0, p1=new Point(0,0), p2=new Point(0,0), c1=new Point(0,0), c2=new Point(0,0), arrowStart=false, arrowEnd=false, dashed=false, isEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.p1 = p1;\n\t\tthis.p2 = p2;\n\t\tthis.c1 = c1;\n\t\tthis.c2 = c2;\n\t\tthis.arrowStart = arrowStart;\n\t\tthis.arrowEnd = arrowEnd;\n\t\tthis.dashed = dashed;\n\t\tthis.isEdit = isEdit;\n\t}\n\n\tempty() {\n\t\treturn this.p1.equalTo(this.p2) \n\t\t\t&& this.p1.equalTo(this.c1)\n\t\t\t&& this.p1.equalTo(this.c2);\n\t}\n\n\tresizeP1(deltaX, deltaY) {\n\t\tthis.p1 = new Point(this.p1.x + deltaX, this.p1.y + deltaY);\n\t\tthis.linearControlPoints();\n\t}\n\n\tresizeP2(deltaX, deltaY) {\n\t\tthis.p2 = new Point(this.p2.x + deltaX, this.p2.y + deltaY);\n\t\tthis.linearControlPoints();\n\t}\n\n\t// TODO: Remove for only delta resize\n\tresize(x2,y2) {\n\t\tthis.p2 = new Point(x2,y2);\n\t\tthis.linearControlPoints();\n\t}\n\n\t// calculate linear control points position\n\tlinearControlPoints() {\n\t\tlet lx = this.p2.x - this.p1.x;\n\t\tlet ly = this.p2.y - this.p1.y;\n\t\tthis.c1 = new Point(\n\t\t\tthis.p1.x + lx / 3,\n\t\t\tthis.p1.y + ly / 3,\n\t\t); \n\t\tthis.c2 = new Point(\n\t\t\tthis.p1.x + lx / 3 * 2,\n\t\t\tthis.p1.y + ly / 3 * 2,\n\t\t); \n\t}\n\n\tedit(pid, deltaX, deltaY) {\n\t\tswitch (pid) {\n\t\t\tcase \"p1\":\n\t\t\t\tthis.p1.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"c1\":\n\t\t\t\tthis.c1.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"c2\":\n\t\t\t\tthis.c2.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase \"p2\":\n\t\t\t\tthis.p2.move(deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaths() {\n\t\tlet cx = this.computeControlPoints([this.p1.x, this.c1.x, this.c2.x, this.p2.x]);\n\t\tlet cy = this.computeControlPoints([this.p1.y, this.c1.y, this.c2.y, this.p2.y]);\n\t\tlet paths = [];\n\t\tpaths[0] = new Path(\n\t\t\tthis.id, this.p1, this.c1,\n\t\t\tnew Point(cx.p1[0], cy.p1[0]),\n\t\t\tnew Point(cx.p2[0], cy.p2[0]),\n\t\t\tthis.arrowStart, false\n\t\t);\n\t\tpaths[1] = new Path(\n\t\t\tthis.id, this.c1, this.c2,\n\t\t\tnew Point(cx.p1[1], cy.p1[1]),\n\t\t\tnew Point(cx.p2[1], cy.p2[1]),\n\t\t\tfalse, false\n\t\t);\n\t\tpaths[2] = new Path(\n\t\t\tthis.id, this.c2, this.p2,\n\t\t\tnew Point(cx.p1[2], cy.p1[2]),\n\t\t\tnew Point(cx.p2[2], cy.p2[2]),\n\t\t\tfalse, this.arrowEnd\n\t\t);\n\t\treturn paths;\n\t}\n\n\t// computes control points given knots K, this is the brain of the operation\n\tcomputeControlPoints(K) {\n\t\tlet p1 = [];\n\t\tlet p2 = [];\n\t\tlet n = K.length-1;\n\t\t\n\t\t// rhs vector\n\t\tlet a = [];\n\t\tlet b = [];\n\t\tlet c = [];\n\t\tlet r = [];\n\t\t\n\t\t// left most segment\n\t\ta[0]=0;\n\t\tb[0]=2;\n\t\tc[0]=1;\n\t\tr[0] = K[0] + 2*K[1];\n\t\t\n\t\t// internal segments\n\t\tfor (let i = 1; i < n - 1; i++) {\n\t\t\ta[i]=1;\n\t\t\tb[i]=4;\n\t\t\tc[i]=1;\n\t\t\tr[i] = 4 * K[i] + 2 * K[i+1];\n\t\t}\n\n\t\t// right segment\n\t\ta[n-1]=2;\n\t\tb[n-1]=7;\n\t\tc[n-1]=0;\n\t\tr[n-1] = 8*K[n-1] + K[n];\n\t\t\n\t\t// solves Ax=b with the Thomas algorithm (from Wikipedia)\n\t\tfor (let i = 1; i < n; i++) {\n\t\t\tlet m = a[i] / b[i - 1];\n\t\t\tb[i] = b[i] - m * c[i - 1];\n\t\t\tr[i] = r[i] - m * r[i - 1];\n\t\t}\n\t\n\t\tp1[n-1] = r[n-1] / b[n-1];\n\t\tfor (let i = n - 2; i >= 0; --i) {\n\t\t\tp1[i] = (r[i] - c[i] * p1[i+1]) / b[i];\n\t\t}\n\t\t\t\n\t\t// we have p1, now compute p2\n\t\tfor (let i = 0; i < n-1; i++) {\n\t\t\tp2[i] = 2 * K[i+1] - p1[i+1];\n\t\t}\n\t\tp2[n-1] = 0.5 * (K[n]+p1[n-1]);\n\t\t\n\t\treturn { p1:p1, p2:p2 };\n\t}\n}\n\nexport default Line;\n","import Box from './Box';\n\nclass Text {\n\tconstructor(id=\"\", color=0, size=0, text=\"\", x=0, y=0, rotation=0, isEdit=false, isTextEdit=false){\n\t\tthis.id = id;\n\t\tthis.color = color;\n\t\tthis.size = size;\n\t\tthis.text = text;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.rotation = rotation;\n\t\tthis.bx = x;\t\t// bounding box X\n\t\tthis.by = y;\t\t// bounding box Y\n\t\tthis.bwidth = 0;\t// bounding box Width\n\t\tthis.bheight = 0;\t// bounding box Height\n\t\tthis.isEdit = isEdit;\n\t\tthis.isTextEdit = isTextEdit;\n\t}\n\n\tget box() {\n\t\treturn new Box(\n\t\t\tthis.id,\n\t\t\tthis.bx,\n\t\t\tthis.by,\n\t\t\tthis.bwidth,\n\t\t\tthis.bheight\n\t\t);\n\t}\n\n\tmove(deltaX, deltaY) {\n\t\tthis.x += deltaX;\n\t\tthis.y += deltaY;\n\t}\n\n\trotate(posX, posY, snap) {\n\t\tlet vx = posX - (this.x + this.bwidth / 2);\n\t\tlet vy = posY - (this.y + this.bheight / 2);\n\t\tlet angle = Math.atan2(vy, vx) * 180 / Math.PI;\n\t\tangle += 90;\n\t\tif (angle < 0) {\n\t\t\tangle += 360;\n\t\t}\n\t\tif (snap) {\n\t\t\tangle = Math.floor(angle / 45) * 45;\n\t\t}\n\t\tthis.rotation = angle;\n\t}\n}\n\nexport default Text;\n","const ElementIDPrefix = {\n\tBall: 'bl',\n\tPlayer: 'pl',\n\tSquare: 'sq',\n\tEllipse: 'el',\n\tLine: 'ln',\n\tText: 'txt',\n\tPathPlayer: 'pp',\n\tPathBall: 'bp'\n}\n\nexport { ElementIDPrefix }","import Point from \"./Point\";\nimport Line from \"./Line\";\nimport { ElementIDPrefix } from \"./Constants\";\n\nclass AnimKeyFrame {\n\tconstructor(players=null, playerPaths=null, balls=null, ballPaths=null){\n\t\tthis.players = players;\n\t\tthis.playerPaths = playerPaths;\n\t\tthis.balls = balls;\n\t\tthis.ballPaths = ballPaths;\n\t}\n\n\tplayerPathID(index) {\n\t\treturn ElementIDPrefix.PathPlayer + index;\n\t}\n\n\tballPathID(index) {\n\t\treturn ElementIDPrefix.PathBall + index;\n\t}\n\n\tclone() {\n\t\treturn new AnimKeyFrame(\n\t\t\tthis.players.map(p => p.clone()),\n\t\t\tthis.players.map((p, index) => {\n\t\t\t\tlet p1 = new Point(p.x, p.y);\n\t\t\t\tlet p2 = new Point(p.x, p.y);\n\t\t\t\tlet c1 = new Point(p.x, p.y);\n\t\t\t\tlet c2 = new Point(p.x, p.y);\n\t\t\t\tlet path = new Line(\n\t\t\t\t\tthis.playerPathID(index), 99,\t// using 99 as edit color \n\t\t\t\t\tp1, p2, c1, c2,\n\t\t\t\t\tfalse, false, true, true\n\t\t\t\t);\n\t\t\t\treturn path;\n\t\t\t}),\n\t\t\tthis.balls.map(b => b.clone()),\n\t\t\tthis.balls.map((b, index) => {\n\t\t\t\tlet p1 = new Point(b.x, b.y);\n\t\t\t\tlet p2 = new Point(b.x, b.y);\n\t\t\t\tlet c1 = new Point(b.x, b.y);\n\t\t\t\tlet c2 = new Point(b.x, b.y);\n\t\t\t\tlet path = new Line(\n\t\t\t\t\tthis.ballPathID(index), 99,\t// using 99 as edit color \n\t\t\t\t\tp1, p2, c1, c2,\n\t\t\t\t\tfalse, false, true, true\n\t\t\t\t);\n\t\t\t\treturn path;\n\t\t\t})\n\t\t);\n\t}\n\n\tequalTo(kf) {\n\t\tif (this.players.length !== kf.players.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let i = 0; i < this.players.length; i++) {\n\t\t\tif (!this.players[i].equalTo(kf.players[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (this.balls.length !== kf.balls.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let i = 0; i < this.balls.length; i++) {\n\t\t\tif (!this.balls[i].equalTo(kf.balls[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nexport default AnimKeyFrame;\n","import Ball from \"./Ball\";\nimport Player from \"./Player\";\nimport Square from \"./Square\";\nimport Ellipse from \"./Ellipse\";\nimport Line from \"./Line\";\nimport Point from \"./Point\";\nimport Text from \"./Text\";\nimport AnimKeyFrame from \"./AnimKeyFrame\";\nimport { ElementIDPrefix } from \"./Constants\";\n\nclass PitchFutsal {\n\n\tconstructor() {\n\t\tthis.AnimKeyFrameCurrent = 0;\n\t\tthis.AnimKeyFrames = [];\n\n\t\tthis.squareID = -1;\n\t\tthis.squares = [];\n\t\tthis.ellipseID = -1;\n\t\tthis.ellipses = [];\n\t\tthis.lineID = -1;\n\t\tthis.lines = [];\n\t\tthis.textID = -1;\n\t\tthis.texts = [];\n\n\t\tthis._overlay = \"none\";\n\n\t\tthis.isModified = false;\n\t\tthis.onModified = null;\n\t}\n\n\tinitDefault(noPlayers, noPlayerColors, playerSize, noBalls, noBallColors, ballSize) {\n\t\tlet kf = new AnimKeyFrame(\n\t\t\tthis._initPlayers(noPlayers, noPlayerColors, playerSize),\n\t\t\tnull,\n\t\t\tthis._initBalls(noBalls, noBallColors, ballSize),\n\t\t\tnull\n\t\t);\n\t\tthis.AnimKeyFrames.push(kf);\n\t}\n\n\t_initPlayers(noPlayers, noPlayerColors, playerSize) {\n\t\tlet players = [];\n\t\tlet groupSize = Math.floor(noPlayers / noPlayerColors);\n\t\tfor (var i = 0; i < noPlayers; i++) {\n\t\t\tlet color = Math.floor(i / groupSize);\n\t\t\tlet number = groupSize - (i % groupSize);\n\t\t\tlet player = new Player(\n\t\t\t\tElementIDPrefix.Player + i, number, \"\", color,\n\t\t\t\tcolor * playerSize, 0,\n\t\t\t\t0,\n\t\t\t\tcolor * playerSize, 0,\n\t\t\t\tnumber\n\t\t\t);\n\t\t\tplayers.push(player);\n\t\t}\n\t\treturn players;\n\t}\n\n\t_initBalls(noBalls, noBallColors, ballSize) {\n\t\tlet balls = [];\n\t\tlet groupSize = Math.floor(noBalls / noBallColors);\n\t\tfor (var i = 0; i < noBalls; i++) {\n\t\t\tlet color = Math.floor(i / groupSize);\n\t\t\tlet ball = new Ball(\n\t\t\t\tElementIDPrefix.Ball + i, color,\n\t\t\t\tcolor * ballSize,0,\n\t\t\t\tcolor * ballSize,0\n\t\t\t);\n\t\t\tballs.push(ball);\n\t\t}\n\t\treturn balls;\n\t}\n\n\t_modified() {\n\t\tlet cp = new PitchFutsal();\n\t\tcp.isModified = true;\n\t\tcp.AnimKeyFrameCurrent = this.AnimKeyFrameCurrent;\n\t\tcp.AnimKeyFrames = this.AnimKeyFrames;\n\n\t\tcp.squareID = this.squareID;\n\t\tcp.squares = this.squares;\n\t\tcp.ellipseID = this.ellipseID;\n\t\tcp.ellipses = this.ellipses;\n\t\tcp.lineID = this.lineID;\n\t\tcp.lines = this.lines;\n\t\tcp.textID = this.textID;\n\t\tcp.texts = this.texts;\n\t\tcp._overlay = this.overlay;\n\t\t// trigger event modified\n\t\tif (null !== this.onModified) {\n\t\t\tthis.onModified(cp);\n\t\t}\n\t}\n\n\tplayersCurrentKeyFrame() {\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].players;\n\t}\n\n\tplayerPathsCurrentKeyFrame() {\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths;\n\t}\n\n\tplayersPreviousKeyFrame() {\n\t\tif (0 === this.AnimKeyFrameCurrent) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent-1].players;\n\t}\n\n\tanimKeyFrameAdd() {\n\t\tlet last = this.AnimKeyFrames.length - 1;\n\t\tlet beforeLast = last-1;\n\t\tif (beforeLast >= 0) {\n\t\t\t// Add check if there is diff between previous and last key frame, \n\t\t\t// forbid adding if no changes between last two frames\n\t\t\tif (this.AnimKeyFrames[last].equalTo(this.AnimKeyFrames[beforeLast])) {\n\t\t\t\tconsole.log(\"No change in data new add frame forbidden\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// clone last\n\t\tlet newKeyFrame = this.AnimKeyFrames[last].clone();\n\t\t// copy and add new\n\t\tthis.AnimKeyFrames = this.AnimKeyFrames.map(kf => kf);\n\t\tthis.AnimKeyFrames.push(newKeyFrame);\n\t\t// position to last key frame\n\t\tthis.AnimKeyFrameCurrent = this.AnimKeyFrames.length - 1;\n\t\tthis._modified();\n\t}\n\n\tanimKeyFrameNext() {\n\t\tlet next = this.AnimKeyFrameCurrent + 1;\n\t\tif (next >= this.AnimKeyFrames.length) {\n\t\t\treturn;\n\t\t}\n\t\tthis.AnimKeyFrameCurrent = next;\n\t\tthis._modified();\n\t}\n\n\tanimKeyFramePrevious() {\n\t\tif (0 === this.AnimKeyFrameCurrent) {\n\t\t\treturn;\n\t\t}\n\t\tthis.AnimKeyFrameCurrent--;\n\t\tthis._modified();\n\t}\n\n\t// note: only move current key frame player\n\tplayerMove(id, deltaX, deltaY) {\n\t\tlet players = this.playersCurrentKeyFrame().map(p => {\n\t\t\tif (id === p.id) {\n\t\t\t\tp.x += deltaX;\n\t\t\t\tp.y += deltaY;\n\t\t\t}\n\t\t\treturn p;\n\t\t});\n\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].players = players;\n\t\t// edit path end position\n\t\tif (this.AnimKeyFrameCurrent > 0) {\n\t\t\tlet playerPathID = id.replace(ElementIDPrefix.Player, ElementIDPrefix.PathPlayer);\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths = this.lineResizeP2(\n\t\t\t\tthis.playerPathsCurrentKeyFrame(),\n\t\t\t\tplayerPathID, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\t// TODO: edit path start position on previous key frame\n\t\tthis._modified();\n\t}\n\n\tplayerEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Player)) {\n\t\t\treturn null;\n\t\t}\n\t\t// Edit player data\n\t\tconst p = this.playersCurrentKeyFrame().find(p => id === p.id);\n\t\t// disable editing non placed players\n\t\tif (!p.isPlaced) {\n\t\t\treturn null;\n\t\t}\n\t\tconst editPlayer = {\n\t\t\tid: p.id,\n\t\t\tname: p.name,\n\t\t\tno: p.no\n\t\t}\n\t\treturn editPlayer;\n\t}\n\n\t// note: edit player attributes changes player on all key frames\n\tplayerEditDone(player) {\n\t\tthis.AnimKeyFrames = this.AnimKeyFrames.map(kf => {\n\t\t\tkf.players = kf.players.map(p => {\n\t\t\t\tif (player.id !== p.id) {\n\t\t\t\t\treturn p;\n\t\t\t\t}\n\t\t\t\tif (player.remove) {\n\t\t\t\t\tp.reset();\n\t\t\t\t} else {\n\t\t\t\t\tp.name = player.name;\n\t\t\t\t\tp.no = player.no;\n\t\t\t\t}\n\t\t\t\treturn p;\n\t\t\t});\n\t\t\treturn kf;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tballsCurrentKeyFrame() {\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].balls;\n\t}\n\n\tballPathsCurrentKeyFrame() {\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths;\n\t}\n\n\tballsPreviousKeyFrame() {\n\t\tif (0 === this.AnimKeyFrameCurrent) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.AnimKeyFrames[this.AnimKeyFrameCurrent-1].balls;\n\t}\n\n\t// note: only move current key frame ball\n\tballMove(id, deltaX, deltaY) {\n\t\tlet balls = this.ballsCurrentKeyFrame().map(b => {\n\t\t\tif (id === b.id) {\n\t\t\t\tb.x += deltaX;\n\t\t\t\tb.y += deltaY;\n\t\t\t}\n\t\t\treturn b;\n\t\t});\n\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].balls = balls;\n\t\t// edit path end position\n\t\tif (this.AnimKeyFrameCurrent > 0) {\n\t\t\tlet ballPathID = id.replace(ElementIDPrefix.Ball, ElementIDPrefix.PathBall);\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths = this.lineResizeP2(\n\t\t\t\tthis.ballPathsCurrentKeyFrame(),\n\t\t\t\tballPathID, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\tthis._modified();\n\t}\n\n\tlineNewID() {\n\t\tthis.lineID += 1;\n\t\treturn ElementIDPrefix.Line + this.lineID;\n\t}\n\n\tlineCreate(x,y, color, arrowStart, arrowEnd, isDashed) {\n\t\tlet l = new Line(\n\t\t\tthis.lineNewID(), color,\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tnew Point(x,y),\n\t\t\tarrowStart,\n\t\t\tarrowEnd,\n\t\t\tisDashed\n\t\t);\n\t\tthis.lines = this.lines.map((lx) => lx);\n\t\tthis.lines.push(l);\n\t\tthis._modified();\n\t\treturn l.id;\n\t}\n\n\tlineResizeP1(lines, id, deltaX, deltaY) {\n\t\treturn lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.resizeP1(deltaX,deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t}\n\n\tlineResizeP2(lines, id, deltaX, deltaY) {\n\t\treturn lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.resizeP2(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t}\n\n\t// TODO: remove for only delta resize\n\tlineResize(id, x2, y2) {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.resize(x2,y2);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tlineOrPathEdit(lines, pid, id, deltaX, deltaY) {\n\t\treturn lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.edit(pid, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t}\n\n\tlineEdit(pid, id, deltaX, deltaY) {\n\t\tif (id.startsWith(ElementIDPrefix.Line)) {\n\t\t\tthis.lines = this.lineOrPathEdit(\n\t\t\t\tthis.lines,\n\t\t\t\tpid, id, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\tif (id.startsWith(ElementIDPrefix.PathPlayer)) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].playerPaths = this.lineOrPathEdit(\n\t\t\t\tthis.playerPathsCurrentKeyFrame(),\n\t\t\t\tpid, id, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\tif (id.startsWith(ElementIDPrefix.PathBall)) {\n\t\t\tthis.AnimKeyFrames[this.AnimKeyFrameCurrent].ballPaths = this.lineOrPathEdit(\n\t\t\t\tthis.ballPathsCurrentKeyFrame(),\n\t\t\t\tpid, id, deltaX, deltaY\n\t\t\t);\n\t\t}\n\t\tthis._modified();\n\t}\n\n\t// remove empty lines\n\tlineCleanup() {\n\t\tthis.lines = this.lines.filter(l => !l.empty());\n\t\tthis._modified();\n\t}\n\n\tlineEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Line)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tif (id === l.id) {\n\t\t\t\tl.isEdit = true;\n\t\t\t}\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tlineEditEnd() {\n\t\tthis.lines = this.lines.map(l => {\n\t\t\tl.isEdit = false;\n\t\t\treturn l;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipseNewID() {\n\t\tthis.ellipseID += 1;\n\t\treturn ElementIDPrefix.Ellipse + this.ellipseID;\n\t}\n\n\tellipseCreate(x, y, color, isDashed) {\n\t\tlet el = new Ellipse(\n\t\t\tthis.ellipseNewID(), color,\n\t\t\tx,y,0,0,0,\n\t\t\tisDashed\n\t\t);\n\t\tthis.ellipses = this.ellipses.map((e) => e);\n\t\tthis.ellipses.push(el);\n\t\tthis._modified();\n\t\treturn el.id;\n\t}\n\n\tellipseResize(id, x2, y2, proportional) {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.resize(x2, y2, proportional);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipseEdit(corner, id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Ellipse)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tellipseRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Ellipse)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\t// remove empty ellipses\n\tellipseCleanup() {\n\t\tthis.ellipses = this.ellipses.filter(el => el.rx > 0 && el.ry > 0);\n\t\tthis._modified();\n\t}\n\n\tellipseEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Ellipse)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tif (id === el.id) {\n\t\t\t\tel.isEdit = true;\n\t\t\t}\n\t\t\treturn el;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tellipsesEditEnd() {\n\t\tthis.ellipses = this.ellipses.map(el => {\n\t\t\tel.isEdit = false;\n\t\t\treturn el;\n\t\t});\n\t}\n\n\tsquareNewID() {\n\t\tthis.squareID += 1;\n\t\treturn ElementIDPrefix.Square + this.squareID;\n\t}\n\n\tsquareCreate(x, y, color, isDashed) {\n\t\tlet sq = new Square(\n\t\t\tthis.squareNewID(), color,\n\t\t\tx,y,0,0,0,\n\t\t\tisDashed\n\t\t);\n\t\tthis.squares = this.squares.map((s) => s);\n\t\tthis.squares.push(sq);\n\t\tthis._modified();\n\t\treturn sq.id;\n\t}\n\n\tsquareResize(id, x2, y2, proportional) {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.resize(x2, y2, proportional);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\tsquareEdit(corner, id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Square)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.edit(corner, deltaX, deltaY);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t\treturn this.squares;\n\t}\n\n\tsquareRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Square)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\t// remove empty squares\n\tsquareCleanup() {\n\t\tthis.squares = this.squares.filter(sq => sq.width > 0 && sq.height > 0);\n\t\tthis._modified();\n\t}\n\n\tsquareEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Square)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tif (id === sq.id) {\n\t\t\t\tsq.isEdit = true;\n\t\t\t}\n\t\t\treturn sq;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\tsquareEditEnd() {\n\t\tthis.squares = this.squares.map(sq => {\n\t\t\tsq.isEdit = false;\n\t\t\treturn sq;\n\t\t});\n\t}\n\n\ttextNewID() {\n\t\tthis.textID += 1;\n\t\treturn ElementIDPrefix.Text + this.textID;\n\t}\n\n\ttextCreate(x, y, color, size) {\n\t\tlet tx = new Text(\n\t\t\tthis.textNewID(), color, size, \"\",\n\t\t\tx,y,0,\n\t\t\tfalse, true\n\t\t);\n\t\tthis.texts = this.texts.map((t) => t);\n\t\tthis.texts.push(tx);\n\t\tthis._modified();\n\t\treturn tx.id;\n\t}\n\n\ttextEditDone(id, text, bx, by, bwidth, bheight) {\n\t\tthis.texts = this.texts.map(t => {\n\t\t\tif (id === t.id) {\n\t\t\t\tt.isEdit = false;\n\t\t\t\tt.isTextEdit = false;\n\t\t\t\tt.text = text;\n\t\t\t\tt.bx = bx;\n\t\t\t\tt.by = by;\n\t\t\t\tt.bwidth = bwidth;\n\t\t\t\tt.bheight = bheight;\n\t\t\t}\n\t\t\treturn t;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\ttextEditStart(id) {\n\t\tif (!id.startsWith(ElementIDPrefix.Text)) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.isEdit = true;\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t\treturn true;\n\t}\n\n\ttextMove(id, deltaX, deltaY) {\n\t\tif (!id.startsWith(ElementIDPrefix.Text)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.move(deltaX, deltaY);\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\ttextRotate(id, posX, posY, snap) {\n\t\tif (!id.startsWith(ElementIDPrefix.Text)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.texts = this.texts.map(tx => {\n\t\t\tif (id === tx.id) {\n\t\t\t\ttx.rotate(posX, posY, snap);\n\t\t\t}\n\t\t\treturn tx;\n\t\t});\n\t\tthis._modified();\n\t}\n\n\teditTopLeft(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"tl\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"tl\",id, deltaX, deltaY);\n\t}\n\t\n\teditTopRight(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"tr\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"tr\",id, deltaX, deltaY);\n\t}\n\n\teditBottomLeft(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"bl\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"bl\",id, deltaX, deltaY);\n\t}\n\n\teditBottomRight(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"br\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"br\",id, deltaX, deltaY);\n\t}\n\n\teditMove(id, deltaX, deltaY) {\n\t\tthis.squareEdit(\"mv\",id, deltaX, deltaY);\n\t\tthis.ellipseEdit(\"mv\",id, deltaX, deltaY);\n\t\tthis.textMove(id, deltaX, deltaY);\n\t}\n\n\teditRotate(id, posX, posY, snap) {\n\t\tthis.squareRotate(id, posX, posY, snap);\n\t\tthis.ellipseRotate(id, posX, posY, snap);\n\t\tthis.textRotate(id, posX, posY, snap);\n\t}\n\n\tendAllEdits() {\n\t\tthis.lineEditEnd();\n\t\tthis.squareEditEnd();\n\t\tthis.ellipsesEditEnd();\n\t\t// TODO: Text end editing\n\t\tthis._modified();\n\t}\n\n\tget overlay() {\n\t\treturn this._overlay;\n\t}\n\n\tset overlay(value) {\n\t\tif (this._overlay === value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._overlay = value;\n\t\tthis._modified();\n\t}\n\n\toverlaySize() {\n\t\tswitch (this.overlay) {\n\t\t\tcase \"exercise\":\n\t\t\t\treturn {width:2800, height:2000};\n\t\t\tcase \"basketball\":\n\t\t\t\treturn {width:2800, height:1500}\n\t\t\tcase \"volleyball\":\n\t\t\t\treturn {width:1800, height:900}\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default PitchFutsal;","class DrawMode {\n\tconstructor() {\n\t\tthis._mode='select';\n\t\tthis._lineArrowStart = false;\n\t\tthis._lineArrowEnd = false;\n\t\tthis._lineDashed = false;\n\t\tthis._color = 0;\n\t\tthis._textSize = 2;\n\t\tthis._pitchOverlay = 'none';\n\t\tthis.onModified = null;\n\t}\n\n\t_modified() {\n\t\tlet dm = new DrawMode();\n\t\tdm._mode = this.mode;\n\t\tdm._lineArrowStart = this.lineArrowStart;\n\t\tdm._lineArrowEnd = this.lineArrowEnd;\n\t\tdm._lineDashed = this.lineDashed;\n\t\tdm._color = this.color;\n\t\tdm._textSize = this.textSize;\n\t\tdm._pitchOverlay = this.pitchOverlay;\n\t\t// trigger event modified\n\t\tif (null !== this.onModified) {\n\t\t\tthis.onModified(dm);\n\t\t}\n\t}\n\n\t// default modes\n\t// select\t- select / move\n\t// line\t\t- draw lines\n\t// square\t- draw square\n\t// ellipse\t- draw ellipse\n\t// text\t\t- draw text\n\tget modeOptions(){\n\t\treturn ['select','line','square','ellipse','text'];\n\t}\n\n\tget mode() {\n\t\treturn this._mode;\n\t}\n\n\tset mode(value) {\n\t\tthis._mode = value;\n\t\tthis._modified();\n\t}\n\n\tget lineArrowStart() {\n\t\treturn this._lineArrowStart;\n\t}\n\n\tset lineArrowStart(value) {\n\t\tthis._lineArrowStart = value;\n\t\tthis._modified();\n\t}\n\n\tget lineArrowEnd() {\n\t\treturn this._lineArrowEnd;\n\t}\n\n\tset lineArrowEnd(value) {\n\t\tthis._lineArrowEnd = value;\n\t\tthis._modified();\n\t}\n\n\tget lineDashed() {\n\t\treturn this._lineDashed;\n\t}\n\n\tset lineDashed(value) {\n\t\tthis._lineDashed = value;\n\t\tthis._modified();\n\t}\n\n\tget colorOptions() {\n\t\treturn ['#8b2323','#e7e739','#912cee','#04b804','#1d4ba0','#ee2c2c','#ff7f50','#56c6eb'];\n\t}\n\n\t// hardcoded edit color\n\tget editColor() {\n\t\treturn '#666666';\n\t}\n\n\t// hardcoded edit color index\n\tget editColorIndex() {\n\t\treturn 99;\n\t}\n\n\tget color() {\n\t\treturn this._color;\n\t}\n\n\tset color(value) {\n\t\tthis._color = value;\n\t\tthis._modified();\n\t}\n\n\tget textSizeOptions() {\n\t\treturn [\"Extra small\",\"Small\",\"Normal\",\"Large\",\"Extra large\"];\n\t}\n\n\tget textSize() {\n\t\treturn this._textSize;\n\t}\n\n\tset textSize(value) {\n\t\tthis._textSize = value;\n\t\tthis._modified();\n\t}\n\n\t// default pitch overlay options\n\t// 28x20, exercises pitch\n\t// 28x15, basketball court\n\t// 18x9, volleyball court\n\tget pitchOverlayOptions(){\n\t\treturn ['none','exercise','basketball','volleyball'];\n\t}\n\n\tget pitchOverlay() {\n\t\treturn this._pitchOverlay;\n\t}\n\tset pitchOverlay(value) {\n\t\tthis._pitchOverlay = value;\n\t\tthis._modified();\n\t}\n}\n\nexport default DrawMode;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Player from '../pitch/Player';\n\nclass PlayerEdit extends Component {\n\n\trenderPlayerName(name) {\n\t\tif (0 === name.length) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<text y=\"-70\">{name}</text>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst pl = this.props.player;\n\t\tconst editID = this.props.isEdit ? pl.id : null;\n\t\tconst editClassName = this.props.isEdit ? 'draggable' : null;\n\t\tconst className = 'player pc' + pl.color;\n\t\tconst transform = 'translate(' + pl.x + ' ' + pl.y + ')';\n\t\treturn (\n\t\t\t<g className={className} textAnchor=\"middle\" transform={transform}>\n\t\t\t\t<circle r=\"50\" className={editClassName} data-ref={editID} />\n\t\t\t\t<text className=\"number\" dominantBaseline=\"central\">{pl.no}</text>\n\t\t\t\t{this.renderPlayerName(pl.name)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nPlayerEdit.defaultProps = {\n\tplayer: null,\n\tisEdit: true\n}\n\nPlayerEdit.propTypes = {\n\tplayer: PropTypes.instanceOf(Player),\n\tisEdit: PropTypes.bool\n}\n\nexport default PlayerEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Ball from '../pitch/Ball';\n\nclass BallEdit extends Component {\n\n\tballImage() {\n\t\treturn (\n\t\t\t<g transform=\"translate(-30 -30)\">\n\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"60\" height=\"60\" viewBox=\"0 0 952 952\">\n\t\t\t\t\t<path d=\"M813 139A475 475 0 000 476a474 474 0 00476 476 474 474 0 00476-476 474 474 0 00-139-337zm-600-31l12-10a457 457 0 01370-60c-14 6-33 18-65 45a393 393 0 00-182 22c-31 11-55 23-71 33l-74-25c3 1 8-4 10-5zm433 119l-81 222-196 37-161-166c11-76 63-143 63-143s34-25 88-44a403 403 0 01174-20l113 114zM39 460c-5 32-6 66-3 100l-9-20a451 451 0 0136-252c-3 30-2 61 0 85-11 28-19 57-24 87zm40 173a418 418 0 018-239c33-28 77-44 101-52l158 164-16 179-155 52c-39-29-72-68-96-104zm470 260c-34 22-121 28-157 29a451 451 0 01-200-92c0-1-4-49-4-66l156-52 181 78 25 103h-1zm300-158c-27 38-59 75-98 102-36 25-85 34-128 41-3 1-44 8-45 6l-25-103 128-132 168-15 8 89-8 12zm3-135l-2 3-168 16-90-158 82-223 115 7a366 366 0 01118 169 434 434 0 01-55 186zm60-250a396 396 0 00-108-131c-5-25-19-65-57-107l2 2 7 5a459 459 0 01156 230v1z\"/>\n\t\t\t\t</svg>\n\t\t\t</g>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst b = this.props.ball;\n\t\tconst editID = this.props.isEdit ? b.id : null;\n\t\tconst editClassName = this.props.isEdit ? 'draggable' : null;\n\t\tconst className = 'ball bc' + b.color;\n\t\tconst transform = 'translate(' + b.x + ' ' + b.y + ')';\n\t\tconst ball = b.color === 4 ? this.ballImage() : null;\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<circle r=\"30\" className={editClassName} data-ref={editID} />\n\t\t\t\t{ball}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nBallEdit.defaultProps = {\n\tball: null,\n\tisEdit: true\n}\n\nBallEdit.propTypes = {\n\tball: PropTypes.instanceOf(Ball),\n\tisEdit: PropTypes.bool\n}\n\nexport default BallEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Point from '../pitch/Point';\n\nclass DragHandle extends Component {\n\trender() {\n\t\tconst half = this.props.size / 2;\n\t\tconst x = this.props.position.x - half;\n\t\tconst y = this.props.position.y - half;\n\t\treturn (\n\t\t\t<rect className=\"editCorner draggable\" x={x} y={y} width={this.props.size} height={this.props.size} data-ref={this.props.id} />\n\t\t);\n\t}\n}\n\nDragHandle.defaultProps = {\n\tid: \"\",\n\tsize: 40,\n\tposition: null\n}\n\nDragHandle.propTypes = {\n\tid: PropTypes.string,\n\tsize: PropTypes.number,\n\tposition: PropTypes.instanceOf(Point)\n}\n\nexport default DragHandle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '../pitch/Box';\n\nclass RotateHandle extends Component {\n\trender() {\n\t\tconst box = this.props.box;\n\t\tconst half = box.width / 2;\n\t\tconst x1 = box.x + half;\n\t\tconst y1 = box.y;\n\t\tconst x2 = x1;\n\t\tconst y2 = y1 - 2 * this.props.size;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<line x1={x1} y1={y1} x2={x2} y2={y2} />\n\t\t\t\t<circle className=\"editCorner draggable\" cx={x2} cy={y2} r={this.props.size/2} data-ref={\"edit-rt-\" + box.id} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nRotateHandle.defaultProps = {\n\tsize: 50,\n\tbox: null\n}\n\nRotateHandle.propTypes = {\n\tsize: PropTypes.number,\n\tbox: PropTypes.instanceOf(Box),\n}\n\nexport default RotateHandle;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '../pitch/Box';\nimport Point from '../pitch/Point';\nimport DragHandle from './DragHandle';\nimport RotateHandle from './RotateHandle';\n\nclass EditBox extends Component {\n\n\trenderHandles(box) {\n\t\tif (!this.props.showResize) {\n\t\t\treturn;\n\t\t}\n\t\tconst tl = new Point(box.x, box.y);\n\t\tconst tr = new Point(box.x + box.width, box.y);\n\t\tconst bl = new Point(box.x, box.y + box.height);\n\t\tconst br = new Point(box.x + box.width, box.y + box.height);\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<DragHandle id={\"edit-tl-\" + box.id} position={tl} />\n\t\t\t\t<DragHandle id={\"edit-tr-\" + box.id} position={tr} />\n\t\t\t\t<DragHandle id={\"edit-bl-\" + box.id} position={bl} />\n\t\t\t\t<DragHandle id={\"edit-br-\" + box.id} position={br} />\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\trender() {\n\t\tconst box = this.props.box;\n\t\tconst boxClass = this.props.showBox ? \"editBox draggable\" : \"editTransparent draggable\";\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect className={boxClass} x={box.x} y={box.y} width={box.width} height={box.height} data-ref={\"edit-mv-\" + box.id} />\n\t\t\t\t {this.renderHandles(box)}\n\t\t\t\t<RotateHandle box={box} />\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nEditBox.defaultProps = {\n\tbox: null,\n\tshowBox:false,\n\tshowResize:true\n}\n\nEditBox.propTypes = {\n\tbox: PropTypes.instanceOf(Box),\n\tshowBox: PropTypes.bool,\n\tshowResize: PropTypes.bool\n}\n\nexport default EditBox;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox'\nimport Square from '../pitch/Square';\n\nclass SquareEdit extends Component {\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={false} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst sq = this.props.square;\n\t\tconst className = (sq.dashed ? 'square dashed pc' : 'square pc') + sq.color;\n\t\tconst transform = 'rotate('+ sq.rotation + ',' + sq.cx + ',' + sq.cy + ')';\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<rect x={sq.x} y={sq.y} width={sq.width} height={sq.height} data-ref={sq.id} />\n\t\t\t\t{this.editBox(sq.isEdit, sq.box)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nSquareEdit.defaultProps = {\n\tsquare: null\n}\n\nSquareEdit.propTypes = {\n\tsquare: PropTypes.instanceOf(Square)\n}\n\nexport default SquareEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EditBox from './EditBox'\nimport Ellipse from '../pitch/Ellipse';\n\nclass EllipseEdit extends Component {\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={true} />\n\t\t)\n\t}\n\n\trender() {\n\t\tconst el = this.props.ellipse;\n\t\tconst className = (el.dashed ? 'ellipse dashed pc' : 'ellipse pc') + el.color;\n\t\tconst transform = 'rotate('+ el.rotation + ',' + el.cx + ',' + el.cy + ')';\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<ellipse cx={el.cx} cy={el.cy} rx={el.rx} ry={el.ry} data-ref={el.id} />\n\t\t\t\t{this.editBox(el.isEdit, el.box)}\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nEllipseEdit.defaultProps = {\n\tellipse: null\n}\n\nEllipseEdit.propTypes = {\n\tellipse: PropTypes.instanceOf(Ellipse)\n}\n\nexport default EllipseEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Line from '../pitch/Line';\nimport DragHandle from './DragHandle';\n\nclass LineEdit extends Component {\n\n\teditHandles(l, isPath) {\n\t\tif (!l.isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\t// path editing only shows control points\n\t\tif (isPath) {\n\t\t\treturn (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<DragHandle id={\"edit-l2-\" + l.id} position={l.c1} />\n\t\t\t\t\t<DragHandle id={\"edit-l3-\" + l.id} position={l.c2} />\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t\t// line editing shows all control points\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<DragHandle id={\"edit-l1-\" + l.id} position={l.p1} />\n\t\t\t\t<DragHandle id={\"edit-l2-\" + l.id} position={l.c1} />\n\t\t\t\t<DragHandle id={\"edit-l3-\" + l.id} position={l.c2} />\n\t\t\t\t<DragHandle id={\"edit-l4-\" + l.id} position={l.p2} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\trenderPath(p, key) {\n\t\tconst d = \"M \" + p.p1.x + \" \" + p.p1.y + \" C \" + p.c1.x + \" \" + p.c1.y + \" \" + p.c2.x + \" \" + p.c2.y + \" \" + p.p2.x + \" \" + p.p2.y;\n\t\tconst markerStart = p.arrowStart ? \"url(#arrowStart)\" : null;\n\t\tconst markerEnd = p.arrowEnd ? \"url(#arrowEnd)\" : null;\n\t\treturn (\n\t\t\t<path key={key} d={d} data-ref={p.id} markerStart={markerStart} markerEnd={markerEnd} />\n\t\t);\n\t}\n\n\trender() {\n\t\tconst l = this.props.line;\n\t\tconst lineType = this.props.isPath ? 'path' : 'line';\n\t\tconst className = lineType + (l.dashed ? ' dashed pc' : ' pc') + l.color;\n\t\tconst allPaths = l.paths().map((p, index) => this.renderPath(p, index.toString()));\n\t\treturn (\n\t\t\t<g className={className}>\n\t\t\t\t{allPaths}\n\t\t\t\t{this.editHandles(l, this.props.isPath)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nLineEdit.defaultProps = {\n\tline: null,\n\tisPath: false\n}\n\nLineEdit.propTypes = {\n\tline: PropTypes.instanceOf(Line),\n\tisPath: PropTypes.bool\n}\n\nexport default LineEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Text from '../pitch/Text';\nimport EditBox from './EditBox'\n\nclass TextEdit extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._selectionStart = 0;\n\t\tthis._selectionEnd = 0;\n\t\tthis._boxPadding = 10;\t\t\t\t\t// padding for text bounding box\n\t\tthis._editRef = React.createRef();\t\t// reference to editor\n\t\tthis._textRef = React.createRef();\t\t// reference to text\n\t\tthis._cursorRef = React.createRef();\t// reference to cursor\n\t\tthis._boxRef = React.createRef();\t\t// reference to text box\n\t\tthis.editStart = this.editStart.bind(this);\n\t\tthis.editChange = this.editChange.bind(this);\n\t\tthis.editKeyUp = this.editKeyUp.bind(this);\n\t\tthis.editEnd = this.editEnd.bind(this);\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (this.props.text.isTextEdit) {\n\t\t\tthis._editRef.current.focus();\n\t\t}\n\t}\n\n\t// remove all previous text elements\n\tremoveText() {\n\t\twhile (this._textRef.current.firstChild) {\n\t\t\tthis._textRef.current.removeChild(this._textRef.current.firstChild);\n\t\t}\n\t}\n\n\t// add text element\n\taddTextLine(ln) {\n\t\tlet tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n\t\ttspan.setAttribute('x','0');\n\t\ttspan.setAttribute('dy','1.2em'); \n\t\ttspan.textContent = ln;\n\t\tthis._textRef.current.appendChild(tspan);\n\t}\n\n\t// draw cursor line for text\n\tdrawCursor(x, y, height) {\n\t\tconst cln = this._cursorRef.current;\n\t\tcln.setAttribute('x1', x);\n\t\tcln.setAttribute('y1', y);\n\t\tcln.setAttribute('x2', x);\n\t\tcln.setAttribute('y2', y + height);\n\t}\n\n\t// draw bounding box around text\n\tdrawTextBoundingBox(bBox) {\n\t\tconst x = bBox.x - this._boxPadding;\n\t\tconst y = bBox.y - this._boxPadding;\n\t\tconst width = bBox.width + this._boxPadding * 2;\n\t\tconst height = bBox.height + this._boxPadding * 2;\n\n\t\tconst box = this._boxRef.current;\n\t\tbox.setAttribute('x', x);\n\t\tbox.setAttribute('y', y);\n\t\tbox.setAttribute('width', width);\n\t\tbox.setAttribute('height', height);\n\t}\n\n\teditStart(e) {\n\t\tthis._editRef.current.value = this.props.text.text;\n\t}\n\n\teditChange(e) {\n\t\tthis.removeText();\n\t\tlet txt = this._editRef.current.value;\n\t\tlet ln = '';\n\t\tfor (let i = 0; i < txt.length; i++) {\n\t\t\tln += txt[i];\n\t\t\tif ('\\n' === txt[i]) {\n\t\t\t\tthis.addTextLine(ln);\n\t\t\t\tln = '';\n\t\t\t}\n\t\t}\n\t\tif (ln.length > 0) {\n\t\t\tthis.addTextLine(ln);\n\t\t}\n\t}\n\n\teditShowCursor() {\n\t\tif (0 === this._selectionEnd) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tconst cr = this._textRef.current.getExtentOfChar(this._selectionEnd-1);\n\t\t\tthis.drawCursor(cr.x + cr.width, cr.y, cr.height);\n\n\t\t\tconst bb = this._textRef.current.getBBox();\n\t\t\tthis.drawTextBoundingBox(bb);\n\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\t\t\t\n\t\t}\n\t}\n\n\teditKeyUp(e) {\n\t\tthis._selectionStart = this._editRef.current.selectionStart;\n\t\tthis._selectionEnd = this._editRef.current.selectionEnd;\n\t\tthis.editShowCursor();\n\t}\n\n\teditEnd(e) {\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n        let tx = this._editRef.current.value.trim();\n\t\tvar bb = this._textRef.current.getBBox();\n\t\tconsole.log(bb);\n        this.removeText();\n\t\tthis.props.onEditDone(\n\t\t\tthis.props.text.id, tx, \n\t\t\tbb.x, bb.y,\n\t\t\tbb.width, bb.height\n\t\t);\n\t}\n\n\teditBox(isEdit, box) {\n\t\tif (!isEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<EditBox box={box} showBox={true} showResize={false} />\n\t\t)\n\t}\n\n\teditor(tx) {\n\t\tif (!tx.isTextEdit) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<line ref={this._cursorRef} strokeWidth=\"8\" />\n\t\t\t\t<rect ref={this._boxRef} className=\"editBox\" x=\"0\" y=\"0\" width={tx.width} height={tx.height} />\n\t\t\t\t<foreignObject>\n\t\t\t\t\t<textarea ref={this._editRef} onFocus={this.editStart} onInput={this.editChange} onKeyUp={this.editKeyUp} onBlur={this.editEnd}></textarea>\n\t\t\t\t</foreignObject>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n\n\trenderLines(tx){\n\t\t// don't render lines in edit mode, created manually\n\t\tif (tx.isTextEdit) {\n\t\t\treturn null;\n\t\t}\n\t\tlet lines = tx.text.split(\"\\n\");\n\t\treturn lines.map((ln, index) => {\n\t\t\treturn (\n\t\t\t\t<tspan key={index} data-ref={tx.id} x=\"0\" dy=\"1.2em\">{ln}</tspan>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst tx = this.props.text;\n        const className = 'txt'+ tx.size + ' pc' + tx.color;\n        let transform = 'translate('+ tx.x + ',' + tx.y + ')';\n        if (0 !== tx.rotation) {\n\t\t\tlet cx = tx.bx + tx.bwidth / 2;\n\t\t\tlet cy = tx.by + tx.bheight / 2;\n            transform += ' rotate('+ tx.rotation + ',' + cx + ',' + cy + ')';\n        }\n\t\treturn (\n\t\t\t<g className={className} transform={transform}>\n\t\t\t\t<text ref={this._textRef} data-ref={tx.id} xmlSpace=\"preserve\">\n\t\t\t\t\t{this.renderLines(tx)}\n\t\t\t\t</text>\n\t\t\t\t{this.editor(tx)}\n\t\t\t\t{this.editBox(tx.isEdit, tx.box)}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nTextEdit.defaultProps = {\n\ttext: null,\n\tonEditDone: null\n}\n\nTextEdit.propTypes = {\n\ttext: PropTypes.instanceOf(Text),\n\tonEditDone: PropTypes.func\n}\n\nexport default TextEdit;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nclass PlayerDialog extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tplayer: {id:\"\", name:\"\", no: 0}\n\t\t};\n\n\t\t// input references\n\t\tthis._refName = React.createRef();\n\t\tthis._refNumber = React.createRef();\n\n\t\t// events\n\t\tthis.openDialog = this.openDialog.bind(this);\n\t\tthis.close = this.close.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.remove = this.remove.bind(this);\n\t}\n\t\n\topenDialog(player) {\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\tplayer: player\n\t\t});\n\t}\n\n\tclose() {\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\tsave() {\n\t\tthis.close();\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onEditDone({\n\t\t\tid: this.state.player.id,\n\t\t\tremove: false,\n\t\t\tname: this._refName.current.value,\n\t\t\tno: Number.parseInt(this._refNumber.current.value)\n\t\t})\n\t}\n\n\tremove() {\n\t\tthis.close();\n\t\tif (null === this.props.onEditDone) {\n\t\t\treturn;\n\t\t}\n\t\tthis.props.onEditDone({\n\t\t\tid: this.state.player.id,\n\t\t\tremove: true\n\t\t})\n\t}\n\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Dialog open={this.state.open} onClose={this.close} aria-labelledby=\"form-dialog-title\">\n\t\t\t\t\t<DialogTitle id=\"form-dialog-title\">Edit player</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<TextField inputRef={this._refNumber} margin=\"dense\" id=\"playerNumber\" defaultValue={this.state.player.no} label=\"Number\" type=\"number\" fullWidth autoFocus />\n\t\t\t\t\t\t<TextField inputRef={this._refName} margin=\"dense\" id=\"playerName\" defaultValue={this.state.player.name} label=\"Name\" type=\"text\" fullWidth />\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={this.remove} color=\"primary\">Remove</Button>\n\t\t\t\t\t\t<Button onClick={this.close} color=\"primary\">Cancel</Button>\n\t\t\t\t\t\t<Button onClick={this.save} color=\"primary\">Save</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nPlayerDialog.defaultProps = {\n\tonEditDone: null\n}\n\nPlayerDialog.propTypes = {\n\tonEditDone: PropTypes.func\n}\n\nexport default PlayerDialog;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PitchFutsal from '../pitch/PitchFutsal';\nimport DrawMode from '../pitch/DrawMode';\nimport { withStyles } from '@material-ui/core/styles';\nimport PlayerEdit from './PlayerEdit'\nimport BallEdit from './BallEdit'\nimport SquareEdit from './SquareEdit'\nimport EllipseEdit from './EllipseEdit'\nimport LineEdit from './LineEdit'\nimport TextEdit from './TextEdit'\nimport PlayerDialog from './PlayerDialog'\n\n// this is for offset from toolbar and default class\nconst styles = theme => ({\n\toffset: {\n\t\tpaddingTop: theme.mixins.toolbar.minHeight,\n\t}\n})\n\n// define object types for mouse dragging\nconst DragObject = {\n\tNone: -1,\n\tPlayer: 0,\n\tBall: 1,\n\tCone: 2,\n\tGoal: 3,\n\tEditTopLeft: 4,\n\tEditTopRight: 5,\n\tEditBottomLeft: 6,\n\tEditBottomRight: 7,\n\tEditMove: 8,\n\tEditRotate: 9,\n\tEditLineP1: 10,\n\tEditLineC1: 11,\n\tEditLineC2: 12,\n\tEditLineP2: 13\n};\n\n// defines way to check draggable object\nconst DragObjectCheck = [\n\t{prefix: \"pl\", removePrefix: false, typ:  DragObject.Player},\n\t{prefix: \"bl\", removePrefix: false, typ:  DragObject.Ball},\n\t{prefix: \"edit-tl-\", removePrefix: true, typ:  DragObject.EditTopLeft},\n\t{prefix: \"edit-tr-\", removePrefix: true, typ:  DragObject.EditTopRight},\n\t{prefix: \"edit-bl-\", removePrefix: true, typ:  DragObject.EditBottomLeft},\n\t{prefix: \"edit-br-\", removePrefix: true, typ:  DragObject.EditBottomRight},\n\t{prefix: \"edit-mv-\", removePrefix: true, typ:  DragObject.EditMove},\n\t{prefix: \"edit-rt-\", removePrefix: true, typ:  DragObject.EditRotate},\n\t{prefix: \"edit-l1-\", removePrefix: true, typ:  DragObject.EditLineP1},\n\t{prefix: \"edit-l2-\", removePrefix: true, typ:  DragObject.EditLineC1},\n\t{prefix: \"edit-l3-\", removePrefix: true, typ:  DragObject.EditLineC2},\n\t{prefix: \"edit-l4-\", removePrefix: true, typ:  DragObject.EditLineP2}\n];\n\n\nclass PitchEdit extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._editRef = React.createRef();\t// reference to editor container\n\t\tthis._bgRef = React.createRef();\t// background reference to get client size of pitch for editing\n\t\tthis._playerDialogRef = React.createRef(); // edit player dialog reference\n\t\tthis._orgWidth = this.props.viewBoxRight - this.props.viewBoxLeft;\n\t\tthis._orgHeight = this.props.viewBoxBottom - this.props.viewBoxTop;\n\t\tthis._pitch = this.props.pitch;\n\n\t\t// mouse drag init\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t\tthis._mouseX = 0;\n\t\tthis._mouseY = 0;\n\n\t\t// add events\n\t\tthis.hContextMenu = this.hContextMenu.bind(this);\n\t\tthis.hMouseDown = this.hMouseDown.bind(this);\n\t\tthis.hMouseUp = this.hMouseUp.bind(this);\n\t\tthis.hMouseMove = this.hMouseMove.bind(this);\n\t\tthis.textEditDone = this.textEditDone.bind(this);\n\t\t\n\t\t// callbacks\n\t\tthis.playerEditDone = this.playerEditDone.bind(this);\n\t}\n\n\tgetScale() {\n\t\tconst box = this._bgRef.current.getBoundingClientRect();\n\t\treturn {\n\t\t\tX: this._orgWidth / box.width,\n\t\t\tY: this._orgHeight / box.height\n\t\t}\n\t}\n\n\tgetRealPosition(e) {\n\t\tlet scale = this.getScale();\t// TODO: reconsider scale\n\t\tlet box = this._bgRef.current.getBoundingClientRect();\n \t\tlet x = e.clientX - box.left;\t//x position within the element.\n  \t\tlet y = e.clientY - box.top; \t//y position within the element.\n\t\tlet realPosition = {\n\t\t\tX: x * scale.X,\n\t\t\tY: y * scale.Y\n\t\t}\n\t\treturn realPosition;\n\t}\n\n\tresetMouseDrag(e) {\n\t\tthis._mouseX = e.clientX;\n\t\tthis._mouseY = e.clientY;\n\t}\n\t\n\tisDragStarted(e) {\n\t\tif (0 !== e.button) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!e.target.classList.contains('draggable')) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._dragNode = e.target.getAttribute(\"data-ref\");\n\t\tif (null === this._dragNode) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.resetMouseDrag(e);\n\n\t\t// get drag object\n\t\tthis._dragObjectType = DragObject.None;\n\t\tfor (const chk of DragObjectCheck ) {\n\t\t\tif (!this._dragNode.startsWith(chk.prefix)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._dragObjectType = chk.typ;\n\t\t\tif (chk.removePrefix) {\n\t\t\t\tthis._dragNode = this._dragNode.replace(chk.prefix,\"\");\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t\n\tplayerEditStarted(editNode) {\n\t\tconst editPlayer = this.props.pitch.playerEditStart(editNode);\n\t\tif (null === editPlayer) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._playerDialogRef.current.openDialog(editPlayer);\n\t\treturn true;\n\t}\n\n\t// player edit dialog callback\n\tplayerEditDone(player) {\n\t\tthis.props.pitch.playerEditDone(player);\n\t}\n\n\tobjectDrag(posX, posY, deltaX, deltaY, snap) {\n\t\tconst p = this.props.pitch;\n\t\tswitch (this._dragObjectType) {\n\t\t\tcase DragObject.Player:\n\t\t\t\tp.playerMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.Ball:\n\t\t\t\tp.ballMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopLeft:\n\t\t\t\tp.editTopLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopRight:\n\t\t\t\tp.editTopRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomLeft:\n\t\t\t\tp.editBottomLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomRight:\n\t\t\t\tp.editBottomRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditMove:\n\t\t\t\tp.editMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditRotate:\n\t\t\t\tp.editRotate(this._dragNode, posX, posY, snap);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP1:\n\t\t\t\tp.lineEdit('p1', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC1:\n\t\t\t\tp.lineEdit('c1', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC2:\n\t\t\t\tp.lineEdit('c2', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP2:\n\t\t\t\tp.lineEdit('p2', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Invalid drag object type\", this._dragObjectType, this._dragNode);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thContextMenu(e) {\n\t\tif (this.props.drawMode.mode !== 'select') {\n\t\t\treturn;\n\t\t}\n\t\tlet id = e.target.getAttribute(\"data-ref\");\n\t\tif (null === id) {\n\t\t\treturn;\n\t\t}\n\t\tconst p = this.props.pitch;\n\t\tif (this.playerEditStarted(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.squareEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.ellipseEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.lineEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.textEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t}\n\n\thMouseDown(e) {\n\t\tlet pos = this.getRealPosition(e);\n\t\tconst dm = this.props.drawMode;\n\t\tconst p = this.props.pitch;\n\t\tswitch (dm.mode) {\n\t\t\tcase 'line':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.lineCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineArrowStart, dm.lineArrowEnd, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.squareCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.ellipseCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.textCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.textSize\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tif (this.isDragStarted(e)) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thMouseUp(e) {\n\t\te.preventDefault();\n\t\tconst p = this.props.pitch;\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tp.lineCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tp.squareCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tp.ellipseCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tlet scale = this.getScale();\n\t\t\t\tlet deltaX = (e.clientX - this._mouseX) * scale.X;\n\t\t\t\tlet deltaY = (e.clientY - this._mouseY) * scale.Y;\n\t\t\t\tthis.resetMouseDrag(e);\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, deltaX, deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t\t// Reset editing\n\t\tif (0 === e.button && this._dragObjectType === DragObject.None) {\n\t\t\tp.endAllEdits();\n\t\t}\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t}\n\n\thMouseMove(e) {\n\t\tif (null == this._dragNode) {\n\t\t\treturn;\n\t\t}\n\t\tconst p = this.props.pitch;\n\t\te.preventDefault();\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tp.lineResize(this._dragNode, pos.X, pos.Y);\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tp.squareResize(this._dragNode, pos.X, pos.Y, isShift);\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tp.ellipseResize(this._dragNode, pos.X, pos.Y, isShift);\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tlet scale = this.getScale();\n\t\t\t\tlet deltaX = (e.clientX - this._mouseX) * scale.X;\n\t\t\t\tlet deltaY = (e.clientY - this._mouseY) * scale.Y;\n\t\t\t\tthis.resetMouseDrag(e);\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, deltaX, deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\ttextEditDone(id, text, bx, by, bwidth, bheight) {\n\t\tthis.props.pitch.textEditDone(id, text, bx, by, bwidth, bheight);\n\t}\n\n\t// return current SVG in editor\n\t// TODO: Cleanup unused players and balls\n\tgetSVG() {\n\t\treturn {\n\t\t\twidth: this._orgWidth,\n\t\t\theight: this._orgHeight,\n\t\t\tsvgText: this._editRef.current.children[0].outerHTML\n\t\t}\n\t}\n\n\trenderPlayers(players, isEdit) {\n\t\tif (null === players) {\n\t\t\treturn null;\n\t\t}\n\t\tconst keyPrefix = isEdit ? \"ed\" : \"\";\n\t\treturn players.map((pl, index) => {\n\t\t\treturn (\n\t\t\t\t<PlayerEdit key={keyPrefix + index.toString()} player={pl} isEdit={isEdit} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderBalls(balls, isEdit){\n\t\tif (null === balls) {\n\t\t\treturn null;\n\t\t}\n\t\tconst keyPrefix = isEdit ? \"ed\" : \"\";\n\t\treturn balls.map((b, index) => {\n\t\t\treturn (\n\t\t\t\t<BallEdit key={keyPrefix + index.toString()} ball={b} isEdit={isEdit} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderSquares(squares){\n\t\treturn squares.map((s, index) => {\n\t\t\treturn (\n\t\t\t\t<SquareEdit key={index.toString()} square={s} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderEllipses(ellipses){\n\t\treturn ellipses.map((el, index) => {\n\t\t\treturn (\n\t\t\t\t<EllipseEdit key={index.toString()} ellipse={el} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderLines(lines, isPath){\n\t\tif (null === lines) {\n\t\t\treturn null;\n\t\t}\n\t\tconst keyPrefix = isPath ? \"ph\" : \"\";\n\t\treturn lines.map((l, index) => {\n\t\t\t// don't render lines that are single point\n\t\t\tif (l.empty()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<LineEdit key={keyPrefix + index.toString()} line={l} isPath={isPath} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderTexts(texts){\n\t\treturn texts.map((tx, index) => {\n\t\t\treturn (\n\t\t\t\t<TextEdit key={index.toString()} text={tx} onEditDone={this.textEditDone} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderPitchOverlay(){\n\t\tconst o = this.props.pitch.overlaySize();\n\t\tif (null === o) {\n\t\t\treturn null;\n\t\t}\n\t\tconst posX = (this._orgWidth - o.width) / 2;\n\t\tconst posY = (this._orgHeight - o.height) / 2;\n\t\tconst transform = 'translate(' + posX + ' ' + posY + ')';\n\t\treturn (<rect width={o.width} height={o.height} transform={transform} fill=\"none\" />);\n\t}\n\n\tgeneratePicthStyles() {\n\t\t// default colors list\n\t\tconst colors = this.props.drawMode.colorOptions.map((col, index) => {\n\t\t\treturn '.pc'+ index +' { fill: '+col+'; stroke: '+ col +'; }';\n\t\t});\n\n\t\t// edit color\n\t\tconst allColors = colors.concat([\n\t\t\t'.pc' + this.props.drawMode.editColorIndex  + ' { fill: '+ this.props.drawMode.editColor +'; stroke: '+ this.props.drawMode.editColor +'; }'\n\t\t]);\n\n\t\treturn allColors.concat([\n\t\t\t'.bc0 { fill: #ffa500; }',\n\t\t\t'.bc1 { fill: #cc3333; }',\n\t\t\t'.bc2 { fill: #222333; }',\n\t\t\t'.bc3 { fill: #0000ff; }',\n\t\t\t'.bc4 { fill: #ffffff; }',\n\t\t\t'.bc4 svg { fill: #000000; }',\n\t\t\t'#texts { font-family: sans-serif; font-size: 10em; cursor: default; user-select: none; }',\n\t\t\t'.txt0 text { font-size: 0.5em; }',\n\t\t\t'.txt1 text { font-size: 0.8em; }',\n\t\t\t'.txt2 text { font-size: 1em; }',\n\t\t\t'.txt3 text { font-size: 1.5em; }',\n\t\t\t'.txt4 text { font-size: 2em; }',\n\t\t\t'.player { pointer-events: none; }',\n\t\t\t'.player text { font-family: sans-serif; fill: black; }',\n\t\t\t'.player text.number { fill: white; }',\n\t\t\t'.dashed { stroke-dasharray: 20; }',\n\t\t\t'.square { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t'.ellipse { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t'.line { stroke-width: 12; }',\n\t\t\t'.line path { fill: none; stroke-width: 12; }',\n\t\t\t'.path { stroke-width: 6; }',\n\t\t\t'.path path { fill: none; stroke-width: 6; }',\n\t\t\t'.draggable { cursor: move; pointer-events: all;}',\n\t\t\t'.editBox { fill: none; stroke-width: 8; stroke-opacity: 1; }',\n\t\t\t'.editTransparent { fill: none; stroke-width: 0; }',\n\t\t\t'.editCorner { fill: red; stroke-width: 0; stroke-opacity: 1; }'\n\t\t]);\n\t}\n\n\trender() {\n\t\tconst viewBox = this.props.viewBoxLeft.toString() + ' ' + this.props.viewBoxTop.toString() + ' ' + this.props.viewBoxRight.toString() + ' ' + this.props.viewBoxBottom.toString()\n\n\t\t// default class is full screen width and height with padding for menu height\n\t\tconst pitchClasses = \"pitch \" + this.props.classes.offset;\n\n\t\t// Calculate pitch position in viewBox\n\t\tconst pitchLeft = (this._orgWidth - 4000) / 2; // Goals are relative to pitch no need to take them in calc\n\t\tconst pitchTop = (this._orgHeight - 2000) / 2;\n\t\tconst pitchTransform = 'translate(' + pitchLeft + ' ' + pitchTop + ')';\n\n\t\t// calculate players position in viewbox\n\t\tconst playersLeft = pitchLeft + 50;\n\t\tconst playersTop = pitchTop + 2000 + 50 + 25;\n\t\tconst playersTransform = 'translate(' + playersLeft + ' ' + playersTop + ')';\n\n\t\t// calculate balls position in viewBox\n\t\tconst ballsLeft = pitchLeft + 1050\n\t\tconst ballsTop = pitchTop + 2000 + 90;\n\t\tconst ballsTransform = 'translate(' + ballsLeft + ' ' + ballsTop + ')'; // \"translate(1200 2210)\"\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t<div ref={this._editRef} className={pitchClasses}>\n\t\t\t\t<svg xmlns='http://www.w3.org/2000/svg' viewBox={viewBox} onContextMenu={this.hContextMenu} onMouseDown={this.hMouseDown} onMouseUp={this.hMouseUp} onMouseMove={this.hMouseMove}>\n\t\t\t\t\t<style>\n\t\t\t\t\t\t{this.generatePicthStyles()}\n\t\t\t\t\t</style>\n\t\t\t\t\t<pattern id=\"goal-net\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" stroke=\"black\" patternUnits=\"userSpaceOnUse\">\n\t\t\t\t\t\t<line x1=\"0\" x2=\"20\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t\t<line x1=\"20\" x2=\"00\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t</pattern>\n\t\t\t\t\t<marker id=\"arrowEnd\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M0,0 L0,6 L9,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<marker id=\"arrowStart\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M9,0 L9,6 L0,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<g id=\"background\" ref={this._bgRef}>\n\t\t\t\t\t\t<rect width={this._orgWidth} height={this._orgHeight} fill=\"#b7b7b7\" fillOpacity=\"0.5\" />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitch\" transform={pitchTransform} fill=\"#0280c6\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t<rect width=\"4000\" height=\"2000\" />\n\t\t\t\t\t\t<line x1=\"2000\" x2=\"2000\" y1=\"0\" y2=\"2000\" />\n\t\t\t\t\t\t<circle r=\"300\" cx=\"2000\" cy=\"1000\" fill=\"none\" />\n\t\t\t\t\t\t<circle r=\"12\" cx=\"2000\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t<g id=\"corner_marks\">\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M25,0 a25,25 0 0,1 -25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M4000,25 a25,25 0 0,1 -25,-25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,1975 a25,25 0 0,1 25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3975,2000 a25,25 0 0,1 25,-25\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"substitition-zones\">\n\t\t\t\t\t\t\t<line x1=\"1000\" x2=\"1000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"1500\" x2=\"1500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"2500\" x2=\"2500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"3000\" x2=\"3000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left\">\n\t\t\t\t\t\t\t<line x1=\"500\" x2=\"500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"600\" x2=\"600\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"600\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,242 a600,600 0 0,1 600,600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M600,1158 a600,600 0 0,1 -600,600\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t\t<g id=\"goal-left\">\n\t\t\t\t\t\t\t\t<rect width=\"100\" height=\"300\" x=\"-100\" y=\"850\" fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" />\n\t\t\t\t\t\t\t\t<line x1=\"0\" x2=\"0\" y1=\"850\" y2=\"1150\" />\n\t\t\t\t\t\t\t\t<line x1=\"0\" x2=\"0\" y1=\"850\" y2=\"1150\" stroke=\"red\" strokeDasharray=\"20\" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"1000\" cy=\"1000\"/>\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right\">\n\t\t\t\t\t\t\t<line x1=\"3500\" x2=\"3500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"3400\" x2=\"3400\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3400\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,842 a600,600 0 0,1 600,-600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,1158 a600,600 0 0,0 600,600\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t\t<g id=\"goal-right\">\n\t\t\t\t\t\t\t\t<rect width=\"100\" height=\"300\" x=\"4000\" y=\"850\" fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" />\n\t\t\t\t\t\t\t\t<line x1=\"4000\" x2=\"4000\" y1=\"850\" y2=\"1150\" />\n\t\t\t\t\t\t\t\t<line x1=\"4000\" x2=\"4000\" y1=\"850\" y2=\"1150\" stroke=\"red\" strokeDasharray=\"20\" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3000\" cy=\"1000\" />\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitchOverlay\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t{this.renderPitchOverlay()}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"ellipses\">{this.renderEllipses(this.props.pitch.ellipses)}</g>\n\t\t\t\t\t<g id=\"squares\">{this.renderSquares(this.props.pitch.squares)}</g>\n\t\t\t\t\t<g id=\"players\" transform={playersTransform} fontSize=\"50\">\n\t\t\t\t\t\t{this.renderLines(this.props.pitch.playerPathsCurrentKeyFrame(), true)}\n\t\t\t\t\t\t{this.renderPlayers(this.props.pitch.playersPreviousKeyFrame(), false)}\n\t\t\t\t\t\t{this.renderPlayers(this.props.pitch.playersCurrentKeyFrame(), true)}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"balls\" transform={ballsTransform}>\n\t\t\t\t\t\t{this.renderLines(this.props.pitch.ballPathsCurrentKeyFrame(), true)}\n\t\t\t\t\t\t{this.renderBalls(this.props.pitch.ballsPreviousKeyFrame(), false)}\n\t\t\t\t\t\t{this.renderBalls(this.props.pitch.ballsCurrentKeyFrame(), true)}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"lines\">{this.renderLines(this.props.pitch.lines, false)}</g>\n\t\t\t\t\t<g id=\"texts\">{this.renderTexts(this.props.pitch.texts)}</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<PlayerDialog ref={this._playerDialogRef} onEditDone={this.playerEditDone} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nPitchEdit.defaultProps = {\n\tpitch: null,\n\tdrawMode: null,\n\tviewBoxLeft: 0,\n\tviewBoxTop: 0,\n\tviewBoxRight: 4500,\n\tviewBoxBottom: 2500\n}\n\nPitchEdit.propTypes = {\n\tpitch: PropTypes.instanceOf(PitchFutsal),\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\tviewBoxLeft: PropTypes.number,\n\tviewBoxTop: PropTypes.number,\n\tviewBoxRight: PropTypes.number,\n\tviewBoxBottom: PropTypes.number\n}\n\nexport default withStyles(styles, { withTheme: true })(PitchEdit);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Divider from '@material-ui/core/Divider';\nimport Collapse from '@material-ui/core/Collapse';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Switch from '@material-ui/core/Switch';\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport { CursorDefault, VectorLine, ShapeSquarePlus, ShapeOvalPlus, ArrowLeft, ArrowRight, ArrowLeftRight, Minus, DotsHorizontal } from 'mdi-material-ui'\n\nclass DrawMenu extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\tlineArrows: false,\n\t\t\tlinePattern: false,\n\t\t\tpitchOverlays: false,\n\t\t\ttextSizes: false\n\t\t}\n\n\t\tthis.open = this.open.bind(this);\n\t\tthis.close = this.close.bind(this);\n\n\t\tthis.lineArrowsToggle = this.lineArrowsToggle.bind(this);\n\t\tthis.lineArrowEndToggle = this.lineArrowEndToggle.bind(this);\n\t\tthis.lineArrowStartToggle = this.lineArrowStartToggle.bind(this);\n\n\t\tthis.linePatternToggle = this.linePatternToggle.bind(this);\n\t\tthis.lineDashedOn = this.lineDashedOn.bind(this);\n\t\tthis.lineDashedOff = this.lineDashedOff.bind(this);\n\n\t\tthis.pitchOverlaysToggle = this.pitchOverlaysToggle.bind(this); \n\t\tthis.pitchOverlayOnChange = this.pitchOverlayOnChange.bind(this);\n\n\t\tthis.colorSelect = this.colorSelect.bind(this);\n\n\t\tthis.textSizesToggle = this.textSizesToggle.bind(this);\n\t\tthis.textSizeSelected = this.textSizeSelected.bind(this);\n\t}\n\n\topen() {\n\t\tthis.setState({open:true});\n\t}\n\n\tclose(e) {\n\t\t// read from \"data-value\" attribute\n\t\tlet mode = e.currentTarget.dataset.value;\n\t\tif (mode) {\n\t\t\tthis.props.drawMode.mode = mode;\n\t\t}\n\t\t// close sub menus\n\t\tthis.setState({\n\t\t\topen:false,\n\t\t\tlineArrows: false,\n\t\t\tlinePattern: false,\n\t\t\tpitchOverlays: false,\n\t\t\ttextSizes: false\n\t\t});\n\t}\n\n\tlineArrowsToggle() {\n\t\tthis.setState({\n\t\t\tlineArrows: !this.state.lineArrows\n\t\t});\n\t}\n\n\tlineArrowStartToggle() {\n\t\tthis.props.drawMode.lineArrowStart = !this.props.drawMode.lineArrowStart\n\t}\n\n\tlineArrowEndToggle() {\n\t\tthis.props.drawMode.lineArrowEnd = !this.props.drawMode.lineArrowEnd\n\t}\n\n\tlineArrowsIcon() {\n\t\tconst dm = this.props.drawMode;\n\t\tif (dm.lineArrowStart && dm.lineArrowEnd) {\n\t\t\treturn (<ArrowLeftRight />);\n\t\t}\n\t\tif (!dm.lineArrowStart && dm.lineArrowEnd) {\n\t\t\treturn (<ArrowRight />);\n\t\t}\n\t\tif (dm.lineArrowStart && !dm.lineArrowEnd) {\n\t\t\treturn (<ArrowLeft />);\n\t\t}\n\t\treturn (<Minus />);\n\t}\n\n\tlinePatternToggle() {\n\t\tthis.setState({\n\t\t\tlinePattern: !this.state.linePattern\n\t\t});\n\t}\n\n\tlineDashedOn() {\n\t\tthis.props.drawMode.lineDashed = true;\n\t\tthis.setState({\n\t\t\tlinePattern: false\n\t\t});\n\t}\n\n\tlineDashedOff() {\n\t\tthis.props.drawMode.lineDashed = false;\n\t\tthis.setState({\n\t\t\tlinePattern: false\n\t\t});\n\t}\n\n\tlinePatternIcon() {\n\t\tif (this.props.drawMode.lineDashed) {\n\t\t\treturn (<DotsHorizontal />);\n\t\t}\n\t\treturn (<Minus />);\n\t}\n\n\tpitchOverlaysRender() {\n\t\treturn this.props.drawMode.pitchOverlayOptions.map((txt, index) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={index} control={<Radio />} label={txt} value={txt} style={{marginLeft:0}} />\n\t\t\t);\n\t\t});\n\t}\n\n\tpitchOverlaysToggle() {\n\t\tthis.setState({\n\t\t\tpitchOverlays: !this.state.pitchOverlays\n\t\t});\n\t}\n\n\tpitchOverlayOnChange(event) {\n\t\tthis.props.drawMode.pitchOverlay = event.target.value;\n\t\tthis.setState({\n\t\t\tpitchOverlays: false,\n\t\t\topen: false\n\t\t});\n\t}\n\n\tcolorSelect(e) {\n\t\tthis.close(e);\n\t\tthis.props.paletteDialogRef().Show();\n\t}\n\n\ttextSizesToggle() {\n\t\tthis.setState({\n\t\t\ttextSizes: !this.state.textSizes\n\t\t});\n\t}\n\n\ttextSizeSelected(e) {\n\t\tlet sz = e.target.value;\n\t\tif (sz) {\n\t\t\tthis.props.drawMode.textSize = parseInt(sz);\n\t\t}\n\t\tthis.textSizesToggle();\n\t}\n\n\ttextSizeItemsRender() {\n\t\treturn this.props.drawMode.textSizeOptions.map((txt, index) => {\n\t\t\treturn (\n\t\t\t\t<FormControlLabel key={index} control={<Radio />} label={txt} value={index} style={{marginLeft:0}} />\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst arrowsIcon = this.lineArrowsIcon();\n\t\tconst patternIcon = this.linePatternIcon();\n\n\t\tconst allColors = this.props.drawMode.colorOptions;\n\t\tconst colorSelected = allColors[this.props.drawMode.color];\n\t\tconst colorNameSelected = \"Color \" + this.props.drawMode.color;\n\n\t\treturn (\n\t\t<Menu id=\"drawingMenu\" anchorEl={this.props.anchorEl} keepMounted open={this.state.open} onClose={this.close}>\n\t\t\t<MenuItem data-value=\"select\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<CursorDefault />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Select / Move\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem onClick={this.pitchOverlaysToggle}>\n\t\t\t\t<ListItemText primary=\"Pitch overlay\" />\n\t\t\t\t{this.state.pitchOverlays ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.pitchOverlays} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<RadioGroup name=\"radio-pitch-overlays\" value={this.props.drawMode.pitchOverlay} onChange={this.pitchOverlayOnChange}>\n\t\t\t\t\t{this.pitchOverlaysRender()}\n\t\t\t\t</RadioGroup>\n\t\t\t</Collapse>\n\t\t\t<Divider />\n\t\t\t<MenuItem onClick={this.colorSelect}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<PaletteIcon style={{ color: colorSelected }} />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary={colorNameSelected} />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"line\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<VectorLine />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw line\" />\n\t\t\t</MenuItem>\n\t\t\t<MenuItem onClick={this.lineArrowsToggle}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t{arrowsIcon}\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Line arrows\" />\n\t\t\t\t{this.state.lineArrows ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.lineArrows} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<List component=\"div\" disablePadding>\n\t\t\t\t\t<MenuItem onClick={this.lineArrowEndToggle}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<ArrowRight />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"End\" />\n\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t<Switch edge=\"end\" onChange={this.lineArrowEndToggle} checked={this.props.drawMode.lineArrowEnd} />\n\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem onClick={this.lineArrowStartToggle}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<ArrowLeft />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Start\" />\n\t\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t\t<Switch edge=\"end\" onChange={this.lineArrowStartToggle} checked={this.props.drawMode.lineArrowStart} />\n\t\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</List>\n\t\t\t</Collapse>\n\t\t\t<MenuItem onClick={this.linePatternToggle}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t{patternIcon}\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Line pattern\" />\n\t\t\t\t{this.state.linePattern ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.linePattern} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<List component=\"div\" disablePadding>\n\t\t\t\t\t<MenuItem onClick={this.lineDashedOff}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<Minus />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Solid\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem onClick={this.lineDashedOn}>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<DotsHorizontal />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary=\"Dashed\" />\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</List>\n\t\t\t</Collapse>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"square\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<ShapeSquarePlus />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw square\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"ellipse\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<ShapeOvalPlus />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Draw ellipse\" />\n\t\t\t</MenuItem>\n\t\t\t<Divider />\n\t\t\t<MenuItem data-value=\"text\" onClick={this.close}>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<TextFieldsIcon />\n\t\t\t\t</ListItemIcon>\n\t\t\t\t<ListItemText primary=\"Write text\" />\n\t\t\t</MenuItem>\n\t\t\t<MenuItem onClick={this.textSizesToggle}>\n\t\t\t\t<ListItemText primary=\"Text size\" />\n\t\t\t\t{this.state.textSizes ? <ExpandLess /> : <ExpandMore />}\n\t\t\t</MenuItem>\n\t\t\t<Collapse in={this.state.textSizes} timeout=\"auto\" unmountOnExit>\n\t\t\t\t<RadioGroup name=\"radio-pitch-textSize\" value={this.props.drawMode.textSize} onChange={this.textSizeSelected}>\n\t\t\t\t\t{this.textSizeItemsRender()}\n\t\t\t\t</RadioGroup>\n\t\t\t</Collapse>\n\t\t</Menu>\n\t\t);\n\t}\n}\n\nDrawMenu.defaultProps = {\n\tanchorEl: null,\n\tdrawMode: null,\n\tpaletteDialogRef: null\n}\n\nDrawMenu.propTypes = {\n\tanchorEl: PropTypes.func,\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\tpaletteDialogRef: PropTypes.func\n};\n\nexport default DrawMenu;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport { withStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Radio from '@material-ui/core/Radio';\nimport CheckIcon from '@material-ui/icons/Check';\n\n// this is for offset from toolbar and default class\nconst styles = theme => ({\n\tradio: {\n\t\tpadding: 0,\n\t},\n\tradioIcon: {\n\t\twidth: 48,\n\t\theight: 48,\n\t},\n\tradioIconSelected: {\n\t\twidth: 48,\n\t\theight: 48,\n\t\tborder: '1px solid white',\n\t\tcolor: theme.palette.common.white,\n\t\tdisplay: 'flex',\n\t\tjustifyContent: 'center',\n\t\talignItems: 'center',\n\t}\n})\n\nclass PaletteDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\topen: false\n\t\t}\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t\tthis.colorChange = this.colorChange.bind(this);\n\t}\n\n\tShow() {\n\t\tthis.setState({\n\t\t\topen: true\n\t\t});\n\t}\n\n\thandleClose() {\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\tcolorChange(e) {\n\t\tthis.props.drawMode.color = parseInt(e.target.value);\n\t\tthis.handleClose();\n\t}\n\n\tradioIcon(isChecked, color) {\n\t\tif (!isChecked) {\n\t\t\treturn (\n\t\t\t\t<div className={this.props.classes.radioIcon} style={{ backgroundColor: color }} />\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div className={this.props.classes.radioIconSelected} style={{ backgroundColor: color }}>\n\t\t\t\t<CheckIcon style={{ fontSize: 30 }} />\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderRadios() {\n\t\tconst dm = this.props.drawMode;\n\t\treturn dm.colorOptions.map((col, index) => {\n\t\t\tconst ico = this.radioIcon(false, col);\n\t\t\tconst icoChk = this.radioIcon(true, col);\n\t\t\treturn (\n\t\t\t\t<Radio name=\"color-select\" key={index} value={index} className={this.props.classes.radio} checked={index === dm.color} icon={ico} checkedIcon={icoChk} onChange={this.colorChange} />\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitle id=\"responsive-dialog-title\">Color palette</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t{this.renderRadios()}\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nPaletteDialog.defaultProps = {\n\tdrawMode: null\n}\n\nPaletteDialog.propTypes = {\n\tclasses: PropTypes.object.isRequired,\n\tdrawMode: PropTypes.instanceOf(DrawMode)\n};\n\nexport default withStyles(styles, { withTheme: true })(PaletteDialog);","import React, { Component } from 'react';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\n\n// TODO: Fix fullscreen exit on esc key\nclass FullscreenToggle extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tfullScreen: false\n\t\t}\n\n\t\tthis.toggleFullScreen = this.toggleFullScreen.bind(this);\n\t}\n\n\tdomFullScreenToggle(toFullScreen) {\n\t\tif (toFullScreen) {\n\t\t\tvar elem = document.documentElement;\n\t\t\tif (elem.requestFullscreen) {\n\t\t\t\telem.requestFullscreen();\n\t\t\t\t} else if (elem.mozRequestFullScreen) { /* Firefox */\n\t\t\t\telem.mozRequestFullScreen();\n\t\t\t\t} else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */\n\t\t\t\telem.webkitRequestFullscreen();\n\t\t\t\t} else if (elem.msRequestFullscreen) { /* IE/Edge */\n\t\t\t\telem.msRequestFullscreen();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.exitFullscreen) {\n\t\t\tdocument.exitFullscreen();\n\t\t} else if (document.mozCancelFullScreen) {\n\t\t\tdocument.mozCancelFullScreen();\n\t\t} else if (document.webkitExitFullscreen) {\n\t\t\tdocument.webkitExitFullscreen();\n\t\t} else if (document.msExitFullscreen) {\n\t\t\tdocument.msExitFullscreen();\n\t\t}\n\t}\n\n\ttoggleFullScreen() {\n\t\tconst isFullScreen = !this.state.fullScreen;\n\t\t// dom toogle\n\t\tthis.domFullScreenToggle(isFullScreen);\n\t\t// change state to update buttons\n\t\tthis.setState({\n\t\t\tfullScreen:isFullScreen\n\t\t});\n\t}\n\n\tfsIconGet(){\n\t\tif (this.state.fullScreen) {\n\t\t\treturn(<FullscreenExitIcon />);\n\t\t} else {\n\t\t\treturn(<FullscreenIcon />);\n\t\t};\n\t}\n\n\trender() {\n\t\tconst fsIcon = this.fsIconGet();\n\t\tconst fsLabel = this.state.fullScreen ? \"Exit full screen\" : \"Enter full screen\";\n\n\t\treturn (\n\t\t\t<Tooltip title={fsLabel}>\n\t\t\t\t<IconButton aria-label={fsLabel} color=\"inherit\" onClick={this.toggleFullScreen}>\n\t\t\t\t\t{fsIcon}\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t);\n\t}\n}\n\nexport default FullscreenToggle;","import React, { Component } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport StopIcon from '@material-ui/icons/Stop';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport LoopIcon from '@material-ui/icons/Loop';\nimport AddIcon from '@material-ui/icons/Add';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nclass AnimControls extends Component {\n\n    render(){\n    \n        return (\n            <div >\n                <div  style={{float:\"left\"}}>\n\n                <Tooltip title=\"Previous Frame\">\n                  <IconButton edge=\"end\" color=\"inherit\" aria-label=\"Previous Frame\" onClick={this.props.pitch.animKeyFramePrevious.bind(this.props.pitch)} >\n                    <ArrowBackIcon/>\n                </IconButton>\n                </Tooltip>\n\n                \n                <Tooltip title=\"Current Frame\">\n                <IconButton color=\"inherit\" aria-label=\"Current Frame\">\n                    {this.props.pitch.AnimKeyFrameCurrent}\n                </IconButton>\n                </Tooltip>\n                \n                <Tooltip title=\"Next Frame\">\n                <IconButton edge=\"start\" color=\"inherit\" aria-label=\"Next Frame\" onClick={this.props.pitch.animKeyFrameNext.bind(this.props.pitch)} >\n                    <ArrowForwardIcon />\n                </IconButton>\n                </Tooltip>\n\n                <Tooltip title=\"Add Frame\">\n                <IconButton color=\"inherit\" aria-label=\"Add Frame\" onClick={this.props.pitch.animKeyFrameAdd.bind(this.props.pitch)} >\n                    <AddIcon  fontSize=\"large\"></AddIcon>\n                </IconButton>\n                </Tooltip>\n\n                </div>\n                \n                <div style={{float:'right'}}>\n\n                <Tooltip title=\"Play Animation\">\n                <IconButton aria-label=\"Play Animation\" color=\"inherit\">\n                    <PlayArrowIcon fontSize=\"large\" />\n                </IconButton>\n                </Tooltip>\n\n                <Tooltip title=\"Pause Animation\">\n                <IconButton aria-label=\"Pause Animation\" color=\"inherit\" >\n                    <PauseIcon fontSize=\"large\"/>\n                </IconButton>\n                </Tooltip>\n                \n                <Tooltip title=\"Stop Animation\">\n                <IconButton aria-label=\"Stop Animation\" color=\"inherit\" >\n                    <StopIcon fontSize=\"large\"/>\n                </IconButton>\n                </Tooltip>\n                \n                <Tooltip title=\"Loop Animation\">\n                <IconButton  aria-label=\"Loop Animation\" color=\"inherit\" >\n                    <LoopIcon fontSize=\"large\"/>\n                </IconButton>\n                </Tooltip>\n\n                </div>\n            </div>\n        );\n    }\n    \n}\n\nexport default AnimControls;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DrawMode from '../pitch/DrawMode';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport Box from '@material-ui/core/Box';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport MovieCreationIcon from '@material-ui/icons/MovieCreation';\nimport LinkIcon from '@material-ui/icons/Link';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\nimport { CursorDefault, VectorLine, ShapeSquarePlus, ShapeOvalPlus } from 'mdi-material-ui';\nimport DrawMenu from './DrawMenu';\nimport PaletteDialog from './PaletteDialog';\nimport FullscreenToggle from './FullscreenToggle';\nimport AnimControls from './AnimControls';\n\n// this is for custom position classes\nconst styles = theme => ({\n\tgrow: {\n\t\tflexGrow: 1,\n\t},\n});\n\nclass AppTools extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdrawerOpen: false\n\t\t}\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\n\n\t\t// Drawing menu\n\t\tthis._refDrawMenu = React.createRef();\n\t\tthis._refOpenDrawMenu = React.createRef();\n\t\tthis._refAnimControl = React.createRef();\n\t\tthis.drawingModeIcon = this.drawingModeIcon.bind(this);\n\t\tthis.drawMenuAnchorEl = this.drawMenuAnchorEl.bind(this);\n\t\tthis.drawMenuOpen = this.drawMenuOpen.bind(this);\n\t\tthis.createNewScheme = this.createNewScheme.bind(this);\n\t\tthis.createNewAnimation = this.createNewAnimation.bind(this);\n\n\t\t// palette dialog\n\t\tthis._refPaletteDialog = React.createRef();\n\t\tthis.paletteDialogRef = this.paletteDialogRef.bind(this);\n\t}\n\n\tsetDrawer(isOpen) {\n\t\tthis.setState({\n\t\t\tdrawerOpen:isOpen\n\t\t});\n\t}\n\n\ttoggleDrawer(e) {\n\t\tif (e.type === 'keydown' && (e.key === 'Tab' || e.key === 'Shift')) {\n\t\t\treturn;\n\t\t}\n\t\tthis.setDrawer(!this.state.drawerOpen);\n\t}\n\n\tcreateNewScheme() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.createNewScheme();\n\t}\n\n\tcreateNewAnimation() {\n\t\tthis.setDrawer(false);\n\t\tthis.props.createNewAnimation();\n\t}\n\n\tdrawMenuAnchorEl() {\n\t\treturn this._refOpenDrawMenu.current;\n\t}\n\n\tdrawMenuOpen() {\n\t\tthis._refDrawMenu.current.open();\n\t}\n\n\tdrawingModeIcon() {\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\treturn (<VectorLine />);\n\t\t\tcase 'square':\n\t\t\t\treturn (<ShapeSquarePlus />);\n\t\t\tcase 'ellipse':\n\t\t\t\treturn (<ShapeOvalPlus />);\n\t\t\tcase 'text':\n\t\t\t\treturn (<TextFieldsIcon />);\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\treturn (<CursorDefault />);\n\t\t}\n\t}\n\n\tpaletteDialogRef() {\n\t\treturn this._refPaletteDialog.current;\n\t}\n\n\tanimControlAnchorEl() {\n\t\treturn this._refAnimControl.current;\n\t}\n\n\trender() {\n\t\tconst drawingModeIcon = this.drawingModeIcon();\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<AppBar position=\"fixed\">\n\t\t\t\t\t<Toolbar variant=\"regular\">\n\t\t\t\t\t\t<IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={this.toggleDrawer}>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">Futsal tactics board</Typography>\n\t\t\t\t\t\t<div className={this.props.classes.grow} />\n\t\t\t\t\t\t<AnimControls pitch={this.props.pitch} ref={this._refAnimControl} anchorEl={this.animControlAnchorEl}/>\n\t\t\t\t\t\t<div className={this.props.classes.grow} />\n\t\t\t\t\t\t<Tooltip title=\"Selected draw mode\">\n\t\t\t\t\t\t\t<IconButton ref={this._refOpenDrawMenu} aria-label=\"Selected draw mode\" color=\"inherit\" onClick={this.drawMenuOpen}>\n\t\t\t\t\t\t\t\t{drawingModeIcon}\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Save picture\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Save picture\" color=\"inherit\" onClick={this.props.saveImage}>\n\t\t\t\t\t\t\t\t<GetAppIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Share link\">\n\t\t\t\t\t\t\t<IconButton aria-label=\"Share link\" color=\"inherit\">\n\t\t\t\t\t\t\t\t<LinkIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<FullscreenToggle />\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</AppBar>\n\t\t\t\t<Drawer anchor=\"left\" open={this.state.drawerOpen} onClose={this.toggleDrawer}>\n\t\t\t\t\t<Box p={2}>\n\t\t\t\t\t\t<Typography variant=\"h4\" component=\"h2\">Tactics board</Typography>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<List component=\"nav\" aria-label=\"main mailbox folders\">\n\t\t\t\t\t\t\t<ListItem button onClick={this.createNewScheme}>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<OpenInNewIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Create new scheme\" />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem button onClick={this.createNewAnimation}>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<MovieCreationIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary=\"Create new animation\" />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Box>\n\t\t\t\t</Drawer>\n\t\t\t\t\n\t\t\t\t<DrawMenu ref={this._refDrawMenu} anchorEl={this.drawMenuAnchorEl} drawMode={this.props.drawMode} paletteDialogRef={this.paletteDialogRef} />\n\t\t\t\t<PaletteDialog ref={this._refPaletteDialog} drawMode={this.props.drawMode} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nAppTools.defaultProps = {\n\tdrawMode: null,\n\tsaveImage: null,\n\tcreateNewScheme: null,\n\tcreateNewAnimation: null\n}\n\nAppTools.propTypes = {\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\tsaveImage: PropTypes.func,\n\tcreateNewScheme: PropTypes.func,\n\tcreateNewAnimation: PropTypes.func\n}\n\nexport default withStyles(styles, { withTheme: true })(AppTools);","import React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nclass ConfirmDialog extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.okCallback = null;\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t\ttitle: \"\",\n\t\t\ttext: \"\"\n\t\t}\n\t\tthis.Show = this.Show.bind(this);\n\t\tthis.handleOk = this.handleOk.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n\t}\n\n\tShow(title, text, fnCallback) {\n\t\tthis.okCallback = fnCallback;\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t\ttitle: title,\n\t\t\ttext: text\n\t\t});\n\t}\n\t\n\thandleClose() {\n\t\tthis.okCallback = null;\n\t\tthis.setState({\n\t\t\topen: false\n\t\t});\n\t}\n\n\thandleOk() {\n\t\tif (null !== this.okCallback) {\n\t\t\tthis.okCallback();\n\t\t}\n\t\tthis.handleClose();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"responsive-dialog-title\">\n\t\t\t\t<DialogTitle id=\"responsive-dialog-title\">{this.state.title}</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText>{this.state.text}</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={this.handleClose} variant=\"contained\" color=\"primary\" autoFocus>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.handleOk} variant=\"contained\" color=\"secondary\">Ok</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t);\n\t}\n}\n\nexport default ConfirmDialog;","import React, { Component } from 'react';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport PitchEdit from './editors/PitchEdit'\nimport SvgToImg from './editors/SvgToImg'\nimport AppTools from './ui/AppTools'\nimport ConfirmDialog from './ui/ConfirmDialog'\nimport PitchFutsal from './pitch/PitchFutsal'\nimport DrawMode from './pitch/DrawMode'\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport './App.css';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// application Material-UI theme\n\t\tthis.appTheme = createMuiTheme();\n\t\t// references\n\t\tthis.refAppTools = React.createRef();\n\t\tthis.refPitchEdit = React.createRef();\n\t\tthis.refSvgToImg = React.createRef();\n\t\tthis.refConfirmDialog = React.createRef();\n\t\t// event handlers\n\t\tthis.SaveImage = this.SaveImage.bind(this);\n\t\tthis.CreateNewScheme = this.CreateNewScheme.bind(this);\n\t\tthis.CreateNewAnimation = this.CreateNewAnimation.bind(this);\n\t\tthis.PitchReset = this.PitchReset.bind(this);\n\t\tthis.OnPitchModified = this.OnPitchModified.bind(this);\n\t\tthis.OnDrawModeModified = this.OnDrawModeModified.bind(this);\n\t\tthis.OnCloseSnackbar=this.OnCloseSnackbar.bind(this);\n\t\tthis.OnOpenSnackbar=this.OnOpenSnackbar.bind(this);\n\n\t\t// init default state\n\t\tthis.pitch = this.DefaultPitch();\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.drawMode = new DrawMode();\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.state = {\n\t\t\tpitch: this.pitch,\n\t\t\tdrawMode: this.drawMode,\n\t\t\tsnackBarShow:false,\n\t\t\tsnackBarMsg:\"\",\n\t\t}\n\t}\n\t\n\tDefaultPitch() {\n\t\tlet pitch = new PitchFutsal();\n\t\tpitch.initDefault(\n\t\t\t200, 8, 120, \n\t\t\t100, 5, 80\n\t\t);\n\t\treturn pitch;\n\t}\n\n\tPitchReset() {\n\t\tconsole.log(\"Pitch reset\");\n\t\tthis.pitch.onModified = null;\n\t\tthis.pitch = this.DefaultPitch();\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.drawMode.onModified = null;\n\t\tthis.drawMode = new DrawMode();\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.setState({\n\t\t\tpitch: this.pitch,\n\t\t\tdrawMode: this.drawMode\n\t\t});\n\t}\n\n\tOnPitchModified(newPitch) {\n\t\tthis.pitch.onModified = null;\n\t\tthis.pitch = newPitch;\n\t\tthis.pitch.onModified = this.OnPitchModified;\n\t\tthis.setState({\n\t\t\tpitch: this.pitch\n\t\t});\n\t}\n\n\tOnDrawModeModified(newDrawMode) {\n\t\tthis.drawMode.onModified = null;\n\t\tthis.drawMode = newDrawMode;\n\t\tthis.drawMode.onModified = this.OnDrawModeModified;\n\t\tthis.setState({\n\t\t\tdrawMode: this.drawMode\n\t\t});\n\t\t// update pitch overlay\n\t\t// TODO: reconsider this\n\t\tthis.pitch.overlay = this.drawMode.pitchOverlay;\n\t}\n\n\tCreateNewScheme() {\n\t\tif (!this.state.pitch.isModified) {\n\t\t\treturn;\n\t\t}\n\t\tthis.refConfirmDialog.current.Show(\n\t\t\t\"Create new scheme\", \"Pitch is modified, are you sure you want to discard changes?\",\n\t\t\tthis.PitchReset\n\t\t);\n\t}\n\n\tCreateNewAnimation() {\n\t\tthis.refConfirmDialog.current.Show(\n\t\t\t\"Create new animation\", \"Are you sure you want to create new animation?\",\n\t\t\tnull\n\t\t);\n\t}\n\n\tSaveImage() {\n\t\tconsole.log(\"App save image\");\n\t\tlet svg = this.refPitchEdit.current.getSVG();\n\t\tthis.refSvgToImg.current.toImg(\n\t\t\tsvg.svgText, \n\t\t\tsvg.width, svg.height, \n\t\t\tsvg.width/2, svg.height/2\n\t\t);\n\t}\n\tOnCloseSnackbar(){\n\t\tthis.setState({\n\t\t\tsnackBarShow:false\n\t\t})\n\t}\n\tOnOpenSnackbar(message){\n\t\tthis.setState({\n\t\t\tsnackBarShow:true,\n\t\t\tsnackBarMsg:message\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ThemeProvider theme={this.appTheme}>\n\t\t\t\t\t<Snackbar open={this.state.snackBarShow} anchorOrigin={{ vertical: 'top',horizontal: 'center',}} message={this.state.snackBarMsg} autoHideDuration={1000} onClose={this.OnCloseSnackbar}\n\t\t\t\t\t\t\taction={\n\t\t\t\t\t\t\t<IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={this.OnCloseSnackbar}>\n\t\t\t\t\t\t\t\t<CloseIcon fontSize=\"small\" />\n\t\t\t\t\t\t \t</IconButton>}>\n\t\t\t\t\t</Snackbar>\n\t\t\t\t\t<AppTools pitch={this.state.pitch} ref={this.refAppTools} drawMode={this.state.drawMode} saveImage={this.SaveImage} createNewScheme={this.CreateNewScheme} createNewAnimation={this.CreateNewAnimation} \n\t\t\t\t\t\t\t   openSnackbar={this.OnOpenSnackbar}/>\n\t\t\t\t\t<PitchEdit ref={this.refPitchEdit} pitch={this.state.pitch} drawMode={this.state.drawMode} viewBoxLeft={0} viewBoxTop={0} viewBoxRight={4500} viewBoxBottom={2500} />\n\t\t\t\t\t<ConfirmDialog ref={this.refConfirmDialog} />\n\t\t\t\t\t<SvgToImg ref={this.refSvgToImg} />\n\t\t\t\t</ThemeProvider>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\t\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t.register(swUrl)\n\t.then(registration => {\n\t\tregistration.onupdatefound = () => {\n\t\t\tconst installingWorker = registration.installing;\n\t\t\tif (installingWorker == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t})\n\t.catch(error => {\n\t\tconsole.error('Error during service worker registration:', error);\n\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { 'Service-Worker': 'script' },\n\t})\n\t.then(response => {\n\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\tconst contentType = response.headers.get('content-type');\n\t\tif (\n\t\t\tresponse.status === 404 ||\n\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t) {\n\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\t// Service worker found. Proceed as normal.\n\t\t\tregisterValidSW(swUrl, config);\n\t\t}\n\t})\n\t.catch(() => {\n\t\tconsole.log('No internet connection found. App is running in offline mode.');\n\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t.then(registration => {\n\t\t\tregistration.unregister();\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error(error.message);\n\t\t});\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport './index.css';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t{/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n\t\t<CssBaseline />\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { Component } from 'react';\nimport FileSaver from 'browser-filesaver';\n\nclass SvgToImg extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._refRenderer = React.createRef();\n\t}\n\t\n\t// create image from svg text\n\ttoImg(svgText, orgWidth, orgHeight, imgWidth, imgHeight) {\n\t\t// Create Canvas\n\t\tlet canvas = document.createElement('canvas');\n\t\tcanvas.width = imgWidth;\n\t\tcanvas.height = imgHeight;\n\t\tlet ctx = canvas.getContext(\"2d\");\n\n\t\t// show canvas\n\t\t//this._refRenderer.current.appendChild(canvas);\n\n\t\t// Create image\n\t\tlet img = document.createElement('img');\n\t\t// when loaded draw and save\n\t\timg.addEventListener('load', e=> {\n\t\t\t// draw image\n\t\t\tctx.drawImage(img,\n\t\t\t\t0, 0, orgWidth, orgHeight,\n\t\t\t\t//0, 0, imgWidth, imgHeight\n\t\t\t\t0, 0, orgWidth, orgHeight\n\t\t\t);\n\t\t\t// save image\n\t\t\tcanvas.toBlob(function(blob) {\n\t\t\t\tFileSaver.saveAs(blob, \"tactics-board.png\");\n\t\t\t});\n\t\t\t// clear everything\n\t\t\tthis._refRenderer.current.innerHTML = '';\n\t\t});\n\n\t\t// prepare svg to load image\n\t\tconst encodedString = 'data:image/svg+xml;base64,' + new Buffer(svgText).toString('base64');\n\t\timg.src = encodedString;\t// start loading image\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div ref={this._refRenderer} style={{display:\"none\"}}></div>\n\t\t);\n\t}\n}\n\nexport default SvgToImg;"],"sourceRoot":""}